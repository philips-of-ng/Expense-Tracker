(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function t(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=t(i);fetch(i.href,o)}})();function f1(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var bp={exports:{}},Hl={},Ip={exports:{}},De={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tv;function p1(){if(Tv)return De;Tv=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),v=Symbol.iterator;function w(U){return U===null||typeof U!="object"?null:(U=v&&U[v]||U["@@iterator"],typeof U=="function"?U:null)}var T={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},R=Object.assign,P={};function A(U,X,be){this.props=U,this.context=X,this.refs=P,this.updater=be||T}A.prototype.isReactComponent={},A.prototype.setState=function(U,X){if(typeof U!="object"&&typeof U!="function"&&U!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,U,X,"setState")},A.prototype.forceUpdate=function(U){this.updater.enqueueForceUpdate(this,U,"forceUpdate")};function F(){}F.prototype=A.prototype;function z(U,X,be){this.props=U,this.context=X,this.refs=P,this.updater=be||T}var H=z.prototype=new F;H.constructor=z,R(H,A.prototype),H.isPureReactComponent=!0;var K=Array.isArray,Q=Object.prototype.hasOwnProperty,Y={current:null},D={key:!0,ref:!0,__self:!0,__source:!0};function b(U,X,be){var ve,Ne={},Re=null,We=null;if(X!=null)for(ve in X.ref!==void 0&&(We=X.ref),X.key!==void 0&&(Re=""+X.key),X)Q.call(X,ve)&&!D.hasOwnProperty(ve)&&(Ne[ve]=X[ve]);var je=arguments.length-2;if(je===1)Ne.children=be;else if(1<je){for(var Qe=Array(je),nn=0;nn<je;nn++)Qe[nn]=arguments[nn+2];Ne.children=Qe}if(U&&U.defaultProps)for(ve in je=U.defaultProps,je)Ne[ve]===void 0&&(Ne[ve]=je[ve]);return{$$typeof:n,type:U,key:Re,ref:We,props:Ne,_owner:Y.current}}function N(U,X){return{$$typeof:n,type:U.type,key:X,ref:U.ref,props:U.props,_owner:U._owner}}function L(U){return typeof U=="object"&&U!==null&&U.$$typeof===n}function k(U){var X={"=":"=0",":":"=2"};return"$"+U.replace(/[=:]/g,function(be){return X[be]})}var O=/\/+/g;function C(U,X){return typeof U=="object"&&U!==null&&U.key!=null?k(""+U.key):X.toString(36)}function ge(U,X,be,ve,Ne){var Re=typeof U;(Re==="undefined"||Re==="boolean")&&(U=null);var We=!1;if(U===null)We=!0;else switch(Re){case"string":case"number":We=!0;break;case"object":switch(U.$$typeof){case n:case e:We=!0}}if(We)return We=U,Ne=Ne(We),U=ve===""?"."+C(We,0):ve,K(Ne)?(be="",U!=null&&(be=U.replace(O,"$&/")+"/"),ge(Ne,X,be,"",function(nn){return nn})):Ne!=null&&(L(Ne)&&(Ne=N(Ne,be+(!Ne.key||We&&We.key===Ne.key?"":(""+Ne.key).replace(O,"$&/")+"/")+U)),X.push(Ne)),1;if(We=0,ve=ve===""?".":ve+":",K(U))for(var je=0;je<U.length;je++){Re=U[je];var Qe=ve+C(Re,je);We+=ge(Re,X,be,Qe,Ne)}else if(Qe=w(U),typeof Qe=="function")for(U=Qe.call(U),je=0;!(Re=U.next()).done;)Re=Re.value,Qe=ve+C(Re,je++),We+=ge(Re,X,be,Qe,Ne);else if(Re==="object")throw X=String(U),Error("Objects are not valid as a React child (found: "+(X==="[object Object]"?"object with keys {"+Object.keys(U).join(", ")+"}":X)+"). If you meant to render a collection of children, use an array instead.");return We}function we(U,X,be){if(U==null)return U;var ve=[],Ne=0;return ge(U,ve,"","",function(Re){return X.call(be,Re,Ne++)}),ve}function Ae(U){if(U._status===-1){var X=U._result;X=X(),X.then(function(be){(U._status===0||U._status===-1)&&(U._status=1,U._result=be)},function(be){(U._status===0||U._status===-1)&&(U._status=2,U._result=be)}),U._status===-1&&(U._status=0,U._result=X)}if(U._status===1)return U._result.default;throw U._result}var Se={current:null},re={transition:null},ae={ReactCurrentDispatcher:Se,ReactCurrentBatchConfig:re,ReactCurrentOwner:Y};function oe(){throw Error("act(...) is not supported in production builds of React.")}return De.Children={map:we,forEach:function(U,X,be){we(U,function(){X.apply(this,arguments)},be)},count:function(U){var X=0;return we(U,function(){X++}),X},toArray:function(U){return we(U,function(X){return X})||[]},only:function(U){if(!L(U))throw Error("React.Children.only expected to receive a single React element child.");return U}},De.Component=A,De.Fragment=t,De.Profiler=i,De.PureComponent=z,De.StrictMode=r,De.Suspense=h,De.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ae,De.act=oe,De.cloneElement=function(U,X,be){if(U==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+U+".");var ve=R({},U.props),Ne=U.key,Re=U.ref,We=U._owner;if(X!=null){if(X.ref!==void 0&&(Re=X.ref,We=Y.current),X.key!==void 0&&(Ne=""+X.key),U.type&&U.type.defaultProps)var je=U.type.defaultProps;for(Qe in X)Q.call(X,Qe)&&!D.hasOwnProperty(Qe)&&(ve[Qe]=X[Qe]===void 0&&je!==void 0?je[Qe]:X[Qe])}var Qe=arguments.length-2;if(Qe===1)ve.children=be;else if(1<Qe){je=Array(Qe);for(var nn=0;nn<Qe;nn++)je[nn]=arguments[nn+2];ve.children=je}return{$$typeof:n,type:U.type,key:Ne,ref:Re,props:ve,_owner:We}},De.createContext=function(U){return U={$$typeof:l,_currentValue:U,_currentValue2:U,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},U.Provider={$$typeof:o,_context:U},U.Consumer=U},De.createElement=b,De.createFactory=function(U){var X=b.bind(null,U);return X.type=U,X},De.createRef=function(){return{current:null}},De.forwardRef=function(U){return{$$typeof:c,render:U}},De.isValidElement=L,De.lazy=function(U){return{$$typeof:g,_payload:{_status:-1,_result:U},_init:Ae}},De.memo=function(U,X){return{$$typeof:p,type:U,compare:X===void 0?null:X}},De.startTransition=function(U){var X=re.transition;re.transition={};try{U()}finally{re.transition=X}},De.unstable_act=oe,De.useCallback=function(U,X){return Se.current.useCallback(U,X)},De.useContext=function(U){return Se.current.useContext(U)},De.useDebugValue=function(){},De.useDeferredValue=function(U){return Se.current.useDeferredValue(U)},De.useEffect=function(U,X){return Se.current.useEffect(U,X)},De.useId=function(){return Se.current.useId()},De.useImperativeHandle=function(U,X,be){return Se.current.useImperativeHandle(U,X,be)},De.useInsertionEffect=function(U,X){return Se.current.useInsertionEffect(U,X)},De.useLayoutEffect=function(U,X){return Se.current.useLayoutEffect(U,X)},De.useMemo=function(U,X){return Se.current.useMemo(U,X)},De.useReducer=function(U,X,be){return Se.current.useReducer(U,X,be)},De.useRef=function(U){return Se.current.useRef(U)},De.useState=function(U){return Se.current.useState(U)},De.useSyncExternalStore=function(U,X,be){return Se.current.useSyncExternalStore(U,X,be)},De.useTransition=function(){return Se.current.useTransition()},De.version="18.3.1",De}var bv;function kd(){return bv||(bv=1,Ip.exports=p1()),Ip.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Iv;function g1(){if(Iv)return Hl;Iv=1;var n=kd(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function l(c,h,p){var g,v={},w=null,T=null;p!==void 0&&(w=""+p),h.key!==void 0&&(w=""+h.key),h.ref!==void 0&&(T=h.ref);for(g in h)r.call(h,g)&&!o.hasOwnProperty(g)&&(v[g]=h[g]);if(c&&c.defaultProps)for(g in h=c.defaultProps,h)v[g]===void 0&&(v[g]=h[g]);return{$$typeof:e,type:c,key:w,ref:T,props:v,_owner:i.current}}return Hl.Fragment=t,Hl.jsx=l,Hl.jsxs=l,Hl}var Sv;function m1(){return Sv||(Sv=1,bp.exports=g1()),bp.exports}var I=m1(),Ee=kd();const KE=f1(Ee);var lh={},Sp={exports:{}},fn={},kp={exports:{}},Ap={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kv;function y1(){return kv||(kv=1,(function(n){function e(re,ae){var oe=re.length;re.push(ae);e:for(;0<oe;){var U=oe-1>>>1,X=re[U];if(0<i(X,ae))re[U]=ae,re[oe]=X,oe=U;else break e}}function t(re){return re.length===0?null:re[0]}function r(re){if(re.length===0)return null;var ae=re[0],oe=re.pop();if(oe!==ae){re[0]=oe;e:for(var U=0,X=re.length,be=X>>>1;U<be;){var ve=2*(U+1)-1,Ne=re[ve],Re=ve+1,We=re[Re];if(0>i(Ne,oe))Re<X&&0>i(We,Ne)?(re[U]=We,re[Re]=oe,U=Re):(re[U]=Ne,re[ve]=oe,U=ve);else if(Re<X&&0>i(We,oe))re[U]=We,re[Re]=oe,U=Re;else break e}}return ae}function i(re,ae){var oe=re.sortIndex-ae.sortIndex;return oe!==0?oe:re.id-ae.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var l=Date,c=l.now();n.unstable_now=function(){return l.now()-c}}var h=[],p=[],g=1,v=null,w=3,T=!1,R=!1,P=!1,A=typeof setTimeout=="function"?setTimeout:null,F=typeof clearTimeout=="function"?clearTimeout:null,z=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function H(re){for(var ae=t(p);ae!==null;){if(ae.callback===null)r(p);else if(ae.startTime<=re)r(p),ae.sortIndex=ae.expirationTime,e(h,ae);else break;ae=t(p)}}function K(re){if(P=!1,H(re),!R)if(t(h)!==null)R=!0,Ae(Q);else{var ae=t(p);ae!==null&&Se(K,ae.startTime-re)}}function Q(re,ae){R=!1,P&&(P=!1,F(b),b=-1),T=!0;var oe=w;try{for(H(ae),v=t(h);v!==null&&(!(v.expirationTime>ae)||re&&!k());){var U=v.callback;if(typeof U=="function"){v.callback=null,w=v.priorityLevel;var X=U(v.expirationTime<=ae);ae=n.unstable_now(),typeof X=="function"?v.callback=X:v===t(h)&&r(h),H(ae)}else r(h);v=t(h)}if(v!==null)var be=!0;else{var ve=t(p);ve!==null&&Se(K,ve.startTime-ae),be=!1}return be}finally{v=null,w=oe,T=!1}}var Y=!1,D=null,b=-1,N=5,L=-1;function k(){return!(n.unstable_now()-L<N)}function O(){if(D!==null){var re=n.unstable_now();L=re;var ae=!0;try{ae=D(!0,re)}finally{ae?C():(Y=!1,D=null)}}else Y=!1}var C;if(typeof z=="function")C=function(){z(O)};else if(typeof MessageChannel<"u"){var ge=new MessageChannel,we=ge.port2;ge.port1.onmessage=O,C=function(){we.postMessage(null)}}else C=function(){A(O,0)};function Ae(re){D=re,Y||(Y=!0,C())}function Se(re,ae){b=A(function(){re(n.unstable_now())},ae)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(re){re.callback=null},n.unstable_continueExecution=function(){R||T||(R=!0,Ae(Q))},n.unstable_forceFrameRate=function(re){0>re||125<re?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<re?Math.floor(1e3/re):5},n.unstable_getCurrentPriorityLevel=function(){return w},n.unstable_getFirstCallbackNode=function(){return t(h)},n.unstable_next=function(re){switch(w){case 1:case 2:case 3:var ae=3;break;default:ae=w}var oe=w;w=ae;try{return re()}finally{w=oe}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(re,ae){switch(re){case 1:case 2:case 3:case 4:case 5:break;default:re=3}var oe=w;w=re;try{return ae()}finally{w=oe}},n.unstable_scheduleCallback=function(re,ae,oe){var U=n.unstable_now();switch(typeof oe=="object"&&oe!==null?(oe=oe.delay,oe=typeof oe=="number"&&0<oe?U+oe:U):oe=U,re){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=oe+X,re={id:g++,callback:ae,priorityLevel:re,startTime:oe,expirationTime:X,sortIndex:-1},oe>U?(re.sortIndex=oe,e(p,re),t(h)===null&&re===t(p)&&(P?(F(b),b=-1):P=!0,Se(K,oe-U))):(re.sortIndex=X,e(h,re),R||T||(R=!0,Ae(Q))),re},n.unstable_shouldYield=k,n.unstable_wrapCallback=function(re){var ae=w;return function(){var oe=w;w=ae;try{return re.apply(this,arguments)}finally{w=oe}}}})(Ap)),Ap}var Av;function _1(){return Av||(Av=1,kp.exports=y1()),kp.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rv;function v1(){if(Rv)return fn;Rv=1;var n=kd(),e=_1();function t(s){for(var a="https://reactjs.org/docs/error-decoder.html?invariant="+s,u=1;u<arguments.length;u++)a+="&args[]="+encodeURIComponent(arguments[u]);return"Minified React error #"+s+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function o(s,a){l(s,a),l(s+"Capture",a)}function l(s,a){for(i[s]=a,s=0;s<a.length;s++)r.add(a[s])}var c=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),h=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,g={},v={};function w(s){return h.call(v,s)?!0:h.call(g,s)?!1:p.test(s)?v[s]=!0:(g[s]=!0,!1)}function T(s,a,u,f){if(u!==null&&u.type===0)return!1;switch(typeof a){case"function":case"symbol":return!0;case"boolean":return f?!1:u!==null?!u.acceptsBooleans:(s=s.toLowerCase().slice(0,5),s!=="data-"&&s!=="aria-");default:return!1}}function R(s,a,u,f){if(a===null||typeof a>"u"||T(s,a,u,f))return!0;if(f)return!1;if(u!==null)switch(u.type){case 3:return!a;case 4:return a===!1;case 5:return isNaN(a);case 6:return isNaN(a)||1>a}return!1}function P(s,a,u,f,m,y,x){this.acceptsBooleans=a===2||a===3||a===4,this.attributeName=f,this.attributeNamespace=m,this.mustUseProperty=u,this.propertyName=s,this.type=a,this.sanitizeURL=y,this.removeEmptyString=x}var A={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(s){A[s]=new P(s,0,!1,s,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(s){var a=s[0];A[a]=new P(a,1,!1,s[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(s){A[s]=new P(s,2,!1,s.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(s){A[s]=new P(s,2,!1,s,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(s){A[s]=new P(s,3,!1,s.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(s){A[s]=new P(s,3,!0,s,null,!1,!1)}),["capture","download"].forEach(function(s){A[s]=new P(s,4,!1,s,null,!1,!1)}),["cols","rows","size","span"].forEach(function(s){A[s]=new P(s,6,!1,s,null,!1,!1)}),["rowSpan","start"].forEach(function(s){A[s]=new P(s,5,!1,s.toLowerCase(),null,!1,!1)});var F=/[\-:]([a-z])/g;function z(s){return s[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(s){var a=s.replace(F,z);A[a]=new P(a,1,!1,s,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(s){var a=s.replace(F,z);A[a]=new P(a,1,!1,s,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(s){var a=s.replace(F,z);A[a]=new P(a,1,!1,s,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(s){A[s]=new P(s,1,!1,s.toLowerCase(),null,!1,!1)}),A.xlinkHref=new P("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(s){A[s]=new P(s,1,!1,s.toLowerCase(),null,!0,!0)});function H(s,a,u,f){var m=A.hasOwnProperty(a)?A[a]:null;(m!==null?m.type!==0:f||!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(R(a,u,m,f)&&(u=null),f||m===null?w(a)&&(u===null?s.removeAttribute(a):s.setAttribute(a,""+u)):m.mustUseProperty?s[m.propertyName]=u===null?m.type===3?!1:"":u:(a=m.attributeName,f=m.attributeNamespace,u===null?s.removeAttribute(a):(m=m.type,u=m===3||m===4&&u===!0?"":""+u,f?s.setAttributeNS(f,a,u):s.setAttribute(a,u))))}var K=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Q=Symbol.for("react.element"),Y=Symbol.for("react.portal"),D=Symbol.for("react.fragment"),b=Symbol.for("react.strict_mode"),N=Symbol.for("react.profiler"),L=Symbol.for("react.provider"),k=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),ge=Symbol.for("react.suspense_list"),we=Symbol.for("react.memo"),Ae=Symbol.for("react.lazy"),Se=Symbol.for("react.offscreen"),re=Symbol.iterator;function ae(s){return s===null||typeof s!="object"?null:(s=re&&s[re]||s["@@iterator"],typeof s=="function"?s:null)}var oe=Object.assign,U;function X(s){if(U===void 0)try{throw Error()}catch(u){var a=u.stack.trim().match(/\n( *(at )?)/);U=a&&a[1]||""}return`
`+U+s}var be=!1;function ve(s,a){if(!s||be)return"";be=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(a)if(a=function(){throw Error()},Object.defineProperty(a.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(a,[])}catch(q){var f=q}Reflect.construct(s,[],a)}else{try{a.call()}catch(q){f=q}s.call(a.prototype)}else{try{throw Error()}catch(q){f=q}s()}}catch(q){if(q&&f&&typeof q.stack=="string"){for(var m=q.stack.split(`
`),y=f.stack.split(`
`),x=m.length-1,M=y.length-1;1<=x&&0<=M&&m[x]!==y[M];)M--;for(;1<=x&&0<=M;x--,M--)if(m[x]!==y[M]){if(x!==1||M!==1)do if(x--,M--,0>M||m[x]!==y[M]){var V=`
`+m[x].replace(" at new "," at ");return s.displayName&&V.includes("<anonymous>")&&(V=V.replace("<anonymous>",s.displayName)),V}while(1<=x&&0<=M);break}}}finally{be=!1,Error.prepareStackTrace=u}return(s=s?s.displayName||s.name:"")?X(s):""}function Ne(s){switch(s.tag){case 5:return X(s.type);case 16:return X("Lazy");case 13:return X("Suspense");case 19:return X("SuspenseList");case 0:case 2:case 15:return s=ve(s.type,!1),s;case 11:return s=ve(s.type.render,!1),s;case 1:return s=ve(s.type,!0),s;default:return""}}function Re(s){if(s==null)return null;if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case D:return"Fragment";case Y:return"Portal";case N:return"Profiler";case b:return"StrictMode";case C:return"Suspense";case ge:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case k:return(s.displayName||"Context")+".Consumer";case L:return(s._context.displayName||"Context")+".Provider";case O:var a=s.render;return s=s.displayName,s||(s=a.displayName||a.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case we:return a=s.displayName||null,a!==null?a:Re(s.type)||"Memo";case Ae:a=s._payload,s=s._init;try{return Re(s(a))}catch{}}return null}function We(s){var a=s.type;switch(s.tag){case 24:return"Cache";case 9:return(a.displayName||"Context")+".Consumer";case 10:return(a._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return s=a.render,s=s.displayName||s.name||"",a.displayName||(s!==""?"ForwardRef("+s+")":"ForwardRef");case 7:return"Fragment";case 5:return a;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Re(a);case 8:return a===b?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a}return null}function je(s){switch(typeof s){case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Qe(s){var a=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function nn(s){var a=Qe(s)?"checked":"value",u=Object.getOwnPropertyDescriptor(s.constructor.prototype,a),f=""+s[a];if(!s.hasOwnProperty(a)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var m=u.get,y=u.set;return Object.defineProperty(s,a,{configurable:!0,get:function(){return m.call(this)},set:function(x){f=""+x,y.call(this,x)}}),Object.defineProperty(s,a,{enumerable:u.enumerable}),{getValue:function(){return f},setValue:function(x){f=""+x},stopTracking:function(){s._valueTracker=null,delete s[a]}}}}function Ro(s){s._valueTracker||(s._valueTracker=nn(s))}function Ya(s){if(!s)return!1;var a=s._valueTracker;if(!a)return!0;var u=a.getValue(),f="";return s&&(f=Qe(s)?s.checked?"true":"false":s.value),s=f,s!==u?(a.setValue(s),!0):!1}function xi(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}function Co(s,a){var u=a.checked;return oe({},a,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:u??s._wrapperState.initialChecked})}function Kc(s,a){var u=a.defaultValue==null?"":a.defaultValue,f=a.checked!=null?a.checked:a.defaultChecked;u=je(a.value!=null?a.value:u),s._wrapperState={initialChecked:f,initialValue:u,controlled:a.type==="checkbox"||a.type==="radio"?a.checked!=null:a.value!=null}}function Po(s,a){a=a.checked,a!=null&&H(s,"checked",a,!1)}function Es(s,a){Po(s,a);var u=je(a.value),f=a.type;if(u!=null)f==="number"?(u===0&&s.value===""||s.value!=u)&&(s.value=""+u):s.value!==""+u&&(s.value=""+u);else if(f==="submit"||f==="reset"){s.removeAttribute("value");return}a.hasOwnProperty("value")?vt(s,a.type,u):a.hasOwnProperty("defaultValue")&&vt(s,a.type,je(a.defaultValue)),a.checked==null&&a.defaultChecked!=null&&(s.defaultChecked=!!a.defaultChecked)}function Xa(s,a,u){if(a.hasOwnProperty("value")||a.hasOwnProperty("defaultValue")){var f=a.type;if(!(f!=="submit"&&f!=="reset"||a.value!==void 0&&a.value!==null))return;a=""+s._wrapperState.initialValue,u||a===s.value||(s.value=a),s.defaultValue=a}u=s.name,u!==""&&(s.name=""),s.defaultChecked=!!s._wrapperState.initialChecked,u!==""&&(s.name=u)}function vt(s,a,u){(a!=="number"||xi(s.ownerDocument)!==s)&&(u==null?s.defaultValue=""+s._wrapperState.initialValue:s.defaultValue!==""+u&&(s.defaultValue=""+u))}var pt=Array.isArray;function Gn(s,a,u,f){if(s=s.options,a){a={};for(var m=0;m<u.length;m++)a["$"+u[m]]=!0;for(u=0;u<s.length;u++)m=a.hasOwnProperty("$"+s[u].value),s[u].selected!==m&&(s[u].selected=m),m&&f&&(s[u].defaultSelected=!0)}else{for(u=""+je(u),a=null,m=0;m<s.length;m++){if(s[m].value===u){s[m].selected=!0,f&&(s[m].defaultSelected=!0);return}a!==null||s[m].disabled||(a=s[m])}a!==null&&(a.selected=!0)}}function Ja(s,a){if(a.dangerouslySetInnerHTML!=null)throw Error(t(91));return oe({},a,{value:void 0,defaultValue:void 0,children:""+s._wrapperState.initialValue})}function Za(s,a){var u=a.value;if(u==null){if(u=a.children,a=a.defaultValue,u!=null){if(a!=null)throw Error(t(92));if(pt(u)){if(1<u.length)throw Error(t(93));u=u[0]}a=u}a==null&&(a=""),u=a}s._wrapperState={initialValue:je(u)}}function Gc(s,a){var u=je(a.value),f=je(a.defaultValue);u!=null&&(u=""+u,u!==s.value&&(s.value=u),a.defaultValue==null&&s.defaultValue!==u&&(s.defaultValue=u)),f!=null&&(s.defaultValue=""+f)}function Ti(s){var a=s.textContent;a===s._wrapperState.initialValue&&a!==""&&a!==null&&(s.value=a)}function el(s){switch(s){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function No(s,a){return s==null||s==="http://www.w3.org/1999/xhtml"?el(a):s==="http://www.w3.org/2000/svg"&&a==="foreignObject"?"http://www.w3.org/1999/xhtml":s}var bi,Qc=(function(s){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(a,u,f,m){MSApp.execUnsafeLocalFunction(function(){return s(a,u,f,m)})}:s})(function(s,a){if(s.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in s)s.innerHTML=a;else{for(bi=bi||document.createElement("div"),bi.innerHTML="<svg>"+a.valueOf().toString()+"</svg>",a=bi.firstChild;s.firstChild;)s.removeChild(s.firstChild);for(;a.firstChild;)s.appendChild(a.firstChild)}});function xs(s,a){if(a){var u=s.firstChild;if(u&&u===s.lastChild&&u.nodeType===3){u.nodeValue=a;return}}s.textContent=a}var Ii={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Yc=["Webkit","ms","Moz","O"];Object.keys(Ii).forEach(function(s){Yc.forEach(function(a){a=a+s.charAt(0).toUpperCase()+s.substring(1),Ii[a]=Ii[s]})});function Si(s,a,u){return a==null||typeof a=="boolean"||a===""?"":u||typeof a!="number"||a===0||Ii.hasOwnProperty(s)&&Ii[s]?(""+a).trim():a+"px"}function Do(s,a){s=s.style;for(var u in a)if(a.hasOwnProperty(u)){var f=u.indexOf("--")===0,m=Si(u,a[u],f);u==="float"&&(u="cssFloat"),f?s.setProperty(u,m):s[u]=m}}var tl=oe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Qn(s,a){if(a){if(tl[s]&&(a.children!=null||a.dangerouslySetInnerHTML!=null))throw Error(t(137,s));if(a.dangerouslySetInnerHTML!=null){if(a.children!=null)throw Error(t(60));if(typeof a.dangerouslySetInnerHTML!="object"||!("__html"in a.dangerouslySetInnerHTML))throw Error(t(61))}if(a.style!=null&&typeof a.style!="object")throw Error(t(62))}}function Oo(s,a){if(s.indexOf("-")===-1)return typeof a.is=="string";switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ki=null;function Mo(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var zr=null,Br=null,ut=null;function nl(s){if(s=Rl(s)){if(typeof zr!="function")throw Error(t(280));var a=s.stateNode;a&&(a=Tu(a),zr(s.stateNode,s.type,a))}}function Ai(s){Br?ut?ut.push(s):ut=[s]:Br=s}function Ri(){if(Br){var s=Br,a=ut;if(ut=Br=null,nl(s),a)for(s=0;s<a.length;s++)nl(a[s])}}function Xc(s,a){return s(a)}function Jc(){}var cr=!1;function Zc(s,a,u){if(cr)return s(a,u);cr=!0;try{return Xc(s,a,u)}finally{cr=!1,(Br!==null||ut!==null)&&(Jc(),Ri())}}function Ts(s,a){var u=s.stateNode;if(u===null)return null;var f=Tu(u);if(f===null)return null;u=f[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(s=s.type,f=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!f;break e;default:s=!1}if(s)return null;if(u&&typeof u!="function")throw Error(t(231,a,typeof u));return u}var Ci=!1;if(c)try{var Pi={};Object.defineProperty(Pi,"passive",{get:function(){Ci=!0}}),window.addEventListener("test",Pi,Pi),window.removeEventListener("test",Pi,Pi)}catch{Ci=!1}function eu(s,a,u,f,m,y,x,M,V){var q=Array.prototype.slice.call(arguments,3);try{a.apply(u,q)}catch(ee){this.onError(ee)}}var $r=!1,ur=null,Lo=!1,Pn=null,tu={onError:function(s){$r=!0,ur=s}};function nu(s,a,u,f,m,y,x,M,V){$r=!1,ur=null,eu.apply(tu,arguments)}function rl(s,a,u,f,m,y,x,M,V){if(nu.apply(this,arguments),$r){if($r){var q=ur;$r=!1,ur=null}else throw Error(t(198));Lo||(Lo=!0,Pn=q)}}function Yn(s){var a=s,u=s;if(s.alternate)for(;a.return;)a=a.return;else{s=a;do a=s,(a.flags&4098)!==0&&(u=a.return),s=a.return;while(s)}return a.tag===3?u:null}function il(s){if(s.tag===13){var a=s.memoizedState;if(a===null&&(s=s.alternate,s!==null&&(a=s.memoizedState)),a!==null)return a.dehydrated}return null}function ru(s){if(Yn(s)!==s)throw Error(t(188))}function iu(s){var a=s.alternate;if(!a){if(a=Yn(s),a===null)throw Error(t(188));return a!==s?null:s}for(var u=s,f=a;;){var m=u.return;if(m===null)break;var y=m.alternate;if(y===null){if(f=m.return,f!==null){u=f;continue}break}if(m.child===y.child){for(y=m.child;y;){if(y===u)return ru(m),s;if(y===f)return ru(m),a;y=y.sibling}throw Error(t(188))}if(u.return!==f.return)u=m,f=y;else{for(var x=!1,M=m.child;M;){if(M===u){x=!0,u=m,f=y;break}if(M===f){x=!0,f=m,u=y;break}M=M.sibling}if(!x){for(M=y.child;M;){if(M===u){x=!0,u=y,f=m;break}if(M===f){x=!0,f=y,u=m;break}M=M.sibling}if(!x)throw Error(t(189))}}if(u.alternate!==f)throw Error(t(190))}if(u.tag!==3)throw Error(t(188));return u.stateNode.current===u?s:a}function su(s){return s=iu(s),s!==null?bs(s):null}function bs(s){if(s.tag===5||s.tag===6)return s;for(s=s.child;s!==null;){var a=bs(s);if(a!==null)return a;s=s.sibling}return null}var sl=e.unstable_scheduleCallback,Vo=e.unstable_cancelCallback,Is=e.unstable_shouldYield,Hr=e.unstable_requestPaint,et=e.unstable_now,ef=e.unstable_getCurrentPriorityLevel,Fo=e.unstable_ImmediatePriority,ol=e.unstable_UserBlockingPriority,Ss=e.unstable_NormalPriority,al=e.unstable_LowPriority,jo=e.unstable_IdlePriority,ks=null,vn=null;function ou(s){if(vn&&typeof vn.onCommitFiberRoot=="function")try{vn.onCommitFiberRoot(ks,s,void 0,(s.current.flags&128)===128)}catch{}}var wn=Math.clz32?Math.clz32:As,hr=Math.log,Nn=Math.LN2;function As(s){return s>>>=0,s===0?32:31-(hr(s)/Nn|0)|0}var dr=64,Ni=4194304;function He(s){switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return s&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return s}}function Wr(s,a){var u=s.pendingLanes;if(u===0)return 0;var f=0,m=s.suspendedLanes,y=s.pingedLanes,x=u&268435455;if(x!==0){var M=x&~m;M!==0?f=He(M):(y&=x,y!==0&&(f=He(y)))}else x=u&~m,x!==0?f=He(x):y!==0&&(f=He(y));if(f===0)return 0;if(a!==0&&a!==f&&(a&m)===0&&(m=f&-f,y=a&-a,m>=y||m===16&&(y&4194240)!==0))return a;if((f&4)!==0&&(f|=u&16),a=s.entangledLanes,a!==0)for(s=s.entanglements,a&=f;0<a;)u=31-wn(a),m=1<<u,f|=s[u],a&=~m;return f}function Rs(s,a){switch(s){case 1:case 2:case 4:return a+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Cs(s,a){for(var u=s.suspendedLanes,f=s.pingedLanes,m=s.expirationTimes,y=s.pendingLanes;0<y;){var x=31-wn(y),M=1<<x,V=m[x];V===-1?((M&u)===0||(M&f)!==0)&&(m[x]=Rs(M,a)):V<=a&&(s.expiredLanes|=M),y&=~M}}function ll(s){return s=s.pendingLanes&-1073741825,s!==0?s:s&1073741824?1073741824:0}function cl(){var s=dr;return dr<<=1,(dr&4194240)===0&&(dr=64),s}function ul(s){for(var a=[],u=0;31>u;u++)a.push(s);return a}function Ps(s,a,u){s.pendingLanes|=a,a!==536870912&&(s.suspendedLanes=0,s.pingedLanes=0),s=s.eventTimes,a=31-wn(a),s[a]=u}function tf(s,a){var u=s.pendingLanes&~a;s.pendingLanes=a,s.suspendedLanes=0,s.pingedLanes=0,s.expiredLanes&=a,s.mutableReadLanes&=a,s.entangledLanes&=a,a=s.entanglements;var f=s.eventTimes;for(s=s.expirationTimes;0<u;){var m=31-wn(u),y=1<<m;a[m]=0,f[m]=-1,s[m]=-1,u&=~y}}function hl(s,a){var u=s.entangledLanes|=a;for(s=s.entanglements;u;){var f=31-wn(u),m=1<<f;m&a|s[f]&a&&(s[f]|=a),u&=~m}}var Ve=0;function fr(s){return s&=-s,1<s?4<s?(s&268435455)!==0?16:536870912:4:1}var dl,Uo,fl,pl,gl,pr=!1,zo=[],gr=null,mr=null,Vt=null,Ns=new Map,qr=new Map,En=[],au="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Di(s,a){switch(s){case"focusin":case"focusout":gr=null;break;case"dragenter":case"dragleave":mr=null;break;case"mouseover":case"mouseout":Vt=null;break;case"pointerover":case"pointerout":Ns.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":qr.delete(a.pointerId)}}function Xn(s,a,u,f,m,y){return s===null||s.nativeEvent!==y?(s={blockedOn:a,domEventName:u,eventSystemFlags:f,nativeEvent:y,targetContainers:[m]},a!==null&&(a=Rl(a),a!==null&&Uo(a)),s):(s.eventSystemFlags|=f,a=s.targetContainers,m!==null&&a.indexOf(m)===-1&&a.push(m),s)}function lu(s,a,u,f,m){switch(a){case"focusin":return gr=Xn(gr,s,a,u,f,m),!0;case"dragenter":return mr=Xn(mr,s,a,u,f,m),!0;case"mouseover":return Vt=Xn(Vt,s,a,u,f,m),!0;case"pointerover":var y=m.pointerId;return Ns.set(y,Xn(Ns.get(y)||null,s,a,u,f,m)),!0;case"gotpointercapture":return y=m.pointerId,qr.set(y,Xn(qr.get(y)||null,s,a,u,f,m)),!0}return!1}function Bo(s){var a=Ls(s.target);if(a!==null){var u=Yn(a);if(u!==null){if(a=u.tag,a===13){if(a=il(u),a!==null){s.blockedOn=a,gl(s.priority,function(){fl(u)});return}}else if(a===3&&u.stateNode.current.memoizedState.isDehydrated){s.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Ye(s){if(s.blockedOn!==null)return!1;for(var a=s.targetContainers;0<a.length;){var u=$o(s.domEventName,s.eventSystemFlags,a[0],s.nativeEvent);if(u===null){u=s.nativeEvent;var f=new u.constructor(u.type,u);ki=f,u.target.dispatchEvent(f),ki=null}else return a=Rl(u),a!==null&&Uo(a),s.blockedOn=u,!1;a.shift()}return!0}function cu(s,a,u){Ye(s)&&u.delete(a)}function nf(){pr=!1,gr!==null&&Ye(gr)&&(gr=null),mr!==null&&Ye(mr)&&(mr=null),Vt!==null&&Ye(Vt)&&(Vt=null),Ns.forEach(cu),qr.forEach(cu)}function Oi(s,a){s.blockedOn===a&&(s.blockedOn=null,pr||(pr=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,nf)))}function Mi(s){function a(m){return Oi(m,s)}if(0<zo.length){Oi(zo[0],s);for(var u=1;u<zo.length;u++){var f=zo[u];f.blockedOn===s&&(f.blockedOn=null)}}for(gr!==null&&Oi(gr,s),mr!==null&&Oi(mr,s),Vt!==null&&Oi(Vt,s),Ns.forEach(a),qr.forEach(a),u=0;u<En.length;u++)f=En[u],f.blockedOn===s&&(f.blockedOn=null);for(;0<En.length&&(u=En[0],u.blockedOn===null);)Bo(u),u.blockedOn===null&&En.shift()}var Kr=K.ReactCurrentBatchConfig,Gr=!0;function yr(s,a,u,f){var m=Ve,y=Kr.transition;Kr.transition=null;try{Ve=1,ml(s,a,u,f)}finally{Ve=m,Kr.transition=y}}function uu(s,a,u,f){var m=Ve,y=Kr.transition;Kr.transition=null;try{Ve=4,ml(s,a,u,f)}finally{Ve=m,Kr.transition=y}}function ml(s,a,u,f){if(Gr){var m=$o(s,a,u,f);if(m===null)pf(s,a,f,_r,u),Di(s,f);else if(lu(m,s,a,u,f))f.stopPropagation();else if(Di(s,f),a&4&&-1<au.indexOf(s)){for(;m!==null;){var y=Rl(m);if(y!==null&&dl(y),y=$o(s,a,u,f),y===null&&pf(s,a,f,_r,u),y===m)break;m=y}m!==null&&f.stopPropagation()}else pf(s,a,f,null,u)}}var _r=null;function $o(s,a,u,f){if(_r=null,s=Mo(f),s=Ls(s),s!==null)if(a=Yn(s),a===null)s=null;else if(u=a.tag,u===13){if(s=il(a),s!==null)return s;s=null}else if(u===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;s=null}else a!==s&&(s=null);return _r=s,null}function Ho(s){switch(s){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ef()){case Fo:return 1;case ol:return 4;case Ss:case al:return 16;case jo:return 536870912;default:return 16}default:return 16}}var xn=null,Wo=null,Qr=null;function hu(){if(Qr)return Qr;var s,a=Wo,u=a.length,f,m="value"in xn?xn.value:xn.textContent,y=m.length;for(s=0;s<u&&a[s]===m[s];s++);var x=u-s;for(f=1;f<=x&&a[u-f]===m[y-f];f++);return Qr=m.slice(s,1<f?1-f:void 0)}function Ds(s){var a=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&a===13&&(s=13)):s=a,s===10&&(s=13),32<=s||s===13?s:0}function vr(){return!0}function yl(){return!1}function Wt(s){function a(u,f,m,y,x){this._reactName=u,this._targetInst=m,this.type=f,this.nativeEvent=y,this.target=x,this.currentTarget=null;for(var M in s)s.hasOwnProperty(M)&&(u=s[M],this[M]=u?u(y):y[M]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?vr:yl,this.isPropagationStopped=yl,this}return oe(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=vr)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=vr)},persist:function(){},isPersistent:vr}),a}var wr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Os=Wt(wr),Li=oe({},wr,{view:0,detail:0}),qo=Wt(Li),Ko,Go,Tn,Ms=oe({},Li,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ce,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Tn&&(Tn&&s.type==="mousemove"?(Ko=s.screenX-Tn.screenX,Go=s.screenY-Tn.screenY):Go=Ko=0,Tn=s),Ko)},movementY:function(s){return"movementY"in s?s.movementY:Go}}),_l=Wt(Ms),du=oe({},Ms,{dataTransfer:0}),fu=Wt(du),Qo=oe({},Li,{relatedTarget:0}),Ft=Wt(Qo),pu=oe({},wr,{animationName:0,elapsedTime:0,pseudoElement:0}),gu=Wt(pu),Vi=oe({},wr,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),d=Wt(Vi),_=oe({},wr,{data:0}),E=Wt(_),S={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},$={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},G={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function se(s){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(s):(s=G[s])?!!a[s]:!1}function Ce(){return se}var gt=oe({},Li,{key:function(s){if(s.key){var a=S[s.key]||s.key;if(a!=="Unidentified")return a}return s.type==="keypress"?(s=Ds(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?$[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ce,charCode:function(s){return s.type==="keypress"?Ds(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Ds(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),Ke=Wt(gt),wt=oe({},Ms,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),bn=Wt(wt),Yr=oe({},Li,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ce}),Er=Wt(Yr),xr=oe({},wr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Yo=Wt(xr),vl=oe({},Ms,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),aS=Wt(vl),lS=[9,13,27,32],rf=c&&"CompositionEvent"in window,wl=null;c&&"documentMode"in document&&(wl=document.documentMode);var cS=c&&"TextEvent"in window&&!wl,gy=c&&(!rf||wl&&8<wl&&11>=wl),my=" ",yy=!1;function _y(s,a){switch(s){case"keyup":return lS.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function vy(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Xo=!1;function uS(s,a){switch(s){case"compositionend":return vy(a);case"keypress":return a.which!==32?null:(yy=!0,my);case"textInput":return s=a.data,s===my&&yy?null:s;default:return null}}function hS(s,a){if(Xo)return s==="compositionend"||!rf&&_y(s,a)?(s=hu(),Qr=Wo=xn=null,Xo=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return gy&&a.locale!=="ko"?null:a.data;default:return null}}var dS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function wy(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a==="input"?!!dS[s.type]:a==="textarea"}function Ey(s,a,u,f){Ai(f),a=wu(a,"onChange"),0<a.length&&(u=new Os("onChange","change",null,u,f),s.push({event:u,listeners:a}))}var El=null,xl=null;function fS(s){jy(s,0)}function mu(s){var a=na(s);if(Ya(a))return s}function pS(s,a){if(s==="change")return a}var xy=!1;if(c){var sf;if(c){var of="oninput"in document;if(!of){var Ty=document.createElement("div");Ty.setAttribute("oninput","return;"),of=typeof Ty.oninput=="function"}sf=of}else sf=!1;xy=sf&&(!document.documentMode||9<document.documentMode)}function by(){El&&(El.detachEvent("onpropertychange",Iy),xl=El=null)}function Iy(s){if(s.propertyName==="value"&&mu(xl)){var a=[];Ey(a,xl,s,Mo(s)),Zc(fS,a)}}function gS(s,a,u){s==="focusin"?(by(),El=a,xl=u,El.attachEvent("onpropertychange",Iy)):s==="focusout"&&by()}function mS(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return mu(xl)}function yS(s,a){if(s==="click")return mu(a)}function _S(s,a){if(s==="input"||s==="change")return mu(a)}function vS(s,a){return s===a&&(s!==0||1/s===1/a)||s!==s&&a!==a}var Jn=typeof Object.is=="function"?Object.is:vS;function Tl(s,a){if(Jn(s,a))return!0;if(typeof s!="object"||s===null||typeof a!="object"||a===null)return!1;var u=Object.keys(s),f=Object.keys(a);if(u.length!==f.length)return!1;for(f=0;f<u.length;f++){var m=u[f];if(!h.call(a,m)||!Jn(s[m],a[m]))return!1}return!0}function Sy(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function ky(s,a){var u=Sy(s);s=0;for(var f;u;){if(u.nodeType===3){if(f=s+u.textContent.length,s<=a&&f>=a)return{node:u,offset:a-s};s=f}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=Sy(u)}}function Ay(s,a){return s&&a?s===a?!0:s&&s.nodeType===3?!1:a&&a.nodeType===3?Ay(s,a.parentNode):"contains"in s?s.contains(a):s.compareDocumentPosition?!!(s.compareDocumentPosition(a)&16):!1:!1}function Ry(){for(var s=window,a=xi();a instanceof s.HTMLIFrameElement;){try{var u=typeof a.contentWindow.location.href=="string"}catch{u=!1}if(u)s=a.contentWindow;else break;a=xi(s.document)}return a}function af(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a&&(a==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||a==="textarea"||s.contentEditable==="true")}function wS(s){var a=Ry(),u=s.focusedElem,f=s.selectionRange;if(a!==u&&u&&u.ownerDocument&&Ay(u.ownerDocument.documentElement,u)){if(f!==null&&af(u)){if(a=f.start,s=f.end,s===void 0&&(s=a),"selectionStart"in u)u.selectionStart=a,u.selectionEnd=Math.min(s,u.value.length);else if(s=(a=u.ownerDocument||document)&&a.defaultView||window,s.getSelection){s=s.getSelection();var m=u.textContent.length,y=Math.min(f.start,m);f=f.end===void 0?y:Math.min(f.end,m),!s.extend&&y>f&&(m=f,f=y,y=m),m=ky(u,y);var x=ky(u,f);m&&x&&(s.rangeCount!==1||s.anchorNode!==m.node||s.anchorOffset!==m.offset||s.focusNode!==x.node||s.focusOffset!==x.offset)&&(a=a.createRange(),a.setStart(m.node,m.offset),s.removeAllRanges(),y>f?(s.addRange(a),s.extend(x.node,x.offset)):(a.setEnd(x.node,x.offset),s.addRange(a)))}}for(a=[],s=u;s=s.parentNode;)s.nodeType===1&&a.push({element:s,left:s.scrollLeft,top:s.scrollTop});for(typeof u.focus=="function"&&u.focus(),u=0;u<a.length;u++)s=a[u],s.element.scrollLeft=s.left,s.element.scrollTop=s.top}}var ES=c&&"documentMode"in document&&11>=document.documentMode,Jo=null,lf=null,bl=null,cf=!1;function Cy(s,a,u){var f=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;cf||Jo==null||Jo!==xi(f)||(f=Jo,"selectionStart"in f&&af(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),bl&&Tl(bl,f)||(bl=f,f=wu(lf,"onSelect"),0<f.length&&(a=new Os("onSelect","select",null,a,u),s.push({event:a,listeners:f}),a.target=Jo)))}function yu(s,a){var u={};return u[s.toLowerCase()]=a.toLowerCase(),u["Webkit"+s]="webkit"+a,u["Moz"+s]="moz"+a,u}var Zo={animationend:yu("Animation","AnimationEnd"),animationiteration:yu("Animation","AnimationIteration"),animationstart:yu("Animation","AnimationStart"),transitionend:yu("Transition","TransitionEnd")},uf={},Py={};c&&(Py=document.createElement("div").style,"AnimationEvent"in window||(delete Zo.animationend.animation,delete Zo.animationiteration.animation,delete Zo.animationstart.animation),"TransitionEvent"in window||delete Zo.transitionend.transition);function _u(s){if(uf[s])return uf[s];if(!Zo[s])return s;var a=Zo[s],u;for(u in a)if(a.hasOwnProperty(u)&&u in Py)return uf[s]=a[u];return s}var Ny=_u("animationend"),Dy=_u("animationiteration"),Oy=_u("animationstart"),My=_u("transitionend"),Ly=new Map,Vy="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Fi(s,a){Ly.set(s,a),o(a,[s])}for(var hf=0;hf<Vy.length;hf++){var df=Vy[hf],xS=df.toLowerCase(),TS=df[0].toUpperCase()+df.slice(1);Fi(xS,"on"+TS)}Fi(Ny,"onAnimationEnd"),Fi(Dy,"onAnimationIteration"),Fi(Oy,"onAnimationStart"),Fi("dblclick","onDoubleClick"),Fi("focusin","onFocus"),Fi("focusout","onBlur"),Fi(My,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Il="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),bS=new Set("cancel close invalid load scroll toggle".split(" ").concat(Il));function Fy(s,a,u){var f=s.type||"unknown-event";s.currentTarget=u,rl(f,a,void 0,s),s.currentTarget=null}function jy(s,a){a=(a&4)!==0;for(var u=0;u<s.length;u++){var f=s[u],m=f.event;f=f.listeners;e:{var y=void 0;if(a)for(var x=f.length-1;0<=x;x--){var M=f[x],V=M.instance,q=M.currentTarget;if(M=M.listener,V!==y&&m.isPropagationStopped())break e;Fy(m,M,q),y=V}else for(x=0;x<f.length;x++){if(M=f[x],V=M.instance,q=M.currentTarget,M=M.listener,V!==y&&m.isPropagationStopped())break e;Fy(m,M,q),y=V}}}if(Lo)throw s=Pn,Lo=!1,Pn=null,s}function tt(s,a){var u=a[wf];u===void 0&&(u=a[wf]=new Set);var f=s+"__bubble";u.has(f)||(Uy(a,s,2,!1),u.add(f))}function ff(s,a,u){var f=0;a&&(f|=4),Uy(u,s,f,a)}var vu="_reactListening"+Math.random().toString(36).slice(2);function Sl(s){if(!s[vu]){s[vu]=!0,r.forEach(function(u){u!=="selectionchange"&&(bS.has(u)||ff(u,!1,s),ff(u,!0,s))});var a=s.nodeType===9?s:s.ownerDocument;a===null||a[vu]||(a[vu]=!0,ff("selectionchange",!1,a))}}function Uy(s,a,u,f){switch(Ho(a)){case 1:var m=yr;break;case 4:m=uu;break;default:m=ml}u=m.bind(null,a,u,s),m=void 0,!Ci||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(m=!0),f?m!==void 0?s.addEventListener(a,u,{capture:!0,passive:m}):s.addEventListener(a,u,!0):m!==void 0?s.addEventListener(a,u,{passive:m}):s.addEventListener(a,u,!1)}function pf(s,a,u,f,m){var y=f;if((a&1)===0&&(a&2)===0&&f!==null)e:for(;;){if(f===null)return;var x=f.tag;if(x===3||x===4){var M=f.stateNode.containerInfo;if(M===m||M.nodeType===8&&M.parentNode===m)break;if(x===4)for(x=f.return;x!==null;){var V=x.tag;if((V===3||V===4)&&(V=x.stateNode.containerInfo,V===m||V.nodeType===8&&V.parentNode===m))return;x=x.return}for(;M!==null;){if(x=Ls(M),x===null)return;if(V=x.tag,V===5||V===6){f=y=x;continue e}M=M.parentNode}}f=f.return}Zc(function(){var q=y,ee=Mo(u),ne=[];e:{var Z=Ly.get(s);if(Z!==void 0){var le=Os,he=s;switch(s){case"keypress":if(Ds(u)===0)break e;case"keydown":case"keyup":le=Ke;break;case"focusin":he="focus",le=Ft;break;case"focusout":he="blur",le=Ft;break;case"beforeblur":case"afterblur":le=Ft;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":le=_l;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":le=fu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":le=Er;break;case Ny:case Dy:case Oy:le=gu;break;case My:le=Yo;break;case"scroll":le=qo;break;case"wheel":le=aS;break;case"copy":case"cut":case"paste":le=d;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":le=bn}var de=(a&4)!==0,mt=!de&&s==="scroll",B=de?Z!==null?Z+"Capture":null:Z;de=[];for(var j=q,W;j!==null;){W=j;var ie=W.stateNode;if(W.tag===5&&ie!==null&&(W=ie,B!==null&&(ie=Ts(j,B),ie!=null&&de.push(kl(j,ie,W)))),mt)break;j=j.return}0<de.length&&(Z=new le(Z,he,null,u,ee),ne.push({event:Z,listeners:de}))}}if((a&7)===0){e:{if(Z=s==="mouseover"||s==="pointerover",le=s==="mouseout"||s==="pointerout",Z&&u!==ki&&(he=u.relatedTarget||u.fromElement)&&(Ls(he)||he[Xr]))break e;if((le||Z)&&(Z=ee.window===ee?ee:(Z=ee.ownerDocument)?Z.defaultView||Z.parentWindow:window,le?(he=u.relatedTarget||u.toElement,le=q,he=he?Ls(he):null,he!==null&&(mt=Yn(he),he!==mt||he.tag!==5&&he.tag!==6)&&(he=null)):(le=null,he=q),le!==he)){if(de=_l,ie="onMouseLeave",B="onMouseEnter",j="mouse",(s==="pointerout"||s==="pointerover")&&(de=bn,ie="onPointerLeave",B="onPointerEnter",j="pointer"),mt=le==null?Z:na(le),W=he==null?Z:na(he),Z=new de(ie,j+"leave",le,u,ee),Z.target=mt,Z.relatedTarget=W,ie=null,Ls(ee)===q&&(de=new de(B,j+"enter",he,u,ee),de.target=W,de.relatedTarget=mt,ie=de),mt=ie,le&&he)t:{for(de=le,B=he,j=0,W=de;W;W=ea(W))j++;for(W=0,ie=B;ie;ie=ea(ie))W++;for(;0<j-W;)de=ea(de),j--;for(;0<W-j;)B=ea(B),W--;for(;j--;){if(de===B||B!==null&&de===B.alternate)break t;de=ea(de),B=ea(B)}de=null}else de=null;le!==null&&zy(ne,Z,le,de,!1),he!==null&&mt!==null&&zy(ne,mt,he,de,!0)}}e:{if(Z=q?na(q):window,le=Z.nodeName&&Z.nodeName.toLowerCase(),le==="select"||le==="input"&&Z.type==="file")var fe=pS;else if(wy(Z))if(xy)fe=_S;else{fe=mS;var me=gS}else(le=Z.nodeName)&&le.toLowerCase()==="input"&&(Z.type==="checkbox"||Z.type==="radio")&&(fe=yS);if(fe&&(fe=fe(s,q))){Ey(ne,fe,u,ee);break e}me&&me(s,Z,q),s==="focusout"&&(me=Z._wrapperState)&&me.controlled&&Z.type==="number"&&vt(Z,"number",Z.value)}switch(me=q?na(q):window,s){case"focusin":(wy(me)||me.contentEditable==="true")&&(Jo=me,lf=q,bl=null);break;case"focusout":bl=lf=Jo=null;break;case"mousedown":cf=!0;break;case"contextmenu":case"mouseup":case"dragend":cf=!1,Cy(ne,u,ee);break;case"selectionchange":if(ES)break;case"keydown":case"keyup":Cy(ne,u,ee)}var ye;if(rf)e:{switch(s){case"compositionstart":var Ie="onCompositionStart";break e;case"compositionend":Ie="onCompositionEnd";break e;case"compositionupdate":Ie="onCompositionUpdate";break e}Ie=void 0}else Xo?_y(s,u)&&(Ie="onCompositionEnd"):s==="keydown"&&u.keyCode===229&&(Ie="onCompositionStart");Ie&&(gy&&u.locale!=="ko"&&(Xo||Ie!=="onCompositionStart"?Ie==="onCompositionEnd"&&Xo&&(ye=hu()):(xn=ee,Wo="value"in xn?xn.value:xn.textContent,Xo=!0)),me=wu(q,Ie),0<me.length&&(Ie=new E(Ie,s,null,u,ee),ne.push({event:Ie,listeners:me}),ye?Ie.data=ye:(ye=vy(u),ye!==null&&(Ie.data=ye)))),(ye=cS?uS(s,u):hS(s,u))&&(q=wu(q,"onBeforeInput"),0<q.length&&(ee=new E("onBeforeInput","beforeinput",null,u,ee),ne.push({event:ee,listeners:q}),ee.data=ye))}jy(ne,a)})}function kl(s,a,u){return{instance:s,listener:a,currentTarget:u}}function wu(s,a){for(var u=a+"Capture",f=[];s!==null;){var m=s,y=m.stateNode;m.tag===5&&y!==null&&(m=y,y=Ts(s,u),y!=null&&f.unshift(kl(s,y,m)),y=Ts(s,a),y!=null&&f.push(kl(s,y,m))),s=s.return}return f}function ea(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5);return s||null}function zy(s,a,u,f,m){for(var y=a._reactName,x=[];u!==null&&u!==f;){var M=u,V=M.alternate,q=M.stateNode;if(V!==null&&V===f)break;M.tag===5&&q!==null&&(M=q,m?(V=Ts(u,y),V!=null&&x.unshift(kl(u,V,M))):m||(V=Ts(u,y),V!=null&&x.push(kl(u,V,M)))),u=u.return}x.length!==0&&s.push({event:a,listeners:x})}var IS=/\r\n?/g,SS=/\u0000|\uFFFD/g;function By(s){return(typeof s=="string"?s:""+s).replace(IS,`
`).replace(SS,"")}function Eu(s,a,u){if(a=By(a),By(s)!==a&&u)throw Error(t(425))}function xu(){}var gf=null,mf=null;function yf(s,a){return s==="textarea"||s==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var _f=typeof setTimeout=="function"?setTimeout:void 0,kS=typeof clearTimeout=="function"?clearTimeout:void 0,$y=typeof Promise=="function"?Promise:void 0,AS=typeof queueMicrotask=="function"?queueMicrotask:typeof $y<"u"?function(s){return $y.resolve(null).then(s).catch(RS)}:_f;function RS(s){setTimeout(function(){throw s})}function vf(s,a){var u=a,f=0;do{var m=u.nextSibling;if(s.removeChild(u),m&&m.nodeType===8)if(u=m.data,u==="/$"){if(f===0){s.removeChild(m),Mi(a);return}f--}else u!=="$"&&u!=="$?"&&u!=="$!"||f++;u=m}while(u);Mi(a)}function ji(s){for(;s!=null;s=s.nextSibling){var a=s.nodeType;if(a===1||a===3)break;if(a===8){if(a=s.data,a==="$"||a==="$!"||a==="$?")break;if(a==="/$")return null}}return s}function Hy(s){s=s.previousSibling;for(var a=0;s;){if(s.nodeType===8){var u=s.data;if(u==="$"||u==="$!"||u==="$?"){if(a===0)return s;a--}else u==="/$"&&a++}s=s.previousSibling}return null}var ta=Math.random().toString(36).slice(2),Tr="__reactFiber$"+ta,Al="__reactProps$"+ta,Xr="__reactContainer$"+ta,wf="__reactEvents$"+ta,CS="__reactListeners$"+ta,PS="__reactHandles$"+ta;function Ls(s){var a=s[Tr];if(a)return a;for(var u=s.parentNode;u;){if(a=u[Xr]||u[Tr]){if(u=a.alternate,a.child!==null||u!==null&&u.child!==null)for(s=Hy(s);s!==null;){if(u=s[Tr])return u;s=Hy(s)}return a}s=u,u=s.parentNode}return null}function Rl(s){return s=s[Tr]||s[Xr],!s||s.tag!==5&&s.tag!==6&&s.tag!==13&&s.tag!==3?null:s}function na(s){if(s.tag===5||s.tag===6)return s.stateNode;throw Error(t(33))}function Tu(s){return s[Al]||null}var Ef=[],ra=-1;function Ui(s){return{current:s}}function nt(s){0>ra||(s.current=Ef[ra],Ef[ra]=null,ra--)}function Ze(s,a){ra++,Ef[ra]=s.current,s.current=a}var zi={},qt=Ui(zi),ln=Ui(!1),Vs=zi;function ia(s,a){var u=s.type.contextTypes;if(!u)return zi;var f=s.stateNode;if(f&&f.__reactInternalMemoizedUnmaskedChildContext===a)return f.__reactInternalMemoizedMaskedChildContext;var m={},y;for(y in u)m[y]=a[y];return f&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=a,s.__reactInternalMemoizedMaskedChildContext=m),m}function cn(s){return s=s.childContextTypes,s!=null}function bu(){nt(ln),nt(qt)}function Wy(s,a,u){if(qt.current!==zi)throw Error(t(168));Ze(qt,a),Ze(ln,u)}function qy(s,a,u){var f=s.stateNode;if(a=a.childContextTypes,typeof f.getChildContext!="function")return u;f=f.getChildContext();for(var m in f)if(!(m in a))throw Error(t(108,We(s)||"Unknown",m));return oe({},u,f)}function Iu(s){return s=(s=s.stateNode)&&s.__reactInternalMemoizedMergedChildContext||zi,Vs=qt.current,Ze(qt,s),Ze(ln,ln.current),!0}function Ky(s,a,u){var f=s.stateNode;if(!f)throw Error(t(169));u?(s=qy(s,a,Vs),f.__reactInternalMemoizedMergedChildContext=s,nt(ln),nt(qt),Ze(qt,s)):nt(ln),Ze(ln,u)}var Jr=null,Su=!1,xf=!1;function Gy(s){Jr===null?Jr=[s]:Jr.push(s)}function NS(s){Su=!0,Gy(s)}function Bi(){if(!xf&&Jr!==null){xf=!0;var s=0,a=Ve;try{var u=Jr;for(Ve=1;s<u.length;s++){var f=u[s];do f=f(!0);while(f!==null)}Jr=null,Su=!1}catch(m){throw Jr!==null&&(Jr=Jr.slice(s+1)),sl(Fo,Bi),m}finally{Ve=a,xf=!1}}return null}var sa=[],oa=0,ku=null,Au=0,Dn=[],On=0,Fs=null,Zr=1,ei="";function js(s,a){sa[oa++]=Au,sa[oa++]=ku,ku=s,Au=a}function Qy(s,a,u){Dn[On++]=Zr,Dn[On++]=ei,Dn[On++]=Fs,Fs=s;var f=Zr;s=ei;var m=32-wn(f)-1;f&=~(1<<m),u+=1;var y=32-wn(a)+m;if(30<y){var x=m-m%5;y=(f&(1<<x)-1).toString(32),f>>=x,m-=x,Zr=1<<32-wn(a)+m|u<<m|f,ei=y+s}else Zr=1<<y|u<<m|f,ei=s}function Tf(s){s.return!==null&&(js(s,1),Qy(s,1,0))}function bf(s){for(;s===ku;)ku=sa[--oa],sa[oa]=null,Au=sa[--oa],sa[oa]=null;for(;s===Fs;)Fs=Dn[--On],Dn[On]=null,ei=Dn[--On],Dn[On]=null,Zr=Dn[--On],Dn[On]=null}var In=null,Sn=null,st=!1,Zn=null;function Yy(s,a){var u=Fn(5,null,null,0);u.elementType="DELETED",u.stateNode=a,u.return=s,a=s.deletions,a===null?(s.deletions=[u],s.flags|=16):a.push(u)}function Xy(s,a){switch(s.tag){case 5:var u=s.type;return a=a.nodeType!==1||u.toLowerCase()!==a.nodeName.toLowerCase()?null:a,a!==null?(s.stateNode=a,In=s,Sn=ji(a.firstChild),!0):!1;case 6:return a=s.pendingProps===""||a.nodeType!==3?null:a,a!==null?(s.stateNode=a,In=s,Sn=null,!0):!1;case 13:return a=a.nodeType!==8?null:a,a!==null?(u=Fs!==null?{id:Zr,overflow:ei}:null,s.memoizedState={dehydrated:a,treeContext:u,retryLane:1073741824},u=Fn(18,null,null,0),u.stateNode=a,u.return=s,s.child=u,In=s,Sn=null,!0):!1;default:return!1}}function If(s){return(s.mode&1)!==0&&(s.flags&128)===0}function Sf(s){if(st){var a=Sn;if(a){var u=a;if(!Xy(s,a)){if(If(s))throw Error(t(418));a=ji(u.nextSibling);var f=In;a&&Xy(s,a)?Yy(f,u):(s.flags=s.flags&-4097|2,st=!1,In=s)}}else{if(If(s))throw Error(t(418));s.flags=s.flags&-4097|2,st=!1,In=s}}}function Jy(s){for(s=s.return;s!==null&&s.tag!==5&&s.tag!==3&&s.tag!==13;)s=s.return;In=s}function Ru(s){if(s!==In)return!1;if(!st)return Jy(s),st=!0,!1;var a;if((a=s.tag!==3)&&!(a=s.tag!==5)&&(a=s.type,a=a!=="head"&&a!=="body"&&!yf(s.type,s.memoizedProps)),a&&(a=Sn)){if(If(s))throw Zy(),Error(t(418));for(;a;)Yy(s,a),a=ji(a.nextSibling)}if(Jy(s),s.tag===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(t(317));e:{for(s=s.nextSibling,a=0;s;){if(s.nodeType===8){var u=s.data;if(u==="/$"){if(a===0){Sn=ji(s.nextSibling);break e}a--}else u!=="$"&&u!=="$!"&&u!=="$?"||a++}s=s.nextSibling}Sn=null}}else Sn=In?ji(s.stateNode.nextSibling):null;return!0}function Zy(){for(var s=Sn;s;)s=ji(s.nextSibling)}function aa(){Sn=In=null,st=!1}function kf(s){Zn===null?Zn=[s]:Zn.push(s)}var DS=K.ReactCurrentBatchConfig;function Cl(s,a,u){if(s=u.ref,s!==null&&typeof s!="function"&&typeof s!="object"){if(u._owner){if(u=u._owner,u){if(u.tag!==1)throw Error(t(309));var f=u.stateNode}if(!f)throw Error(t(147,s));var m=f,y=""+s;return a!==null&&a.ref!==null&&typeof a.ref=="function"&&a.ref._stringRef===y?a.ref:(a=function(x){var M=m.refs;x===null?delete M[y]:M[y]=x},a._stringRef=y,a)}if(typeof s!="string")throw Error(t(284));if(!u._owner)throw Error(t(290,s))}return s}function Cu(s,a){throw s=Object.prototype.toString.call(a),Error(t(31,s==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":s))}function e_(s){var a=s._init;return a(s._payload)}function t_(s){function a(B,j){if(s){var W=B.deletions;W===null?(B.deletions=[j],B.flags|=16):W.push(j)}}function u(B,j){if(!s)return null;for(;j!==null;)a(B,j),j=j.sibling;return null}function f(B,j){for(B=new Map;j!==null;)j.key!==null?B.set(j.key,j):B.set(j.index,j),j=j.sibling;return B}function m(B,j){return B=Yi(B,j),B.index=0,B.sibling=null,B}function y(B,j,W){return B.index=W,s?(W=B.alternate,W!==null?(W=W.index,W<j?(B.flags|=2,j):W):(B.flags|=2,j)):(B.flags|=1048576,j)}function x(B){return s&&B.alternate===null&&(B.flags|=2),B}function M(B,j,W,ie){return j===null||j.tag!==6?(j=_p(W,B.mode,ie),j.return=B,j):(j=m(j,W),j.return=B,j)}function V(B,j,W,ie){var fe=W.type;return fe===D?ee(B,j,W.props.children,ie,W.key):j!==null&&(j.elementType===fe||typeof fe=="object"&&fe!==null&&fe.$$typeof===Ae&&e_(fe)===j.type)?(ie=m(j,W.props),ie.ref=Cl(B,j,W),ie.return=B,ie):(ie=eh(W.type,W.key,W.props,null,B.mode,ie),ie.ref=Cl(B,j,W),ie.return=B,ie)}function q(B,j,W,ie){return j===null||j.tag!==4||j.stateNode.containerInfo!==W.containerInfo||j.stateNode.implementation!==W.implementation?(j=vp(W,B.mode,ie),j.return=B,j):(j=m(j,W.children||[]),j.return=B,j)}function ee(B,j,W,ie,fe){return j===null||j.tag!==7?(j=Ks(W,B.mode,ie,fe),j.return=B,j):(j=m(j,W),j.return=B,j)}function ne(B,j,W){if(typeof j=="string"&&j!==""||typeof j=="number")return j=_p(""+j,B.mode,W),j.return=B,j;if(typeof j=="object"&&j!==null){switch(j.$$typeof){case Q:return W=eh(j.type,j.key,j.props,null,B.mode,W),W.ref=Cl(B,null,j),W.return=B,W;case Y:return j=vp(j,B.mode,W),j.return=B,j;case Ae:var ie=j._init;return ne(B,ie(j._payload),W)}if(pt(j)||ae(j))return j=Ks(j,B.mode,W,null),j.return=B,j;Cu(B,j)}return null}function Z(B,j,W,ie){var fe=j!==null?j.key:null;if(typeof W=="string"&&W!==""||typeof W=="number")return fe!==null?null:M(B,j,""+W,ie);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case Q:return W.key===fe?V(B,j,W,ie):null;case Y:return W.key===fe?q(B,j,W,ie):null;case Ae:return fe=W._init,Z(B,j,fe(W._payload),ie)}if(pt(W)||ae(W))return fe!==null?null:ee(B,j,W,ie,null);Cu(B,W)}return null}function le(B,j,W,ie,fe){if(typeof ie=="string"&&ie!==""||typeof ie=="number")return B=B.get(W)||null,M(j,B,""+ie,fe);if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case Q:return B=B.get(ie.key===null?W:ie.key)||null,V(j,B,ie,fe);case Y:return B=B.get(ie.key===null?W:ie.key)||null,q(j,B,ie,fe);case Ae:var me=ie._init;return le(B,j,W,me(ie._payload),fe)}if(pt(ie)||ae(ie))return B=B.get(W)||null,ee(j,B,ie,fe,null);Cu(j,ie)}return null}function he(B,j,W,ie){for(var fe=null,me=null,ye=j,Ie=j=0,Ot=null;ye!==null&&Ie<W.length;Ie++){ye.index>Ie?(Ot=ye,ye=null):Ot=ye.sibling;var $e=Z(B,ye,W[Ie],ie);if($e===null){ye===null&&(ye=Ot);break}s&&ye&&$e.alternate===null&&a(B,ye),j=y($e,j,Ie),me===null?fe=$e:me.sibling=$e,me=$e,ye=Ot}if(Ie===W.length)return u(B,ye),st&&js(B,Ie),fe;if(ye===null){for(;Ie<W.length;Ie++)ye=ne(B,W[Ie],ie),ye!==null&&(j=y(ye,j,Ie),me===null?fe=ye:me.sibling=ye,me=ye);return st&&js(B,Ie),fe}for(ye=f(B,ye);Ie<W.length;Ie++)Ot=le(ye,B,Ie,W[Ie],ie),Ot!==null&&(s&&Ot.alternate!==null&&ye.delete(Ot.key===null?Ie:Ot.key),j=y(Ot,j,Ie),me===null?fe=Ot:me.sibling=Ot,me=Ot);return s&&ye.forEach(function(Xi){return a(B,Xi)}),st&&js(B,Ie),fe}function de(B,j,W,ie){var fe=ae(W);if(typeof fe!="function")throw Error(t(150));if(W=fe.call(W),W==null)throw Error(t(151));for(var me=fe=null,ye=j,Ie=j=0,Ot=null,$e=W.next();ye!==null&&!$e.done;Ie++,$e=W.next()){ye.index>Ie?(Ot=ye,ye=null):Ot=ye.sibling;var Xi=Z(B,ye,$e.value,ie);if(Xi===null){ye===null&&(ye=Ot);break}s&&ye&&Xi.alternate===null&&a(B,ye),j=y(Xi,j,Ie),me===null?fe=Xi:me.sibling=Xi,me=Xi,ye=Ot}if($e.done)return u(B,ye),st&&js(B,Ie),fe;if(ye===null){for(;!$e.done;Ie++,$e=W.next())$e=ne(B,$e.value,ie),$e!==null&&(j=y($e,j,Ie),me===null?fe=$e:me.sibling=$e,me=$e);return st&&js(B,Ie),fe}for(ye=f(B,ye);!$e.done;Ie++,$e=W.next())$e=le(ye,B,Ie,$e.value,ie),$e!==null&&(s&&$e.alternate!==null&&ye.delete($e.key===null?Ie:$e.key),j=y($e,j,Ie),me===null?fe=$e:me.sibling=$e,me=$e);return s&&ye.forEach(function(d1){return a(B,d1)}),st&&js(B,Ie),fe}function mt(B,j,W,ie){if(typeof W=="object"&&W!==null&&W.type===D&&W.key===null&&(W=W.props.children),typeof W=="object"&&W!==null){switch(W.$$typeof){case Q:e:{for(var fe=W.key,me=j;me!==null;){if(me.key===fe){if(fe=W.type,fe===D){if(me.tag===7){u(B,me.sibling),j=m(me,W.props.children),j.return=B,B=j;break e}}else if(me.elementType===fe||typeof fe=="object"&&fe!==null&&fe.$$typeof===Ae&&e_(fe)===me.type){u(B,me.sibling),j=m(me,W.props),j.ref=Cl(B,me,W),j.return=B,B=j;break e}u(B,me);break}else a(B,me);me=me.sibling}W.type===D?(j=Ks(W.props.children,B.mode,ie,W.key),j.return=B,B=j):(ie=eh(W.type,W.key,W.props,null,B.mode,ie),ie.ref=Cl(B,j,W),ie.return=B,B=ie)}return x(B);case Y:e:{for(me=W.key;j!==null;){if(j.key===me)if(j.tag===4&&j.stateNode.containerInfo===W.containerInfo&&j.stateNode.implementation===W.implementation){u(B,j.sibling),j=m(j,W.children||[]),j.return=B,B=j;break e}else{u(B,j);break}else a(B,j);j=j.sibling}j=vp(W,B.mode,ie),j.return=B,B=j}return x(B);case Ae:return me=W._init,mt(B,j,me(W._payload),ie)}if(pt(W))return he(B,j,W,ie);if(ae(W))return de(B,j,W,ie);Cu(B,W)}return typeof W=="string"&&W!==""||typeof W=="number"?(W=""+W,j!==null&&j.tag===6?(u(B,j.sibling),j=m(j,W),j.return=B,B=j):(u(B,j),j=_p(W,B.mode,ie),j.return=B,B=j),x(B)):u(B,j)}return mt}var la=t_(!0),n_=t_(!1),Pu=Ui(null),Nu=null,ca=null,Af=null;function Rf(){Af=ca=Nu=null}function Cf(s){var a=Pu.current;nt(Pu),s._currentValue=a}function Pf(s,a,u){for(;s!==null;){var f=s.alternate;if((s.childLanes&a)!==a?(s.childLanes|=a,f!==null&&(f.childLanes|=a)):f!==null&&(f.childLanes&a)!==a&&(f.childLanes|=a),s===u)break;s=s.return}}function ua(s,a){Nu=s,Af=ca=null,s=s.dependencies,s!==null&&s.firstContext!==null&&((s.lanes&a)!==0&&(un=!0),s.firstContext=null)}function Mn(s){var a=s._currentValue;if(Af!==s)if(s={context:s,memoizedValue:a,next:null},ca===null){if(Nu===null)throw Error(t(308));ca=s,Nu.dependencies={lanes:0,firstContext:s}}else ca=ca.next=s;return a}var Us=null;function Nf(s){Us===null?Us=[s]:Us.push(s)}function r_(s,a,u,f){var m=a.interleaved;return m===null?(u.next=u,Nf(a)):(u.next=m.next,m.next=u),a.interleaved=u,ti(s,f)}function ti(s,a){s.lanes|=a;var u=s.alternate;for(u!==null&&(u.lanes|=a),u=s,s=s.return;s!==null;)s.childLanes|=a,u=s.alternate,u!==null&&(u.childLanes|=a),u=s,s=s.return;return u.tag===3?u.stateNode:null}var $i=!1;function Df(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function i_(s,a){s=s.updateQueue,a.updateQueue===s&&(a.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,effects:s.effects})}function ni(s,a){return{eventTime:s,lane:a,tag:0,payload:null,callback:null,next:null}}function Hi(s,a,u){var f=s.updateQueue;if(f===null)return null;if(f=f.shared,(Ue&2)!==0){var m=f.pending;return m===null?a.next=a:(a.next=m.next,m.next=a),f.pending=a,ti(s,u)}return m=f.interleaved,m===null?(a.next=a,Nf(f)):(a.next=m.next,m.next=a),f.interleaved=a,ti(s,u)}function Du(s,a,u){if(a=a.updateQueue,a!==null&&(a=a.shared,(u&4194240)!==0)){var f=a.lanes;f&=s.pendingLanes,u|=f,a.lanes=u,hl(s,u)}}function s_(s,a){var u=s.updateQueue,f=s.alternate;if(f!==null&&(f=f.updateQueue,u===f)){var m=null,y=null;if(u=u.firstBaseUpdate,u!==null){do{var x={eventTime:u.eventTime,lane:u.lane,tag:u.tag,payload:u.payload,callback:u.callback,next:null};y===null?m=y=x:y=y.next=x,u=u.next}while(u!==null);y===null?m=y=a:y=y.next=a}else m=y=a;u={baseState:f.baseState,firstBaseUpdate:m,lastBaseUpdate:y,shared:f.shared,effects:f.effects},s.updateQueue=u;return}s=u.lastBaseUpdate,s===null?u.firstBaseUpdate=a:s.next=a,u.lastBaseUpdate=a}function Ou(s,a,u,f){var m=s.updateQueue;$i=!1;var y=m.firstBaseUpdate,x=m.lastBaseUpdate,M=m.shared.pending;if(M!==null){m.shared.pending=null;var V=M,q=V.next;V.next=null,x===null?y=q:x.next=q,x=V;var ee=s.alternate;ee!==null&&(ee=ee.updateQueue,M=ee.lastBaseUpdate,M!==x&&(M===null?ee.firstBaseUpdate=q:M.next=q,ee.lastBaseUpdate=V))}if(y!==null){var ne=m.baseState;x=0,ee=q=V=null,M=y;do{var Z=M.lane,le=M.eventTime;if((f&Z)===Z){ee!==null&&(ee=ee.next={eventTime:le,lane:0,tag:M.tag,payload:M.payload,callback:M.callback,next:null});e:{var he=s,de=M;switch(Z=a,le=u,de.tag){case 1:if(he=de.payload,typeof he=="function"){ne=he.call(le,ne,Z);break e}ne=he;break e;case 3:he.flags=he.flags&-65537|128;case 0:if(he=de.payload,Z=typeof he=="function"?he.call(le,ne,Z):he,Z==null)break e;ne=oe({},ne,Z);break e;case 2:$i=!0}}M.callback!==null&&M.lane!==0&&(s.flags|=64,Z=m.effects,Z===null?m.effects=[M]:Z.push(M))}else le={eventTime:le,lane:Z,tag:M.tag,payload:M.payload,callback:M.callback,next:null},ee===null?(q=ee=le,V=ne):ee=ee.next=le,x|=Z;if(M=M.next,M===null){if(M=m.shared.pending,M===null)break;Z=M,M=Z.next,Z.next=null,m.lastBaseUpdate=Z,m.shared.pending=null}}while(!0);if(ee===null&&(V=ne),m.baseState=V,m.firstBaseUpdate=q,m.lastBaseUpdate=ee,a=m.shared.interleaved,a!==null){m=a;do x|=m.lane,m=m.next;while(m!==a)}else y===null&&(m.shared.lanes=0);$s|=x,s.lanes=x,s.memoizedState=ne}}function o_(s,a,u){if(s=a.effects,a.effects=null,s!==null)for(a=0;a<s.length;a++){var f=s[a],m=f.callback;if(m!==null){if(f.callback=null,f=u,typeof m!="function")throw Error(t(191,m));m.call(f)}}}var Pl={},br=Ui(Pl),Nl=Ui(Pl),Dl=Ui(Pl);function zs(s){if(s===Pl)throw Error(t(174));return s}function Of(s,a){switch(Ze(Dl,a),Ze(Nl,s),Ze(br,Pl),s=a.nodeType,s){case 9:case 11:a=(a=a.documentElement)?a.namespaceURI:No(null,"");break;default:s=s===8?a.parentNode:a,a=s.namespaceURI||null,s=s.tagName,a=No(a,s)}nt(br),Ze(br,a)}function ha(){nt(br),nt(Nl),nt(Dl)}function a_(s){zs(Dl.current);var a=zs(br.current),u=No(a,s.type);a!==u&&(Ze(Nl,s),Ze(br,u))}function Mf(s){Nl.current===s&&(nt(br),nt(Nl))}var ot=Ui(0);function Mu(s){for(var a=s;a!==null;){if(a.tag===13){var u=a.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||u.data==="$!"))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var Lf=[];function Vf(){for(var s=0;s<Lf.length;s++)Lf[s]._workInProgressVersionPrimary=null;Lf.length=0}var Lu=K.ReactCurrentDispatcher,Ff=K.ReactCurrentBatchConfig,Bs=0,at=null,St=null,Nt=null,Vu=!1,Ol=!1,Ml=0,OS=0;function Kt(){throw Error(t(321))}function jf(s,a){if(a===null)return!1;for(var u=0;u<a.length&&u<s.length;u++)if(!Jn(s[u],a[u]))return!1;return!0}function Uf(s,a,u,f,m,y){if(Bs=y,at=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,Lu.current=s===null||s.memoizedState===null?FS:jS,s=u(f,m),Ol){y=0;do{if(Ol=!1,Ml=0,25<=y)throw Error(t(301));y+=1,Nt=St=null,a.updateQueue=null,Lu.current=US,s=u(f,m)}while(Ol)}if(Lu.current=Uu,a=St!==null&&St.next!==null,Bs=0,Nt=St=at=null,Vu=!1,a)throw Error(t(300));return s}function zf(){var s=Ml!==0;return Ml=0,s}function Ir(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Nt===null?at.memoizedState=Nt=s:Nt=Nt.next=s,Nt}function Ln(){if(St===null){var s=at.alternate;s=s!==null?s.memoizedState:null}else s=St.next;var a=Nt===null?at.memoizedState:Nt.next;if(a!==null)Nt=a,St=s;else{if(s===null)throw Error(t(310));St=s,s={memoizedState:St.memoizedState,baseState:St.baseState,baseQueue:St.baseQueue,queue:St.queue,next:null},Nt===null?at.memoizedState=Nt=s:Nt=Nt.next=s}return Nt}function Ll(s,a){return typeof a=="function"?a(s):a}function Bf(s){var a=Ln(),u=a.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=s;var f=St,m=f.baseQueue,y=u.pending;if(y!==null){if(m!==null){var x=m.next;m.next=y.next,y.next=x}f.baseQueue=m=y,u.pending=null}if(m!==null){y=m.next,f=f.baseState;var M=x=null,V=null,q=y;do{var ee=q.lane;if((Bs&ee)===ee)V!==null&&(V=V.next={lane:0,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null}),f=q.hasEagerState?q.eagerState:s(f,q.action);else{var ne={lane:ee,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null};V===null?(M=V=ne,x=f):V=V.next=ne,at.lanes|=ee,$s|=ee}q=q.next}while(q!==null&&q!==y);V===null?x=f:V.next=M,Jn(f,a.memoizedState)||(un=!0),a.memoizedState=f,a.baseState=x,a.baseQueue=V,u.lastRenderedState=f}if(s=u.interleaved,s!==null){m=s;do y=m.lane,at.lanes|=y,$s|=y,m=m.next;while(m!==s)}else m===null&&(u.lanes=0);return[a.memoizedState,u.dispatch]}function $f(s){var a=Ln(),u=a.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=s;var f=u.dispatch,m=u.pending,y=a.memoizedState;if(m!==null){u.pending=null;var x=m=m.next;do y=s(y,x.action),x=x.next;while(x!==m);Jn(y,a.memoizedState)||(un=!0),a.memoizedState=y,a.baseQueue===null&&(a.baseState=y),u.lastRenderedState=y}return[y,f]}function l_(){}function c_(s,a){var u=at,f=Ln(),m=a(),y=!Jn(f.memoizedState,m);if(y&&(f.memoizedState=m,un=!0),f=f.queue,Hf(d_.bind(null,u,f,s),[s]),f.getSnapshot!==a||y||Nt!==null&&Nt.memoizedState.tag&1){if(u.flags|=2048,Vl(9,h_.bind(null,u,f,m,a),void 0,null),Dt===null)throw Error(t(349));(Bs&30)!==0||u_(u,a,m)}return m}function u_(s,a,u){s.flags|=16384,s={getSnapshot:a,value:u},a=at.updateQueue,a===null?(a={lastEffect:null,stores:null},at.updateQueue=a,a.stores=[s]):(u=a.stores,u===null?a.stores=[s]:u.push(s))}function h_(s,a,u,f){a.value=u,a.getSnapshot=f,f_(a)&&p_(s)}function d_(s,a,u){return u(function(){f_(a)&&p_(s)})}function f_(s){var a=s.getSnapshot;s=s.value;try{var u=a();return!Jn(s,u)}catch{return!0}}function p_(s){var a=ti(s,1);a!==null&&rr(a,s,1,-1)}function g_(s){var a=Ir();return typeof s=="function"&&(s=s()),a.memoizedState=a.baseState=s,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ll,lastRenderedState:s},a.queue=s,s=s.dispatch=VS.bind(null,at,s),[a.memoizedState,s]}function Vl(s,a,u,f){return s={tag:s,create:a,destroy:u,deps:f,next:null},a=at.updateQueue,a===null?(a={lastEffect:null,stores:null},at.updateQueue=a,a.lastEffect=s.next=s):(u=a.lastEffect,u===null?a.lastEffect=s.next=s:(f=u.next,u.next=s,s.next=f,a.lastEffect=s)),s}function m_(){return Ln().memoizedState}function Fu(s,a,u,f){var m=Ir();at.flags|=s,m.memoizedState=Vl(1|a,u,void 0,f===void 0?null:f)}function ju(s,a,u,f){var m=Ln();f=f===void 0?null:f;var y=void 0;if(St!==null){var x=St.memoizedState;if(y=x.destroy,f!==null&&jf(f,x.deps)){m.memoizedState=Vl(a,u,y,f);return}}at.flags|=s,m.memoizedState=Vl(1|a,u,y,f)}function y_(s,a){return Fu(8390656,8,s,a)}function Hf(s,a){return ju(2048,8,s,a)}function __(s,a){return ju(4,2,s,a)}function v_(s,a){return ju(4,4,s,a)}function w_(s,a){if(typeof a=="function")return s=s(),a(s),function(){a(null)};if(a!=null)return s=s(),a.current=s,function(){a.current=null}}function E_(s,a,u){return u=u!=null?u.concat([s]):null,ju(4,4,w_.bind(null,a,s),u)}function Wf(){}function x_(s,a){var u=Ln();a=a===void 0?null:a;var f=u.memoizedState;return f!==null&&a!==null&&jf(a,f[1])?f[0]:(u.memoizedState=[s,a],s)}function T_(s,a){var u=Ln();a=a===void 0?null:a;var f=u.memoizedState;return f!==null&&a!==null&&jf(a,f[1])?f[0]:(s=s(),u.memoizedState=[s,a],s)}function b_(s,a,u){return(Bs&21)===0?(s.baseState&&(s.baseState=!1,un=!0),s.memoizedState=u):(Jn(u,a)||(u=cl(),at.lanes|=u,$s|=u,s.baseState=!0),a)}function MS(s,a){var u=Ve;Ve=u!==0&&4>u?u:4,s(!0);var f=Ff.transition;Ff.transition={};try{s(!1),a()}finally{Ve=u,Ff.transition=f}}function I_(){return Ln().memoizedState}function LS(s,a,u){var f=Gi(s);if(u={lane:f,action:u,hasEagerState:!1,eagerState:null,next:null},S_(s))k_(a,u);else if(u=r_(s,a,u,f),u!==null){var m=sn();rr(u,s,f,m),A_(u,a,f)}}function VS(s,a,u){var f=Gi(s),m={lane:f,action:u,hasEagerState:!1,eagerState:null,next:null};if(S_(s))k_(a,m);else{var y=s.alternate;if(s.lanes===0&&(y===null||y.lanes===0)&&(y=a.lastRenderedReducer,y!==null))try{var x=a.lastRenderedState,M=y(x,u);if(m.hasEagerState=!0,m.eagerState=M,Jn(M,x)){var V=a.interleaved;V===null?(m.next=m,Nf(a)):(m.next=V.next,V.next=m),a.interleaved=m;return}}catch{}finally{}u=r_(s,a,m,f),u!==null&&(m=sn(),rr(u,s,f,m),A_(u,a,f))}}function S_(s){var a=s.alternate;return s===at||a!==null&&a===at}function k_(s,a){Ol=Vu=!0;var u=s.pending;u===null?a.next=a:(a.next=u.next,u.next=a),s.pending=a}function A_(s,a,u){if((u&4194240)!==0){var f=a.lanes;f&=s.pendingLanes,u|=f,a.lanes=u,hl(s,u)}}var Uu={readContext:Mn,useCallback:Kt,useContext:Kt,useEffect:Kt,useImperativeHandle:Kt,useInsertionEffect:Kt,useLayoutEffect:Kt,useMemo:Kt,useReducer:Kt,useRef:Kt,useState:Kt,useDebugValue:Kt,useDeferredValue:Kt,useTransition:Kt,useMutableSource:Kt,useSyncExternalStore:Kt,useId:Kt,unstable_isNewReconciler:!1},FS={readContext:Mn,useCallback:function(s,a){return Ir().memoizedState=[s,a===void 0?null:a],s},useContext:Mn,useEffect:y_,useImperativeHandle:function(s,a,u){return u=u!=null?u.concat([s]):null,Fu(4194308,4,w_.bind(null,a,s),u)},useLayoutEffect:function(s,a){return Fu(4194308,4,s,a)},useInsertionEffect:function(s,a){return Fu(4,2,s,a)},useMemo:function(s,a){var u=Ir();return a=a===void 0?null:a,s=s(),u.memoizedState=[s,a],s},useReducer:function(s,a,u){var f=Ir();return a=u!==void 0?u(a):a,f.memoizedState=f.baseState=a,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:a},f.queue=s,s=s.dispatch=LS.bind(null,at,s),[f.memoizedState,s]},useRef:function(s){var a=Ir();return s={current:s},a.memoizedState=s},useState:g_,useDebugValue:Wf,useDeferredValue:function(s){return Ir().memoizedState=s},useTransition:function(){var s=g_(!1),a=s[0];return s=MS.bind(null,s[1]),Ir().memoizedState=s,[a,s]},useMutableSource:function(){},useSyncExternalStore:function(s,a,u){var f=at,m=Ir();if(st){if(u===void 0)throw Error(t(407));u=u()}else{if(u=a(),Dt===null)throw Error(t(349));(Bs&30)!==0||u_(f,a,u)}m.memoizedState=u;var y={value:u,getSnapshot:a};return m.queue=y,y_(d_.bind(null,f,y,s),[s]),f.flags|=2048,Vl(9,h_.bind(null,f,y,u,a),void 0,null),u},useId:function(){var s=Ir(),a=Dt.identifierPrefix;if(st){var u=ei,f=Zr;u=(f&~(1<<32-wn(f)-1)).toString(32)+u,a=":"+a+"R"+u,u=Ml++,0<u&&(a+="H"+u.toString(32)),a+=":"}else u=OS++,a=":"+a+"r"+u.toString(32)+":";return s.memoizedState=a},unstable_isNewReconciler:!1},jS={readContext:Mn,useCallback:x_,useContext:Mn,useEffect:Hf,useImperativeHandle:E_,useInsertionEffect:__,useLayoutEffect:v_,useMemo:T_,useReducer:Bf,useRef:m_,useState:function(){return Bf(Ll)},useDebugValue:Wf,useDeferredValue:function(s){var a=Ln();return b_(a,St.memoizedState,s)},useTransition:function(){var s=Bf(Ll)[0],a=Ln().memoizedState;return[s,a]},useMutableSource:l_,useSyncExternalStore:c_,useId:I_,unstable_isNewReconciler:!1},US={readContext:Mn,useCallback:x_,useContext:Mn,useEffect:Hf,useImperativeHandle:E_,useInsertionEffect:__,useLayoutEffect:v_,useMemo:T_,useReducer:$f,useRef:m_,useState:function(){return $f(Ll)},useDebugValue:Wf,useDeferredValue:function(s){var a=Ln();return St===null?a.memoizedState=s:b_(a,St.memoizedState,s)},useTransition:function(){var s=$f(Ll)[0],a=Ln().memoizedState;return[s,a]},useMutableSource:l_,useSyncExternalStore:c_,useId:I_,unstable_isNewReconciler:!1};function er(s,a){if(s&&s.defaultProps){a=oe({},a),s=s.defaultProps;for(var u in s)a[u]===void 0&&(a[u]=s[u]);return a}return a}function qf(s,a,u,f){a=s.memoizedState,u=u(f,a),u=u==null?a:oe({},a,u),s.memoizedState=u,s.lanes===0&&(s.updateQueue.baseState=u)}var zu={isMounted:function(s){return(s=s._reactInternals)?Yn(s)===s:!1},enqueueSetState:function(s,a,u){s=s._reactInternals;var f=sn(),m=Gi(s),y=ni(f,m);y.payload=a,u!=null&&(y.callback=u),a=Hi(s,y,m),a!==null&&(rr(a,s,m,f),Du(a,s,m))},enqueueReplaceState:function(s,a,u){s=s._reactInternals;var f=sn(),m=Gi(s),y=ni(f,m);y.tag=1,y.payload=a,u!=null&&(y.callback=u),a=Hi(s,y,m),a!==null&&(rr(a,s,m,f),Du(a,s,m))},enqueueForceUpdate:function(s,a){s=s._reactInternals;var u=sn(),f=Gi(s),m=ni(u,f);m.tag=2,a!=null&&(m.callback=a),a=Hi(s,m,f),a!==null&&(rr(a,s,f,u),Du(a,s,f))}};function R_(s,a,u,f,m,y,x){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(f,y,x):a.prototype&&a.prototype.isPureReactComponent?!Tl(u,f)||!Tl(m,y):!0}function C_(s,a,u){var f=!1,m=zi,y=a.contextType;return typeof y=="object"&&y!==null?y=Mn(y):(m=cn(a)?Vs:qt.current,f=a.contextTypes,y=(f=f!=null)?ia(s,m):zi),a=new a(u,y),s.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=zu,s.stateNode=a,a._reactInternals=s,f&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=m,s.__reactInternalMemoizedMaskedChildContext=y),a}function P_(s,a,u,f){s=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(u,f),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(u,f),a.state!==s&&zu.enqueueReplaceState(a,a.state,null)}function Kf(s,a,u,f){var m=s.stateNode;m.props=u,m.state=s.memoizedState,m.refs={},Df(s);var y=a.contextType;typeof y=="object"&&y!==null?m.context=Mn(y):(y=cn(a)?Vs:qt.current,m.context=ia(s,y)),m.state=s.memoizedState,y=a.getDerivedStateFromProps,typeof y=="function"&&(qf(s,a,y,u),m.state=s.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(a=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),a!==m.state&&zu.enqueueReplaceState(m,m.state,null),Ou(s,u,m,f),m.state=s.memoizedState),typeof m.componentDidMount=="function"&&(s.flags|=4194308)}function da(s,a){try{var u="",f=a;do u+=Ne(f),f=f.return;while(f);var m=u}catch(y){m=`
Error generating stack: `+y.message+`
`+y.stack}return{value:s,source:a,stack:m,digest:null}}function Gf(s,a,u){return{value:s,source:null,stack:u??null,digest:a??null}}function Qf(s,a){try{console.error(a.value)}catch(u){setTimeout(function(){throw u})}}var zS=typeof WeakMap=="function"?WeakMap:Map;function N_(s,a,u){u=ni(-1,u),u.tag=3,u.payload={element:null};var f=a.value;return u.callback=function(){Gu||(Gu=!0,up=f),Qf(s,a)},u}function D_(s,a,u){u=ni(-1,u),u.tag=3;var f=s.type.getDerivedStateFromError;if(typeof f=="function"){var m=a.value;u.payload=function(){return f(m)},u.callback=function(){Qf(s,a)}}var y=s.stateNode;return y!==null&&typeof y.componentDidCatch=="function"&&(u.callback=function(){Qf(s,a),typeof f!="function"&&(qi===null?qi=new Set([this]):qi.add(this));var x=a.stack;this.componentDidCatch(a.value,{componentStack:x!==null?x:""})}),u}function O_(s,a,u){var f=s.pingCache;if(f===null){f=s.pingCache=new zS;var m=new Set;f.set(a,m)}else m=f.get(a),m===void 0&&(m=new Set,f.set(a,m));m.has(u)||(m.add(u),s=t1.bind(null,s,a,u),a.then(s,s))}function M_(s){do{var a;if((a=s.tag===13)&&(a=s.memoizedState,a=a!==null?a.dehydrated!==null:!0),a)return s;s=s.return}while(s!==null);return null}function L_(s,a,u,f,m){return(s.mode&1)===0?(s===a?s.flags|=65536:(s.flags|=128,u.flags|=131072,u.flags&=-52805,u.tag===1&&(u.alternate===null?u.tag=17:(a=ni(-1,1),a.tag=2,Hi(u,a,1))),u.lanes|=1),s):(s.flags|=65536,s.lanes=m,s)}var BS=K.ReactCurrentOwner,un=!1;function rn(s,a,u,f){a.child=s===null?n_(a,null,u,f):la(a,s.child,u,f)}function V_(s,a,u,f,m){u=u.render;var y=a.ref;return ua(a,m),f=Uf(s,a,u,f,y,m),u=zf(),s!==null&&!un?(a.updateQueue=s.updateQueue,a.flags&=-2053,s.lanes&=~m,ri(s,a,m)):(st&&u&&Tf(a),a.flags|=1,rn(s,a,f,m),a.child)}function F_(s,a,u,f,m){if(s===null){var y=u.type;return typeof y=="function"&&!yp(y)&&y.defaultProps===void 0&&u.compare===null&&u.defaultProps===void 0?(a.tag=15,a.type=y,j_(s,a,y,f,m)):(s=eh(u.type,null,f,a,a.mode,m),s.ref=a.ref,s.return=a,a.child=s)}if(y=s.child,(s.lanes&m)===0){var x=y.memoizedProps;if(u=u.compare,u=u!==null?u:Tl,u(x,f)&&s.ref===a.ref)return ri(s,a,m)}return a.flags|=1,s=Yi(y,f),s.ref=a.ref,s.return=a,a.child=s}function j_(s,a,u,f,m){if(s!==null){var y=s.memoizedProps;if(Tl(y,f)&&s.ref===a.ref)if(un=!1,a.pendingProps=f=y,(s.lanes&m)!==0)(s.flags&131072)!==0&&(un=!0);else return a.lanes=s.lanes,ri(s,a,m)}return Yf(s,a,u,f,m)}function U_(s,a,u){var f=a.pendingProps,m=f.children,y=s!==null?s.memoizedState:null;if(f.mode==="hidden")if((a.mode&1)===0)a.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ze(pa,kn),kn|=u;else{if((u&1073741824)===0)return s=y!==null?y.baseLanes|u:u,a.lanes=a.childLanes=1073741824,a.memoizedState={baseLanes:s,cachePool:null,transitions:null},a.updateQueue=null,Ze(pa,kn),kn|=s,null;a.memoizedState={baseLanes:0,cachePool:null,transitions:null},f=y!==null?y.baseLanes:u,Ze(pa,kn),kn|=f}else y!==null?(f=y.baseLanes|u,a.memoizedState=null):f=u,Ze(pa,kn),kn|=f;return rn(s,a,m,u),a.child}function z_(s,a){var u=a.ref;(s===null&&u!==null||s!==null&&s.ref!==u)&&(a.flags|=512,a.flags|=2097152)}function Yf(s,a,u,f,m){var y=cn(u)?Vs:qt.current;return y=ia(a,y),ua(a,m),u=Uf(s,a,u,f,y,m),f=zf(),s!==null&&!un?(a.updateQueue=s.updateQueue,a.flags&=-2053,s.lanes&=~m,ri(s,a,m)):(st&&f&&Tf(a),a.flags|=1,rn(s,a,u,m),a.child)}function B_(s,a,u,f,m){if(cn(u)){var y=!0;Iu(a)}else y=!1;if(ua(a,m),a.stateNode===null)$u(s,a),C_(a,u,f),Kf(a,u,f,m),f=!0;else if(s===null){var x=a.stateNode,M=a.memoizedProps;x.props=M;var V=x.context,q=u.contextType;typeof q=="object"&&q!==null?q=Mn(q):(q=cn(u)?Vs:qt.current,q=ia(a,q));var ee=u.getDerivedStateFromProps,ne=typeof ee=="function"||typeof x.getSnapshotBeforeUpdate=="function";ne||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(M!==f||V!==q)&&P_(a,x,f,q),$i=!1;var Z=a.memoizedState;x.state=Z,Ou(a,f,x,m),V=a.memoizedState,M!==f||Z!==V||ln.current||$i?(typeof ee=="function"&&(qf(a,u,ee,f),V=a.memoizedState),(M=$i||R_(a,u,M,f,Z,V,q))?(ne||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount()),typeof x.componentDidMount=="function"&&(a.flags|=4194308)):(typeof x.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=f,a.memoizedState=V),x.props=f,x.state=V,x.context=q,f=M):(typeof x.componentDidMount=="function"&&(a.flags|=4194308),f=!1)}else{x=a.stateNode,i_(s,a),M=a.memoizedProps,q=a.type===a.elementType?M:er(a.type,M),x.props=q,ne=a.pendingProps,Z=x.context,V=u.contextType,typeof V=="object"&&V!==null?V=Mn(V):(V=cn(u)?Vs:qt.current,V=ia(a,V));var le=u.getDerivedStateFromProps;(ee=typeof le=="function"||typeof x.getSnapshotBeforeUpdate=="function")||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(M!==ne||Z!==V)&&P_(a,x,f,V),$i=!1,Z=a.memoizedState,x.state=Z,Ou(a,f,x,m);var he=a.memoizedState;M!==ne||Z!==he||ln.current||$i?(typeof le=="function"&&(qf(a,u,le,f),he=a.memoizedState),(q=$i||R_(a,u,q,f,Z,he,V)||!1)?(ee||typeof x.UNSAFE_componentWillUpdate!="function"&&typeof x.componentWillUpdate!="function"||(typeof x.componentWillUpdate=="function"&&x.componentWillUpdate(f,he,V),typeof x.UNSAFE_componentWillUpdate=="function"&&x.UNSAFE_componentWillUpdate(f,he,V)),typeof x.componentDidUpdate=="function"&&(a.flags|=4),typeof x.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof x.componentDidUpdate!="function"||M===s.memoizedProps&&Z===s.memoizedState||(a.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||M===s.memoizedProps&&Z===s.memoizedState||(a.flags|=1024),a.memoizedProps=f,a.memoizedState=he),x.props=f,x.state=he,x.context=V,f=q):(typeof x.componentDidUpdate!="function"||M===s.memoizedProps&&Z===s.memoizedState||(a.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||M===s.memoizedProps&&Z===s.memoizedState||(a.flags|=1024),f=!1)}return Xf(s,a,u,f,y,m)}function Xf(s,a,u,f,m,y){z_(s,a);var x=(a.flags&128)!==0;if(!f&&!x)return m&&Ky(a,u,!1),ri(s,a,y);f=a.stateNode,BS.current=a;var M=x&&typeof u.getDerivedStateFromError!="function"?null:f.render();return a.flags|=1,s!==null&&x?(a.child=la(a,s.child,null,y),a.child=la(a,null,M,y)):rn(s,a,M,y),a.memoizedState=f.state,m&&Ky(a,u,!0),a.child}function $_(s){var a=s.stateNode;a.pendingContext?Wy(s,a.pendingContext,a.pendingContext!==a.context):a.context&&Wy(s,a.context,!1),Of(s,a.containerInfo)}function H_(s,a,u,f,m){return aa(),kf(m),a.flags|=256,rn(s,a,u,f),a.child}var Jf={dehydrated:null,treeContext:null,retryLane:0};function Zf(s){return{baseLanes:s,cachePool:null,transitions:null}}function W_(s,a,u){var f=a.pendingProps,m=ot.current,y=!1,x=(a.flags&128)!==0,M;if((M=x)||(M=s!==null&&s.memoizedState===null?!1:(m&2)!==0),M?(y=!0,a.flags&=-129):(s===null||s.memoizedState!==null)&&(m|=1),Ze(ot,m&1),s===null)return Sf(a),s=a.memoizedState,s!==null&&(s=s.dehydrated,s!==null)?((a.mode&1)===0?a.lanes=1:s.data==="$!"?a.lanes=8:a.lanes=1073741824,null):(x=f.children,s=f.fallback,y?(f=a.mode,y=a.child,x={mode:"hidden",children:x},(f&1)===0&&y!==null?(y.childLanes=0,y.pendingProps=x):y=th(x,f,0,null),s=Ks(s,f,u,null),y.return=a,s.return=a,y.sibling=s,a.child=y,a.child.memoizedState=Zf(u),a.memoizedState=Jf,s):ep(a,x));if(m=s.memoizedState,m!==null&&(M=m.dehydrated,M!==null))return $S(s,a,x,f,M,m,u);if(y){y=f.fallback,x=a.mode,m=s.child,M=m.sibling;var V={mode:"hidden",children:f.children};return(x&1)===0&&a.child!==m?(f=a.child,f.childLanes=0,f.pendingProps=V,a.deletions=null):(f=Yi(m,V),f.subtreeFlags=m.subtreeFlags&14680064),M!==null?y=Yi(M,y):(y=Ks(y,x,u,null),y.flags|=2),y.return=a,f.return=a,f.sibling=y,a.child=f,f=y,y=a.child,x=s.child.memoizedState,x=x===null?Zf(u):{baseLanes:x.baseLanes|u,cachePool:null,transitions:x.transitions},y.memoizedState=x,y.childLanes=s.childLanes&~u,a.memoizedState=Jf,f}return y=s.child,s=y.sibling,f=Yi(y,{mode:"visible",children:f.children}),(a.mode&1)===0&&(f.lanes=u),f.return=a,f.sibling=null,s!==null&&(u=a.deletions,u===null?(a.deletions=[s],a.flags|=16):u.push(s)),a.child=f,a.memoizedState=null,f}function ep(s,a){return a=th({mode:"visible",children:a},s.mode,0,null),a.return=s,s.child=a}function Bu(s,a,u,f){return f!==null&&kf(f),la(a,s.child,null,u),s=ep(a,a.pendingProps.children),s.flags|=2,a.memoizedState=null,s}function $S(s,a,u,f,m,y,x){if(u)return a.flags&256?(a.flags&=-257,f=Gf(Error(t(422))),Bu(s,a,x,f)):a.memoizedState!==null?(a.child=s.child,a.flags|=128,null):(y=f.fallback,m=a.mode,f=th({mode:"visible",children:f.children},m,0,null),y=Ks(y,m,x,null),y.flags|=2,f.return=a,y.return=a,f.sibling=y,a.child=f,(a.mode&1)!==0&&la(a,s.child,null,x),a.child.memoizedState=Zf(x),a.memoizedState=Jf,y);if((a.mode&1)===0)return Bu(s,a,x,null);if(m.data==="$!"){if(f=m.nextSibling&&m.nextSibling.dataset,f)var M=f.dgst;return f=M,y=Error(t(419)),f=Gf(y,f,void 0),Bu(s,a,x,f)}if(M=(x&s.childLanes)!==0,un||M){if(f=Dt,f!==null){switch(x&-x){case 4:m=2;break;case 16:m=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:m=32;break;case 536870912:m=268435456;break;default:m=0}m=(m&(f.suspendedLanes|x))!==0?0:m,m!==0&&m!==y.retryLane&&(y.retryLane=m,ti(s,m),rr(f,s,m,-1))}return mp(),f=Gf(Error(t(421))),Bu(s,a,x,f)}return m.data==="$?"?(a.flags|=128,a.child=s.child,a=n1.bind(null,s),m._reactRetry=a,null):(s=y.treeContext,Sn=ji(m.nextSibling),In=a,st=!0,Zn=null,s!==null&&(Dn[On++]=Zr,Dn[On++]=ei,Dn[On++]=Fs,Zr=s.id,ei=s.overflow,Fs=a),a=ep(a,f.children),a.flags|=4096,a)}function q_(s,a,u){s.lanes|=a;var f=s.alternate;f!==null&&(f.lanes|=a),Pf(s.return,a,u)}function tp(s,a,u,f,m){var y=s.memoizedState;y===null?s.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:f,tail:u,tailMode:m}:(y.isBackwards=a,y.rendering=null,y.renderingStartTime=0,y.last=f,y.tail=u,y.tailMode=m)}function K_(s,a,u){var f=a.pendingProps,m=f.revealOrder,y=f.tail;if(rn(s,a,f.children,u),f=ot.current,(f&2)!==0)f=f&1|2,a.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=a.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&q_(s,u,a);else if(s.tag===19)q_(s,u,a);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===a)break e;for(;s.sibling===null;){if(s.return===null||s.return===a)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}f&=1}if(Ze(ot,f),(a.mode&1)===0)a.memoizedState=null;else switch(m){case"forwards":for(u=a.child,m=null;u!==null;)s=u.alternate,s!==null&&Mu(s)===null&&(m=u),u=u.sibling;u=m,u===null?(m=a.child,a.child=null):(m=u.sibling,u.sibling=null),tp(a,!1,m,u,y);break;case"backwards":for(u=null,m=a.child,a.child=null;m!==null;){if(s=m.alternate,s!==null&&Mu(s)===null){a.child=m;break}s=m.sibling,m.sibling=u,u=m,m=s}tp(a,!0,u,null,y);break;case"together":tp(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function $u(s,a){(a.mode&1)===0&&s!==null&&(s.alternate=null,a.alternate=null,a.flags|=2)}function ri(s,a,u){if(s!==null&&(a.dependencies=s.dependencies),$s|=a.lanes,(u&a.childLanes)===0)return null;if(s!==null&&a.child!==s.child)throw Error(t(153));if(a.child!==null){for(s=a.child,u=Yi(s,s.pendingProps),a.child=u,u.return=a;s.sibling!==null;)s=s.sibling,u=u.sibling=Yi(s,s.pendingProps),u.return=a;u.sibling=null}return a.child}function HS(s,a,u){switch(a.tag){case 3:$_(a),aa();break;case 5:a_(a);break;case 1:cn(a.type)&&Iu(a);break;case 4:Of(a,a.stateNode.containerInfo);break;case 10:var f=a.type._context,m=a.memoizedProps.value;Ze(Pu,f._currentValue),f._currentValue=m;break;case 13:if(f=a.memoizedState,f!==null)return f.dehydrated!==null?(Ze(ot,ot.current&1),a.flags|=128,null):(u&a.child.childLanes)!==0?W_(s,a,u):(Ze(ot,ot.current&1),s=ri(s,a,u),s!==null?s.sibling:null);Ze(ot,ot.current&1);break;case 19:if(f=(u&a.childLanes)!==0,(s.flags&128)!==0){if(f)return K_(s,a,u);a.flags|=128}if(m=a.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),Ze(ot,ot.current),f)break;return null;case 22:case 23:return a.lanes=0,U_(s,a,u)}return ri(s,a,u)}var G_,np,Q_,Y_;G_=function(s,a){for(var u=a.child;u!==null;){if(u.tag===5||u.tag===6)s.appendChild(u.stateNode);else if(u.tag!==4&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===a)break;for(;u.sibling===null;){if(u.return===null||u.return===a)return;u=u.return}u.sibling.return=u.return,u=u.sibling}},np=function(){},Q_=function(s,a,u,f){var m=s.memoizedProps;if(m!==f){s=a.stateNode,zs(br.current);var y=null;switch(u){case"input":m=Co(s,m),f=Co(s,f),y=[];break;case"select":m=oe({},m,{value:void 0}),f=oe({},f,{value:void 0}),y=[];break;case"textarea":m=Ja(s,m),f=Ja(s,f),y=[];break;default:typeof m.onClick!="function"&&typeof f.onClick=="function"&&(s.onclick=xu)}Qn(u,f);var x;u=null;for(q in m)if(!f.hasOwnProperty(q)&&m.hasOwnProperty(q)&&m[q]!=null)if(q==="style"){var M=m[q];for(x in M)M.hasOwnProperty(x)&&(u||(u={}),u[x]="")}else q!=="dangerouslySetInnerHTML"&&q!=="children"&&q!=="suppressContentEditableWarning"&&q!=="suppressHydrationWarning"&&q!=="autoFocus"&&(i.hasOwnProperty(q)?y||(y=[]):(y=y||[]).push(q,null));for(q in f){var V=f[q];if(M=m?.[q],f.hasOwnProperty(q)&&V!==M&&(V!=null||M!=null))if(q==="style")if(M){for(x in M)!M.hasOwnProperty(x)||V&&V.hasOwnProperty(x)||(u||(u={}),u[x]="");for(x in V)V.hasOwnProperty(x)&&M[x]!==V[x]&&(u||(u={}),u[x]=V[x])}else u||(y||(y=[]),y.push(q,u)),u=V;else q==="dangerouslySetInnerHTML"?(V=V?V.__html:void 0,M=M?M.__html:void 0,V!=null&&M!==V&&(y=y||[]).push(q,V)):q==="children"?typeof V!="string"&&typeof V!="number"||(y=y||[]).push(q,""+V):q!=="suppressContentEditableWarning"&&q!=="suppressHydrationWarning"&&(i.hasOwnProperty(q)?(V!=null&&q==="onScroll"&&tt("scroll",s),y||M===V||(y=[])):(y=y||[]).push(q,V))}u&&(y=y||[]).push("style",u);var q=y;(a.updateQueue=q)&&(a.flags|=4)}},Y_=function(s,a,u,f){u!==f&&(a.flags|=4)};function Fl(s,a){if(!st)switch(s.tailMode){case"hidden":a=s.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?s.tail=null:u.sibling=null;break;case"collapsed":u=s.tail;for(var f=null;u!==null;)u.alternate!==null&&(f=u),u=u.sibling;f===null?a||s.tail===null?s.tail=null:s.tail.sibling=null:f.sibling=null}}function Gt(s){var a=s.alternate!==null&&s.alternate.child===s.child,u=0,f=0;if(a)for(var m=s.child;m!==null;)u|=m.lanes|m.childLanes,f|=m.subtreeFlags&14680064,f|=m.flags&14680064,m.return=s,m=m.sibling;else for(m=s.child;m!==null;)u|=m.lanes|m.childLanes,f|=m.subtreeFlags,f|=m.flags,m.return=s,m=m.sibling;return s.subtreeFlags|=f,s.childLanes=u,a}function WS(s,a,u){var f=a.pendingProps;switch(bf(a),a.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Gt(a),null;case 1:return cn(a.type)&&bu(),Gt(a),null;case 3:return f=a.stateNode,ha(),nt(ln),nt(qt),Vf(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(s===null||s.child===null)&&(Ru(a)?a.flags|=4:s===null||s.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,Zn!==null&&(fp(Zn),Zn=null))),np(s,a),Gt(a),null;case 5:Mf(a);var m=zs(Dl.current);if(u=a.type,s!==null&&a.stateNode!=null)Q_(s,a,u,f,m),s.ref!==a.ref&&(a.flags|=512,a.flags|=2097152);else{if(!f){if(a.stateNode===null)throw Error(t(166));return Gt(a),null}if(s=zs(br.current),Ru(a)){f=a.stateNode,u=a.type;var y=a.memoizedProps;switch(f[Tr]=a,f[Al]=y,s=(a.mode&1)!==0,u){case"dialog":tt("cancel",f),tt("close",f);break;case"iframe":case"object":case"embed":tt("load",f);break;case"video":case"audio":for(m=0;m<Il.length;m++)tt(Il[m],f);break;case"source":tt("error",f);break;case"img":case"image":case"link":tt("error",f),tt("load",f);break;case"details":tt("toggle",f);break;case"input":Kc(f,y),tt("invalid",f);break;case"select":f._wrapperState={wasMultiple:!!y.multiple},tt("invalid",f);break;case"textarea":Za(f,y),tt("invalid",f)}Qn(u,y),m=null;for(var x in y)if(y.hasOwnProperty(x)){var M=y[x];x==="children"?typeof M=="string"?f.textContent!==M&&(y.suppressHydrationWarning!==!0&&Eu(f.textContent,M,s),m=["children",M]):typeof M=="number"&&f.textContent!==""+M&&(y.suppressHydrationWarning!==!0&&Eu(f.textContent,M,s),m=["children",""+M]):i.hasOwnProperty(x)&&M!=null&&x==="onScroll"&&tt("scroll",f)}switch(u){case"input":Ro(f),Xa(f,y,!0);break;case"textarea":Ro(f),Ti(f);break;case"select":case"option":break;default:typeof y.onClick=="function"&&(f.onclick=xu)}f=m,a.updateQueue=f,f!==null&&(a.flags|=4)}else{x=m.nodeType===9?m:m.ownerDocument,s==="http://www.w3.org/1999/xhtml"&&(s=el(u)),s==="http://www.w3.org/1999/xhtml"?u==="script"?(s=x.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild)):typeof f.is=="string"?s=x.createElement(u,{is:f.is}):(s=x.createElement(u),u==="select"&&(x=s,f.multiple?x.multiple=!0:f.size&&(x.size=f.size))):s=x.createElementNS(s,u),s[Tr]=a,s[Al]=f,G_(s,a,!1,!1),a.stateNode=s;e:{switch(x=Oo(u,f),u){case"dialog":tt("cancel",s),tt("close",s),m=f;break;case"iframe":case"object":case"embed":tt("load",s),m=f;break;case"video":case"audio":for(m=0;m<Il.length;m++)tt(Il[m],s);m=f;break;case"source":tt("error",s),m=f;break;case"img":case"image":case"link":tt("error",s),tt("load",s),m=f;break;case"details":tt("toggle",s),m=f;break;case"input":Kc(s,f),m=Co(s,f),tt("invalid",s);break;case"option":m=f;break;case"select":s._wrapperState={wasMultiple:!!f.multiple},m=oe({},f,{value:void 0}),tt("invalid",s);break;case"textarea":Za(s,f),m=Ja(s,f),tt("invalid",s);break;default:m=f}Qn(u,m),M=m;for(y in M)if(M.hasOwnProperty(y)){var V=M[y];y==="style"?Do(s,V):y==="dangerouslySetInnerHTML"?(V=V?V.__html:void 0,V!=null&&Qc(s,V)):y==="children"?typeof V=="string"?(u!=="textarea"||V!=="")&&xs(s,V):typeof V=="number"&&xs(s,""+V):y!=="suppressContentEditableWarning"&&y!=="suppressHydrationWarning"&&y!=="autoFocus"&&(i.hasOwnProperty(y)?V!=null&&y==="onScroll"&&tt("scroll",s):V!=null&&H(s,y,V,x))}switch(u){case"input":Ro(s),Xa(s,f,!1);break;case"textarea":Ro(s),Ti(s);break;case"option":f.value!=null&&s.setAttribute("value",""+je(f.value));break;case"select":s.multiple=!!f.multiple,y=f.value,y!=null?Gn(s,!!f.multiple,y,!1):f.defaultValue!=null&&Gn(s,!!f.multiple,f.defaultValue,!0);break;default:typeof m.onClick=="function"&&(s.onclick=xu)}switch(u){case"button":case"input":case"select":case"textarea":f=!!f.autoFocus;break e;case"img":f=!0;break e;default:f=!1}}f&&(a.flags|=4)}a.ref!==null&&(a.flags|=512,a.flags|=2097152)}return Gt(a),null;case 6:if(s&&a.stateNode!=null)Y_(s,a,s.memoizedProps,f);else{if(typeof f!="string"&&a.stateNode===null)throw Error(t(166));if(u=zs(Dl.current),zs(br.current),Ru(a)){if(f=a.stateNode,u=a.memoizedProps,f[Tr]=a,(y=f.nodeValue!==u)&&(s=In,s!==null))switch(s.tag){case 3:Eu(f.nodeValue,u,(s.mode&1)!==0);break;case 5:s.memoizedProps.suppressHydrationWarning!==!0&&Eu(f.nodeValue,u,(s.mode&1)!==0)}y&&(a.flags|=4)}else f=(u.nodeType===9?u:u.ownerDocument).createTextNode(f),f[Tr]=a,a.stateNode=f}return Gt(a),null;case 13:if(nt(ot),f=a.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(st&&Sn!==null&&(a.mode&1)!==0&&(a.flags&128)===0)Zy(),aa(),a.flags|=98560,y=!1;else if(y=Ru(a),f!==null&&f.dehydrated!==null){if(s===null){if(!y)throw Error(t(318));if(y=a.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(t(317));y[Tr]=a}else aa(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Gt(a),y=!1}else Zn!==null&&(fp(Zn),Zn=null),y=!0;if(!y)return a.flags&65536?a:null}return(a.flags&128)!==0?(a.lanes=u,a):(f=f!==null,f!==(s!==null&&s.memoizedState!==null)&&f&&(a.child.flags|=8192,(a.mode&1)!==0&&(s===null||(ot.current&1)!==0?kt===0&&(kt=3):mp())),a.updateQueue!==null&&(a.flags|=4),Gt(a),null);case 4:return ha(),np(s,a),s===null&&Sl(a.stateNode.containerInfo),Gt(a),null;case 10:return Cf(a.type._context),Gt(a),null;case 17:return cn(a.type)&&bu(),Gt(a),null;case 19:if(nt(ot),y=a.memoizedState,y===null)return Gt(a),null;if(f=(a.flags&128)!==0,x=y.rendering,x===null)if(f)Fl(y,!1);else{if(kt!==0||s!==null&&(s.flags&128)!==0)for(s=a.child;s!==null;){if(x=Mu(s),x!==null){for(a.flags|=128,Fl(y,!1),f=x.updateQueue,f!==null&&(a.updateQueue=f,a.flags|=4),a.subtreeFlags=0,f=u,u=a.child;u!==null;)y=u,s=f,y.flags&=14680066,x=y.alternate,x===null?(y.childLanes=0,y.lanes=s,y.child=null,y.subtreeFlags=0,y.memoizedProps=null,y.memoizedState=null,y.updateQueue=null,y.dependencies=null,y.stateNode=null):(y.childLanes=x.childLanes,y.lanes=x.lanes,y.child=x.child,y.subtreeFlags=0,y.deletions=null,y.memoizedProps=x.memoizedProps,y.memoizedState=x.memoizedState,y.updateQueue=x.updateQueue,y.type=x.type,s=x.dependencies,y.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),u=u.sibling;return Ze(ot,ot.current&1|2),a.child}s=s.sibling}y.tail!==null&&et()>ga&&(a.flags|=128,f=!0,Fl(y,!1),a.lanes=4194304)}else{if(!f)if(s=Mu(x),s!==null){if(a.flags|=128,f=!0,u=s.updateQueue,u!==null&&(a.updateQueue=u,a.flags|=4),Fl(y,!0),y.tail===null&&y.tailMode==="hidden"&&!x.alternate&&!st)return Gt(a),null}else 2*et()-y.renderingStartTime>ga&&u!==1073741824&&(a.flags|=128,f=!0,Fl(y,!1),a.lanes=4194304);y.isBackwards?(x.sibling=a.child,a.child=x):(u=y.last,u!==null?u.sibling=x:a.child=x,y.last=x)}return y.tail!==null?(a=y.tail,y.rendering=a,y.tail=a.sibling,y.renderingStartTime=et(),a.sibling=null,u=ot.current,Ze(ot,f?u&1|2:u&1),a):(Gt(a),null);case 22:case 23:return gp(),f=a.memoizedState!==null,s!==null&&s.memoizedState!==null!==f&&(a.flags|=8192),f&&(a.mode&1)!==0?(kn&1073741824)!==0&&(Gt(a),a.subtreeFlags&6&&(a.flags|=8192)):Gt(a),null;case 24:return null;case 25:return null}throw Error(t(156,a.tag))}function qS(s,a){switch(bf(a),a.tag){case 1:return cn(a.type)&&bu(),s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 3:return ha(),nt(ln),nt(qt),Vf(),s=a.flags,(s&65536)!==0&&(s&128)===0?(a.flags=s&-65537|128,a):null;case 5:return Mf(a),null;case 13:if(nt(ot),s=a.memoizedState,s!==null&&s.dehydrated!==null){if(a.alternate===null)throw Error(t(340));aa()}return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 19:return nt(ot),null;case 4:return ha(),null;case 10:return Cf(a.type._context),null;case 22:case 23:return gp(),null;case 24:return null;default:return null}}var Hu=!1,Qt=!1,KS=typeof WeakSet=="function"?WeakSet:Set,ue=null;function fa(s,a){var u=s.ref;if(u!==null)if(typeof u=="function")try{u(null)}catch(f){ht(s,a,f)}else u.current=null}function rp(s,a,u){try{u()}catch(f){ht(s,a,f)}}var X_=!1;function GS(s,a){if(gf=Gr,s=Ry(),af(s)){if("selectionStart"in s)var u={start:s.selectionStart,end:s.selectionEnd};else e:{u=(u=s.ownerDocument)&&u.defaultView||window;var f=u.getSelection&&u.getSelection();if(f&&f.rangeCount!==0){u=f.anchorNode;var m=f.anchorOffset,y=f.focusNode;f=f.focusOffset;try{u.nodeType,y.nodeType}catch{u=null;break e}var x=0,M=-1,V=-1,q=0,ee=0,ne=s,Z=null;t:for(;;){for(var le;ne!==u||m!==0&&ne.nodeType!==3||(M=x+m),ne!==y||f!==0&&ne.nodeType!==3||(V=x+f),ne.nodeType===3&&(x+=ne.nodeValue.length),(le=ne.firstChild)!==null;)Z=ne,ne=le;for(;;){if(ne===s)break t;if(Z===u&&++q===m&&(M=x),Z===y&&++ee===f&&(V=x),(le=ne.nextSibling)!==null)break;ne=Z,Z=ne.parentNode}ne=le}u=M===-1||V===-1?null:{start:M,end:V}}else u=null}u=u||{start:0,end:0}}else u=null;for(mf={focusedElem:s,selectionRange:u},Gr=!1,ue=a;ue!==null;)if(a=ue,s=a.child,(a.subtreeFlags&1028)!==0&&s!==null)s.return=a,ue=s;else for(;ue!==null;){a=ue;try{var he=a.alternate;if((a.flags&1024)!==0)switch(a.tag){case 0:case 11:case 15:break;case 1:if(he!==null){var de=he.memoizedProps,mt=he.memoizedState,B=a.stateNode,j=B.getSnapshotBeforeUpdate(a.elementType===a.type?de:er(a.type,de),mt);B.__reactInternalSnapshotBeforeUpdate=j}break;case 3:var W=a.stateNode.containerInfo;W.nodeType===1?W.textContent="":W.nodeType===9&&W.documentElement&&W.removeChild(W.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(ie){ht(a,a.return,ie)}if(s=a.sibling,s!==null){s.return=a.return,ue=s;break}ue=a.return}return he=X_,X_=!1,he}function jl(s,a,u){var f=a.updateQueue;if(f=f!==null?f.lastEffect:null,f!==null){var m=f=f.next;do{if((m.tag&s)===s){var y=m.destroy;m.destroy=void 0,y!==void 0&&rp(a,u,y)}m=m.next}while(m!==f)}}function Wu(s,a){if(a=a.updateQueue,a=a!==null?a.lastEffect:null,a!==null){var u=a=a.next;do{if((u.tag&s)===s){var f=u.create;u.destroy=f()}u=u.next}while(u!==a)}}function ip(s){var a=s.ref;if(a!==null){var u=s.stateNode;switch(s.tag){case 5:s=u;break;default:s=u}typeof a=="function"?a(s):a.current=s}}function J_(s){var a=s.alternate;a!==null&&(s.alternate=null,J_(a)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(a=s.stateNode,a!==null&&(delete a[Tr],delete a[Al],delete a[wf],delete a[CS],delete a[PS])),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}function Z_(s){return s.tag===5||s.tag===3||s.tag===4}function ev(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||Z_(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function sp(s,a,u){var f=s.tag;if(f===5||f===6)s=s.stateNode,a?u.nodeType===8?u.parentNode.insertBefore(s,a):u.insertBefore(s,a):(u.nodeType===8?(a=u.parentNode,a.insertBefore(s,u)):(a=u,a.appendChild(s)),u=u._reactRootContainer,u!=null||a.onclick!==null||(a.onclick=xu));else if(f!==4&&(s=s.child,s!==null))for(sp(s,a,u),s=s.sibling;s!==null;)sp(s,a,u),s=s.sibling}function op(s,a,u){var f=s.tag;if(f===5||f===6)s=s.stateNode,a?u.insertBefore(s,a):u.appendChild(s);else if(f!==4&&(s=s.child,s!==null))for(op(s,a,u),s=s.sibling;s!==null;)op(s,a,u),s=s.sibling}var jt=null,tr=!1;function Wi(s,a,u){for(u=u.child;u!==null;)tv(s,a,u),u=u.sibling}function tv(s,a,u){if(vn&&typeof vn.onCommitFiberUnmount=="function")try{vn.onCommitFiberUnmount(ks,u)}catch{}switch(u.tag){case 5:Qt||fa(u,a);case 6:var f=jt,m=tr;jt=null,Wi(s,a,u),jt=f,tr=m,jt!==null&&(tr?(s=jt,u=u.stateNode,s.nodeType===8?s.parentNode.removeChild(u):s.removeChild(u)):jt.removeChild(u.stateNode));break;case 18:jt!==null&&(tr?(s=jt,u=u.stateNode,s.nodeType===8?vf(s.parentNode,u):s.nodeType===1&&vf(s,u),Mi(s)):vf(jt,u.stateNode));break;case 4:f=jt,m=tr,jt=u.stateNode.containerInfo,tr=!0,Wi(s,a,u),jt=f,tr=m;break;case 0:case 11:case 14:case 15:if(!Qt&&(f=u.updateQueue,f!==null&&(f=f.lastEffect,f!==null))){m=f=f.next;do{var y=m,x=y.destroy;y=y.tag,x!==void 0&&((y&2)!==0||(y&4)!==0)&&rp(u,a,x),m=m.next}while(m!==f)}Wi(s,a,u);break;case 1:if(!Qt&&(fa(u,a),f=u.stateNode,typeof f.componentWillUnmount=="function"))try{f.props=u.memoizedProps,f.state=u.memoizedState,f.componentWillUnmount()}catch(M){ht(u,a,M)}Wi(s,a,u);break;case 21:Wi(s,a,u);break;case 22:u.mode&1?(Qt=(f=Qt)||u.memoizedState!==null,Wi(s,a,u),Qt=f):Wi(s,a,u);break;default:Wi(s,a,u)}}function nv(s){var a=s.updateQueue;if(a!==null){s.updateQueue=null;var u=s.stateNode;u===null&&(u=s.stateNode=new KS),a.forEach(function(f){var m=r1.bind(null,s,f);u.has(f)||(u.add(f),f.then(m,m))})}}function nr(s,a){var u=a.deletions;if(u!==null)for(var f=0;f<u.length;f++){var m=u[f];try{var y=s,x=a,M=x;e:for(;M!==null;){switch(M.tag){case 5:jt=M.stateNode,tr=!1;break e;case 3:jt=M.stateNode.containerInfo,tr=!0;break e;case 4:jt=M.stateNode.containerInfo,tr=!0;break e}M=M.return}if(jt===null)throw Error(t(160));tv(y,x,m),jt=null,tr=!1;var V=m.alternate;V!==null&&(V.return=null),m.return=null}catch(q){ht(m,a,q)}}if(a.subtreeFlags&12854)for(a=a.child;a!==null;)rv(a,s),a=a.sibling}function rv(s,a){var u=s.alternate,f=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:if(nr(a,s),Sr(s),f&4){try{jl(3,s,s.return),Wu(3,s)}catch(de){ht(s,s.return,de)}try{jl(5,s,s.return)}catch(de){ht(s,s.return,de)}}break;case 1:nr(a,s),Sr(s),f&512&&u!==null&&fa(u,u.return);break;case 5:if(nr(a,s),Sr(s),f&512&&u!==null&&fa(u,u.return),s.flags&32){var m=s.stateNode;try{xs(m,"")}catch(de){ht(s,s.return,de)}}if(f&4&&(m=s.stateNode,m!=null)){var y=s.memoizedProps,x=u!==null?u.memoizedProps:y,M=s.type,V=s.updateQueue;if(s.updateQueue=null,V!==null)try{M==="input"&&y.type==="radio"&&y.name!=null&&Po(m,y),Oo(M,x);var q=Oo(M,y);for(x=0;x<V.length;x+=2){var ee=V[x],ne=V[x+1];ee==="style"?Do(m,ne):ee==="dangerouslySetInnerHTML"?Qc(m,ne):ee==="children"?xs(m,ne):H(m,ee,ne,q)}switch(M){case"input":Es(m,y);break;case"textarea":Gc(m,y);break;case"select":var Z=m._wrapperState.wasMultiple;m._wrapperState.wasMultiple=!!y.multiple;var le=y.value;le!=null?Gn(m,!!y.multiple,le,!1):Z!==!!y.multiple&&(y.defaultValue!=null?Gn(m,!!y.multiple,y.defaultValue,!0):Gn(m,!!y.multiple,y.multiple?[]:"",!1))}m[Al]=y}catch(de){ht(s,s.return,de)}}break;case 6:if(nr(a,s),Sr(s),f&4){if(s.stateNode===null)throw Error(t(162));m=s.stateNode,y=s.memoizedProps;try{m.nodeValue=y}catch(de){ht(s,s.return,de)}}break;case 3:if(nr(a,s),Sr(s),f&4&&u!==null&&u.memoizedState.isDehydrated)try{Mi(a.containerInfo)}catch(de){ht(s,s.return,de)}break;case 4:nr(a,s),Sr(s);break;case 13:nr(a,s),Sr(s),m=s.child,m.flags&8192&&(y=m.memoizedState!==null,m.stateNode.isHidden=y,!y||m.alternate!==null&&m.alternate.memoizedState!==null||(cp=et())),f&4&&nv(s);break;case 22:if(ee=u!==null&&u.memoizedState!==null,s.mode&1?(Qt=(q=Qt)||ee,nr(a,s),Qt=q):nr(a,s),Sr(s),f&8192){if(q=s.memoizedState!==null,(s.stateNode.isHidden=q)&&!ee&&(s.mode&1)!==0)for(ue=s,ee=s.child;ee!==null;){for(ne=ue=ee;ue!==null;){switch(Z=ue,le=Z.child,Z.tag){case 0:case 11:case 14:case 15:jl(4,Z,Z.return);break;case 1:fa(Z,Z.return);var he=Z.stateNode;if(typeof he.componentWillUnmount=="function"){f=Z,u=Z.return;try{a=f,he.props=a.memoizedProps,he.state=a.memoizedState,he.componentWillUnmount()}catch(de){ht(f,u,de)}}break;case 5:fa(Z,Z.return);break;case 22:if(Z.memoizedState!==null){ov(ne);continue}}le!==null?(le.return=Z,ue=le):ov(ne)}ee=ee.sibling}e:for(ee=null,ne=s;;){if(ne.tag===5){if(ee===null){ee=ne;try{m=ne.stateNode,q?(y=m.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none"):(M=ne.stateNode,V=ne.memoizedProps.style,x=V!=null&&V.hasOwnProperty("display")?V.display:null,M.style.display=Si("display",x))}catch(de){ht(s,s.return,de)}}}else if(ne.tag===6){if(ee===null)try{ne.stateNode.nodeValue=q?"":ne.memoizedProps}catch(de){ht(s,s.return,de)}}else if((ne.tag!==22&&ne.tag!==23||ne.memoizedState===null||ne===s)&&ne.child!==null){ne.child.return=ne,ne=ne.child;continue}if(ne===s)break e;for(;ne.sibling===null;){if(ne.return===null||ne.return===s)break e;ee===ne&&(ee=null),ne=ne.return}ee===ne&&(ee=null),ne.sibling.return=ne.return,ne=ne.sibling}}break;case 19:nr(a,s),Sr(s),f&4&&nv(s);break;case 21:break;default:nr(a,s),Sr(s)}}function Sr(s){var a=s.flags;if(a&2){try{e:{for(var u=s.return;u!==null;){if(Z_(u)){var f=u;break e}u=u.return}throw Error(t(160))}switch(f.tag){case 5:var m=f.stateNode;f.flags&32&&(xs(m,""),f.flags&=-33);var y=ev(s);op(s,y,m);break;case 3:case 4:var x=f.stateNode.containerInfo,M=ev(s);sp(s,M,x);break;default:throw Error(t(161))}}catch(V){ht(s,s.return,V)}s.flags&=-3}a&4096&&(s.flags&=-4097)}function QS(s,a,u){ue=s,iv(s)}function iv(s,a,u){for(var f=(s.mode&1)!==0;ue!==null;){var m=ue,y=m.child;if(m.tag===22&&f){var x=m.memoizedState!==null||Hu;if(!x){var M=m.alternate,V=M!==null&&M.memoizedState!==null||Qt;M=Hu;var q=Qt;if(Hu=x,(Qt=V)&&!q)for(ue=m;ue!==null;)x=ue,V=x.child,x.tag===22&&x.memoizedState!==null?av(m):V!==null?(V.return=x,ue=V):av(m);for(;y!==null;)ue=y,iv(y),y=y.sibling;ue=m,Hu=M,Qt=q}sv(s)}else(m.subtreeFlags&8772)!==0&&y!==null?(y.return=m,ue=y):sv(s)}}function sv(s){for(;ue!==null;){var a=ue;if((a.flags&8772)!==0){var u=a.alternate;try{if((a.flags&8772)!==0)switch(a.tag){case 0:case 11:case 15:Qt||Wu(5,a);break;case 1:var f=a.stateNode;if(a.flags&4&&!Qt)if(u===null)f.componentDidMount();else{var m=a.elementType===a.type?u.memoizedProps:er(a.type,u.memoizedProps);f.componentDidUpdate(m,u.memoizedState,f.__reactInternalSnapshotBeforeUpdate)}var y=a.updateQueue;y!==null&&o_(a,y,f);break;case 3:var x=a.updateQueue;if(x!==null){if(u=null,a.child!==null)switch(a.child.tag){case 5:u=a.child.stateNode;break;case 1:u=a.child.stateNode}o_(a,x,u)}break;case 5:var M=a.stateNode;if(u===null&&a.flags&4){u=M;var V=a.memoizedProps;switch(a.type){case"button":case"input":case"select":case"textarea":V.autoFocus&&u.focus();break;case"img":V.src&&(u.src=V.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(a.memoizedState===null){var q=a.alternate;if(q!==null){var ee=q.memoizedState;if(ee!==null){var ne=ee.dehydrated;ne!==null&&Mi(ne)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Qt||a.flags&512&&ip(a)}catch(Z){ht(a,a.return,Z)}}if(a===s){ue=null;break}if(u=a.sibling,u!==null){u.return=a.return,ue=u;break}ue=a.return}}function ov(s){for(;ue!==null;){var a=ue;if(a===s){ue=null;break}var u=a.sibling;if(u!==null){u.return=a.return,ue=u;break}ue=a.return}}function av(s){for(;ue!==null;){var a=ue;try{switch(a.tag){case 0:case 11:case 15:var u=a.return;try{Wu(4,a)}catch(V){ht(a,u,V)}break;case 1:var f=a.stateNode;if(typeof f.componentDidMount=="function"){var m=a.return;try{f.componentDidMount()}catch(V){ht(a,m,V)}}var y=a.return;try{ip(a)}catch(V){ht(a,y,V)}break;case 5:var x=a.return;try{ip(a)}catch(V){ht(a,x,V)}}}catch(V){ht(a,a.return,V)}if(a===s){ue=null;break}var M=a.sibling;if(M!==null){M.return=a.return,ue=M;break}ue=a.return}}var YS=Math.ceil,qu=K.ReactCurrentDispatcher,ap=K.ReactCurrentOwner,Vn=K.ReactCurrentBatchConfig,Ue=0,Dt=null,Et=null,Ut=0,kn=0,pa=Ui(0),kt=0,Ul=null,$s=0,Ku=0,lp=0,zl=null,hn=null,cp=0,ga=1/0,ii=null,Gu=!1,up=null,qi=null,Qu=!1,Ki=null,Yu=0,Bl=0,hp=null,Xu=-1,Ju=0;function sn(){return(Ue&6)!==0?et():Xu!==-1?Xu:Xu=et()}function Gi(s){return(s.mode&1)===0?1:(Ue&2)!==0&&Ut!==0?Ut&-Ut:DS.transition!==null?(Ju===0&&(Ju=cl()),Ju):(s=Ve,s!==0||(s=window.event,s=s===void 0?16:Ho(s.type)),s)}function rr(s,a,u,f){if(50<Bl)throw Bl=0,hp=null,Error(t(185));Ps(s,u,f),((Ue&2)===0||s!==Dt)&&(s===Dt&&((Ue&2)===0&&(Ku|=u),kt===4&&Qi(s,Ut)),dn(s,f),u===1&&Ue===0&&(a.mode&1)===0&&(ga=et()+500,Su&&Bi()))}function dn(s,a){var u=s.callbackNode;Cs(s,a);var f=Wr(s,s===Dt?Ut:0);if(f===0)u!==null&&Vo(u),s.callbackNode=null,s.callbackPriority=0;else if(a=f&-f,s.callbackPriority!==a){if(u!=null&&Vo(u),a===1)s.tag===0?NS(cv.bind(null,s)):Gy(cv.bind(null,s)),AS(function(){(Ue&6)===0&&Bi()}),u=null;else{switch(fr(f)){case 1:u=Fo;break;case 4:u=ol;break;case 16:u=Ss;break;case 536870912:u=jo;break;default:u=Ss}u=yv(u,lv.bind(null,s))}s.callbackPriority=a,s.callbackNode=u}}function lv(s,a){if(Xu=-1,Ju=0,(Ue&6)!==0)throw Error(t(327));var u=s.callbackNode;if(ma()&&s.callbackNode!==u)return null;var f=Wr(s,s===Dt?Ut:0);if(f===0)return null;if((f&30)!==0||(f&s.expiredLanes)!==0||a)a=Zu(s,f);else{a=f;var m=Ue;Ue|=2;var y=hv();(Dt!==s||Ut!==a)&&(ii=null,ga=et()+500,Ws(s,a));do try{ZS();break}catch(M){uv(s,M)}while(!0);Rf(),qu.current=y,Ue=m,Et!==null?a=0:(Dt=null,Ut=0,a=kt)}if(a!==0){if(a===2&&(m=ll(s),m!==0&&(f=m,a=dp(s,m))),a===1)throw u=Ul,Ws(s,0),Qi(s,f),dn(s,et()),u;if(a===6)Qi(s,f);else{if(m=s.current.alternate,(f&30)===0&&!XS(m)&&(a=Zu(s,f),a===2&&(y=ll(s),y!==0&&(f=y,a=dp(s,y))),a===1))throw u=Ul,Ws(s,0),Qi(s,f),dn(s,et()),u;switch(s.finishedWork=m,s.finishedLanes=f,a){case 0:case 1:throw Error(t(345));case 2:qs(s,hn,ii);break;case 3:if(Qi(s,f),(f&130023424)===f&&(a=cp+500-et(),10<a)){if(Wr(s,0)!==0)break;if(m=s.suspendedLanes,(m&f)!==f){sn(),s.pingedLanes|=s.suspendedLanes&m;break}s.timeoutHandle=_f(qs.bind(null,s,hn,ii),a);break}qs(s,hn,ii);break;case 4:if(Qi(s,f),(f&4194240)===f)break;for(a=s.eventTimes,m=-1;0<f;){var x=31-wn(f);y=1<<x,x=a[x],x>m&&(m=x),f&=~y}if(f=m,f=et()-f,f=(120>f?120:480>f?480:1080>f?1080:1920>f?1920:3e3>f?3e3:4320>f?4320:1960*YS(f/1960))-f,10<f){s.timeoutHandle=_f(qs.bind(null,s,hn,ii),f);break}qs(s,hn,ii);break;case 5:qs(s,hn,ii);break;default:throw Error(t(329))}}}return dn(s,et()),s.callbackNode===u?lv.bind(null,s):null}function dp(s,a){var u=zl;return s.current.memoizedState.isDehydrated&&(Ws(s,a).flags|=256),s=Zu(s,a),s!==2&&(a=hn,hn=u,a!==null&&fp(a)),s}function fp(s){hn===null?hn=s:hn.push.apply(hn,s)}function XS(s){for(var a=s;;){if(a.flags&16384){var u=a.updateQueue;if(u!==null&&(u=u.stores,u!==null))for(var f=0;f<u.length;f++){var m=u[f],y=m.getSnapshot;m=m.value;try{if(!Jn(y(),m))return!1}catch{return!1}}}if(u=a.child,a.subtreeFlags&16384&&u!==null)u.return=a,a=u;else{if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Qi(s,a){for(a&=~lp,a&=~Ku,s.suspendedLanes|=a,s.pingedLanes&=~a,s=s.expirationTimes;0<a;){var u=31-wn(a),f=1<<u;s[u]=-1,a&=~f}}function cv(s){if((Ue&6)!==0)throw Error(t(327));ma();var a=Wr(s,0);if((a&1)===0)return dn(s,et()),null;var u=Zu(s,a);if(s.tag!==0&&u===2){var f=ll(s);f!==0&&(a=f,u=dp(s,f))}if(u===1)throw u=Ul,Ws(s,0),Qi(s,a),dn(s,et()),u;if(u===6)throw Error(t(345));return s.finishedWork=s.current.alternate,s.finishedLanes=a,qs(s,hn,ii),dn(s,et()),null}function pp(s,a){var u=Ue;Ue|=1;try{return s(a)}finally{Ue=u,Ue===0&&(ga=et()+500,Su&&Bi())}}function Hs(s){Ki!==null&&Ki.tag===0&&(Ue&6)===0&&ma();var a=Ue;Ue|=1;var u=Vn.transition,f=Ve;try{if(Vn.transition=null,Ve=1,s)return s()}finally{Ve=f,Vn.transition=u,Ue=a,(Ue&6)===0&&Bi()}}function gp(){kn=pa.current,nt(pa)}function Ws(s,a){s.finishedWork=null,s.finishedLanes=0;var u=s.timeoutHandle;if(u!==-1&&(s.timeoutHandle=-1,kS(u)),Et!==null)for(u=Et.return;u!==null;){var f=u;switch(bf(f),f.tag){case 1:f=f.type.childContextTypes,f!=null&&bu();break;case 3:ha(),nt(ln),nt(qt),Vf();break;case 5:Mf(f);break;case 4:ha();break;case 13:nt(ot);break;case 19:nt(ot);break;case 10:Cf(f.type._context);break;case 22:case 23:gp()}u=u.return}if(Dt=s,Et=s=Yi(s.current,null),Ut=kn=a,kt=0,Ul=null,lp=Ku=$s=0,hn=zl=null,Us!==null){for(a=0;a<Us.length;a++)if(u=Us[a],f=u.interleaved,f!==null){u.interleaved=null;var m=f.next,y=u.pending;if(y!==null){var x=y.next;y.next=m,f.next=x}u.pending=f}Us=null}return s}function uv(s,a){do{var u=Et;try{if(Rf(),Lu.current=Uu,Vu){for(var f=at.memoizedState;f!==null;){var m=f.queue;m!==null&&(m.pending=null),f=f.next}Vu=!1}if(Bs=0,Nt=St=at=null,Ol=!1,Ml=0,ap.current=null,u===null||u.return===null){kt=1,Ul=a,Et=null;break}e:{var y=s,x=u.return,M=u,V=a;if(a=Ut,M.flags|=32768,V!==null&&typeof V=="object"&&typeof V.then=="function"){var q=V,ee=M,ne=ee.tag;if((ee.mode&1)===0&&(ne===0||ne===11||ne===15)){var Z=ee.alternate;Z?(ee.updateQueue=Z.updateQueue,ee.memoizedState=Z.memoizedState,ee.lanes=Z.lanes):(ee.updateQueue=null,ee.memoizedState=null)}var le=M_(x);if(le!==null){le.flags&=-257,L_(le,x,M,y,a),le.mode&1&&O_(y,q,a),a=le,V=q;var he=a.updateQueue;if(he===null){var de=new Set;de.add(V),a.updateQueue=de}else he.add(V);break e}else{if((a&1)===0){O_(y,q,a),mp();break e}V=Error(t(426))}}else if(st&&M.mode&1){var mt=M_(x);if(mt!==null){(mt.flags&65536)===0&&(mt.flags|=256),L_(mt,x,M,y,a),kf(da(V,M));break e}}y=V=da(V,M),kt!==4&&(kt=2),zl===null?zl=[y]:zl.push(y),y=x;do{switch(y.tag){case 3:y.flags|=65536,a&=-a,y.lanes|=a;var B=N_(y,V,a);s_(y,B);break e;case 1:M=V;var j=y.type,W=y.stateNode;if((y.flags&128)===0&&(typeof j.getDerivedStateFromError=="function"||W!==null&&typeof W.componentDidCatch=="function"&&(qi===null||!qi.has(W)))){y.flags|=65536,a&=-a,y.lanes|=a;var ie=D_(y,M,a);s_(y,ie);break e}}y=y.return}while(y!==null)}fv(u)}catch(fe){a=fe,Et===u&&u!==null&&(Et=u=u.return);continue}break}while(!0)}function hv(){var s=qu.current;return qu.current=Uu,s===null?Uu:s}function mp(){(kt===0||kt===3||kt===2)&&(kt=4),Dt===null||($s&268435455)===0&&(Ku&268435455)===0||Qi(Dt,Ut)}function Zu(s,a){var u=Ue;Ue|=2;var f=hv();(Dt!==s||Ut!==a)&&(ii=null,Ws(s,a));do try{JS();break}catch(m){uv(s,m)}while(!0);if(Rf(),Ue=u,qu.current=f,Et!==null)throw Error(t(261));return Dt=null,Ut=0,kt}function JS(){for(;Et!==null;)dv(Et)}function ZS(){for(;Et!==null&&!Is();)dv(Et)}function dv(s){var a=mv(s.alternate,s,kn);s.memoizedProps=s.pendingProps,a===null?fv(s):Et=a,ap.current=null}function fv(s){var a=s;do{var u=a.alternate;if(s=a.return,(a.flags&32768)===0){if(u=WS(u,a,kn),u!==null){Et=u;return}}else{if(u=qS(u,a),u!==null){u.flags&=32767,Et=u;return}if(s!==null)s.flags|=32768,s.subtreeFlags=0,s.deletions=null;else{kt=6,Et=null;return}}if(a=a.sibling,a!==null){Et=a;return}Et=a=s}while(a!==null);kt===0&&(kt=5)}function qs(s,a,u){var f=Ve,m=Vn.transition;try{Vn.transition=null,Ve=1,e1(s,a,u,f)}finally{Vn.transition=m,Ve=f}return null}function e1(s,a,u,f){do ma();while(Ki!==null);if((Ue&6)!==0)throw Error(t(327));u=s.finishedWork;var m=s.finishedLanes;if(u===null)return null;if(s.finishedWork=null,s.finishedLanes=0,u===s.current)throw Error(t(177));s.callbackNode=null,s.callbackPriority=0;var y=u.lanes|u.childLanes;if(tf(s,y),s===Dt&&(Et=Dt=null,Ut=0),(u.subtreeFlags&2064)===0&&(u.flags&2064)===0||Qu||(Qu=!0,yv(Ss,function(){return ma(),null})),y=(u.flags&15990)!==0,(u.subtreeFlags&15990)!==0||y){y=Vn.transition,Vn.transition=null;var x=Ve;Ve=1;var M=Ue;Ue|=4,ap.current=null,GS(s,u),rv(u,s),wS(mf),Gr=!!gf,mf=gf=null,s.current=u,QS(u),Hr(),Ue=M,Ve=x,Vn.transition=y}else s.current=u;if(Qu&&(Qu=!1,Ki=s,Yu=m),y=s.pendingLanes,y===0&&(qi=null),ou(u.stateNode),dn(s,et()),a!==null)for(f=s.onRecoverableError,u=0;u<a.length;u++)m=a[u],f(m.value,{componentStack:m.stack,digest:m.digest});if(Gu)throw Gu=!1,s=up,up=null,s;return(Yu&1)!==0&&s.tag!==0&&ma(),y=s.pendingLanes,(y&1)!==0?s===hp?Bl++:(Bl=0,hp=s):Bl=0,Bi(),null}function ma(){if(Ki!==null){var s=fr(Yu),a=Vn.transition,u=Ve;try{if(Vn.transition=null,Ve=16>s?16:s,Ki===null)var f=!1;else{if(s=Ki,Ki=null,Yu=0,(Ue&6)!==0)throw Error(t(331));var m=Ue;for(Ue|=4,ue=s.current;ue!==null;){var y=ue,x=y.child;if((ue.flags&16)!==0){var M=y.deletions;if(M!==null){for(var V=0;V<M.length;V++){var q=M[V];for(ue=q;ue!==null;){var ee=ue;switch(ee.tag){case 0:case 11:case 15:jl(8,ee,y)}var ne=ee.child;if(ne!==null)ne.return=ee,ue=ne;else for(;ue!==null;){ee=ue;var Z=ee.sibling,le=ee.return;if(J_(ee),ee===q){ue=null;break}if(Z!==null){Z.return=le,ue=Z;break}ue=le}}}var he=y.alternate;if(he!==null){var de=he.child;if(de!==null){he.child=null;do{var mt=de.sibling;de.sibling=null,de=mt}while(de!==null)}}ue=y}}if((y.subtreeFlags&2064)!==0&&x!==null)x.return=y,ue=x;else e:for(;ue!==null;){if(y=ue,(y.flags&2048)!==0)switch(y.tag){case 0:case 11:case 15:jl(9,y,y.return)}var B=y.sibling;if(B!==null){B.return=y.return,ue=B;break e}ue=y.return}}var j=s.current;for(ue=j;ue!==null;){x=ue;var W=x.child;if((x.subtreeFlags&2064)!==0&&W!==null)W.return=x,ue=W;else e:for(x=j;ue!==null;){if(M=ue,(M.flags&2048)!==0)try{switch(M.tag){case 0:case 11:case 15:Wu(9,M)}}catch(fe){ht(M,M.return,fe)}if(M===x){ue=null;break e}var ie=M.sibling;if(ie!==null){ie.return=M.return,ue=ie;break e}ue=M.return}}if(Ue=m,Bi(),vn&&typeof vn.onPostCommitFiberRoot=="function")try{vn.onPostCommitFiberRoot(ks,s)}catch{}f=!0}return f}finally{Ve=u,Vn.transition=a}}return!1}function pv(s,a,u){a=da(u,a),a=N_(s,a,1),s=Hi(s,a,1),a=sn(),s!==null&&(Ps(s,1,a),dn(s,a))}function ht(s,a,u){if(s.tag===3)pv(s,s,u);else for(;a!==null;){if(a.tag===3){pv(a,s,u);break}else if(a.tag===1){var f=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(qi===null||!qi.has(f))){s=da(u,s),s=D_(a,s,1),a=Hi(a,s,1),s=sn(),a!==null&&(Ps(a,1,s),dn(a,s));break}}a=a.return}}function t1(s,a,u){var f=s.pingCache;f!==null&&f.delete(a),a=sn(),s.pingedLanes|=s.suspendedLanes&u,Dt===s&&(Ut&u)===u&&(kt===4||kt===3&&(Ut&130023424)===Ut&&500>et()-cp?Ws(s,0):lp|=u),dn(s,a)}function gv(s,a){a===0&&((s.mode&1)===0?a=1:(a=Ni,Ni<<=1,(Ni&130023424)===0&&(Ni=4194304)));var u=sn();s=ti(s,a),s!==null&&(Ps(s,a,u),dn(s,u))}function n1(s){var a=s.memoizedState,u=0;a!==null&&(u=a.retryLane),gv(s,u)}function r1(s,a){var u=0;switch(s.tag){case 13:var f=s.stateNode,m=s.memoizedState;m!==null&&(u=m.retryLane);break;case 19:f=s.stateNode;break;default:throw Error(t(314))}f!==null&&f.delete(a),gv(s,u)}var mv;mv=function(s,a,u){if(s!==null)if(s.memoizedProps!==a.pendingProps||ln.current)un=!0;else{if((s.lanes&u)===0&&(a.flags&128)===0)return un=!1,HS(s,a,u);un=(s.flags&131072)!==0}else un=!1,st&&(a.flags&1048576)!==0&&Qy(a,Au,a.index);switch(a.lanes=0,a.tag){case 2:var f=a.type;$u(s,a),s=a.pendingProps;var m=ia(a,qt.current);ua(a,u),m=Uf(null,a,f,s,m,u);var y=zf();return a.flags|=1,typeof m=="object"&&m!==null&&typeof m.render=="function"&&m.$$typeof===void 0?(a.tag=1,a.memoizedState=null,a.updateQueue=null,cn(f)?(y=!0,Iu(a)):y=!1,a.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,Df(a),m.updater=zu,a.stateNode=m,m._reactInternals=a,Kf(a,f,s,u),a=Xf(null,a,f,!0,y,u)):(a.tag=0,st&&y&&Tf(a),rn(null,a,m,u),a=a.child),a;case 16:f=a.elementType;e:{switch($u(s,a),s=a.pendingProps,m=f._init,f=m(f._payload),a.type=f,m=a.tag=s1(f),s=er(f,s),m){case 0:a=Yf(null,a,f,s,u);break e;case 1:a=B_(null,a,f,s,u);break e;case 11:a=V_(null,a,f,s,u);break e;case 14:a=F_(null,a,f,er(f.type,s),u);break e}throw Error(t(306,f,""))}return a;case 0:return f=a.type,m=a.pendingProps,m=a.elementType===f?m:er(f,m),Yf(s,a,f,m,u);case 1:return f=a.type,m=a.pendingProps,m=a.elementType===f?m:er(f,m),B_(s,a,f,m,u);case 3:e:{if($_(a),s===null)throw Error(t(387));f=a.pendingProps,y=a.memoizedState,m=y.element,i_(s,a),Ou(a,f,null,u);var x=a.memoizedState;if(f=x.element,y.isDehydrated)if(y={element:f,isDehydrated:!1,cache:x.cache,pendingSuspenseBoundaries:x.pendingSuspenseBoundaries,transitions:x.transitions},a.updateQueue.baseState=y,a.memoizedState=y,a.flags&256){m=da(Error(t(423)),a),a=H_(s,a,f,u,m);break e}else if(f!==m){m=da(Error(t(424)),a),a=H_(s,a,f,u,m);break e}else for(Sn=ji(a.stateNode.containerInfo.firstChild),In=a,st=!0,Zn=null,u=n_(a,null,f,u),a.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(aa(),f===m){a=ri(s,a,u);break e}rn(s,a,f,u)}a=a.child}return a;case 5:return a_(a),s===null&&Sf(a),f=a.type,m=a.pendingProps,y=s!==null?s.memoizedProps:null,x=m.children,yf(f,m)?x=null:y!==null&&yf(f,y)&&(a.flags|=32),z_(s,a),rn(s,a,x,u),a.child;case 6:return s===null&&Sf(a),null;case 13:return W_(s,a,u);case 4:return Of(a,a.stateNode.containerInfo),f=a.pendingProps,s===null?a.child=la(a,null,f,u):rn(s,a,f,u),a.child;case 11:return f=a.type,m=a.pendingProps,m=a.elementType===f?m:er(f,m),V_(s,a,f,m,u);case 7:return rn(s,a,a.pendingProps,u),a.child;case 8:return rn(s,a,a.pendingProps.children,u),a.child;case 12:return rn(s,a,a.pendingProps.children,u),a.child;case 10:e:{if(f=a.type._context,m=a.pendingProps,y=a.memoizedProps,x=m.value,Ze(Pu,f._currentValue),f._currentValue=x,y!==null)if(Jn(y.value,x)){if(y.children===m.children&&!ln.current){a=ri(s,a,u);break e}}else for(y=a.child,y!==null&&(y.return=a);y!==null;){var M=y.dependencies;if(M!==null){x=y.child;for(var V=M.firstContext;V!==null;){if(V.context===f){if(y.tag===1){V=ni(-1,u&-u),V.tag=2;var q=y.updateQueue;if(q!==null){q=q.shared;var ee=q.pending;ee===null?V.next=V:(V.next=ee.next,ee.next=V),q.pending=V}}y.lanes|=u,V=y.alternate,V!==null&&(V.lanes|=u),Pf(y.return,u,a),M.lanes|=u;break}V=V.next}}else if(y.tag===10)x=y.type===a.type?null:y.child;else if(y.tag===18){if(x=y.return,x===null)throw Error(t(341));x.lanes|=u,M=x.alternate,M!==null&&(M.lanes|=u),Pf(x,u,a),x=y.sibling}else x=y.child;if(x!==null)x.return=y;else for(x=y;x!==null;){if(x===a){x=null;break}if(y=x.sibling,y!==null){y.return=x.return,x=y;break}x=x.return}y=x}rn(s,a,m.children,u),a=a.child}return a;case 9:return m=a.type,f=a.pendingProps.children,ua(a,u),m=Mn(m),f=f(m),a.flags|=1,rn(s,a,f,u),a.child;case 14:return f=a.type,m=er(f,a.pendingProps),m=er(f.type,m),F_(s,a,f,m,u);case 15:return j_(s,a,a.type,a.pendingProps,u);case 17:return f=a.type,m=a.pendingProps,m=a.elementType===f?m:er(f,m),$u(s,a),a.tag=1,cn(f)?(s=!0,Iu(a)):s=!1,ua(a,u),C_(a,f,m),Kf(a,f,m,u),Xf(null,a,f,!0,s,u);case 19:return K_(s,a,u);case 22:return U_(s,a,u)}throw Error(t(156,a.tag))};function yv(s,a){return sl(s,a)}function i1(s,a,u,f){this.tag=s,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Fn(s,a,u,f){return new i1(s,a,u,f)}function yp(s){return s=s.prototype,!(!s||!s.isReactComponent)}function s1(s){if(typeof s=="function")return yp(s)?1:0;if(s!=null){if(s=s.$$typeof,s===O)return 11;if(s===we)return 14}return 2}function Yi(s,a){var u=s.alternate;return u===null?(u=Fn(s.tag,a,s.key,s.mode),u.elementType=s.elementType,u.type=s.type,u.stateNode=s.stateNode,u.alternate=s,s.alternate=u):(u.pendingProps=a,u.type=s.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=s.flags&14680064,u.childLanes=s.childLanes,u.lanes=s.lanes,u.child=s.child,u.memoizedProps=s.memoizedProps,u.memoizedState=s.memoizedState,u.updateQueue=s.updateQueue,a=s.dependencies,u.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},u.sibling=s.sibling,u.index=s.index,u.ref=s.ref,u}function eh(s,a,u,f,m,y){var x=2;if(f=s,typeof s=="function")yp(s)&&(x=1);else if(typeof s=="string")x=5;else e:switch(s){case D:return Ks(u.children,m,y,a);case b:x=8,m|=8;break;case N:return s=Fn(12,u,a,m|2),s.elementType=N,s.lanes=y,s;case C:return s=Fn(13,u,a,m),s.elementType=C,s.lanes=y,s;case ge:return s=Fn(19,u,a,m),s.elementType=ge,s.lanes=y,s;case Se:return th(u,m,y,a);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case L:x=10;break e;case k:x=9;break e;case O:x=11;break e;case we:x=14;break e;case Ae:x=16,f=null;break e}throw Error(t(130,s==null?s:typeof s,""))}return a=Fn(x,u,a,m),a.elementType=s,a.type=f,a.lanes=y,a}function Ks(s,a,u,f){return s=Fn(7,s,f,a),s.lanes=u,s}function th(s,a,u,f){return s=Fn(22,s,f,a),s.elementType=Se,s.lanes=u,s.stateNode={isHidden:!1},s}function _p(s,a,u){return s=Fn(6,s,null,a),s.lanes=u,s}function vp(s,a,u){return a=Fn(4,s.children!==null?s.children:[],s.key,a),a.lanes=u,a.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},a}function o1(s,a,u,f,m){this.tag=a,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ul(0),this.expirationTimes=ul(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ul(0),this.identifierPrefix=f,this.onRecoverableError=m,this.mutableSourceEagerHydrationData=null}function wp(s,a,u,f,m,y,x,M,V){return s=new o1(s,a,u,M,V),a===1?(a=1,y===!0&&(a|=8)):a=0,y=Fn(3,null,null,a),s.current=y,y.stateNode=s,y.memoizedState={element:f,isDehydrated:u,cache:null,transitions:null,pendingSuspenseBoundaries:null},Df(y),s}function a1(s,a,u){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Y,key:f==null?null:""+f,children:s,containerInfo:a,implementation:u}}function _v(s){if(!s)return zi;s=s._reactInternals;e:{if(Yn(s)!==s||s.tag!==1)throw Error(t(170));var a=s;do{switch(a.tag){case 3:a=a.stateNode.context;break e;case 1:if(cn(a.type)){a=a.stateNode.__reactInternalMemoizedMergedChildContext;break e}}a=a.return}while(a!==null);throw Error(t(171))}if(s.tag===1){var u=s.type;if(cn(u))return qy(s,u,a)}return a}function vv(s,a,u,f,m,y,x,M,V){return s=wp(u,f,!0,s,m,y,x,M,V),s.context=_v(null),u=s.current,f=sn(),m=Gi(u),y=ni(f,m),y.callback=a??null,Hi(u,y,m),s.current.lanes=m,Ps(s,m,f),dn(s,f),s}function nh(s,a,u,f){var m=a.current,y=sn(),x=Gi(m);return u=_v(u),a.context===null?a.context=u:a.pendingContext=u,a=ni(y,x),a.payload={element:s},f=f===void 0?null:f,f!==null&&(a.callback=f),s=Hi(m,a,x),s!==null&&(rr(s,m,x,y),Du(s,m,x)),x}function rh(s){if(s=s.current,!s.child)return null;switch(s.child.tag){case 5:return s.child.stateNode;default:return s.child.stateNode}}function wv(s,a){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var u=s.retryLane;s.retryLane=u!==0&&u<a?u:a}}function Ep(s,a){wv(s,a),(s=s.alternate)&&wv(s,a)}function l1(){return null}var Ev=typeof reportError=="function"?reportError:function(s){console.error(s)};function xp(s){this._internalRoot=s}ih.prototype.render=xp.prototype.render=function(s){var a=this._internalRoot;if(a===null)throw Error(t(409));nh(s,a,null,null)},ih.prototype.unmount=xp.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var a=s.containerInfo;Hs(function(){nh(null,s,null,null)}),a[Xr]=null}};function ih(s){this._internalRoot=s}ih.prototype.unstable_scheduleHydration=function(s){if(s){var a=pl();s={blockedOn:null,target:s,priority:a};for(var u=0;u<En.length&&a!==0&&a<En[u].priority;u++);En.splice(u,0,s),u===0&&Bo(s)}};function Tp(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function sh(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11&&(s.nodeType!==8||s.nodeValue!==" react-mount-point-unstable "))}function xv(){}function c1(s,a,u,f,m){if(m){if(typeof f=="function"){var y=f;f=function(){var q=rh(x);y.call(q)}}var x=vv(a,f,s,0,null,!1,!1,"",xv);return s._reactRootContainer=x,s[Xr]=x.current,Sl(s.nodeType===8?s.parentNode:s),Hs(),x}for(;m=s.lastChild;)s.removeChild(m);if(typeof f=="function"){var M=f;f=function(){var q=rh(V);M.call(q)}}var V=wp(s,0,!1,null,null,!1,!1,"",xv);return s._reactRootContainer=V,s[Xr]=V.current,Sl(s.nodeType===8?s.parentNode:s),Hs(function(){nh(a,V,u,f)}),V}function oh(s,a,u,f,m){var y=u._reactRootContainer;if(y){var x=y;if(typeof m=="function"){var M=m;m=function(){var V=rh(x);M.call(V)}}nh(a,x,s,m)}else x=c1(u,a,s,m,f);return rh(x)}dl=function(s){switch(s.tag){case 3:var a=s.stateNode;if(a.current.memoizedState.isDehydrated){var u=He(a.pendingLanes);u!==0&&(hl(a,u|1),dn(a,et()),(Ue&6)===0&&(ga=et()+500,Bi()))}break;case 13:Hs(function(){var f=ti(s,1);if(f!==null){var m=sn();rr(f,s,1,m)}}),Ep(s,1)}},Uo=function(s){if(s.tag===13){var a=ti(s,134217728);if(a!==null){var u=sn();rr(a,s,134217728,u)}Ep(s,134217728)}},fl=function(s){if(s.tag===13){var a=Gi(s),u=ti(s,a);if(u!==null){var f=sn();rr(u,s,a,f)}Ep(s,a)}},pl=function(){return Ve},gl=function(s,a){var u=Ve;try{return Ve=s,a()}finally{Ve=u}},zr=function(s,a,u){switch(a){case"input":if(Es(s,u),a=u.name,u.type==="radio"&&a!=null){for(u=s;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll("input[name="+JSON.stringify(""+a)+'][type="radio"]'),a=0;a<u.length;a++){var f=u[a];if(f!==s&&f.form===s.form){var m=Tu(f);if(!m)throw Error(t(90));Ya(f),Es(f,m)}}}break;case"textarea":Gc(s,u);break;case"select":a=u.value,a!=null&&Gn(s,!!u.multiple,a,!1)}},Xc=pp,Jc=Hs;var u1={usingClientEntryPoint:!1,Events:[Rl,na,Tu,Ai,Ri,pp]},$l={findFiberByHostInstance:Ls,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},h1={bundleType:$l.bundleType,version:$l.version,rendererPackageName:$l.rendererPackageName,rendererConfig:$l.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:K.ReactCurrentDispatcher,findHostInstanceByFiber:function(s){return s=su(s),s===null?null:s.stateNode},findFiberByHostInstance:$l.findFiberByHostInstance||l1,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ah=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ah.isDisabled&&ah.supportsFiber)try{ks=ah.inject(h1),vn=ah}catch{}}return fn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=u1,fn.createPortal=function(s,a){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Tp(a))throw Error(t(200));return a1(s,a,null,u)},fn.createRoot=function(s,a){if(!Tp(s))throw Error(t(299));var u=!1,f="",m=Ev;return a!=null&&(a.unstable_strictMode===!0&&(u=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onRecoverableError!==void 0&&(m=a.onRecoverableError)),a=wp(s,1,!1,null,null,u,!1,f,m),s[Xr]=a.current,Sl(s.nodeType===8?s.parentNode:s),new xp(a)},fn.findDOMNode=function(s){if(s==null)return null;if(s.nodeType===1)return s;var a=s._reactInternals;if(a===void 0)throw typeof s.render=="function"?Error(t(188)):(s=Object.keys(s).join(","),Error(t(268,s)));return s=su(a),s=s===null?null:s.stateNode,s},fn.flushSync=function(s){return Hs(s)},fn.hydrate=function(s,a,u){if(!sh(a))throw Error(t(200));return oh(null,s,a,!0,u)},fn.hydrateRoot=function(s,a,u){if(!Tp(s))throw Error(t(405));var f=u!=null&&u.hydratedSources||null,m=!1,y="",x=Ev;if(u!=null&&(u.unstable_strictMode===!0&&(m=!0),u.identifierPrefix!==void 0&&(y=u.identifierPrefix),u.onRecoverableError!==void 0&&(x=u.onRecoverableError)),a=vv(a,null,s,1,u??null,m,!1,y,x),s[Xr]=a.current,Sl(s),f)for(s=0;s<f.length;s++)u=f[s],m=u._getVersion,m=m(u._source),a.mutableSourceEagerHydrationData==null?a.mutableSourceEagerHydrationData=[u,m]:a.mutableSourceEagerHydrationData.push(u,m);return new ih(a)},fn.render=function(s,a,u){if(!sh(a))throw Error(t(200));return oh(null,s,a,!1,u)},fn.unmountComponentAtNode=function(s){if(!sh(s))throw Error(t(40));return s._reactRootContainer?(Hs(function(){oh(null,null,s,!1,function(){s._reactRootContainer=null,s[Xr]=null})}),!0):!1},fn.unstable_batchedUpdates=pp,fn.unstable_renderSubtreeIntoContainer=function(s,a,u,f){if(!sh(u))throw Error(t(200));if(s==null||s._reactInternals===void 0)throw Error(t(38));return oh(s,a,u,!1,f)},fn.version="18.3.1-next-f1338f8080-20240426",fn}var Cv;function w1(){if(Cv)return Sp.exports;Cv=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Sp.exports=v1(),Sp.exports}var Pv;function E1(){if(Pv)return lh;Pv=1;var n=w1();return lh.createRoot=n.createRoot,lh.hydrateRoot=n.hydrateRoot,lh}var x1=E1();const T1=()=>{};var Nv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GE=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},b1=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=n[t++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){const o=n[t++],l=n[t++],c=n[t++],h=((i&7)<<18|(o&63)<<12|(l&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(h>>10)),e[r++]=String.fromCharCode(56320+(h&1023))}else{const o=n[t++],l=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|l&63)}}return e.join("")},QE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const o=n[i],l=i+1<n.length,c=l?n[i+1]:0,h=i+2<n.length,p=h?n[i+2]:0,g=o>>2,v=(o&3)<<4|c>>4;let w=(c&15)<<2|p>>6,T=p&63;h||(T=64,l||(w=64)),r.push(t[g],t[v],t[w],t[T])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(GE(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):b1(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const o=t[n.charAt(i++)],c=i<n.length?t[n.charAt(i)]:0;++i;const p=i<n.length?t[n.charAt(i)]:64;++i;const v=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||c==null||p==null||v==null)throw new I1;const w=o<<2|c>>4;if(r.push(w),p!==64){const T=c<<4&240|p>>2;if(r.push(T),v!==64){const R=p<<6&192|v;r.push(R)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class I1 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const S1=function(n){const e=GE(n);return QE.encodeByteArray(e,!0)},qh=function(n){return S1(n).replace(/\./g,"")},YE=function(n){try{return QE.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k1(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A1=()=>k1().__FIREBASE_DEFAULTS__,R1=()=>{if(typeof process>"u"||typeof Nv>"u")return;const n=Nv.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},C1=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&YE(n[1]);return e&&JSON.parse(e)},Ad=()=>{try{return T1()||A1()||R1()||C1()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},XE=n=>Ad()?.emulatorHosts?.[n],P1=n=>{const e=XE(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},JE=()=>Ad()?.config,ZE=n=>Ad()?.[`_${n}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N1{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wo(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function ex(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D1(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...n};return[qh(JSON.stringify(t)),qh(JSON.stringify(l)),""].join(".")}const ac={};function O1(){const n={prod:[],emulator:[]};for(const e of Object.keys(ac))ac[e]?n.emulator.push(e):n.prod.push(e);return n}function M1(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let Dv=!1;function tx(n,e){if(typeof window>"u"||typeof document>"u"||!wo(window.location.host)||ac[n]===e||ac[n]||Dv)return;ac[n]=e;function t(w){return`__firebase__banner__${w}`}const r="__firebase__banner",o=O1().prod.length>0;function l(){const w=document.getElementById(r);w&&w.remove()}function c(w){w.style.display="flex",w.style.background="#7faaf0",w.style.position="fixed",w.style.bottom="5px",w.style.left="5px",w.style.padding=".5em",w.style.borderRadius="5px",w.style.alignItems="center"}function h(w,T){w.setAttribute("width","24"),w.setAttribute("id",T),w.setAttribute("height","24"),w.setAttribute("viewBox","0 0 24 24"),w.setAttribute("fill","none"),w.style.marginLeft="-6px"}function p(){const w=document.createElement("span");return w.style.cursor="pointer",w.style.marginLeft="16px",w.style.fontSize="24px",w.innerHTML=" &times;",w.onclick=()=>{Dv=!0,l()},w}function g(w,T){w.setAttribute("id",T),w.innerText="Learn more",w.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",w.setAttribute("target","__blank"),w.style.paddingLeft="5px",w.style.textDecoration="underline"}function v(){const w=M1(r),T=t("text"),R=document.getElementById(T)||document.createElement("span"),P=t("learnmore"),A=document.getElementById(P)||document.createElement("a"),F=t("preprendIcon"),z=document.getElementById(F)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(w.created){const H=w.element;c(H),g(A,P);const K=p();h(z,F),H.append(z,R,A,K),document.body.appendChild(H)}o?(R.innerText="Preview backend disconnected.",z.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(z.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,R.innerText="Preview backend running in this workspace."),R.setAttribute("id",T)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",v):v()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function L1(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(tn())}function V1(){const n=Ad()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function F1(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function nx(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function j1(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function U1(){const n=tn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function z1(){return!V1()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function rx(){try{return typeof indexedDB=="object"}catch{return!1}}function ix(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(t){e(t)}})}function B1(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $1="FirebaseError";class Kn extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=$1,Object.setPrototypeOf(this,Kn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Eo.prototype.create)}}class Eo{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],l=o?H1(o,r):"Error",c=`${this.serviceName}: ${l} (${i}).`;return new Kn(i,c,r)}}function H1(n,e){return n.replace(W1,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const W1=/\{\$([^}]+)}/g;function q1(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function ao(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const o=n[i],l=e[i];if(Ov(o)&&Ov(l)){if(!ao(o,l))return!1}else if(o!==l)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function Ov(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oc(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Xl(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function Jl(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function K1(n,e){const t=new G1(n,e);return t.subscribe.bind(t)}class G1{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");Q1(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=Rp),i.error===void 0&&(i.error=Rp),i.complete===void 0&&(i.complete=Rp);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Q1(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Rp(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y1=1e3,X1=2,J1=14400*1e3,Z1=.5;function Mv(n,e=Y1,t=X1){const r=e*Math.pow(t,n),i=Math.round(Z1*r*(Math.random()-.5)*2);return Math.min(J1,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function It(n){return n&&n._delegate?n._delegate:n}class Hn{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ek=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new N1;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(nk(e))try{this.getOrInitializeService({instanceIdentifier:Xs})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=Xs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Xs){return this.instances.has(e)}getOptions(e=Xs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[o,l]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(o);r===c&&l.resolve(i)}return i}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:tk(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Xs){return this.component?this.component.multipleInstances?e:Xs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function tk(n){return n===Xs?void 0:n}function nk(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rk{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new ek(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Oe;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Oe||(Oe={}));const ik={debug:Oe.DEBUG,verbose:Oe.VERBOSE,info:Oe.INFO,warn:Oe.WARN,error:Oe.ERROR,silent:Oe.SILENT},sk=Oe.INFO,ok={[Oe.DEBUG]:"log",[Oe.VERBOSE]:"log",[Oe.INFO]:"info",[Oe.WARN]:"warn",[Oe.ERROR]:"error"},ak=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=ok[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Rd{constructor(e){this.name=e,this._logLevel=sk,this._logHandler=ak,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Oe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?ik[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Oe.DEBUG,...e),this._logHandler(this,Oe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Oe.VERBOSE,...e),this._logHandler(this,Oe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Oe.INFO,...e),this._logHandler(this,Oe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Oe.WARN,...e),this._logHandler(this,Oe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Oe.ERROR,...e),this._logHandler(this,Oe.ERROR,...e)}}const lk=(n,e)=>e.some(t=>n instanceof t);let Lv,Vv;function ck(){return Lv||(Lv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function uk(){return Vv||(Vv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const sx=new WeakMap,cg=new WeakMap,ox=new WeakMap,Cp=new WeakMap,Gg=new WeakMap;function hk(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",l)},o=()=>{t(ls(n.result)),i()},l=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",l)});return e.then(t=>{t instanceof IDBCursor&&sx.set(t,n)}).catch(()=>{}),Gg.set(e,n),e}function dk(n){if(cg.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",l),n.removeEventListener("abort",l)},o=()=>{t(),i()},l=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",l),n.addEventListener("abort",l)});cg.set(n,e)}let ug={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return cg.get(n);if(e==="objectStoreNames")return n.objectStoreNames||ox.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ls(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function fk(n){ug=n(ug)}function pk(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(Pp(this),e,...t);return ox.set(r,e.sort?e.sort():[e]),ls(r)}:uk().includes(n)?function(...e){return n.apply(Pp(this),e),ls(sx.get(this))}:function(...e){return ls(n.apply(Pp(this),e))}}function gk(n){return typeof n=="function"?pk(n):(n instanceof IDBTransaction&&dk(n),lk(n,ck())?new Proxy(n,ug):n)}function ls(n){if(n instanceof IDBRequest)return hk(n);if(Cp.has(n))return Cp.get(n);const e=gk(n);return e!==n&&(Cp.set(n,e),Gg.set(e,n)),e}const Pp=n=>Gg.get(n);function ax(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){const l=indexedDB.open(n,e),c=ls(l);return r&&l.addEventListener("upgradeneeded",h=>{r(ls(l.result),h.oldVersion,h.newVersion,ls(l.transaction),h)}),t&&l.addEventListener("blocked",h=>t(h.oldVersion,h.newVersion,h)),c.then(h=>{o&&h.addEventListener("close",()=>o()),i&&h.addEventListener("versionchange",p=>i(p.oldVersion,p.newVersion,p))}).catch(()=>{}),c}const mk=["get","getKey","getAll","getAllKeys","count"],yk=["put","add","delete","clear"],Np=new Map;function Fv(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Np.get(e))return Np.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=yk.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||mk.includes(t)))return;const o=async function(l,...c){const h=this.transaction(l,i?"readwrite":"readonly");let p=h.store;return r&&(p=p.index(c.shift())),(await Promise.all([p[t](...c),i&&h.done]))[0]};return Np.set(e,o),o}fk(n=>({...n,get:(e,t,r)=>Fv(e,t)||n.get(e,t,r),has:(e,t)=>!!Fv(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _k{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(vk(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function vk(n){return n.getComponent()?.type==="VERSION"}const hg="@firebase/app",jv="0.14.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mi=new Rd("@firebase/app"),wk="@firebase/app-compat",Ek="@firebase/analytics-compat",xk="@firebase/analytics",Tk="@firebase/app-check-compat",bk="@firebase/app-check",Ik="@firebase/auth",Sk="@firebase/auth-compat",kk="@firebase/database",Ak="@firebase/data-connect",Rk="@firebase/database-compat",Ck="@firebase/functions",Pk="@firebase/functions-compat",Nk="@firebase/installations",Dk="@firebase/installations-compat",Ok="@firebase/messaging",Mk="@firebase/messaging-compat",Lk="@firebase/performance",Vk="@firebase/performance-compat",Fk="@firebase/remote-config",jk="@firebase/remote-config-compat",Uk="@firebase/storage",zk="@firebase/storage-compat",Bk="@firebase/firestore",$k="@firebase/ai",Hk="@firebase/firestore-compat",Wk="firebase",qk="12.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dg="[DEFAULT]",Kk={[hg]:"fire-core",[wk]:"fire-core-compat",[xk]:"fire-analytics",[Ek]:"fire-analytics-compat",[bk]:"fire-app-check",[Tk]:"fire-app-check-compat",[Ik]:"fire-auth",[Sk]:"fire-auth-compat",[kk]:"fire-rtdb",[Ak]:"fire-data-connect",[Rk]:"fire-rtdb-compat",[Ck]:"fire-fn",[Pk]:"fire-fn-compat",[Nk]:"fire-iid",[Dk]:"fire-iid-compat",[Ok]:"fire-fcm",[Mk]:"fire-fcm-compat",[Lk]:"fire-perf",[Vk]:"fire-perf-compat",[Fk]:"fire-rc",[jk]:"fire-rc-compat",[Uk]:"fire-gcs",[zk]:"fire-gcs-compat",[Bk]:"fire-fst",[Hk]:"fire-fst-compat",[$k]:"fire-vertex","fire-js":"fire-js",[Wk]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kh=new Map,Gk=new Map,fg=new Map;function Uv(n,e){try{n.container.addComponent(e)}catch(t){mi.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function ar(n){const e=n.name;if(fg.has(e))return mi.debug(`There were multiple attempts to register component ${e}.`),!1;fg.set(e,n);for(const t of Kh.values())Uv(t,n);for(const t of Gk.values())Uv(t,n);return!0}function Mc(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function An(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qk={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},cs=new Eo("app","Firebase",Qk);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yk{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Hn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw cs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xo=qk;function lx(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r={name:dg,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw cs.create("bad-app-name",{appName:String(i)});if(t||(t=JE()),!t)throw cs.create("no-options");const o=Kh.get(i);if(o){if(ao(t,o.options)&&ao(r,o.config))return o;throw cs.create("duplicate-app",{appName:i})}const l=new rk(i);for(const h of fg.values())l.addComponent(h);const c=new Yk(t,r,l);return Kh.set(i,c),c}function cx(n=dg){const e=Kh.get(n);if(!e&&n===dg&&JE())return lx();if(!e)throw cs.create("no-app",{appName:n});return e}function _n(n,e,t){let r=Kk[n]??n;t&&(r+=`-${t}`);const i=r.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const l=[`Unable to register library "${r}" with version "${e}":`];i&&l.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),mi.warn(l.join(" "));return}ar(new Hn(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xk="firebase-heartbeat-database",Jk=1,yc="firebase-heartbeat-store";let Dp=null;function ux(){return Dp||(Dp=ax(Xk,Jk,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(yc)}catch(t){console.warn(t)}}}}).catch(n=>{throw cs.create("idb-open",{originalErrorMessage:n.message})})),Dp}async function Zk(n){try{const t=(await ux()).transaction(yc),r=await t.objectStore(yc).get(hx(n));return await t.done,r}catch(e){if(e instanceof Kn)mi.warn(e.message);else{const t=cs.create("idb-get",{originalErrorMessage:e?.message});mi.warn(t.message)}}}async function zv(n,e){try{const r=(await ux()).transaction(yc,"readwrite");await r.objectStore(yc).put(e,hx(n)),await r.done}catch(t){if(t instanceof Kn)mi.warn(t.message);else{const r=cs.create("idb-set",{originalErrorMessage:t?.message});mi.warn(r.message)}}}function hx(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eA=1024,tA=30;class nA{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new iA(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Bv();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>tA){const i=sA(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){mi.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Bv(),{heartbeatsToSend:t,unsentEntries:r}=rA(this._heartbeatsCache.heartbeats),i=qh(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return mi.warn(e),""}}}function Bv(){return new Date().toISOString().substring(0,10)}function rA(n,e=eA){const t=[];let r=n.slice();for(const i of n){const o=t.find(l=>l.agent===i.agent);if(o){if(o.dates.push(i.date),$v(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),$v(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class iA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return rx()?ix().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await Zk(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return zv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return zv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function $v(n){return qh(JSON.stringify({version:2,heartbeats:n})).length}function sA(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oA(n){ar(new Hn("platform-logger",e=>new _k(e),"PRIVATE")),ar(new Hn("heartbeat",e=>new nA(e),"PRIVATE")),_n(hg,jv,n),_n(hg,jv,"esm2020"),_n("fire-js","")}oA("");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dx="firebasestorage.googleapis.com",fx="storageBucket",aA=120*1e3,lA=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft extends Kn{constructor(e,t,r=0){super(Op(e),`Firebase Storage: ${t} (${Op(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ft.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Op(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var dt;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(dt||(dt={}));function Op(n){return"storage/"+n}function Qg(){const n="An unknown error occurred, please check the error payload for server response.";return new ft(dt.UNKNOWN,n)}function cA(n){return new ft(dt.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function uA(n){return new ft(dt.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function hA(){const n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new ft(dt.UNAUTHENTICATED,n)}function dA(){return new ft(dt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function fA(n){return new ft(dt.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function pA(){return new ft(dt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function gA(){return new ft(dt.CANCELED,"User canceled the upload/download.")}function mA(n){return new ft(dt.INVALID_URL,"Invalid URL '"+n+"'.")}function yA(n){return new ft(dt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function _A(){return new ft(dt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+fx+"' property when initializing the app?")}function vA(){return new ft(dt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function wA(){return new ft(dt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function EA(n){return new ft(dt.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function pg(n){return new ft(dt.INVALID_ARGUMENT,n)}function px(){return new ft(dt.APP_DELETED,"The Firebase app was deleted.")}function xA(n){return new ft(dt.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function lc(n,e){return new ft(dt.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function Wl(n){throw new ft(dt.INTERNAL_ERROR,"Internal error: "+n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=Rn.makeFromUrl(e,t)}catch{return new Rn(e,"")}if(r.path==="")return r;throw yA(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)";function o(K){K.path.charAt(K.path.length-1)==="/"&&(K.path_=K.path_.slice(0,-1))}const l="(/(.*))?$",c=new RegExp("^gs://"+i+l,"i"),h={bucket:1,path:3};function p(K){K.path_=decodeURIComponent(K.path)}const g="v[A-Za-z0-9_]+",v=t.replace(/[.]/g,"\\."),w="(/([^?#]*).*)?$",T=new RegExp(`^https?://${v}/${g}/b/${i}/o${w}`,"i"),R={bucket:1,path:3},P=t===dx?"(?:storage.googleapis.com|storage.cloud.google.com)":t,A="([^?#]*)",F=new RegExp(`^https?://${P}/${i}/${A}`,"i"),H=[{regex:c,indices:h,postModify:o},{regex:T,indices:R,postModify:p},{regex:F,indices:{bucket:1,path:2},postModify:p}];for(let K=0;K<H.length;K++){const Q=H[K],Y=Q.regex.exec(e);if(Y){const D=Y[Q.indices.bucket];let b=Y[Q.indices.path];b||(b=""),r=new Rn(D,b),Q.postModify(r);break}}if(r==null)throw mA(e);return r}}class TA{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bA(n,e,t){let r=1,i=null,o=null,l=!1,c=0;function h(){return c===2}let p=!1;function g(...A){p||(p=!0,e.apply(null,A))}function v(A){i=setTimeout(()=>{i=null,n(T,h())},A)}function w(){o&&clearTimeout(o)}function T(A,...F){if(p){w();return}if(A){w(),g.call(null,A,...F);return}if(h()||l){w(),g.call(null,A,...F);return}r<64&&(r*=2);let H;c===1?(c=2,H=0):H=(r+Math.random())*1e3,v(H)}let R=!1;function P(A){R||(R=!0,w(),!p&&(i!==null?(A||(c=2),clearTimeout(i),v(0)):A||(c=1)))}return v(0),o=setTimeout(()=>{l=!0,P(!0)},t),P}function IA(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SA(n){return n!==void 0}function kA(n){return typeof n=="object"&&!Array.isArray(n)}function Yg(n){return typeof n=="string"||n instanceof String}function Hv(n){return Xg()&&n instanceof Blob}function Xg(){return typeof Blob<"u"}function Wv(n,e,t,r){if(r<e)throw pg(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw pg(`Invalid value for '${n}'. Expected ${t} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jg(n,e,t){let r=e;return t==null&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function gx(n){const e=encodeURIComponent;let t="?";for(const r in n)if(n.hasOwnProperty(r)){const i=e(r)+"="+e(n[r]);t=t+i+"&"}return t=t.slice(0,-1),t}var ro;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(ro||(ro={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AA(n,e){const t=n>=500&&n<600,i=[408,429].indexOf(n)!==-1,o=e.indexOf(n)!==-1;return t||i||o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RA{constructor(e,t,r,i,o,l,c,h,p,g,v,w=!0,T=!1){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=o,this.additionalRetryCodes_=l,this.callback_=c,this.errorCallback_=h,this.timeout_=p,this.progressCallback_=g,this.connectionFactory_=v,this.retry=w,this.isUsingEmulator=T,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((R,P)=>{this.resolve_=R,this.reject_=P,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new ch(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const l=c=>{const h=c.loaded,p=c.lengthComputable?c.total:-1;this.progressCallback_!==null&&this.progressCallback_(h,p)};this.progressCallback_!==null&&o.addUploadProgressListener(l),o.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(l),this.pendingConnection_=null;const c=o.getErrorCode()===ro.NO_ERROR,h=o.getStatus();if(!c||AA(h,this.additionalRetryCodes_)&&this.retry){const g=o.getErrorCode()===ro.ABORT;r(!1,new ch(!1,null,g));return}const p=this.successCodes_.indexOf(h)!==-1;r(!0,new ch(p,o))})},t=(r,i)=>{const o=this.resolve_,l=this.reject_,c=i.connection;if(i.wasSuccessCode)try{const h=this.callback_(c,c.getResponse());SA(h)?o(h):o()}catch(h){l(h)}else if(c!==null){const h=Qg();h.serverResponse=c.getErrorText(),this.errorCallback_?l(this.errorCallback_(c,h)):l(h)}else if(i.canceled){const h=this.appDelete_?px():gA();l(h)}else{const h=pA();l(h)}};this.canceled_?t(!1,new ch(!1,null,!0)):this.backoffId_=bA(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&IA(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class ch{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function CA(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function PA(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function NA(n,e){e&&(n["X-Firebase-GMPID"]=e)}function DA(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function OA(n,e,t,r,i,o,l=!0,c=!1){const h=gx(n.urlParams),p=n.url+h,g=Object.assign({},n.headers);return NA(g,e),CA(g,t),PA(g,o),DA(g,r),new RA(p,n.method,g,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,l,c)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MA(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function LA(...n){const e=MA();if(e!==void 0){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}else{if(Xg())return new Blob(n);throw new ft(dt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function VA(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FA(n){if(typeof atob>"u")throw EA("base-64");return atob(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Mp{constructor(e,t){this.data=e,this.contentType=t||null}}function jA(n,e){switch(n){case Nr.RAW:return new Mp(mx(e));case Nr.BASE64:case Nr.BASE64URL:return new Mp(yx(n,e));case Nr.DATA_URL:return new Mp(zA(e),BA(e))}throw Qg()}function mx(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(t<n.length-1&&(n.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const o=r,l=n.charCodeAt(++t);r=65536|(o&1023)<<10|l&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function UA(n){let e;try{e=decodeURIComponent(n)}catch{throw lc(Nr.DATA_URL,"Malformed data URL.")}return mx(e)}function yx(n,e){switch(n){case Nr.BASE64:{const i=e.indexOf("-")!==-1,o=e.indexOf("_")!==-1;if(i||o)throw lc(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Nr.BASE64URL:{const i=e.indexOf("+")!==-1,o=e.indexOf("/")!==-1;if(i||o)throw lc(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=FA(e)}catch(i){throw i.message.includes("polyfill")?i:lc(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class _x{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw lc(Nr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;r!=null&&(this.base64=$A(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function zA(n){const e=new _x(n);return e.base64?yx(Nr.BASE64,e.rest):UA(e.rest)}function BA(n){return new _x(n).contentType}function $A(n,e){return n.length>=e.length?n.substring(n.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi{constructor(e,t){let r=0,i="";Hv(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(Hv(this.data_)){const r=this.data_,i=VA(r,e,t);return i===null?null:new Zi(i)}else{const r=new Uint8Array(this.data_.buffer,e,t-e);return new Zi(r,!0)}}static getBlob(...e){if(Xg()){const t=e.map(r=>r instanceof Zi?r.data_:r);return new Zi(LA.apply(null,t))}else{const t=e.map(l=>Yg(l)?jA(Nr.RAW,l).data:l.data_);let r=0;t.forEach(l=>{r+=l.byteLength});const i=new Uint8Array(r);let o=0;return t.forEach(l=>{for(let c=0;c<l.length;c++)i[o++]=l[c]}),new Zi(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vx(n){let e;try{e=JSON.parse(n)}catch{return null}return kA(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HA(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function WA(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return n.length===0?t:n+"/"+t}function wx(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qA(n,e){return e}class on{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||qA}}let uh=null;function KA(n){return!Yg(n)||n.length<2?n:wx(n)}function Ex(){if(uh)return uh;const n=[];n.push(new on("bucket")),n.push(new on("generation")),n.push(new on("metageneration")),n.push(new on("name","fullPath",!0));function e(o,l){return KA(l)}const t=new on("name");t.xform=e,n.push(t);function r(o,l){return l!==void 0?Number(l):l}const i=new on("size");return i.xform=r,n.push(i),n.push(new on("timeCreated")),n.push(new on("updated")),n.push(new on("md5Hash",null,!0)),n.push(new on("cacheControl",null,!0)),n.push(new on("contentDisposition",null,!0)),n.push(new on("contentEncoding",null,!0)),n.push(new on("contentLanguage",null,!0)),n.push(new on("contentType",null,!0)),n.push(new on("metadata","customMetadata",!0)),uh=n,uh}function GA(n,e){function t(){const r=n.bucket,i=n.fullPath,o=new Rn(r,i);return e._makeStorageReference(o)}Object.defineProperty(n,"ref",{get:t})}function QA(n,e,t){const r={};r.type="file";const i=t.length;for(let o=0;o<i;o++){const l=t[o];r[l.local]=l.xform(r,e[l.server])}return GA(r,n),r}function xx(n,e,t){const r=vx(e);return r===null?null:QA(n,r,t)}function YA(n,e,t,r){const i=vx(e);if(i===null||!Yg(i.downloadTokens))return null;const o=i.downloadTokens;if(o.length===0)return null;const l=encodeURIComponent;return o.split(",").map(p=>{const g=n.bucket,v=n.fullPath,w="/b/"+l(g)+"/o/"+l(v),T=Jg(w,t,r),R=gx({alt:"media",token:p});return T+R})[0]}function XA(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const o=e[i];o.writable&&(t[o.server]=n[o.local])}return JSON.stringify(t)}class Tx{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bx(n){if(!n)throw Qg()}function JA(n,e){function t(r,i){const o=xx(n,i,e);return bx(o!==null),o}return t}function ZA(n,e){function t(r,i){const o=xx(n,i,e);return bx(o!==null),YA(o,i,n.host,n._protocol)}return t}function Ix(n){function e(t,r){let i;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?i=dA():i=hA():t.getStatus()===402?i=uA(n.bucket):t.getStatus()===403?i=fA(n.path):i=r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}return e}function eR(n){const e=Ix(n);function t(r,i){let o=e(r,i);return r.getStatus()===404&&(o=cA(n.path)),o.serverResponse=i.serverResponse,o}return t}function tR(n,e,t){const r=e.fullServerUrl(),i=Jg(r,n.host,n._protocol),o="GET",l=n.maxOperationRetryTime,c=new Tx(i,o,ZA(n,t),l);return c.errorHandler=eR(e),c}function nR(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}function rR(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=nR(null,e)),r}function iR(n,e,t,r,i){const o=e.bucketOnlyServerUrl(),l={"X-Goog-Upload-Protocol":"multipart"};function c(){let H="";for(let K=0;K<2;K++)H=H+Math.random().toString().slice(2);return H}const h=c();l["Content-Type"]="multipart/related; boundary="+h;const p=rR(e,r,i),g=XA(p,t),v="--"+h+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+g+`\r
--`+h+`\r
Content-Type: `+p.contentType+`\r
\r
`,w=`\r
--`+h+"--",T=Zi.getBlob(v,r,w);if(T===null)throw vA();const R={name:p.fullPath},P=Jg(o,n.host,n._protocol),A="POST",F=n.maxUploadRetryTime,z=new Tx(P,A,JA(n,t),F);return z.urlParams=R,z.headers=l,z.body=T.uploadData(),z.errorHandler=Ix(e),z}class sR{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=ro.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=ro.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=ro.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i,o){if(this.sent_)throw Wl("cannot .send() more than once");if(wo(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),o!==void 0)for(const l in o)o.hasOwnProperty(l)&&this.xhr_.setRequestHeader(l,o[l].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Wl("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Wl("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Wl("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Wl("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class oR extends sR{initXhr(){this.xhr_.responseType="text"}}function Sx(){return new oR}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lo{constructor(e,t){this._service=e,t instanceof Rn?this._location=t:this._location=Rn.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new lo(e,t)}get root(){const e=new Rn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return wx(this._location.path)}get storage(){return this._service}get parent(){const e=HA(this._location.path);if(e===null)return null;const t=new Rn(this._location.bucket,e);return new lo(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw xA(e)}}function aR(n,e,t){n._throwIfRoot("uploadBytes");const r=iR(n.storage,n._location,Ex(),new Zi(e,!0),t);return n.storage.makeRequestWithTokens(r,Sx).then(i=>({metadata:i,ref:n}))}function lR(n){n._throwIfRoot("getDownloadURL");const e=tR(n.storage,n._location,Ex());return n.storage.makeRequestWithTokens(e,Sx).then(t=>{if(t===null)throw wA();return t})}function cR(n,e){const t=WA(n._location.path,e),r=new Rn(n._location.bucket,t);return new lo(n.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uR(n){return/^[A-Za-z]+:\/\//.test(n)}function hR(n,e){return new lo(n,e)}function kx(n,e){if(n instanceof Zg){const t=n;if(t._bucket==null)throw _A();const r=new lo(t,t._bucket);return e!=null?kx(r,e):r}else return e!==void 0?cR(n,e):n}function dR(n,e){if(e&&uR(e)){if(n instanceof Zg)return hR(n,e);throw pg("To use ref(service, url), the first argument must be a Storage instance.")}else return kx(n,e)}function qv(n,e){const t=e?.[fx];return t==null?null:Rn.makeFromBucketSpec(t,n)}class Zg{constructor(e,t,r,i,o,l=!1){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=o,this._isUsingEmulator=l,this._bucket=null,this._host=dx,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=aA,this._maxUploadRetryTime=lA,this._requests=new Set,i!=null?this._bucket=Rn.makeFromBucketSpec(i,this._host):this._bucket=qv(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Rn.makeFromBucketSpec(this._url,e):this._bucket=qv(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Wv("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Wv("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(An(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new lo(this,e)}_makeRequest(e,t,r,i,o=!0){if(this._deleted)return new TA(px());{const l=OA(e,this._appId,r,i,t,this._firebaseVersion,o,this._isUsingEmulator);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}async makeRequestWithTokens(e,t){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,i).getPromise()}}const Kv="@firebase/storage",Gv="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fR="storage";function pR(n,e,t){return n=It(n),aR(n,e,t)}function gR(n){return n=It(n),lR(n)}function mR(n,e){return n=It(n),dR(n,e)}function yR(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new Zg(t,r,i,e,xo)}function _R(){ar(new Hn(fR,yR,"PUBLIC").setMultipleInstances(!0)),_n(Kv,Gv,""),_n(Kv,Gv,"esm2020")}_R();var vR="firebase",wR="12.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */_n(vR,wR,"app");const Ax="@firebase/installations",em="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rx=1e4,Cx=`w:${em}`,Px="FIS_v2",ER="https://firebaseinstallations.googleapis.com/v1",xR=3600*1e3,TR="installations",bR="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IR={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},co=new Eo(TR,bR,IR);function Nx(n){return n instanceof Kn&&n.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dx({projectId:n}){return`${ER}/projects/${n}/installations`}function Ox(n){return{token:n.token,requestStatus:2,expiresIn:kR(n.expiresIn),creationTime:Date.now()}}async function Mx(n,e){const r=(await e.json()).error;return co.create("request-failed",{requestName:n,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function Lx({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function SR(n,{refreshToken:e}){const t=Lx(n);return t.append("Authorization",AR(e)),t}async function Vx(n){const e=await n();return e.status>=500&&e.status<600?n():e}function kR(n){return Number(n.replace("s","000"))}function AR(n){return`${Px} ${n}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RR({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const r=Dx(n),i=Lx(n),o=e.getImmediate({optional:!0});if(o){const p=await o.getHeartbeatsHeader();p&&i.append("x-firebase-client",p)}const l={fid:t,authVersion:Px,appId:n.appId,sdkVersion:Cx},c={method:"POST",headers:i,body:JSON.stringify(l)},h=await Vx(()=>fetch(r,c));if(h.ok){const p=await h.json();return{fid:p.fid||t,registrationStatus:2,refreshToken:p.refreshToken,authToken:Ox(p.authToken)}}else throw await Mx("Create Installation",h)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fx(n){return new Promise(e=>{setTimeout(e,n)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CR(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PR=/^[cdef][\w-]{21}$/,gg="";function NR(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=DR(n);return PR.test(t)?t:gg}catch{return gg}}function DR(n){return CR(n).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cd(n){return`${n.appName}!${n.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jx=new Map;function Ux(n,e){const t=Cd(n);zx(t,e),OR(t,e)}function zx(n,e){const t=jx.get(n);if(t)for(const r of t)r(e)}function OR(n,e){const t=MR();t&&t.postMessage({key:n,fid:e}),LR()}let eo=null;function MR(){return!eo&&"BroadcastChannel"in self&&(eo=new BroadcastChannel("[Firebase] FID Change"),eo.onmessage=n=>{zx(n.data.key,n.data.fid)}),eo}function LR(){jx.size===0&&eo&&(eo.close(),eo=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VR="firebase-installations-database",FR=1,uo="firebase-installations-store";let Lp=null;function tm(){return Lp||(Lp=ax(VR,FR,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(uo)}}})),Lp}async function Gh(n,e){const t=Cd(n),i=(await tm()).transaction(uo,"readwrite"),o=i.objectStore(uo),l=await o.get(t);return await o.put(e,t),await i.done,(!l||l.fid!==e.fid)&&Ux(n,e.fid),e}async function Bx(n){const e=Cd(n),r=(await tm()).transaction(uo,"readwrite");await r.objectStore(uo).delete(e),await r.done}async function Pd(n,e){const t=Cd(n),i=(await tm()).transaction(uo,"readwrite"),o=i.objectStore(uo),l=await o.get(t),c=e(l);return c===void 0?await o.delete(t):await o.put(c,t),await i.done,c&&(!l||l.fid!==c.fid)&&Ux(n,c.fid),c}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nm(n){let e;const t=await Pd(n.appConfig,r=>{const i=jR(r),o=UR(n,i);return e=o.registrationPromise,o.installationEntry});return t.fid===gg?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function jR(n){const e=n||{fid:NR(),registrationStatus:0};return $x(e)}function UR(n,e){if(e.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(co.create("app-offline"));return{installationEntry:e,registrationPromise:i}}const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=zR(n,t);return{installationEntry:t,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:BR(n)}:{installationEntry:e}}async function zR(n,e){try{const t=await RR(n,e);return Gh(n.appConfig,t)}catch(t){throw Nx(t)&&t.customData.serverCode===409?await Bx(n.appConfig):await Gh(n.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function BR(n){let e=await Qv(n.appConfig);for(;e.registrationStatus===1;)await Fx(100),e=await Qv(n.appConfig);if(e.registrationStatus===0){const{installationEntry:t,registrationPromise:r}=await nm(n);return r||t}return e}function Qv(n){return Pd(n,e=>{if(!e)throw co.create("installation-not-found");return $x(e)})}function $x(n){return $R(n)?{fid:n.fid,registrationStatus:0}:n}function $R(n){return n.registrationStatus===1&&n.registrationTime+Rx<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HR({appConfig:n,heartbeatServiceProvider:e},t){const r=WR(n,t),i=SR(n,t),o=e.getImmediate({optional:!0});if(o){const p=await o.getHeartbeatsHeader();p&&i.append("x-firebase-client",p)}const l={installation:{sdkVersion:Cx,appId:n.appId}},c={method:"POST",headers:i,body:JSON.stringify(l)},h=await Vx(()=>fetch(r,c));if(h.ok){const p=await h.json();return Ox(p)}else throw await Mx("Generate Auth Token",h)}function WR(n,{fid:e}){return`${Dx(n)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rm(n,e=!1){let t;const r=await Pd(n.appConfig,o=>{if(!Hx(o))throw co.create("not-registered");const l=o.authToken;if(!e&&GR(l))return o;if(l.requestStatus===1)return t=qR(n,e),o;{if(!navigator.onLine)throw co.create("app-offline");const c=YR(o);return t=KR(n,c),c}});return t?await t:r.authToken}async function qR(n,e){let t=await Yv(n.appConfig);for(;t.authToken.requestStatus===1;)await Fx(100),t=await Yv(n.appConfig);const r=t.authToken;return r.requestStatus===0?rm(n,e):r}function Yv(n){return Pd(n,e=>{if(!Hx(e))throw co.create("not-registered");const t=e.authToken;return XR(t)?{...e,authToken:{requestStatus:0}}:e})}async function KR(n,e){try{const t=await HR(n,e),r={...e,authToken:t};return await Gh(n.appConfig,r),t}catch(t){if(Nx(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))await Bx(n.appConfig);else{const r={...e,authToken:{requestStatus:0}};await Gh(n.appConfig,r)}throw t}}function Hx(n){return n!==void 0&&n.registrationStatus===2}function GR(n){return n.requestStatus===2&&!QR(n)}function QR(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+xR}function YR(n){const e={requestStatus:1,requestTime:Date.now()};return{...n,authToken:e}}function XR(n){return n.requestStatus===1&&n.requestTime+Rx<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JR(n){const e=n,{installationEntry:t,registrationPromise:r}=await nm(e);return r?r.catch(console.error):rm(e).catch(console.error),t.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZR(n,e=!1){const t=n;return await eC(t),(await rm(t,e)).token}async function eC(n){const{registrationPromise:e}=await nm(n);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tC(n){if(!n||!n.options)throw Vp("App Configuration");if(!n.name)throw Vp("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw Vp(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function Vp(n){return co.create("missing-app-config-values",{valueName:n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wx="installations",nC="installations-internal",rC=n=>{const e=n.getProvider("app").getImmediate(),t=tC(e),r=Mc(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},iC=n=>{const e=n.getProvider("app").getImmediate(),t=Mc(e,Wx).getImmediate();return{getId:()=>JR(t),getToken:i=>ZR(t,i)}};function sC(){ar(new Hn(Wx,rC,"PUBLIC")),ar(new Hn(nC,iC,"PRIVATE"))}sC();_n(Ax,em);_n(Ax,em,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xv="analytics",oC="firebase_id",aC="origin",lC=60*1e3,cC="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",im="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const an=new Rd("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uC={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},$n=new Eo("analytics","Analytics",uC);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hC(n){if(!n.startsWith(im)){const e=$n.create("invalid-gtag-resource",{gtagURL:n});return an.warn(e.message),""}return n}function qx(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function dC(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}function fC(n,e){const t=dC("firebase-js-sdk-policy",{createScriptURL:hC}),r=document.createElement("script"),i=`${im}?l=${n}&id=${e}`;r.src=t?t?.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function pC(n){let e=[];return Array.isArray(window[n])?e=window[n]:window[n]=e,e}async function gC(n,e,t,r,i,o){const l=r[i];try{if(l)await e[l];else{const h=(await qx(t)).find(p=>p.measurementId===i);h&&await e[h.appId]}}catch(c){an.error(c)}n("config",i,o)}async function mC(n,e,t,r,i){try{let o=[];if(i&&i.send_to){let l=i.send_to;Array.isArray(l)||(l=[l]);const c=await qx(t);for(const h of l){const p=c.find(v=>v.measurementId===h),g=p&&e[p.appId];if(g)o.push(g);else{o=[];break}}}o.length===0&&(o=Object.values(e)),await Promise.all(o),n("event",r,i||{})}catch(o){an.error(o)}}function yC(n,e,t,r){async function i(o,...l){try{if(o==="event"){const[c,h]=l;await mC(n,e,t,c,h)}else if(o==="config"){const[c,h]=l;await gC(n,e,t,r,c,h)}else if(o==="consent"){const[c,h]=l;n("consent",c,h)}else if(o==="get"){const[c,h,p]=l;n("get",c,h,p)}else if(o==="set"){const[c]=l;n("set",c)}else n(o,...l)}catch(c){an.error(c)}}return i}function _C(n,e,t,r,i){let o=function(...l){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(o=window[i]),window[i]=yC(o,n,e,t),{gtagCore:o,wrappedGtag:window[i]}}function vC(n){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(im)&&t.src.includes(n))return t;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wC=30,EC=1e3;class xC{constructor(e={},t=EC){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const Kx=new xC;function TC(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}async function bC(n){const{appId:e,apiKey:t}=n,r={method:"GET",headers:TC(t)},i=cC.replace("{app-id}",e),o=await fetch(i,r);if(o.status!==200&&o.status!==304){let l="";try{const c=await o.json();c.error?.message&&(l=c.error.message)}catch{}throw $n.create("config-fetch-failed",{httpStatus:o.status,responseMessage:l})}return o.json()}async function IC(n,e=Kx,t){const{appId:r,apiKey:i,measurementId:o}=n.options;if(!r)throw $n.create("no-app-id");if(!i){if(o)return{measurementId:o,appId:r};throw $n.create("no-api-key")}const l=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},c=new AC;return setTimeout(async()=>{c.abort()},lC),Gx({appId:r,apiKey:i,measurementId:o},l,c,e)}async function Gx(n,{throttleEndTimeMillis:e,backoffCount:t},r,i=Kx){const{appId:o,measurementId:l}=n;try{await SC(r,e)}catch(c){if(l)return an.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${c?.message}]`),{appId:o,measurementId:l};throw c}try{const c=await bC(n);return i.deleteThrottleMetadata(o),c}catch(c){const h=c;if(!kC(h)){if(i.deleteThrottleMetadata(o),l)return an.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${h?.message}]`),{appId:o,measurementId:l};throw c}const p=Number(h?.customData?.httpStatus)===503?Mv(t,i.intervalMillis,wC):Mv(t,i.intervalMillis),g={throttleEndTimeMillis:Date.now()+p,backoffCount:t+1};return i.setThrottleMetadata(o,g),an.debug(`Calling attemptFetch again in ${p} millis`),Gx(n,g,r,i)}}function SC(n,e){return new Promise((t,r)=>{const i=Math.max(e-Date.now(),0),o=setTimeout(t,i);n.addEventListener(()=>{clearTimeout(o),r($n.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function kC(n){if(!(n instanceof Kn)||!n.customData)return!1;const e=Number(n.customData.httpStatus);return e===429||e===500||e===503||e===504}class AC{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function RC(n,e,t,r,i){if(i&&i.global){n("event",t,r);return}else{const o=await e,l={...r,send_to:o};n("event",t,l)}}async function CC(n,e,t,r){if(r&&r.global){const i={};for(const o of Object.keys(t))i[`user_properties.${o}`]=t[o];return n("set",i),Promise.resolve()}else{const i=await e;n("config",i,{update:!0,user_properties:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PC(){if(rx())try{await ix()}catch(n){return an.warn($n.create("indexeddb-unavailable",{errorInfo:n?.toString()}).message),!1}else return an.warn($n.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function NC(n,e,t,r,i,o,l){const c=IC(n);c.then(w=>{t[w.measurementId]=w.appId,n.options.measurementId&&w.measurementId!==n.options.measurementId&&an.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${w.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(w=>an.error(w)),e.push(c);const h=PC().then(w=>{if(w)return r.getId()}),[p,g]=await Promise.all([c,h]);vC(o)||fC(o,p.measurementId),i("js",new Date);const v=l?.config??{};return v[aC]="firebase",v.update=!0,g!=null&&(v[oC]=g),i("config",p.measurementId,v),p.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DC{constructor(e){this.app=e}_delete(){return delete ba[this.app.options.appId],Promise.resolve()}}let ba={},Jv=[];const Zv={};let Fp="dataLayer",OC="gtag",e0,sm,t0=!1;function MC(){const n=[];if(nx()&&n.push("This is a browser extension environment."),B1()||n.push("Cookies are not available."),n.length>0){const e=n.map((r,i)=>`(${i+1}) ${r}`).join(" "),t=$n.create("invalid-analytics-context",{errorInfo:e});an.warn(t.message)}}function LC(n,e,t){MC();const r=n.options.appId;if(!r)throw $n.create("no-app-id");if(!n.options.apiKey)if(n.options.measurementId)an.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw $n.create("no-api-key");if(ba[r]!=null)throw $n.create("already-exists",{id:r});if(!t0){pC(Fp);const{wrappedGtag:o,gtagCore:l}=_C(ba,Jv,Zv,Fp,OC);sm=o,e0=l,t0=!0}return ba[r]=NC(n,Jv,Zv,e,e0,Fp,t),new DC(n)}function VC(n,e,t){n=It(n),CC(sm,ba[n.app.options.appId],e,t).catch(r=>an.error(r))}function FC(n,e,t,r){n=It(n),RC(sm,ba[n.app.options.appId],e,t,r).catch(i=>an.error(i))}const n0="@firebase/analytics",r0="0.10.19";function jC(){ar(new Hn(Xv,(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return LC(r,i,t)},"PUBLIC")),ar(new Hn("analytics-internal",n,"PRIVATE")),_n(n0,r0),_n(n0,r0,"esm2020");function n(e){try{const t=e.getProvider(Xv).getImmediate();return{logEvent:(r,i,o)=>FC(t,r,i,o),setUserProperties:(r,i)=>VC(t,r,i)}}catch(t){throw $n.create("interop-component-reg-failed",{reason:t})}}}jC();function Qx(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const UC=Qx,Yx=new Eo("auth","Firebase",Qx());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qh=new Rd("@firebase/auth");function zC(n,...e){Qh.logLevel<=Oe.WARN&&Qh.warn(`Auth (${xo}): ${n}`,...e)}function Dh(n,...e){Qh.logLevel<=Oe.ERROR&&Qh.error(`Auth (${xo}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lr(n,...e){throw om(n,...e)}function Dr(n,...e){return om(n,...e)}function Xx(n,e,t){const r={...UC(),[e]:t};return new Eo("auth","Firebase",r).create(e,{appName:n.name})}function fi(n){return Xx(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function om(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return Yx.create(n,...e)}function xe(n,e,...t){if(!n)throw om(e,...t)}function ui(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Dh(e),new Error(e)}function yi(n,e){n||ui(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mg(){return typeof self<"u"&&self.location?.href||""}function BC(){return i0()==="http:"||i0()==="https:"}function i0(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $C(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(BC()||nx()||"connection"in navigator)?navigator.onLine:!0}function HC(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lc{constructor(e,t){this.shortDelay=e,this.longDelay=t,yi(t>e,"Short delay should be less than long delay!"),this.isMobile=L1()||j1()}get(){return $C()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function am(n,e){yi(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jx{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ui("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ui("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ui("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WC={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qC=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],KC=new Lc(3e4,6e4);function ws(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function Ei(n,e,t,r,i={}){return Zx(n,i,async()=>{let o={},l={};r&&(e==="GET"?l=r:o={body:JSON.stringify(r)});const c=Oc({key:n.config.apiKey,...l}).slice(1),h=await n._getAdditionalHeaders();h["Content-Type"]="application/json",n.languageCode&&(h["X-Firebase-Locale"]=n.languageCode);const p={method:e,headers:h,...o};return F1()||(p.referrerPolicy="no-referrer"),n.emulatorConfig&&wo(n.emulatorConfig.host)&&(p.credentials="include"),Jx.fetch()(await eT(n,n.config.apiHost,t,c),p)})}async function Zx(n,e,t){n._canInitEmulator=!1;const r={...WC,...e};try{const i=new QC(n),o=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const l=await o.json();if("needConfirmation"in l)throw hh(n,"account-exists-with-different-credential",l);if(o.ok&&!("errorMessage"in l))return l;{const c=o.ok?l.errorMessage:l.error.message,[h,p]=c.split(" : ");if(h==="FEDERATED_USER_ID_ALREADY_LINKED")throw hh(n,"credential-already-in-use",l);if(h==="EMAIL_EXISTS")throw hh(n,"email-already-in-use",l);if(h==="USER_DISABLED")throw hh(n,"user-disabled",l);const g=r[h]||h.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw Xx(n,g,p);lr(n,g)}}catch(i){if(i instanceof Kn)throw i;lr(n,"network-request-failed",{message:String(i)})}}async function Vc(n,e,t,r,i={}){const o=await Ei(n,e,t,r,i);return"mfaPendingCredential"in o&&lr(n,"multi-factor-auth-required",{_serverResponse:o}),o}async function eT(n,e,t,r){const i=`${e}${t}?${r}`,o=n,l=o.config.emulator?am(n.config,i):`${n.config.apiScheme}://${i}`;return qC.includes(t)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(l).toString():l}function GC(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class QC{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Dr(this.auth,"network-request-failed")),KC.get())})}}function hh(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=Dr(n,e,r);return i.customData._tokenResponse=t,i}function s0(n){return n!==void 0&&n.enterprise!==void 0}class YC{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return GC(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function XC(n,e){return Ei(n,"GET","/v2/recaptchaConfig",ws(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JC(n,e){return Ei(n,"POST","/v1/accounts:delete",e)}async function Yh(n,e){return Ei(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cc(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function ZC(n,e=!1){const t=It(n),r=await t.getIdToken(e),i=lm(r);xe(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const o=typeof i.firebase=="object"?i.firebase:void 0,l=o?.sign_in_provider;return{claims:i,token:r,authTime:cc(jp(i.auth_time)),issuedAtTime:cc(jp(i.iat)),expirationTime:cc(jp(i.exp)),signInProvider:l||null,signInSecondFactor:o?.sign_in_second_factor||null}}function jp(n){return Number(n)*1e3}function lm(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Dh("JWT malformed, contained fewer than 3 sections"),null;try{const i=YE(t);return i?JSON.parse(i):(Dh("Failed to decode base64 JWT payload"),null)}catch(i){return Dh("Caught error parsing JWT payload as JSON",i?.toString()),null}}function o0(n){const e=lm(n);return xe(e,"internal-error"),xe(typeof e.exp<"u","internal-error"),xe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Da(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Kn&&eP(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function eP({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tP{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yg{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=cc(this.lastLoginAt),this.creationTime=cc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xh(n){const e=n.auth,t=await n.getIdToken(),r=await Da(n,Yh(e,{idToken:t}));xe(r?.users.length,e,"internal-error");const i=r.users[0];n._notifyReloadListener(i);const o=i.providerUserInfo?.length?tT(i.providerUserInfo):[],l=rP(n.providerData,o),c=n.isAnonymous,h=!(n.email&&i.passwordHash)&&!l?.length,p=c?h:!1,g={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:l,metadata:new yg(i.createdAt,i.lastLoginAt),isAnonymous:p};Object.assign(n,g)}async function nP(n){const e=It(n);await Xh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function rP(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function tT(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iP(n,e){const t=await Zx(n,{},async()=>{const r=Oc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,l=await eT(n,i,"/v1/token",`key=${o}`),c=await n._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";const h={method:"POST",headers:c,body:r};return n.emulatorConfig&&wo(n.emulatorConfig.host)&&(h.credentials="include"),Jx.fetch()(l,h)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function sP(n,e){return Ei(n,"POST","/v2/accounts:revokeToken",ws(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ia{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){xe(e.idToken,"internal-error"),xe(typeof e.idToken<"u","internal-error"),xe(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):o0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){xe(e.length!==0,"internal-error");const t=o0(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(xe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:o}=await iP(e,t);this.updateTokensAndExpiration(r,i,Number(o))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:o}=t,l=new Ia;return r&&(xe(typeof r=="string","internal-error",{appName:e}),l.refreshToken=r),i&&(xe(typeof i=="string","internal-error",{appName:e}),l.accessToken=i),o&&(xe(typeof o=="number","internal-error",{appName:e}),l.expirationTime=o),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ia,this.toJSON())}_performRefresh(){return ui("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ji(n,e){xe(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class sr{constructor({uid:e,auth:t,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new tP(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new yg(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await Da(this,this.stsTokenManager.getToken(this.auth,e));return xe(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return ZC(this,e)}reload(){return nP(this)}_assign(e){this!==e&&(xe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new sr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){xe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Xh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(An(this.auth.app))return Promise.reject(fi(this.auth));const e=await this.getIdToken();return await Da(this,JC(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,i=t.email??void 0,o=t.phoneNumber??void 0,l=t.photoURL??void 0,c=t.tenantId??void 0,h=t._redirectEventId??void 0,p=t.createdAt??void 0,g=t.lastLoginAt??void 0,{uid:v,emailVerified:w,isAnonymous:T,providerData:R,stsTokenManager:P}=t;xe(v&&P,e,"internal-error");const A=Ia.fromJSON(this.name,P);xe(typeof v=="string",e,"internal-error"),Ji(r,e.name),Ji(i,e.name),xe(typeof w=="boolean",e,"internal-error"),xe(typeof T=="boolean",e,"internal-error"),Ji(o,e.name),Ji(l,e.name),Ji(c,e.name),Ji(h,e.name),Ji(p,e.name),Ji(g,e.name);const F=new sr({uid:v,auth:e,email:i,emailVerified:w,displayName:r,isAnonymous:T,photoURL:l,phoneNumber:o,tenantId:c,stsTokenManager:A,createdAt:p,lastLoginAt:g});return R&&Array.isArray(R)&&(F.providerData=R.map(z=>({...z}))),h&&(F._redirectEventId=h),F}static async _fromIdTokenResponse(e,t,r=!1){const i=new Ia;i.updateFromServerResponse(t);const o=new sr({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Xh(o),o}static async _fromGetAccountInfoResponse(e,t,r){const i=t.users[0];xe(i.localId!==void 0,"internal-error");const o=i.providerUserInfo!==void 0?tT(i.providerUserInfo):[],l=!(i.email&&i.passwordHash)&&!o?.length,c=new Ia;c.updateFromIdToken(r);const h=new sr({uid:i.localId,auth:e,stsTokenManager:c,isAnonymous:l}),p={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new yg(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(h,p),h}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a0=new Map;function hi(n){yi(n instanceof Function,"Expected a class definition");let e=a0.get(n);return e?(yi(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,a0.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nT{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}nT.type="NONE";const l0=nT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oh(n,e,t){return`firebase:${n}:${e}:${t}`}class Sa{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:o}=this.auth;this.fullUserKey=Oh(this.userKey,i.apiKey,o),this.fullPersistenceKey=Oh("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Yh(this.auth,{idToken:e}).catch(()=>{});return t?sr._fromGetAccountInfoResponse(this.auth,t,e):null}return sr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Sa(hi(l0),e,r);const i=(await Promise.all(t.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let o=i[0]||hi(l0);const l=Oh(r,e.config.apiKey,e.name);let c=null;for(const p of t)try{const g=await p._get(l);if(g){let v;if(typeof g=="string"){const w=await Yh(e,{idToken:g}).catch(()=>{});if(!w)break;v=await sr._fromGetAccountInfoResponse(e,w,g)}else v=sr._fromJSON(e,g);p!==o&&(c=v),o=p;break}}catch{}const h=i.filter(p=>p._shouldAllowMigration);return!o._shouldAllowMigration||!h.length?new Sa(o,e,r):(o=h[0],c&&await o._set(l,c.toJSON()),await Promise.all(t.map(async p=>{if(p!==o)try{await p._remove(l)}catch{}})),new Sa(o,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c0(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(oT(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(rT(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(lT(e))return"Blackberry";if(cT(e))return"Webos";if(iT(e))return"Safari";if((e.includes("chrome/")||sT(e))&&!e.includes("edge/"))return"Chrome";if(aT(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function rT(n=tn()){return/firefox\//i.test(n)}function iT(n=tn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function sT(n=tn()){return/crios\//i.test(n)}function oT(n=tn()){return/iemobile/i.test(n)}function aT(n=tn()){return/android/i.test(n)}function lT(n=tn()){return/blackberry/i.test(n)}function cT(n=tn()){return/webos/i.test(n)}function cm(n=tn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function oP(n=tn()){return cm(n)&&!!window.navigator?.standalone}function aP(){return U1()&&document.documentMode===10}function uT(n=tn()){return cm(n)||aT(n)||cT(n)||lT(n)||/windows phone/i.test(n)||oT(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hT(n,e=[]){let t;switch(n){case"Browser":t=c0(tn());break;case"Worker":t=`${c0(tn())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${xo}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lP{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=o=>new Promise((l,c)=>{try{const h=e(o);l(h)}catch(h){c(h)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cP(n,e={}){return Ei(n,"GET","/v2/passwordPolicy",ws(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uP=6;class hP{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??uP,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dP{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new u0(this),this.idTokenSubscription=new u0(this),this.beforeStateQueue=new lP(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Yx,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=hi(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Sa.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Yh(this,{idToken:e}),r=await sr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(An(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=this.redirectUser?._redirectEventId,l=r?._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===l)&&c?.user&&(r=c.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return xe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Xh(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=HC()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(An(this.app))return Promise.reject(fi(this));const t=e?It(e):null;return t&&xe(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&xe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return An(this.app)?Promise.reject(fi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return An(this.app)?Promise.reject(fi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(hi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await cP(this),t=new hP(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Eo("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await sP(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&hi(e)||this._popupRedirectResolver;xe(t,this,"argument-error"),this.redirectPersistenceManager=await Sa.create(this,[hi(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const o=typeof t=="function"?t:t.next.bind(t);let l=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(xe(c,this,"internal-error"),c.then(()=>{l||o(this.currentUser)}),typeof t=="function"){const h=e.addObserver(t,r,i);return()=>{l=!0,h()}}else{const h=e.addObserver(t);return()=>{l=!0,h()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return xe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=hT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(An(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&zC(`Error while retrieving App Check token: ${e.error}`),e?.token}}function To(n){return It(n)}class u0{constructor(e){this.auth=e,this.observer=null,this.addObserver=K1(t=>this.observer=t)}get next(){return xe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Nd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function fP(n){Nd=n}function dT(n){return Nd.loadJS(n)}function pP(){return Nd.recaptchaEnterpriseScript}function gP(){return Nd.gapiScript}function mP(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class yP{constructor(){this.enterprise=new _P}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class _P{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const vP="recaptcha-enterprise",fT="NO_RECAPTCHA";class wP{constructor(e){this.type=vP,this.auth=To(e)}async verify(e="verify",t=!1){async function r(o){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(l,c)=>{XC(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(h=>{if(h.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const p=new YC(h);return o.tenantId==null?o._agentRecaptchaConfig=p:o._tenantRecaptchaConfigs[o.tenantId]=p,l(p.siteKey)}}).catch(h=>{c(h)})})}function i(o,l,c){const h=window.grecaptcha;s0(h)?h.enterprise.ready(()=>{h.enterprise.execute(o,{action:e}).then(p=>{l(p)}).catch(()=>{l(fT)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new yP().execute("siteKey",{action:"verify"}):new Promise((o,l)=>{r(this.auth).then(c=>{if(!t&&s0(window.grecaptcha))i(c,o,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let h=pP();h.length!==0&&(h+=c),dT(h).then(()=>{i(c,o,l)}).catch(p=>{l(p)})}}).catch(c=>{l(c)})})}}async function h0(n,e,t,r=!1,i=!1){const o=new wP(n);let l;if(i)l=fT;else try{l=await o.verify(t)}catch{l=await o.verify(t,!0)}const c={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in c){const h=c.phoneEnrollmentInfo.phoneNumber,p=c.phoneEnrollmentInfo.recaptchaToken;Object.assign(c,{phoneEnrollmentInfo:{phoneNumber:h,recaptchaToken:p,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in c){const h=c.phoneSignInInfo.recaptchaToken;Object.assign(c,{phoneSignInInfo:{recaptchaToken:h,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return c}return r?Object.assign(c,{captchaResp:l}):Object.assign(c,{captchaResponse:l}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c}async function _g(n,e,t,r,i){if(n._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await h0(n,e,t,t==="getOobCode");return r(n,o)}else return r(n,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await h0(n,e,t,t==="getOobCode");return r(n,l)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EP(n,e){const t=Mc(n,"auth");if(t.isInitialized()){const i=t.getImmediate(),o=t.getOptions();if(ao(o,e??{}))return i;lr(i,"already-initialized")}return t.initialize({options:e})}function xP(n,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(hi);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function TP(n,e,t){const r=To(n);xe(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,o=pT(e),{host:l,port:c}=bP(e),h=c===null?"":`:${c}`,p={url:`${o}//${l}${h}/`},g=Object.freeze({host:l,port:c,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){xe(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),xe(ao(p,r.config.emulator)&&ao(g,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=p,r.emulatorConfig=g,r.settings.appVerificationDisabledForTesting=!0,wo(l)?(ex(`${o}//${l}${h}`),tx("Auth",!0)):IP()}function pT(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function bP(n){const e=pT(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const o=i[1];return{host:o,port:d0(r.substr(o.length+1))}}else{const[o,l]=r.split(":");return{host:o,port:d0(l)}}}function d0(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function IP(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class um{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ui("not implemented")}_getIdTokenResponse(e){return ui("not implemented")}_linkToIdToken(e,t){return ui("not implemented")}_getReauthenticationResolver(e){return ui("not implemented")}}async function SP(n,e){return Ei(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kP(n,e){return Vc(n,"POST","/v1/accounts:signInWithPassword",ws(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AP(n,e){return Vc(n,"POST","/v1/accounts:signInWithEmailLink",ws(n,e))}async function RP(n,e){return Vc(n,"POST","/v1/accounts:signInWithEmailLink",ws(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _c extends um{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new _c(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new _c(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return _g(e,t,"signInWithPassword",kP);case"emailLink":return AP(e,{email:this._email,oobCode:this._password});default:lr(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return _g(e,r,"signUpPassword",SP);case"emailLink":return RP(e,{idToken:t,email:this._email,oobCode:this._password});default:lr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ka(n,e){return Vc(n,"POST","/v1/accounts:signInWithIdp",ws(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CP="http://localhost";class ho extends um{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new ho(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):lr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...o}=t;if(!r||!i)return null;const l=new ho(r,i);return l.idToken=o.idToken||void 0,l.accessToken=o.accessToken||void 0,l.secret=o.secret,l.nonce=o.nonce,l.pendingToken=o.pendingToken||null,l}_getIdTokenResponse(e){const t=this.buildRequest();return ka(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,ka(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,ka(e,t)}buildRequest(){const e={requestUri:CP,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Oc(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PP(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function NP(n){const e=Xl(Jl(n)).link,t=e?Xl(Jl(e)).deep_link_id:null,r=Xl(Jl(n)).deep_link_id;return(r?Xl(Jl(r)).link:null)||r||t||e||n}class hm{constructor(e){const t=Xl(Jl(e)),r=t.apiKey??null,i=t.oobCode??null,o=PP(t.mode??null);xe(r&&i&&o,"argument-error"),this.apiKey=r,this.operation=o,this.code=i,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=NP(e);try{return new hm(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ba{constructor(){this.providerId=Ba.PROVIDER_ID}static credential(e,t){return _c._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=hm.parseLink(t);return xe(r,"argument-error"),_c._fromEmailAndCode(e,r.code,r.tenantId)}}Ba.PROVIDER_ID="password";Ba.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ba.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gT{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fc extends gT{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es extends Fc{constructor(){super("facebook.com")}static credential(e){return ho._fromParams({providerId:es.PROVIDER_ID,signInMethod:es.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return es.credentialFromTaggedObject(e)}static credentialFromError(e){return es.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return es.credential(e.oauthAccessToken)}catch{return null}}}es.FACEBOOK_SIGN_IN_METHOD="facebook.com";es.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts extends Fc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return ho._fromParams({providerId:ts.PROVIDER_ID,signInMethod:ts.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return ts.credentialFromTaggedObject(e)}static credentialFromError(e){return ts.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return ts.credential(t,r)}catch{return null}}}ts.GOOGLE_SIGN_IN_METHOD="google.com";ts.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns extends Fc{constructor(){super("github.com")}static credential(e){return ho._fromParams({providerId:ns.PROVIDER_ID,signInMethod:ns.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ns.credentialFromTaggedObject(e)}static credentialFromError(e){return ns.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ns.credential(e.oauthAccessToken)}catch{return null}}}ns.GITHUB_SIGN_IN_METHOD="github.com";ns.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rs extends Fc{constructor(){super("twitter.com")}static credential(e,t){return ho._fromParams({providerId:rs.PROVIDER_ID,signInMethod:rs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return rs.credentialFromTaggedObject(e)}static credentialFromError(e){return rs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return rs.credential(t,r)}catch{return null}}}rs.TWITTER_SIGN_IN_METHOD="twitter.com";rs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DP(n,e){return Vc(n,"POST","/v1/accounts:signUp",ws(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){const o=await sr._fromIdTokenResponse(e,r,i),l=f0(r);return new fo({user:o,providerId:l,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const i=f0(r);return new fo({user:e,providerId:i,_tokenResponse:r,operationType:t})}}function f0(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jh extends Kn{constructor(e,t,r,i){super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Jh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new Jh(e,t,r,i)}}function mT(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Jh._fromErrorAndOperation(n,o,e,r):o})}async function OP(n,e,t=!1){const r=await Da(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return fo._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MP(n,e,t=!1){const{auth:r}=n;if(An(r.app))return Promise.reject(fi(r));const i="reauthenticate";try{const o=await Da(n,mT(r,i,e,n),t);xe(o.idToken,r,"internal-error");const l=lm(o.idToken);xe(l,r,"internal-error");const{sub:c}=l;return xe(n.uid===c,r,"user-mismatch"),fo._forOperation(n,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&lr(r,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yT(n,e,t=!1){if(An(n.app))return Promise.reject(fi(n));const r="signIn",i=await mT(n,r,e),o=await fo._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(o.user),o}async function LP(n,e){return yT(To(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _T(n){const e=To(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function VP(n,e,t){if(An(n.app))return Promise.reject(fi(n));const r=To(n),l=await _g(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",DP).catch(h=>{throw h.code==="auth/password-does-not-meet-requirements"&&_T(n),h}),c=await fo._fromIdTokenResponse(r,"signIn",l);return await r._updateCurrentUser(c.user),c}function FP(n,e,t){return An(n.app)?Promise.reject(fi(n)):LP(It(n),Ba.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&_T(n),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jP(n,e){return Ei(n,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UP(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const r=It(n),o={idToken:await r.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},l=await Da(r,jP(r.auth,o));r.displayName=l.displayName||null,r.photoURL=l.photoUrl||null;const c=r.providerData.find(({providerId:h})=>h==="password");c&&(c.displayName=r.displayName,c.photoURL=r.photoURL),await r._updateTokensIfNecessary(l)}function zP(n,e,t,r){return It(n).onIdTokenChanged(e,t,r)}function BP(n,e,t){return It(n).beforeAuthStateChanged(e,t)}function $P(n,e,t,r){return It(n).onAuthStateChanged(e,t,r)}function HP(n){return It(n).signOut()}const Zh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vT{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Zh,"1"),this.storage.removeItem(Zh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WP=1e3,qP=10;class wT extends vT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=uT(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((l,c,h)=>{this.notifyListeners(l,h)});return}const r=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const l=this.storage.getItem(r);!t&&this.localCache[r]===l||this.notifyListeners(r,l)},o=this.storage.getItem(r);aP()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,qP):i()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},WP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}wT.type="LOCAL";const KP=wT;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ET extends vT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}ET.type="SESSION";const xT=ET;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GP(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const r=new Dd(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:i,data:o}=t.data,l=this.handlersMap[i];if(!l?.size)return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const c=Array.from(l).map(async p=>p(t.origin,o)),h=await GP(c);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:h})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Dd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dm(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QP{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,l;return new Promise((c,h)=>{const p=dm("",20);i.port1.start();const g=setTimeout(()=>{h(new Error("unsupported_event"))},r);l={messageChannel:i,onMessage(v){const w=v;if(w.data.eventId===p)switch(w.data.status){case"ack":clearTimeout(g),o=setTimeout(()=>{h(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),c(w.data.response);break;default:clearTimeout(g),clearTimeout(o),h(new Error("invalid_response"));break}}},this.handlers.add(l),i.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:p,data:t},[i.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Or(){return window}function YP(n){Or().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TT(){return typeof Or().WorkerGlobalScope<"u"&&typeof Or().importScripts=="function"}async function XP(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function JP(){return navigator?.serviceWorker?.controller||null}function ZP(){return TT()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bT="firebaseLocalStorageDb",e2=1,ed="firebaseLocalStorage",IT="fbase_key";class jc{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Od(n,e){return n.transaction([ed],e?"readwrite":"readonly").objectStore(ed)}function t2(){const n=indexedDB.deleteDatabase(bT);return new jc(n).toPromise()}function vg(){const n=indexedDB.open(bT,e2);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(ed,{keyPath:IT})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(ed)?e(r):(r.close(),await t2(),e(await vg()))})})}async function p0(n,e,t){const r=Od(n,!0).put({[IT]:e,value:t});return new jc(r).toPromise()}async function n2(n,e){const t=Od(n,!1).get(e),r=await new jc(t).toPromise();return r===void 0?null:r.value}function g0(n,e){const t=Od(n,!0).delete(e);return new jc(t).toPromise()}const r2=800,i2=3;class ST{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await vg(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>i2)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return TT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Dd._getInstance(ZP()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await XP(),!this.activeServiceWorker)return;this.sender=new QP(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||JP()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await vg();return await p0(e,Zh,"1"),await g0(e,Zh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>p0(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>n2(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>g0(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const o=Od(i,!1).getAll();return new jc(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:o}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(o)&&(this.notifyListeners(i,o),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),r2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}ST.type="LOCAL";const s2=ST;new Lc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o2(n,e){return e?hi(e):(xe(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fm extends um{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ka(e,this._buildIdpRequest())}_linkToIdToken(e,t){return ka(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return ka(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function a2(n){return yT(n.auth,new fm(n),n.bypassAuthState)}function l2(n){const{auth:e,user:t}=n;return xe(t,e,"internal-error"),MP(t,new fm(n),n.bypassAuthState)}async function c2(n){const{auth:e,user:t}=n;return xe(t,e,"internal-error"),OP(t,new fm(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kT{constructor(e,t,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:i,tenantId:o,error:l,type:c}=e;if(l){this.reject(l);return}const h={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(h))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return a2;case"linkViaPopup":case"linkViaRedirect":return c2;case"reauthViaPopup":case"reauthViaRedirect":return l2;default:lr(this.auth,"internal-error")}}resolve(e){yi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){yi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u2=new Lc(2e3,1e4);class Ta extends kT{constructor(e,t,r,i,o){super(e,t,i,o),this.provider=r,this.authWindow=null,this.pollId=null,Ta.currentPopupAction&&Ta.currentPopupAction.cancel(),Ta.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return xe(e,this.auth,"internal-error"),e}async onExecution(){yi(this.filter.length===1,"Popup operations only handle one event");const e=dm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Dr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Dr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ta.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Dr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,u2.get())};e()}}Ta.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h2="pendingRedirect",Mh=new Map;class d2 extends kT{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Mh.get(this.auth._key());if(!e){try{const r=await f2(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Mh.set(this.auth._key(),e)}return this.bypassAuthState||Mh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function f2(n,e){const t=m2(e),r=g2(n);if(!await r._isAvailable())return!1;const i=await r._get(t)==="true";return await r._remove(t),i}function p2(n,e){Mh.set(n._key(),e)}function g2(n){return hi(n._redirectPersistence)}function m2(n){return Oh(h2,n.config.apiKey,n.name)}async function y2(n,e,t=!1){if(An(n.app))return Promise.reject(fi(n));const r=To(n),i=o2(r,e),l=await new d2(r,i,t).execute();return l&&!t&&(delete l.user._redirectEventId,await r._persistUserIfCurrent(l.user),await r._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _2=600*1e3;class v2{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!w2(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!AT(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";t.onError(Dr(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=_2&&this.cachedEventUids.clear(),this.cachedEventUids.has(m0(e))}saveEventToCache(e){this.cachedEventUids.add(m0(e)),this.lastProcessedEventTime=Date.now()}}function m0(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function AT({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function w2(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return AT(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function E2(n,e={}){return Ei(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x2=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,T2=/^https?/;async function b2(n){if(n.config.emulator)return;const{authorizedDomains:e}=await E2(n);for(const t of e)try{if(I2(t))return}catch{}lr(n,"unauthorized-domain")}function I2(n){const e=mg(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const l=new URL(n);return l.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&l.hostname===r}if(!T2.test(t))return!1;if(x2.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S2=new Lc(3e4,6e4);function y0(){const n=Or().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function k2(n){return new Promise((e,t)=>{function r(){y0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{y0(),t(Dr(n,"network-request-failed"))},timeout:S2.get()})}if(Or().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Or().gapi?.load)r();else{const i=mP("iframefcb");return Or()[i]=()=>{gapi.load?r():t(Dr(n,"network-request-failed"))},dT(`${gP()}?onload=${i}`).catch(o=>t(o))}}).catch(e=>{throw Lh=null,e})}let Lh=null;function A2(n){return Lh=Lh||k2(n),Lh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R2=new Lc(5e3,15e3),C2="__/auth/iframe",P2="emulator/auth/iframe",N2={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},D2=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function O2(n){const e=n.config;xe(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?am(e,P2):`https://${n.config.authDomain}/${C2}`,r={apiKey:e.apiKey,appName:n.name,v:xo},i=D2.get(n.config.apiHost);i&&(r.eid=i);const o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${Oc(r).slice(1)}`}async function M2(n){const e=await A2(n),t=Or().gapi;return xe(t,n,"internal-error"),e.open({where:document.body,url:O2(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:N2,dontclear:!0},r=>new Promise(async(i,o)=>{await r.restyle({setHideOnLeave:!1});const l=Dr(n,"network-request-failed"),c=Or().setTimeout(()=>{o(l)},R2.get());function h(){Or().clearTimeout(c),i(r)}r.ping(h).then(h,()=>{o(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L2={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},V2=500,F2=600,j2="_blank",U2="http://localhost";class _0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function z2(n,e,t,r=V2,i=F2){const o=Math.max((window.screen.availHeight-i)/2,0).toString(),l=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const h={...L2,width:r.toString(),height:i.toString(),top:o,left:l},p=tn().toLowerCase();t&&(c=sT(p)?j2:t),rT(p)&&(e=e||U2,h.scrollbars="yes");const g=Object.entries(h).reduce((w,[T,R])=>`${w}${T}=${R},`,"");if(oP(p)&&c!=="_self")return B2(e||"",c),new _0(null);const v=window.open(e||"",c,g);xe(v,n,"popup-blocked");try{v.focus()}catch{}return new _0(v)}function B2(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $2="__/auth/handler",H2="emulator/auth/handler",W2=encodeURIComponent("fac");async function v0(n,e,t,r,i,o){xe(n.config.authDomain,n,"auth-domain-config-required"),xe(n.config.apiKey,n,"invalid-api-key");const l={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:xo,eventId:i};if(e instanceof gT){e.setDefaultLanguage(n.languageCode),l.providerId=e.providerId||"",q1(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[g,v]of Object.entries({}))l[g]=v}if(e instanceof Fc){const g=e.getScopes().filter(v=>v!=="");g.length>0&&(l.scopes=g.join(","))}n.tenantId&&(l.tid=n.tenantId);const c=l;for(const g of Object.keys(c))c[g]===void 0&&delete c[g];const h=await n._getAppCheckToken(),p=h?`#${W2}=${encodeURIComponent(h)}`:"";return`${q2(n)}?${Oc(c).slice(1)}${p}`}function q2({config:n}){return n.emulator?am(n,H2):`https://${n.authDomain}/${$2}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Up="webStorageSupport";class K2{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=xT,this._completeRedirectFn=y2,this._overrideRedirectResult=p2}async _openPopup(e,t,r,i){yi(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const o=await v0(e,t,r,mg(),i);return z2(e,o,dm())}async _openRedirect(e,t,r,i){await this._originValidation(e);const o=await v0(e,t,r,mg(),i);return YP(o),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:o}=this.eventManagers[t];return i?Promise.resolve(i):(yi(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await M2(e),r=new v2(e);return t.register("authEvent",i=>(xe(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Up,{type:Up},i=>{const o=i?.[0]?.[Up];o!==void 0&&t(!!o),lr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=b2(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return uT()||iT()||cm()}}const G2=K2;var w0="@firebase/auth",E0="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q2{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){xe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y2(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function X2(n){ar(new Hn("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:l,authDomain:c}=r.options;xe(l&&!l.includes(":"),"invalid-api-key",{appName:r.name});const h={apiKey:l,authDomain:c,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:hT(n)},p=new dP(r,i,o,h);return xP(p,t),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),ar(new Hn("auth-internal",e=>{const t=To(e.getProvider("auth").getImmediate());return(r=>new Q2(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),_n(w0,E0,Y2(n)),_n(w0,E0,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J2=300,Z2=ZE("authIdTokenMaxAge")||J2;let x0=null;const eN=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>Z2)return;const i=t?.token;x0!==i&&(x0=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function tN(n=cx()){const e=Mc(n,"auth");if(e.isInitialized())return e.getImmediate();const t=EP(n,{popupRedirectResolver:G2,persistence:[s2,KP,xT]}),r=ZE("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const l=eN(o.toString());BP(t,l,()=>l(t.currentUser)),zP(t,c=>l(c))}}const i=XE("auth");return i&&TP(t,`http://${i}`),t}function nN(){return document.getElementsByTagName("head")?.[0]??document}fP({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const o=Dr("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",nN().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});X2("Browser");var T0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var us,RT;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(D,b){function N(){}N.prototype=b.prototype,D.F=b.prototype,D.prototype=new N,D.prototype.constructor=D,D.D=function(L,k,O){for(var C=Array(arguments.length-2),ge=2;ge<arguments.length;ge++)C[ge-2]=arguments[ge];return b.prototype[k].apply(L,C)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(D,b,N){N||(N=0);const L=Array(16);if(typeof b=="string")for(var k=0;k<16;++k)L[k]=b.charCodeAt(N++)|b.charCodeAt(N++)<<8|b.charCodeAt(N++)<<16|b.charCodeAt(N++)<<24;else for(k=0;k<16;++k)L[k]=b[N++]|b[N++]<<8|b[N++]<<16|b[N++]<<24;b=D.g[0],N=D.g[1],k=D.g[2];let O=D.g[3],C;C=b+(O^N&(k^O))+L[0]+3614090360&4294967295,b=N+(C<<7&4294967295|C>>>25),C=O+(k^b&(N^k))+L[1]+3905402710&4294967295,O=b+(C<<12&4294967295|C>>>20),C=k+(N^O&(b^N))+L[2]+606105819&4294967295,k=O+(C<<17&4294967295|C>>>15),C=N+(b^k&(O^b))+L[3]+3250441966&4294967295,N=k+(C<<22&4294967295|C>>>10),C=b+(O^N&(k^O))+L[4]+4118548399&4294967295,b=N+(C<<7&4294967295|C>>>25),C=O+(k^b&(N^k))+L[5]+1200080426&4294967295,O=b+(C<<12&4294967295|C>>>20),C=k+(N^O&(b^N))+L[6]+2821735955&4294967295,k=O+(C<<17&4294967295|C>>>15),C=N+(b^k&(O^b))+L[7]+4249261313&4294967295,N=k+(C<<22&4294967295|C>>>10),C=b+(O^N&(k^O))+L[8]+1770035416&4294967295,b=N+(C<<7&4294967295|C>>>25),C=O+(k^b&(N^k))+L[9]+2336552879&4294967295,O=b+(C<<12&4294967295|C>>>20),C=k+(N^O&(b^N))+L[10]+4294925233&4294967295,k=O+(C<<17&4294967295|C>>>15),C=N+(b^k&(O^b))+L[11]+2304563134&4294967295,N=k+(C<<22&4294967295|C>>>10),C=b+(O^N&(k^O))+L[12]+1804603682&4294967295,b=N+(C<<7&4294967295|C>>>25),C=O+(k^b&(N^k))+L[13]+4254626195&4294967295,O=b+(C<<12&4294967295|C>>>20),C=k+(N^O&(b^N))+L[14]+2792965006&4294967295,k=O+(C<<17&4294967295|C>>>15),C=N+(b^k&(O^b))+L[15]+1236535329&4294967295,N=k+(C<<22&4294967295|C>>>10),C=b+(k^O&(N^k))+L[1]+4129170786&4294967295,b=N+(C<<5&4294967295|C>>>27),C=O+(N^k&(b^N))+L[6]+3225465664&4294967295,O=b+(C<<9&4294967295|C>>>23),C=k+(b^N&(O^b))+L[11]+643717713&4294967295,k=O+(C<<14&4294967295|C>>>18),C=N+(O^b&(k^O))+L[0]+3921069994&4294967295,N=k+(C<<20&4294967295|C>>>12),C=b+(k^O&(N^k))+L[5]+3593408605&4294967295,b=N+(C<<5&4294967295|C>>>27),C=O+(N^k&(b^N))+L[10]+38016083&4294967295,O=b+(C<<9&4294967295|C>>>23),C=k+(b^N&(O^b))+L[15]+3634488961&4294967295,k=O+(C<<14&4294967295|C>>>18),C=N+(O^b&(k^O))+L[4]+3889429448&4294967295,N=k+(C<<20&4294967295|C>>>12),C=b+(k^O&(N^k))+L[9]+568446438&4294967295,b=N+(C<<5&4294967295|C>>>27),C=O+(N^k&(b^N))+L[14]+3275163606&4294967295,O=b+(C<<9&4294967295|C>>>23),C=k+(b^N&(O^b))+L[3]+4107603335&4294967295,k=O+(C<<14&4294967295|C>>>18),C=N+(O^b&(k^O))+L[8]+1163531501&4294967295,N=k+(C<<20&4294967295|C>>>12),C=b+(k^O&(N^k))+L[13]+2850285829&4294967295,b=N+(C<<5&4294967295|C>>>27),C=O+(N^k&(b^N))+L[2]+4243563512&4294967295,O=b+(C<<9&4294967295|C>>>23),C=k+(b^N&(O^b))+L[7]+1735328473&4294967295,k=O+(C<<14&4294967295|C>>>18),C=N+(O^b&(k^O))+L[12]+2368359562&4294967295,N=k+(C<<20&4294967295|C>>>12),C=b+(N^k^O)+L[5]+4294588738&4294967295,b=N+(C<<4&4294967295|C>>>28),C=O+(b^N^k)+L[8]+2272392833&4294967295,O=b+(C<<11&4294967295|C>>>21),C=k+(O^b^N)+L[11]+1839030562&4294967295,k=O+(C<<16&4294967295|C>>>16),C=N+(k^O^b)+L[14]+4259657740&4294967295,N=k+(C<<23&4294967295|C>>>9),C=b+(N^k^O)+L[1]+2763975236&4294967295,b=N+(C<<4&4294967295|C>>>28),C=O+(b^N^k)+L[4]+1272893353&4294967295,O=b+(C<<11&4294967295|C>>>21),C=k+(O^b^N)+L[7]+4139469664&4294967295,k=O+(C<<16&4294967295|C>>>16),C=N+(k^O^b)+L[10]+3200236656&4294967295,N=k+(C<<23&4294967295|C>>>9),C=b+(N^k^O)+L[13]+681279174&4294967295,b=N+(C<<4&4294967295|C>>>28),C=O+(b^N^k)+L[0]+3936430074&4294967295,O=b+(C<<11&4294967295|C>>>21),C=k+(O^b^N)+L[3]+3572445317&4294967295,k=O+(C<<16&4294967295|C>>>16),C=N+(k^O^b)+L[6]+76029189&4294967295,N=k+(C<<23&4294967295|C>>>9),C=b+(N^k^O)+L[9]+3654602809&4294967295,b=N+(C<<4&4294967295|C>>>28),C=O+(b^N^k)+L[12]+3873151461&4294967295,O=b+(C<<11&4294967295|C>>>21),C=k+(O^b^N)+L[15]+530742520&4294967295,k=O+(C<<16&4294967295|C>>>16),C=N+(k^O^b)+L[2]+3299628645&4294967295,N=k+(C<<23&4294967295|C>>>9),C=b+(k^(N|~O))+L[0]+4096336452&4294967295,b=N+(C<<6&4294967295|C>>>26),C=O+(N^(b|~k))+L[7]+1126891415&4294967295,O=b+(C<<10&4294967295|C>>>22),C=k+(b^(O|~N))+L[14]+2878612391&4294967295,k=O+(C<<15&4294967295|C>>>17),C=N+(O^(k|~b))+L[5]+4237533241&4294967295,N=k+(C<<21&4294967295|C>>>11),C=b+(k^(N|~O))+L[12]+1700485571&4294967295,b=N+(C<<6&4294967295|C>>>26),C=O+(N^(b|~k))+L[3]+2399980690&4294967295,O=b+(C<<10&4294967295|C>>>22),C=k+(b^(O|~N))+L[10]+4293915773&4294967295,k=O+(C<<15&4294967295|C>>>17),C=N+(O^(k|~b))+L[1]+2240044497&4294967295,N=k+(C<<21&4294967295|C>>>11),C=b+(k^(N|~O))+L[8]+1873313359&4294967295,b=N+(C<<6&4294967295|C>>>26),C=O+(N^(b|~k))+L[15]+4264355552&4294967295,O=b+(C<<10&4294967295|C>>>22),C=k+(b^(O|~N))+L[6]+2734768916&4294967295,k=O+(C<<15&4294967295|C>>>17),C=N+(O^(k|~b))+L[13]+1309151649&4294967295,N=k+(C<<21&4294967295|C>>>11),C=b+(k^(N|~O))+L[4]+4149444226&4294967295,b=N+(C<<6&4294967295|C>>>26),C=O+(N^(b|~k))+L[11]+3174756917&4294967295,O=b+(C<<10&4294967295|C>>>22),C=k+(b^(O|~N))+L[2]+718787259&4294967295,k=O+(C<<15&4294967295|C>>>17),C=N+(O^(k|~b))+L[9]+3951481745&4294967295,D.g[0]=D.g[0]+b&4294967295,D.g[1]=D.g[1]+(k+(C<<21&4294967295|C>>>11))&4294967295,D.g[2]=D.g[2]+k&4294967295,D.g[3]=D.g[3]+O&4294967295}r.prototype.v=function(D,b){b===void 0&&(b=D.length);const N=b-this.blockSize,L=this.C;let k=this.h,O=0;for(;O<b;){if(k==0)for(;O<=N;)i(this,D,O),O+=this.blockSize;if(typeof D=="string"){for(;O<b;)if(L[k++]=D.charCodeAt(O++),k==this.blockSize){i(this,L),k=0;break}}else for(;O<b;)if(L[k++]=D[O++],k==this.blockSize){i(this,L),k=0;break}}this.h=k,this.o+=b},r.prototype.A=function(){var D=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);D[0]=128;for(var b=1;b<D.length-8;++b)D[b]=0;b=this.o*8;for(var N=D.length-8;N<D.length;++N)D[N]=b&255,b/=256;for(this.v(D),D=Array(16),b=0,N=0;N<4;++N)for(let L=0;L<32;L+=8)D[b++]=this.g[N]>>>L&255;return D};function o(D,b){var N=c;return Object.prototype.hasOwnProperty.call(N,D)?N[D]:N[D]=b(D)}function l(D,b){this.h=b;const N=[];let L=!0;for(let k=D.length-1;k>=0;k--){const O=D[k]|0;L&&O==b||(N[k]=O,L=!1)}this.g=N}var c={};function h(D){return-128<=D&&D<128?o(D,function(b){return new l([b|0],b<0?-1:0)}):new l([D|0],D<0?-1:0)}function p(D){if(isNaN(D)||!isFinite(D))return v;if(D<0)return A(p(-D));const b=[];let N=1;for(let L=0;D>=N;L++)b[L]=D/N|0,N*=4294967296;return new l(b,0)}function g(D,b){if(D.length==0)throw Error("number format error: empty string");if(b=b||10,b<2||36<b)throw Error("radix out of range: "+b);if(D.charAt(0)=="-")return A(g(D.substring(1),b));if(D.indexOf("-")>=0)throw Error('number format error: interior "-" character');const N=p(Math.pow(b,8));let L=v;for(let O=0;O<D.length;O+=8){var k=Math.min(8,D.length-O);const C=parseInt(D.substring(O,O+k),b);k<8?(k=p(Math.pow(b,k)),L=L.j(k).add(p(C))):(L=L.j(N),L=L.add(p(C)))}return L}var v=h(0),w=h(1),T=h(16777216);n=l.prototype,n.m=function(){if(P(this))return-A(this).m();let D=0,b=1;for(let N=0;N<this.g.length;N++){const L=this.i(N);D+=(L>=0?L:4294967296+L)*b,b*=4294967296}return D},n.toString=function(D){if(D=D||10,D<2||36<D)throw Error("radix out of range: "+D);if(R(this))return"0";if(P(this))return"-"+A(this).toString(D);const b=p(Math.pow(D,6));var N=this;let L="";for(;;){const k=K(N,b).g;N=F(N,k.j(b));let O=((N.g.length>0?N.g[0]:N.h)>>>0).toString(D);if(N=k,R(N))return O+L;for(;O.length<6;)O="0"+O;L=O+L}},n.i=function(D){return D<0?0:D<this.g.length?this.g[D]:this.h};function R(D){if(D.h!=0)return!1;for(let b=0;b<D.g.length;b++)if(D.g[b]!=0)return!1;return!0}function P(D){return D.h==-1}n.l=function(D){return D=F(this,D),P(D)?-1:R(D)?0:1};function A(D){const b=D.g.length,N=[];for(let L=0;L<b;L++)N[L]=~D.g[L];return new l(N,~D.h).add(w)}n.abs=function(){return P(this)?A(this):this},n.add=function(D){const b=Math.max(this.g.length,D.g.length),N=[];let L=0;for(let k=0;k<=b;k++){let O=L+(this.i(k)&65535)+(D.i(k)&65535),C=(O>>>16)+(this.i(k)>>>16)+(D.i(k)>>>16);L=C>>>16,O&=65535,C&=65535,N[k]=C<<16|O}return new l(N,N[N.length-1]&-2147483648?-1:0)};function F(D,b){return D.add(A(b))}n.j=function(D){if(R(this)||R(D))return v;if(P(this))return P(D)?A(this).j(A(D)):A(A(this).j(D));if(P(D))return A(this.j(A(D)));if(this.l(T)<0&&D.l(T)<0)return p(this.m()*D.m());const b=this.g.length+D.g.length,N=[];for(var L=0;L<2*b;L++)N[L]=0;for(L=0;L<this.g.length;L++)for(let k=0;k<D.g.length;k++){const O=this.i(L)>>>16,C=this.i(L)&65535,ge=D.i(k)>>>16,we=D.i(k)&65535;N[2*L+2*k]+=C*we,z(N,2*L+2*k),N[2*L+2*k+1]+=O*we,z(N,2*L+2*k+1),N[2*L+2*k+1]+=C*ge,z(N,2*L+2*k+1),N[2*L+2*k+2]+=O*ge,z(N,2*L+2*k+2)}for(D=0;D<b;D++)N[D]=N[2*D+1]<<16|N[2*D];for(D=b;D<2*b;D++)N[D]=0;return new l(N,0)};function z(D,b){for(;(D[b]&65535)!=D[b];)D[b+1]+=D[b]>>>16,D[b]&=65535,b++}function H(D,b){this.g=D,this.h=b}function K(D,b){if(R(b))throw Error("division by zero");if(R(D))return new H(v,v);if(P(D))return b=K(A(D),b),new H(A(b.g),A(b.h));if(P(b))return b=K(D,A(b)),new H(A(b.g),b.h);if(D.g.length>30){if(P(D)||P(b))throw Error("slowDivide_ only works with positive integers.");for(var N=w,L=b;L.l(D)<=0;)N=Q(N),L=Q(L);var k=Y(N,1),O=Y(L,1);for(L=Y(L,2),N=Y(N,2);!R(L);){var C=O.add(L);C.l(D)<=0&&(k=k.add(N),O=C),L=Y(L,1),N=Y(N,1)}return b=F(D,k.j(b)),new H(k,b)}for(k=v;D.l(b)>=0;){for(N=Math.max(1,Math.floor(D.m()/b.m())),L=Math.ceil(Math.log(N)/Math.LN2),L=L<=48?1:Math.pow(2,L-48),O=p(N),C=O.j(b);P(C)||C.l(D)>0;)N-=L,O=p(N),C=O.j(b);R(O)&&(O=w),k=k.add(O),D=F(D,C)}return new H(k,D)}n.B=function(D){return K(this,D).h},n.and=function(D){const b=Math.max(this.g.length,D.g.length),N=[];for(let L=0;L<b;L++)N[L]=this.i(L)&D.i(L);return new l(N,this.h&D.h)},n.or=function(D){const b=Math.max(this.g.length,D.g.length),N=[];for(let L=0;L<b;L++)N[L]=this.i(L)|D.i(L);return new l(N,this.h|D.h)},n.xor=function(D){const b=Math.max(this.g.length,D.g.length),N=[];for(let L=0;L<b;L++)N[L]=this.i(L)^D.i(L);return new l(N,this.h^D.h)};function Q(D){const b=D.g.length+1,N=[];for(let L=0;L<b;L++)N[L]=D.i(L)<<1|D.i(L-1)>>>31;return new l(N,D.h)}function Y(D,b){const N=b>>5;b%=32;const L=D.g.length-N,k=[];for(let O=0;O<L;O++)k[O]=b>0?D.i(O+N)>>>b|D.i(O+N+1)<<32-b:D.i(O+N);return new l(k,D.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,RT=r,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.B,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=p,l.fromString=g,us=l}).apply(typeof T0<"u"?T0:typeof self<"u"?self:typeof window<"u"?window:{});var dh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var CT,Zl,PT,Vh,wg,NT,DT,OT;(function(){var n,e=Object.defineProperty;function t(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof dh=="object"&&dh];for(var _=0;_<d.length;++_){var E=d[_];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var r=t(this);function i(d,_){if(_)e:{var E=r;d=d.split(".");for(var S=0;S<d.length-1;S++){var $=d[S];if(!($ in E))break e;E=E[$]}d=d[d.length-1],S=E[d],_=_(S),_!=S&&_!=null&&e(E,d,{configurable:!0,writable:!0,value:_})}}i("Symbol.dispose",function(d){return d||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(d){return d||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(d){return d||function(_){var E=[],S;for(S in _)Object.prototype.hasOwnProperty.call(_,S)&&E.push([S,_[S]]);return E}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function c(d){var _=typeof d;return _=="object"&&d!=null||_=="function"}function h(d,_,E){return d.call.apply(d.bind,arguments)}function p(d,_,E){return p=h,p.apply(null,arguments)}function g(d,_){var E=Array.prototype.slice.call(arguments,1);return function(){var S=E.slice();return S.push.apply(S,arguments),d.apply(this,S)}}function v(d,_){function E(){}E.prototype=_.prototype,d.Z=_.prototype,d.prototype=new E,d.prototype.constructor=d,d.Ob=function(S,$,G){for(var se=Array(arguments.length-2),Ce=2;Ce<arguments.length;Ce++)se[Ce-2]=arguments[Ce];return _.prototype[$].apply(S,se)}}var w=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?d=>d&&AsyncContext.Snapshot.wrap(d):d=>d;function T(d){const _=d.length;if(_>0){const E=Array(_);for(let S=0;S<_;S++)E[S]=d[S];return E}return[]}function R(d,_){for(let S=1;S<arguments.length;S++){const $=arguments[S];var E=typeof $;if(E=E!="object"?E:$?Array.isArray($)?"array":E:"null",E=="array"||E=="object"&&typeof $.length=="number"){E=d.length||0;const G=$.length||0;d.length=E+G;for(let se=0;se<G;se++)d[E+se]=$[se]}else d.push($)}}class P{constructor(_,E){this.i=_,this.j=E,this.h=0,this.g=null}get(){let _;return this.h>0?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function A(d){l.setTimeout(()=>{throw d},0)}function F(){var d=D;let _=null;return d.g&&(_=d.g,d.g=d.g.next,d.g||(d.h=null),_.next=null),_}class z{constructor(){this.h=this.g=null}add(_,E){const S=H.get();S.set(_,E),this.h?this.h.next=S:this.g=S,this.h=S}}var H=new P(()=>new K,d=>d.reset());class K{constructor(){this.next=this.g=this.h=null}set(_,E){this.h=_,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let Q,Y=!1,D=new z,b=()=>{const d=Promise.resolve(void 0);Q=()=>{d.then(N)}};function N(){for(var d;d=F();){try{d.h.call(d.g)}catch(E){A(E)}var _=H;_.j(d),_.h<100&&(_.h++,d.next=_.g,_.g=d)}Y=!1}function L(){this.u=this.u,this.C=this.C}L.prototype.u=!1,L.prototype.dispose=function(){this.u||(this.u=!0,this.N())},L.prototype[Symbol.dispose]=function(){this.dispose()},L.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function k(d,_){this.type=d,this.g=this.target=_,this.defaultPrevented=!1}k.prototype.h=function(){this.defaultPrevented=!0};var O=(function(){if(!l.addEventListener||!Object.defineProperty)return!1;var d=!1,_=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const E=()=>{};l.addEventListener("test",E,_),l.removeEventListener("test",E,_)}catch{}return d})();function C(d){return/^[\s\xa0]*$/.test(d)}function ge(d,_){k.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d&&this.init(d,_)}v(ge,k),ge.prototype.init=function(d,_){const E=this.type=d.type,S=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;this.target=d.target||d.srcElement,this.g=_,_=d.relatedTarget,_||(E=="mouseover"?_=d.fromElement:E=="mouseout"&&(_=d.toElement)),this.relatedTarget=_,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=d.pointerType,this.state=d.state,this.i=d,d.defaultPrevented&&ge.Z.h.call(this)},ge.prototype.h=function(){ge.Z.h.call(this);const d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var we="closure_listenable_"+(Math.random()*1e6|0),Ae=0;function Se(d,_,E,S,$){this.listener=d,this.proxy=null,this.src=_,this.type=E,this.capture=!!S,this.ha=$,this.key=++Ae,this.da=this.fa=!1}function re(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function ae(d,_,E){for(const S in d)_.call(E,d[S],S,d)}function oe(d,_){for(const E in d)_.call(void 0,d[E],E,d)}function U(d){const _={};for(const E in d)_[E]=d[E];return _}const X="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function be(d,_){let E,S;for(let $=1;$<arguments.length;$++){S=arguments[$];for(E in S)d[E]=S[E];for(let G=0;G<X.length;G++)E=X[G],Object.prototype.hasOwnProperty.call(S,E)&&(d[E]=S[E])}}function ve(d){this.src=d,this.g={},this.h=0}ve.prototype.add=function(d,_,E,S,$){const G=d.toString();d=this.g[G],d||(d=this.g[G]=[],this.h++);const se=Re(d,_,S,$);return se>-1?(_=d[se],E||(_.fa=!1)):(_=new Se(_,this.src,G,!!S,$),_.fa=E,d.push(_)),_};function Ne(d,_){const E=_.type;if(E in d.g){var S=d.g[E],$=Array.prototype.indexOf.call(S,_,void 0),G;(G=$>=0)&&Array.prototype.splice.call(S,$,1),G&&(re(_),d.g[E].length==0&&(delete d.g[E],d.h--))}}function Re(d,_,E,S){for(let $=0;$<d.length;++$){const G=d[$];if(!G.da&&G.listener==_&&G.capture==!!E&&G.ha==S)return $}return-1}var We="closure_lm_"+(Math.random()*1e6|0),je={};function Qe(d,_,E,S,$){if(Array.isArray(_)){for(let G=0;G<_.length;G++)Qe(d,_[G],E,S,$);return null}return E=Xa(E),d&&d[we]?d.J(_,E,c(S)?!!S.capture:!1,$):nn(d,_,E,!1,S,$)}function nn(d,_,E,S,$,G){if(!_)throw Error("Invalid event type");const se=c($)?!!$.capture:!!$;let Ce=Po(d);if(Ce||(d[We]=Ce=new ve(d)),E=Ce.add(_,E,S,se,G),E.proxy)return E;if(S=Ro(),E.proxy=S,S.src=d,S.listener=E,d.addEventListener)O||($=se),$===void 0&&($=!1),d.addEventListener(_.toString(),S,$);else if(d.attachEvent)d.attachEvent(Co(_.toString()),S);else if(d.addListener&&d.removeListener)d.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return E}function Ro(){function d(E){return _.call(d.src,d.listener,E)}const _=Kc;return d}function Ya(d,_,E,S,$){if(Array.isArray(_))for(var G=0;G<_.length;G++)Ya(d,_[G],E,S,$);else S=c(S)?!!S.capture:!!S,E=Xa(E),d&&d[we]?(d=d.i,G=String(_).toString(),G in d.g&&(_=d.g[G],E=Re(_,E,S,$),E>-1&&(re(_[E]),Array.prototype.splice.call(_,E,1),_.length==0&&(delete d.g[G],d.h--)))):d&&(d=Po(d))&&(_=d.g[_.toString()],d=-1,_&&(d=Re(_,E,S,$)),(E=d>-1?_[d]:null)&&xi(E))}function xi(d){if(typeof d!="number"&&d&&!d.da){var _=d.src;if(_&&_[we])Ne(_.i,d);else{var E=d.type,S=d.proxy;_.removeEventListener?_.removeEventListener(E,S,d.capture):_.detachEvent?_.detachEvent(Co(E),S):_.addListener&&_.removeListener&&_.removeListener(S),(E=Po(_))?(Ne(E,d),E.h==0&&(E.src=null,_[We]=null)):re(d)}}}function Co(d){return d in je?je[d]:je[d]="on"+d}function Kc(d,_){if(d.da)d=!0;else{_=new ge(_,this);const E=d.listener,S=d.ha||d.src;d.fa&&xi(d),d=E.call(S,_)}return d}function Po(d){return d=d[We],d instanceof ve?d:null}var Es="__closure_events_fn_"+(Math.random()*1e9>>>0);function Xa(d){return typeof d=="function"?d:(d[Es]||(d[Es]=function(_){return d.handleEvent(_)}),d[Es])}function vt(){L.call(this),this.i=new ve(this),this.M=this,this.G=null}v(vt,L),vt.prototype[we]=!0,vt.prototype.removeEventListener=function(d,_,E,S){Ya(this,d,_,E,S)};function pt(d,_){var E,S=d.G;if(S)for(E=[];S;S=S.G)E.push(S);if(d=d.M,S=_.type||_,typeof _=="string")_=new k(_,d);else if(_ instanceof k)_.target=_.target||d;else{var $=_;_=new k(S,d),be(_,$)}$=!0;let G,se;if(E)for(se=E.length-1;se>=0;se--)G=_.g=E[se],$=Gn(G,S,!0,_)&&$;if(G=_.g=d,$=Gn(G,S,!0,_)&&$,$=Gn(G,S,!1,_)&&$,E)for(se=0;se<E.length;se++)G=_.g=E[se],$=Gn(G,S,!1,_)&&$}vt.prototype.N=function(){if(vt.Z.N.call(this),this.i){var d=this.i;for(const _ in d.g){const E=d.g[_];for(let S=0;S<E.length;S++)re(E[S]);delete d.g[_],d.h--}}this.G=null},vt.prototype.J=function(d,_,E,S){return this.i.add(String(d),_,!1,E,S)},vt.prototype.K=function(d,_,E,S){return this.i.add(String(d),_,!0,E,S)};function Gn(d,_,E,S){if(_=d.i.g[String(_)],!_)return!0;_=_.concat();let $=!0;for(let G=0;G<_.length;++G){const se=_[G];if(se&&!se.da&&se.capture==E){const Ce=se.listener,gt=se.ha||se.src;se.fa&&Ne(d.i,se),$=Ce.call(gt,S)!==!1&&$}}return $&&!S.defaultPrevented}function Ja(d,_){if(typeof d!="function")if(d&&typeof d.handleEvent=="function")d=p(d.handleEvent,d);else throw Error("Invalid listener argument");return Number(_)>2147483647?-1:l.setTimeout(d,_||0)}function Za(d){d.g=Ja(()=>{d.g=null,d.i&&(d.i=!1,Za(d))},d.l);const _=d.h;d.h=null,d.m.apply(null,_)}class Gc extends L{constructor(_,E){super(),this.m=_,this.l=E,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:Za(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ti(d){L.call(this),this.h=d,this.g={}}v(Ti,L);var el=[];function No(d){ae(d.g,function(_,E){this.g.hasOwnProperty(E)&&xi(_)},d),d.g={}}Ti.prototype.N=function(){Ti.Z.N.call(this),No(this)},Ti.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var bi=l.JSON.stringify,Qc=l.JSON.parse,xs=class{stringify(d){return l.JSON.stringify(d,void 0)}parse(d){return l.JSON.parse(d,void 0)}};function Ii(){}function Yc(){}var Si={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Do(){k.call(this,"d")}v(Do,k);function tl(){k.call(this,"c")}v(tl,k);var Qn={},Oo=null;function ki(){return Oo=Oo||new vt}Qn.Ia="serverreachability";function Mo(d){k.call(this,Qn.Ia,d)}v(Mo,k);function zr(d){const _=ki();pt(_,new Mo(_))}Qn.STAT_EVENT="statevent";function Br(d,_){k.call(this,Qn.STAT_EVENT,d),this.stat=_}v(Br,k);function ut(d){const _=ki();pt(_,new Br(_,d))}Qn.Ja="timingevent";function nl(d,_){k.call(this,Qn.Ja,d),this.size=_}v(nl,k);function Ai(d,_){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){d()},_)}function Ri(){this.g=!0}Ri.prototype.ua=function(){this.g=!1};function Xc(d,_,E,S,$,G){d.info(function(){if(d.g)if(G){var se="",Ce=G.split("&");for(let Ke=0;Ke<Ce.length;Ke++){var gt=Ce[Ke].split("=");if(gt.length>1){const wt=gt[0];gt=gt[1];const bn=wt.split("_");se=bn.length>=2&&bn[1]=="type"?se+(wt+"="+gt+"&"):se+(wt+"=redacted&")}}}else se=null;else se=G;return"XMLHTTP REQ ("+S+") [attempt "+$+"]: "+_+`
`+E+`
`+se})}function Jc(d,_,E,S,$,G,se){d.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+$+"]: "+_+`
`+E+`
`+G+" "+se})}function cr(d,_,E,S){d.info(function(){return"XMLHTTP TEXT ("+_+"): "+Ts(d,E)+(S?" "+S:"")})}function Zc(d,_){d.info(function(){return"TIMEOUT: "+_})}Ri.prototype.info=function(){};function Ts(d,_){if(!d.g)return _;if(!_)return null;try{const G=JSON.parse(_);if(G){for(d=0;d<G.length;d++)if(Array.isArray(G[d])){var E=G[d];if(!(E.length<2)){var S=E[1];if(Array.isArray(S)&&!(S.length<1)){var $=S[0];if($!="noop"&&$!="stop"&&$!="close")for(let se=1;se<S.length;se++)S[se]=""}}}}return bi(G)}catch{return _}}var Ci={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Pi={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},eu;function $r(){}v($r,Ii),$r.prototype.g=function(){return new XMLHttpRequest},eu=new $r;function ur(d){return encodeURIComponent(String(d))}function Lo(d){var _=1;d=d.split(":");const E=[];for(;_>0&&d.length;)E.push(d.shift()),_--;return d.length&&E.push(d.join(":")),E}function Pn(d,_,E,S){this.j=d,this.i=_,this.l=E,this.S=S||1,this.V=new Ti(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new tu}function tu(){this.i=null,this.g="",this.h=!1}var nu={},rl={};function Yn(d,_,E){d.M=1,d.A=Wr(Nn(_)),d.u=E,d.R=!0,il(d,null)}function il(d,_){d.F=Date.now(),bs(d),d.B=Nn(d.A);var E=d.B,S=d.S;Array.isArray(S)||(S=[String(S)]),pl(E.i,"t",S),d.C=0,E=d.j.L,d.h=new tu,d.g=du(d.j,E?_:null,!d.u),d.P>0&&(d.O=new Gc(p(d.Y,d,d.g),d.P)),_=d.V,E=d.g,S=d.ba;var $="readystatechange";Array.isArray($)||($&&(el[0]=$.toString()),$=el);for(let G=0;G<$.length;G++){const se=Qe(E,$[G],S||_.handleEvent,!1,_.h||_);if(!se)break;_.g[se.key]=se}_=d.J?U(d.J):{},d.u?(d.v||(d.v="POST"),_["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.B,d.v,d.u,_)):(d.v="GET",d.g.ea(d.B,d.v,null,_)),zr(),Xc(d.i,d.v,d.B,d.l,d.S,d.u)}Pn.prototype.ba=function(d){d=d.target;const _=this.O;_&&yr(d)==3?_.j():this.Y(d)},Pn.prototype.Y=function(d){try{if(d==this.g)e:{const Ce=yr(this.g),gt=this.g.ya(),Ke=this.g.ca();if(!(Ce<3)&&(Ce!=3||this.g&&(this.h.h||this.g.la()||uu(this.g)))){this.K||Ce!=4||gt==7||(gt==8||Ke<=0?zr(3):zr(2)),Vo(this);var _=this.g.ca();this.X=_;var E=ru(this);if(this.o=_==200,Jc(this.i,this.v,this.B,this.l,this.S,Ce,_),this.o){if(this.U&&!this.L){t:{if(this.g){var S,$=this.g;if((S=$.g?$.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!C(S)){var G=S;break t}}G=null}if(d=G)cr(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,et(this,d);else{this.o=!1,this.m=3,ut(12),Hr(this),Is(this);break e}}if(this.R){d=!0;let wt;for(;!this.K&&this.C<E.length;)if(wt=su(this,E),wt==rl){Ce==4&&(this.m=4,ut(14),d=!1),cr(this.i,this.l,null,"[Incomplete Response]");break}else if(wt==nu){this.m=4,ut(15),cr(this.i,this.l,E,"[Invalid Chunk]"),d=!1;break}else cr(this.i,this.l,wt,null),et(this,wt);if(iu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ce!=4||E.length!=0||this.h.h||(this.m=1,ut(16),d=!1),this.o=this.o&&d,!d)cr(this.i,this.l,E,"[Invalid Chunked Response]"),Hr(this),Is(this);else if(E.length>0&&!this.W){this.W=!0;var se=this.j;se.g==this&&se.aa&&!se.P&&(se.j.info("Great, no buffering proxy detected. Bytes received: "+E.length),Os(se),se.P=!0,ut(11))}}else cr(this.i,this.l,E,null),et(this,E);Ce==4&&Hr(this),this.o&&!this.K&&(Ce==4?Ko(this.j,this):(this.o=!1,bs(this)))}else ml(this.g),_==400&&E.indexOf("Unknown SID")>0?(this.m=3,ut(12)):(this.m=0,ut(13)),Hr(this),Is(this)}}}catch{}finally{}};function ru(d){if(!iu(d))return d.g.la();const _=uu(d.g);if(_==="")return"";let E="";const S=_.length,$=yr(d.g)==4;if(!d.h.i){if(typeof TextDecoder>"u")return Hr(d),Is(d),"";d.h.i=new l.TextDecoder}for(let G=0;G<S;G++)d.h.h=!0,E+=d.h.i.decode(_[G],{stream:!($&&G==S-1)});return _.length=0,d.h.g+=E,d.C=0,d.h.g}function iu(d){return d.g?d.v=="GET"&&d.M!=2&&d.j.Aa:!1}function su(d,_){var E=d.C,S=_.indexOf(`
`,E);return S==-1?rl:(E=Number(_.substring(E,S)),isNaN(E)?nu:(S+=1,S+E>_.length?rl:(_=_.slice(S,S+E),d.C=S+E,_)))}Pn.prototype.cancel=function(){this.K=!0,Hr(this)};function bs(d){d.T=Date.now()+d.H,sl(d,d.H)}function sl(d,_){if(d.D!=null)throw Error("WatchDog timer not null");d.D=Ai(p(d.aa,d),_)}function Vo(d){d.D&&(l.clearTimeout(d.D),d.D=null)}Pn.prototype.aa=function(){this.D=null;const d=Date.now();d-this.T>=0?(Zc(this.i,this.B),this.M!=2&&(zr(),ut(17)),Hr(this),this.m=2,Is(this)):sl(this,this.T-d)};function Is(d){d.j.I==0||d.K||Ko(d.j,d)}function Hr(d){Vo(d);var _=d.O;_&&typeof _.dispose=="function"&&_.dispose(),d.O=null,No(d.V),d.g&&(_=d.g,d.g=null,_.abort(),_.dispose())}function et(d,_){try{var E=d.j;if(E.I!=0&&(E.g==d||al(E.h,d))){if(!d.L&&al(E.h,d)&&E.I==3){try{var S=E.Ba.g.parse(_)}catch{S=null}if(Array.isArray(S)&&S.length==3){var $=S;if($[0]==0){e:if(!E.v){if(E.g)if(E.g.F+3e3<d.F)qo(E),xn(E);else break e;wr(E),ut(18)}}else E.xa=$[1],0<E.xa-E.K&&$[2]<37500&&E.F&&E.A==0&&!E.C&&(E.C=Ai(p(E.Va,E),6e3));Ss(E.h)<=1&&E.ta&&(E.ta=void 0)}else Tn(E,11)}else if((d.L||E.g==d)&&qo(E),!C(_))for($=E.Ba.g.parse(_),_=0;_<$.length;_++){let Ke=$[_];const wt=Ke[0];if(!(wt<=E.K))if(E.K=wt,Ke=Ke[1],E.I==2)if(Ke[0]=="c"){E.M=Ke[1],E.ba=Ke[2];const bn=Ke[3];bn!=null&&(E.ka=bn,E.j.info("VER="+E.ka));const Yr=Ke[4];Yr!=null&&(E.za=Yr,E.j.info("SVER="+E.za));const Er=Ke[5];Er!=null&&typeof Er=="number"&&Er>0&&(S=1.5*Er,E.O=S,E.j.info("backChannelRequestTimeoutMs_="+S)),S=E;const xr=d.g;if(xr){const Yo=xr.g?xr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Yo){var G=S.h;G.g||Yo.indexOf("spdy")==-1&&Yo.indexOf("quic")==-1&&Yo.indexOf("h2")==-1||(G.j=G.l,G.g=new Set,G.h&&(jo(G,G.h),G.h=null))}if(S.G){const vl=xr.g?xr.g.getResponseHeader("X-HTTP-Session-Id"):null;vl&&(S.wa=vl,He(S.J,S.G,vl))}}E.I=3,E.l&&E.l.ra(),E.aa&&(E.T=Date.now()-d.F,E.j.info("Handshake RTT: "+E.T+"ms")),S=E;var se=d;if(S.na=_l(S,S.L?S.ba:null,S.W),se.L){ks(S.h,se);var Ce=se,gt=S.O;gt&&(Ce.H=gt),Ce.D&&(Vo(Ce),bs(Ce)),S.g=se}else Wt(S);E.i.length>0&&Qr(E)}else Ke[0]!="stop"&&Ke[0]!="close"||Tn(E,7);else E.I==3&&(Ke[0]=="stop"||Ke[0]=="close"?Ke[0]=="stop"?Tn(E,7):Ho(E):Ke[0]!="noop"&&E.l&&E.l.qa(Ke),E.A=0)}}zr(4)}catch{}}var ef=class{constructor(d,_){this.g=d,this.map=_}};function Fo(d){this.l=d||10,l.PerformanceNavigationTiming?(d=l.performance.getEntriesByType("navigation"),d=d.length>0&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function ol(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function Ss(d){return d.h?1:d.g?d.g.size:0}function al(d,_){return d.h?d.h==_:d.g?d.g.has(_):!1}function jo(d,_){d.g?d.g.add(_):d.h=_}function ks(d,_){d.h&&d.h==_?d.h=null:d.g&&d.g.has(_)&&d.g.delete(_)}Fo.prototype.cancel=function(){if(this.i=vn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function vn(d){if(d.h!=null)return d.i.concat(d.h.G);if(d.g!=null&&d.g.size!==0){let _=d.i;for(const E of d.g.values())_=_.concat(E.G);return _}return T(d.i)}var ou=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function wn(d,_){if(d){d=d.split("&");for(let E=0;E<d.length;E++){const S=d[E].indexOf("=");let $,G=null;S>=0?($=d[E].substring(0,S),G=d[E].substring(S+1)):$=d[E],_($,G?decodeURIComponent(G.replace(/\+/g," ")):"")}}}function hr(d){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let _;d instanceof hr?(this.l=d.l,As(this,d.j),this.o=d.o,this.g=d.g,dr(this,d.u),this.h=d.h,Ni(this,gl(d.i)),this.m=d.m):d&&(_=String(d).match(ou))?(this.l=!1,As(this,_[1]||"",!0),this.o=Rs(_[2]||""),this.g=Rs(_[3]||"",!0),dr(this,_[4]),this.h=Rs(_[5]||"",!0),Ni(this,_[6]||"",!0),this.m=Rs(_[7]||"")):(this.l=!1,this.i=new Ve(null,this.l))}hr.prototype.toString=function(){const d=[];var _=this.j;_&&d.push(Cs(_,cl,!0),":");var E=this.g;return(E||_=="file")&&(d.push("//"),(_=this.o)&&d.push(Cs(_,cl,!0),"@"),d.push(ur(E).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.u,E!=null&&d.push(":",String(E))),(E=this.h)&&(this.g&&E.charAt(0)!="/"&&d.push("/"),d.push(Cs(E,E.charAt(0)=="/"?Ps:ul,!0))),(E=this.i.toString())&&d.push("?",E),(E=this.m)&&d.push("#",Cs(E,hl)),d.join("")},hr.prototype.resolve=function(d){const _=Nn(this);let E=!!d.j;E?As(_,d.j):E=!!d.o,E?_.o=d.o:E=!!d.g,E?_.g=d.g:E=d.u!=null;var S=d.h;if(E)dr(_,d.u);else if(E=!!d.h){if(S.charAt(0)!="/")if(this.g&&!this.h)S="/"+S;else{var $=_.h.lastIndexOf("/");$!=-1&&(S=_.h.slice(0,$+1)+S)}if($=S,$==".."||$==".")S="";else if($.indexOf("./")!=-1||$.indexOf("/.")!=-1){S=$.lastIndexOf("/",0)==0,$=$.split("/");const G=[];for(let se=0;se<$.length;){const Ce=$[se++];Ce=="."?S&&se==$.length&&G.push(""):Ce==".."?((G.length>1||G.length==1&&G[0]!="")&&G.pop(),S&&se==$.length&&G.push("")):(G.push(Ce),S=!0)}S=G.join("/")}else S=$}return E?_.h=S:E=d.i.toString()!=="",E?Ni(_,gl(d.i)):E=!!d.m,E&&(_.m=d.m),_};function Nn(d){return new hr(d)}function As(d,_,E){d.j=E?Rs(_,!0):_,d.j&&(d.j=d.j.replace(/:$/,""))}function dr(d,_){if(_){if(_=Number(_),isNaN(_)||_<0)throw Error("Bad port number "+_);d.u=_}else d.u=null}function Ni(d,_,E){_ instanceof Ve?(d.i=_,zo(d.i,d.l)):(E||(_=Cs(_,tf)),d.i=new Ve(_,d.l))}function He(d,_,E){d.i.set(_,E)}function Wr(d){return He(d,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),d}function Rs(d,_){return d?_?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function Cs(d,_,E){return typeof d=="string"?(d=encodeURI(d).replace(_,ll),E&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function ll(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var cl=/[#\/\?@]/g,ul=/[#\?:]/g,Ps=/[#\?]/g,tf=/[#\?@]/g,hl=/#/g;function Ve(d,_){this.h=this.g=null,this.i=d||null,this.j=!!_}function fr(d){d.g||(d.g=new Map,d.h=0,d.i&&wn(d.i,function(_,E){d.add(decodeURIComponent(_.replace(/\+/g," ")),E)}))}n=Ve.prototype,n.add=function(d,_){fr(this),this.i=null,d=pr(this,d);let E=this.g.get(d);return E||this.g.set(d,E=[]),E.push(_),this.h+=1,this};function dl(d,_){fr(d),_=pr(d,_),d.g.has(_)&&(d.i=null,d.h-=d.g.get(_).length,d.g.delete(_))}function Uo(d,_){return fr(d),_=pr(d,_),d.g.has(_)}n.forEach=function(d,_){fr(this),this.g.forEach(function(E,S){E.forEach(function($){d.call(_,$,S,this)},this)},this)};function fl(d,_){fr(d);let E=[];if(typeof _=="string")Uo(d,_)&&(E=E.concat(d.g.get(pr(d,_))));else for(d=Array.from(d.g.values()),_=0;_<d.length;_++)E=E.concat(d[_]);return E}n.set=function(d,_){return fr(this),this.i=null,d=pr(this,d),Uo(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[_]),this.h+=1,this},n.get=function(d,_){return d?(d=fl(this,d),d.length>0?String(d[0]):_):_};function pl(d,_,E){dl(d,_),E.length>0&&(d.i=null,d.g.set(pr(d,_),T(E)),d.h+=E.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],_=Array.from(this.g.keys());for(let S=0;S<_.length;S++){var E=_[S];const $=ur(E);E=fl(this,E);for(let G=0;G<E.length;G++){let se=$;E[G]!==""&&(se+="="+ur(E[G])),d.push(se)}}return this.i=d.join("&")};function gl(d){const _=new Ve;return _.i=d.i,d.g&&(_.g=new Map(d.g),_.h=d.h),_}function pr(d,_){return _=String(_),d.j&&(_=_.toLowerCase()),_}function zo(d,_){_&&!d.j&&(fr(d),d.i=null,d.g.forEach(function(E,S){const $=S.toLowerCase();S!=$&&(dl(this,S),pl(this,$,E))},d)),d.j=_}function gr(d,_){const E=new Ri;if(l.Image){const S=new Image;S.onload=g(Vt,E,"TestLoadImage: loaded",!0,_,S),S.onerror=g(Vt,E,"TestLoadImage: error",!1,_,S),S.onabort=g(Vt,E,"TestLoadImage: abort",!1,_,S),S.ontimeout=g(Vt,E,"TestLoadImage: timeout",!1,_,S),l.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=d}else _(!1)}function mr(d,_){const E=new Ri,S=new AbortController,$=setTimeout(()=>{S.abort(),Vt(E,"TestPingServer: timeout",!1,_)},1e4);fetch(d,{signal:S.signal}).then(G=>{clearTimeout($),G.ok?Vt(E,"TestPingServer: ok",!0,_):Vt(E,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout($),Vt(E,"TestPingServer: error",!1,_)})}function Vt(d,_,E,S,$){try{$&&($.onload=null,$.onerror=null,$.onabort=null,$.ontimeout=null),S(E)}catch{}}function Ns(){this.g=new xs}function qr(d){this.i=d.Sb||null,this.h=d.ab||!1}v(qr,Ii),qr.prototype.g=function(){return new En(this.i,this.h)};function En(d,_){vt.call(this),this.H=d,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}v(En,vt),n=En.prototype,n.open=function(d,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=d,this.D=_,this.readyState=1,Xn(this)},n.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const _={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};d&&(_.body=d),(this.H||l).fetch(new Request(this.D,_)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Di(this)),this.readyState=0},n.Pa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,Xn(this)),this.g&&(this.readyState=3,Xn(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;au(this)}else d.text().then(this.Oa.bind(this),this.ga.bind(this))};function au(d){d.j.read().then(d.Ma.bind(d)).catch(d.ga.bind(d))}n.Ma=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var _=d.value?d.value:new Uint8Array(0);(_=this.B.decode(_,{stream:!d.done}))&&(this.response=this.responseText+=_)}d.done?Di(this):Xn(this),this.readyState==3&&au(this)}},n.Oa=function(d){this.g&&(this.response=this.responseText=d,Di(this))},n.Na=function(d){this.g&&(this.response=d,Di(this))},n.ga=function(){this.g&&Di(this)};function Di(d){d.readyState=4,d.l=null,d.j=null,d.B=null,Xn(d)}n.setRequestHeader=function(d,_){this.A.append(d,_)},n.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],_=this.h.entries();for(var E=_.next();!E.done;)E=E.value,d.push(E[0]+": "+E[1]),E=_.next();return d.join(`\r
`)};function Xn(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(En.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function lu(d){let _="";return ae(d,function(E,S){_+=S,_+=":",_+=E,_+=`\r
`}),_}function Bo(d,_,E){e:{for(S in E){var S=!1;break e}S=!0}S||(E=lu(E),typeof d=="string"?E!=null&&ur(E):He(d,_,E))}function Ye(d){vt.call(this),this.headers=new Map,this.L=d||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}v(Ye,vt);var cu=/^https?$/i,nf=["POST","PUT"];n=Ye.prototype,n.Fa=function(d){this.H=d},n.ea=function(d,_,E,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);_=_?_.toUpperCase():"GET",this.D=d,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():eu.g(),this.g.onreadystatechange=w(p(this.Ca,this));try{this.B=!0,this.g.open(_,String(d),!0),this.B=!1}catch(G){Oi(this,G);return}if(d=E||"",E=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var $ in S)E.set($,S[$]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const G of S.keys())E.set(G,S.get(G));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(E.keys()).find(G=>G.toLowerCase()=="content-type"),$=l.FormData&&d instanceof l.FormData,!(Array.prototype.indexOf.call(nf,_,void 0)>=0)||S||$||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[G,se]of E)this.g.setRequestHeader(G,se);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(d),this.v=!1}catch(G){Oi(this,G)}};function Oi(d,_){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=_,d.o=5,Mi(d),Gr(d)}function Mi(d){d.A||(d.A=!0,pt(d,"complete"),pt(d,"error"))}n.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=d||7,pt(this,"complete"),pt(this,"abort"),Gr(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Gr(this,!0)),Ye.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Kr(this):this.Xa())},n.Xa=function(){Kr(this)};function Kr(d){if(d.h&&typeof o<"u"){if(d.v&&yr(d)==4)setTimeout(d.Ca.bind(d),0);else if(pt(d,"readystatechange"),yr(d)==4){d.h=!1;try{const G=d.ca();e:switch(G){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var E;if(!(E=_)){var S;if(S=G===0){let se=String(d.D).match(ou)[1]||null;!se&&l.self&&l.self.location&&(se=l.self.location.protocol.slice(0,-1)),S=!cu.test(se?se.toLowerCase():"")}E=S}if(E)pt(d,"complete"),pt(d,"success");else{d.o=6;try{var $=yr(d)>2?d.g.statusText:""}catch{$=""}d.l=$+" ["+d.ca()+"]",Mi(d)}}finally{Gr(d)}}}}function Gr(d,_){if(d.g){d.m&&(clearTimeout(d.m),d.m=null);const E=d.g;d.g=null,_||pt(d,"ready");try{E.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function yr(d){return d.g?d.g.readyState:0}n.ca=function(){try{return yr(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(d){if(this.g){var _=this.g.responseText;return d&&_.indexOf(d)==0&&(_=_.substring(d.length)),Qc(_)}};function uu(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.F){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function ml(d){const _={};d=(d.g&&yr(d)>=2&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<d.length;S++){if(C(d[S]))continue;var E=Lo(d[S]);const $=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const G=_[$]||[];_[$]=G,G.push(E)}oe(_,function(S){return S.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function _r(d,_,E){return E&&E.internalChannelParams&&E.internalChannelParams[d]||_}function $o(d){this.za=0,this.i=[],this.j=new Ri,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=_r("failFast",!1,d),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=_r("baseRetryDelayMs",5e3,d),this.Za=_r("retryDelaySeedMs",1e4,d),this.Ta=_r("forwardChannelMaxRetries",2,d),this.va=_r("forwardChannelRequestTimeoutMs",2e4,d),this.ma=d&&d.xmlHttpFactory||void 0,this.Ua=d&&d.Rb||void 0,this.Aa=d&&d.useFetchStreams||!1,this.O=void 0,this.L=d&&d.supportsCrossDomainXhr||!1,this.M="",this.h=new Fo(d&&d.concurrentRequestLimit),this.Ba=new Ns,this.S=d&&d.fastHandshake||!1,this.R=d&&d.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=d&&d.Pb||!1,d&&d.ua&&this.j.ua(),d&&d.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&d&&d.detectBufferingProxy||!1,this.ia=void 0,d&&d.longPollingTimeout&&d.longPollingTimeout>0&&(this.ia=d.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=$o.prototype,n.ka=8,n.I=1,n.connect=function(d,_,E,S){ut(0),this.W=d,this.H=_||{},E&&S!==void 0&&(this.H.OSID=E,this.H.OAID=S),this.F=this.X,this.J=_l(this,null,this.W),Qr(this)};function Ho(d){if(Wo(d),d.I==3){var _=d.V++,E=Nn(d.J);if(He(E,"SID",d.M),He(E,"RID",_),He(E,"TYPE","terminate"),vr(d,E),_=new Pn(d,d.j,_),_.M=2,_.A=Wr(Nn(E)),E=!1,l.navigator&&l.navigator.sendBeacon)try{E=l.navigator.sendBeacon(_.A.toString(),"")}catch{}!E&&l.Image&&(new Image().src=_.A,E=!0),E||(_.g=du(_.j,null),_.g.ea(_.A)),_.F=Date.now(),bs(_)}Ms(d)}function xn(d){d.g&&(Os(d),d.g.cancel(),d.g=null)}function Wo(d){xn(d),d.v&&(l.clearTimeout(d.v),d.v=null),qo(d),d.h.cancel(),d.m&&(typeof d.m=="number"&&l.clearTimeout(d.m),d.m=null)}function Qr(d){if(!ol(d.h)&&!d.m){d.m=!0;var _=d.Ea;Q||b(),Y||(Q(),Y=!0),D.add(_,d),d.D=0}}function hu(d,_){return Ss(d.h)>=d.h.j-(d.m?1:0)?!1:d.m?(d.i=_.G.concat(d.i),!0):d.I==1||d.I==2||d.D>=(d.Sa?0:d.Ta)?!1:(d.m=Ai(p(d.Ea,d,_),Go(d,d.D)),d.D++,!0)}n.Ea=function(d){if(this.m)if(this.m=null,this.I==1){if(!d){this.V=Math.floor(Math.random()*1e5),d=this.V++;const $=new Pn(this,this.j,d);let G=this.o;if(this.U&&(G?(G=U(G),be(G,this.U)):G=this.U),this.u!==null||this.R||($.J=G,G=null),this.S)e:{for(var _=0,E=0;E<this.i.length;E++){t:{var S=this.i[E];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(_+=S,_>4096){_=E;break e}if(_===4096||E===this.i.length-1){_=E+1;break e}}_=1e3}else _=1e3;_=yl(this,$,_),E=Nn(this.J),He(E,"RID",d),He(E,"CVER",22),this.G&&He(E,"X-HTTP-Session-Id",this.G),vr(this,E),G&&(this.R?_="headers="+ur(lu(G))+"&"+_:this.u&&Bo(E,this.u,G)),jo(this.h,$),this.Ra&&He(E,"TYPE","init"),this.S?(He(E,"$req",_),He(E,"SID","null"),$.U=!0,Yn($,E,null)):Yn($,E,_),this.I=2}}else this.I==3&&(d?Ds(this,d):this.i.length==0||ol(this.h)||Ds(this))};function Ds(d,_){var E;_?E=_.l:E=d.V++;const S=Nn(d.J);He(S,"SID",d.M),He(S,"RID",E),He(S,"AID",d.K),vr(d,S),d.u&&d.o&&Bo(S,d.u,d.o),E=new Pn(d,d.j,E,d.D+1),d.u===null&&(E.J=d.o),_&&(d.i=_.G.concat(d.i)),_=yl(d,E,1e3),E.H=Math.round(d.va*.5)+Math.round(d.va*.5*Math.random()),jo(d.h,E),Yn(E,S,_)}function vr(d,_){d.H&&ae(d.H,function(E,S){He(_,S,E)}),d.l&&ae({},function(E,S){He(_,S,E)})}function yl(d,_,E){E=Math.min(d.i.length,E);const S=d.l?p(d.l.Ka,d.l,d):null;e:{var $=d.i;let Ce=-1;for(;;){const gt=["count="+E];Ce==-1?E>0?(Ce=$[0].g,gt.push("ofs="+Ce)):Ce=0:gt.push("ofs="+Ce);let Ke=!0;for(let wt=0;wt<E;wt++){var G=$[wt].g;const bn=$[wt].map;if(G-=Ce,G<0)Ce=Math.max(0,$[wt].g-100),Ke=!1;else try{G="req"+G+"_"||"";try{var se=bn instanceof Map?bn:Object.entries(bn);for(const[Yr,Er]of se){let xr=Er;c(Er)&&(xr=bi(Er)),gt.push(G+Yr+"="+encodeURIComponent(xr))}}catch(Yr){throw gt.push(G+"type="+encodeURIComponent("_badmap")),Yr}}catch{S&&S(bn)}}if(Ke){se=gt.join("&");break e}}se=void 0}return d=d.i.splice(0,E),_.G=d,se}function Wt(d){if(!d.g&&!d.v){d.Y=1;var _=d.Da;Q||b(),Y||(Q(),Y=!0),D.add(_,d),d.A=0}}function wr(d){return d.g||d.v||d.A>=3?!1:(d.Y++,d.v=Ai(p(d.Da,d),Go(d,d.A)),d.A++,!0)}n.Da=function(){if(this.v=null,Li(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var d=4*this.T;this.j.info("BP detection timer enabled: "+d),this.B=Ai(p(this.Wa,this),d)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,ut(10),xn(this),Li(this))};function Os(d){d.B!=null&&(l.clearTimeout(d.B),d.B=null)}function Li(d){d.g=new Pn(d,d.j,"rpc",d.Y),d.u===null&&(d.g.J=d.o),d.g.P=0;var _=Nn(d.na);He(_,"RID","rpc"),He(_,"SID",d.M),He(_,"AID",d.K),He(_,"CI",d.F?"0":"1"),!d.F&&d.ia&&He(_,"TO",d.ia),He(_,"TYPE","xmlhttp"),vr(d,_),d.u&&d.o&&Bo(_,d.u,d.o),d.O&&(d.g.H=d.O);var E=d.g;d=d.ba,E.M=1,E.A=Wr(Nn(_)),E.u=null,E.R=!0,il(E,d)}n.Va=function(){this.C!=null&&(this.C=null,xn(this),wr(this),ut(19))};function qo(d){d.C!=null&&(l.clearTimeout(d.C),d.C=null)}function Ko(d,_){var E=null;if(d.g==_){qo(d),Os(d),d.g=null;var S=2}else if(al(d.h,_))E=_.G,ks(d.h,_),S=1;else return;if(d.I!=0){if(_.o)if(S==1){E=_.u?_.u.length:0,_=Date.now()-_.F;var $=d.D;S=ki(),pt(S,new nl(S,E)),Qr(d)}else Wt(d);else if($=_.m,$==3||$==0&&_.X>0||!(S==1&&hu(d,_)||S==2&&wr(d)))switch(E&&E.length>0&&(_=d.h,_.i=_.i.concat(E)),$){case 1:Tn(d,5);break;case 4:Tn(d,10);break;case 3:Tn(d,6);break;default:Tn(d,2)}}}function Go(d,_){let E=d.Qa+Math.floor(Math.random()*d.Za);return d.isActive()||(E*=2),E*_}function Tn(d,_){if(d.j.info("Error code "+_),_==2){var E=p(d.bb,d),S=d.Ua;const $=!S;S=new hr(S||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||As(S,"https"),Wr(S),$?gr(S.toString(),E):mr(S.toString(),E)}else ut(2);d.I=0,d.l&&d.l.pa(_),Ms(d),Wo(d)}n.bb=function(d){d?(this.j.info("Successfully pinged google.com"),ut(2)):(this.j.info("Failed to ping google.com"),ut(1))};function Ms(d){if(d.I=0,d.ja=[],d.l){const _=vn(d.h);(_.length!=0||d.i.length!=0)&&(R(d.ja,_),R(d.ja,d.i),d.h.i.length=0,T(d.i),d.i.length=0),d.l.oa()}}function _l(d,_,E){var S=E instanceof hr?Nn(E):new hr(E);if(S.g!="")_&&(S.g=_+"."+S.g),dr(S,S.u);else{var $=l.location;S=$.protocol,_=_?_+"."+$.hostname:$.hostname,$=+$.port;const G=new hr(null);S&&As(G,S),_&&(G.g=_),$&&dr(G,$),E&&(G.h=E),S=G}return E=d.G,_=d.wa,E&&_&&He(S,E,_),He(S,"VER",d.ka),vr(d,S),S}function du(d,_,E){if(_&&!d.L)throw Error("Can't create secondary domain capable XhrIo object.");return _=d.Aa&&!d.ma?new Ye(new qr({ab:E})):new Ye(d.ma),_.Fa(d.L),_}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function fu(){}n=fu.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Qo(){}Qo.prototype.g=function(d,_){return new Ft(d,_)};function Ft(d,_){vt.call(this),this.g=new $o(_),this.l=d,this.h=_&&_.messageUrlParams||null,d=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(d?d["X-WebChannel-Content-Type"]=_.messageContentType:d={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.sa&&(d?d["X-WebChannel-Client-Profile"]=_.sa:d={"X-WebChannel-Client-Profile":_.sa}),this.g.U=d,(d=_&&_.Qb)&&!C(d)&&(this.g.u=d),this.A=_&&_.supportsCrossDomainXhr||!1,this.v=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!C(_)&&(this.g.G=_,d=this.h,d!==null&&_ in d&&(d=this.h,_ in d&&delete d[_])),this.j=new Vi(this)}v(Ft,vt),Ft.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Ft.prototype.close=function(){Ho(this.g)},Ft.prototype.o=function(d){var _=this.g;if(typeof d=="string"){var E={};E.__data__=d,d=E}else this.v&&(E={},E.__data__=bi(d),d=E);_.i.push(new ef(_.Ya++,d)),_.I==3&&Qr(_)},Ft.prototype.N=function(){this.g.l=null,delete this.j,Ho(this.g),delete this.g,Ft.Z.N.call(this)};function pu(d){Do.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var _=d.__sm__;if(_){e:{for(const E in _){d=E;break e}d=void 0}(this.i=d)&&(d=this.i,_=_!==null&&d in _?_[d]:void 0),this.data=_}else this.data=d}v(pu,Do);function gu(){tl.call(this),this.status=1}v(gu,tl);function Vi(d){this.g=d}v(Vi,fu),Vi.prototype.ra=function(){pt(this.g,"a")},Vi.prototype.qa=function(d){pt(this.g,new pu(d))},Vi.prototype.pa=function(d){pt(this.g,new gu)},Vi.prototype.oa=function(){pt(this.g,"b")},Qo.prototype.createWebChannel=Qo.prototype.g,Ft.prototype.send=Ft.prototype.o,Ft.prototype.open=Ft.prototype.m,Ft.prototype.close=Ft.prototype.close,OT=function(){return new Qo},DT=function(){return ki()},NT=Qn,wg={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ci.NO_ERROR=0,Ci.TIMEOUT=8,Ci.HTTP_ERROR=6,Vh=Ci,Pi.COMPLETE="complete",PT=Pi,Yc.EventType=Si,Si.OPEN="a",Si.CLOSE="b",Si.ERROR="c",Si.MESSAGE="d",vt.prototype.listen=vt.prototype.J,Zl=Yc,Ye.prototype.listenOnce=Ye.prototype.K,Ye.prototype.getLastError=Ye.prototype.Ha,Ye.prototype.getLastErrorCode=Ye.prototype.ya,Ye.prototype.getStatus=Ye.prototype.ca,Ye.prototype.getResponseJson=Ye.prototype.La,Ye.prototype.getResponseText=Ye.prototype.la,Ye.prototype.send=Ye.prototype.ea,Ye.prototype.setWithCredentials=Ye.prototype.Fa,CT=Ye}).apply(typeof dh<"u"?dh:typeof self<"u"?self:typeof window<"u"?window:{});const b0="@firebase/firestore",I0="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Jt.UNAUTHENTICATED=new Jt(null),Jt.GOOGLE_CREDENTIALS=new Jt("google-credentials-uid"),Jt.FIRST_PARTY=new Jt("first-party-uid"),Jt.MOCK_USER=new Jt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $a="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const po=new Rd("@firebase/firestore");function va(){return po.logLevel}function ce(n,...e){if(po.logLevel<=Oe.DEBUG){const t=e.map(pm);po.debug(`Firestore (${$a}): ${n}`,...t)}}function _i(n,...e){if(po.logLevel<=Oe.ERROR){const t=e.map(pm);po.error(`Firestore (${$a}): ${n}`,...t)}}function Oa(n,...e){if(po.logLevel<=Oe.WARN){const t=e.map(pm);po.warn(`Firestore (${$a}): ${n}`,...t)}}function pm(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Te(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,MT(n,r,t)}function MT(n,e,t){let r=`FIRESTORE (${$a}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw _i(r),new Error(r)}function qe(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||MT(e,i,r)}function Pe(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const te={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class pe extends Kn{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class io{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LT{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class rN{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Jt.UNAUTHENTICATED)))}shutdown(){}}class iN{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class sN{constructor(e){this.t=e,this.currentUser=Jt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){qe(this.o===void 0,42304);let r=this.i;const i=h=>this.i!==r?(r=this.i,t(h)):Promise.resolve();let o=new io;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new io,e.enqueueRetryable((()=>i(this.currentUser)))};const l=()=>{const h=o;e.enqueueRetryable((async()=>{await h.promise,await i(this.currentUser)}))},c=h=>{ce("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit((h=>c(h))),setTimeout((()=>{if(!this.auth){const h=this.t.getImmediate({optional:!0});h?c(h):(ce("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new io)}}),0),l()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(ce("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(qe(typeof r.accessToken=="string",31837,{l:r}),new LT(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return qe(e===null||typeof e=="string",2055,{h:e}),new Jt(e)}}class oN{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=Jt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class aN{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new oN(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Jt.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class S0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class lN{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,An(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){qe(this.o===void 0,3512);const r=o=>{o.error!=null&&ce("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const l=o.token!==this.m;return this.m=o.token,ce("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable((()=>r(o)))};const i=o=>{ce("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((o=>i(o))),setTimeout((()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?i(o):ce("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new S0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(qe(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new S0(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cN(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gm{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=cN(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%62))}return r}}function Me(n,e){return n<e?-1:n>e?1:0}function Eg(n,e){const t=Math.min(n.length,e.length);for(let r=0;r<t;r++){const i=n.charAt(r),o=e.charAt(r);if(i!==o)return zp(i)===zp(o)?Me(i,o):zp(i)?1:-1}return Me(n.length,e.length)}const uN=55296,hN=57343;function zp(n){const e=n.charCodeAt(0);return e>=uN&&e<=hN}function Ma(n,e,t){return n.length===e.length&&n.every(((r,i)=>t(r,e[i])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k0="__name__";class Cr{constructor(e,t,r){t===void 0?t=0:t>e.length&&Te(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&Te(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Cr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Cr?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const o=Cr.compareSegments(e.get(i),t.get(i));if(o!==0)return o}return Me(e.length,t.length)}static compareSegments(e,t){const r=Cr.isNumericId(e),i=Cr.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?Cr.extractNumericId(e).compare(Cr.extractNumericId(t)):Eg(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return us.fromString(e.substring(4,e.length-2))}}class lt extends Cr{construct(e,t,r){return new lt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new pe(te.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((i=>i.length>0)))}return new lt(t)}static emptyPath(){return new lt([])}}const dN=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class $t extends Cr{construct(e,t,r){return new $t(e,t,r)}static isValidIdentifier(e){return dN.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),$t.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===k0}static keyField(){return new $t([k0])}static fromServerFormat(e){const t=[];let r="",i=0;const o=()=>{if(r.length===0)throw new pe(te.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;i<e.length;){const c=e[i];if(c==="\\"){if(i+1===e.length)throw new pe(te.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const h=e[i+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new pe(te.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=h,i+=2}else c==="`"?(l=!l,i++):c!=="."||l?(r+=c,i++):(o(),i++)}if(o(),l)throw new pe(te.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new $t(t)}static emptyPath(){return new $t([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _e{constructor(e){this.path=e}static fromPath(e){return new _e(lt.fromString(e))}static fromName(e){return new _e(lt.fromString(e).popFirst(5))}static empty(){return new _e(lt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&lt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return lt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new _e(new lt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fN(n,e,t){if(!t)throw new pe(te.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function pN(n,e,t,r){if(e===!0&&r===!0)throw new pe(te.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function A0(n){if(!_e.isDocumentKey(n))throw new pe(te.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function VT(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function mm(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Te(12329,{type:typeof n})}function Aa(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new pe(te.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=mm(n);throw new pe(te.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tt(n,e){const t={typeString:n};return e&&(t.value=e),t}function Uc(n,e){if(!VT(n))throw new pe(te.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const l=n[r];if(i&&typeof l!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&l!==o.value){t=`Expected '${r}' field to equal '${o.value}'`;break}}if(t)throw new pe(te.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R0=-62135596800,C0=1e6;class it{static now(){return it.fromMillis(Date.now())}static fromDate(e){return it.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*C0);return new it(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new pe(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new pe(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<R0)throw new pe(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new pe(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/C0}_compareTo(e){return this.seconds===e.seconds?Me(this.nanoseconds,e.nanoseconds):Me(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:it._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Uc(e,it._jsonSchema))return new it(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-R0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}it._jsonSchemaVersion="firestore/timestamp/1.0",it._jsonSchema={type:Tt("string",it._jsonSchemaVersion),seconds:Tt("number"),nanoseconds:Tt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ke{static fromTimestamp(e){return new ke(e)}static min(){return new ke(new it(0,0))}static max(){return new ke(new it(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vc=-1;function gN(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=ke.fromTimestamp(r===1e9?new it(t+1,0):new it(t,r));return new fs(i,_e.empty(),e)}function mN(n){return new fs(n.readTime,n.key,vc)}class fs{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new fs(ke.min(),_e.empty(),vc)}static max(){return new fs(ke.max(),_e.empty(),vc)}}function yN(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=_e.comparator(n.documentKey,e.documentKey),t!==0?t:Me(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _N="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class vN{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ha(n){if(n.code!==te.FAILED_PRECONDITION||n.message!==_N)throw n;ce("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Te(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new J(((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof J?t:J.resolve(t)}catch(t){return J.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):J.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):J.reject(t)}static resolve(e){return new J(((t,r)=>{t(e)}))}static reject(e){return new J(((t,r)=>{r(e)}))}static waitFor(e){return new J(((t,r)=>{let i=0,o=0,l=!1;e.forEach((c=>{++i,c.next((()=>{++o,l&&o===i&&t()}),(h=>r(h)))})),l=!0,o===i&&t()}))}static or(e){let t=J.resolve(!1);for(const r of e)t=t.next((i=>i?J.resolve(i):r()));return t}static forEach(e,t){const r=[];return e.forEach(((i,o)=>{r.push(t.call(this,i,o))})),this.waitFor(r)}static mapArray(e,t){return new J(((r,i)=>{const o=e.length,l=new Array(o);let c=0;for(let h=0;h<o;h++){const p=h;t(e[p]).next((g=>{l[p]=g,++c,c===o&&r(l)}),(g=>i(g)))}}))}static doWhile(e,t){return new J(((r,i)=>{const o=()=>{e()===!0?t().next((()=>{o()}),i):r()};o()}))}}function wN(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Wa(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Md{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Md.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ym=-1;function Ld(n){return n==null}function td(n){return n===0&&1/n==-1/0}function EN(n){return typeof n=="number"&&Number.isInteger(n)&&!td(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FT="";function xN(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=P0(e)),e=TN(n.get(t),e);return P0(e)}function TN(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const o=n.charAt(i);switch(o){case"\0":t+="";break;case FT:t+="";break;default:t+=o}}return t}function P0(n){return n+FT+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N0(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function bo(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function jT(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct{constructor(e,t){this.comparator=e,this.root=t||Bt.EMPTY}insert(e,t){return new ct(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Bt.BLACK,null,null))}remove(e){return new ct(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Bt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new fh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new fh(this.root,e,this.comparator,!1)}getReverseIterator(){return new fh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new fh(this.root,e,this.comparator,!0)}}class fh{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Bt{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??Bt.RED,this.left=i??Bt.EMPTY,this.right=o??Bt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new Bt(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Bt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return Bt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Bt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Bt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Te(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Te(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Te(27949);return e+(this.isRed()?0:1)}}Bt.EMPTY=null,Bt.RED=!0,Bt.BLACK=!1;Bt.EMPTY=new class{constructor(){this.size=0}get key(){throw Te(57766)}get value(){throw Te(16141)}get color(){throw Te(16727)}get left(){throw Te(29726)}get right(){throw Te(36894)}copy(e,t,r,i,o){return this}insert(e,t,r){return new Bt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt{constructor(e){this.comparator=e,this.data=new ct(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new D0(this.data.getIterator())}getIteratorFrom(e){return new D0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof Pt)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Pt(this.comparator);return t.data=e,t}}class D0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or{constructor(e){this.fields=e,e.sort($t.comparator)}static empty(){return new or([])}unionWith(e){let t=new Pt($t.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new or(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ma(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new UT("Invalid base64 string: "+o):o}})(e);return new Ht(t)}static fromUint8Array(e){const t=(function(i){let o="";for(let l=0;l<i.length;++l)o+=String.fromCharCode(i[l]);return o})(e);return new Ht(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Me(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ht.EMPTY_BYTE_STRING=new Ht("");const bN=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ps(n){if(qe(!!n,39018),typeof n=="string"){let e=0;const t=bN.exec(n);if(qe(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:yt(n.seconds),nanos:yt(n.nanos)}}function yt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function gs(n){return typeof n=="string"?Ht.fromBase64String(n):Ht.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zT="server_timestamp",BT="__type__",$T="__previous_value__",HT="__local_write_time__";function _m(n){return(n?.mapValue?.fields||{})[BT]?.stringValue===zT}function Vd(n){const e=n.mapValue.fields[$T];return _m(e)?Vd(e):e}function wc(n){const e=ps(n.mapValue.fields[HT].timestampValue);return new it(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IN{constructor(e,t,r,i,o,l,c,h,p,g){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=l,this.autoDetectLongPolling=c,this.longPollingOptions=h,this.useFetchStreams=p,this.isUsingEmulator=g}}const nd="(default)";class Ec{constructor(e,t){this.projectId=e,this.database=t||nd}static empty(){return new Ec("","")}get isDefaultDatabase(){return this.database===nd}isEqual(e){return e instanceof Ec&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WT="__type__",SN="__max__",ph={mapValue:{}},qT="__vector__",rd="value";function ms(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?_m(n)?4:AN(n)?9007199254740991:kN(n)?10:11:Te(28295,{value:n})}function jr(n,e){if(n===e)return!0;const t=ms(n);if(t!==ms(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return wc(n).isEqual(wc(e));case 3:return(function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const l=ps(i.timestampValue),c=ps(o.timestampValue);return l.seconds===c.seconds&&l.nanos===c.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,o){return gs(i.bytesValue).isEqual(gs(o.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,o){return yt(i.geoPointValue.latitude)===yt(o.geoPointValue.latitude)&&yt(i.geoPointValue.longitude)===yt(o.geoPointValue.longitude)})(n,e);case 2:return(function(i,o){if("integerValue"in i&&"integerValue"in o)return yt(i.integerValue)===yt(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const l=yt(i.doubleValue),c=yt(o.doubleValue);return l===c?td(l)===td(c):isNaN(l)&&isNaN(c)}return!1})(n,e);case 9:return Ma(n.arrayValue.values||[],e.arrayValue.values||[],jr);case 10:case 11:return(function(i,o){const l=i.mapValue.fields||{},c=o.mapValue.fields||{};if(N0(l)!==N0(c))return!1;for(const h in l)if(l.hasOwnProperty(h)&&(c[h]===void 0||!jr(l[h],c[h])))return!1;return!0})(n,e);default:return Te(52216,{left:n})}}function xc(n,e){return(n.values||[]).find((t=>jr(t,e)))!==void 0}function La(n,e){if(n===e)return 0;const t=ms(n),r=ms(e);if(t!==r)return Me(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Me(n.booleanValue,e.booleanValue);case 2:return(function(o,l){const c=yt(o.integerValue||o.doubleValue),h=yt(l.integerValue||l.doubleValue);return c<h?-1:c>h?1:c===h?0:isNaN(c)?isNaN(h)?0:-1:1})(n,e);case 3:return O0(n.timestampValue,e.timestampValue);case 4:return O0(wc(n),wc(e));case 5:return Eg(n.stringValue,e.stringValue);case 6:return(function(o,l){const c=gs(o),h=gs(l);return c.compareTo(h)})(n.bytesValue,e.bytesValue);case 7:return(function(o,l){const c=o.split("/"),h=l.split("/");for(let p=0;p<c.length&&p<h.length;p++){const g=Me(c[p],h[p]);if(g!==0)return g}return Me(c.length,h.length)})(n.referenceValue,e.referenceValue);case 8:return(function(o,l){const c=Me(yt(o.latitude),yt(l.latitude));return c!==0?c:Me(yt(o.longitude),yt(l.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return M0(n.arrayValue,e.arrayValue);case 10:return(function(o,l){const c=o.fields||{},h=l.fields||{},p=c[rd]?.arrayValue,g=h[rd]?.arrayValue,v=Me(p?.values?.length||0,g?.values?.length||0);return v!==0?v:M0(p,g)})(n.mapValue,e.mapValue);case 11:return(function(o,l){if(o===ph.mapValue&&l===ph.mapValue)return 0;if(o===ph.mapValue)return 1;if(l===ph.mapValue)return-1;const c=o.fields||{},h=Object.keys(c),p=l.fields||{},g=Object.keys(p);h.sort(),g.sort();for(let v=0;v<h.length&&v<g.length;++v){const w=Eg(h[v],g[v]);if(w!==0)return w;const T=La(c[h[v]],p[g[v]]);if(T!==0)return T}return Me(h.length,g.length)})(n.mapValue,e.mapValue);default:throw Te(23264,{he:t})}}function O0(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Me(n,e);const t=ps(n),r=ps(e),i=Me(t.seconds,r.seconds);return i!==0?i:Me(t.nanos,r.nanos)}function M0(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const o=La(t[i],r[i]);if(o)return o}return Me(t.length,r.length)}function Va(n){return xg(n)}function xg(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const r=ps(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return gs(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return _e.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",i=!0;for(const o of t.values||[])i?i=!1:r+=",",r+=xg(o);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){const r=Object.keys(t.fields||{}).sort();let i="{",o=!0;for(const l of r)o?o=!1:i+=",",i+=`${l}:${xg(t.fields[l])}`;return i+"}"})(n.mapValue):Te(61005,{value:n})}function Fh(n){switch(ms(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Vd(n);return e?16+Fh(e):16;case 5:return 2*n.stringValue.length;case 6:return gs(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((i,o)=>i+Fh(o)),0)})(n.arrayValue);case 10:case 11:return(function(r){let i=0;return bo(r.fields,((o,l)=>{i+=o.length+Fh(l)})),i})(n.mapValue);default:throw Te(13486,{value:n})}}function Tg(n){return!!n&&"integerValue"in n}function vm(n){return!!n&&"arrayValue"in n}function L0(n){return!!n&&"nullValue"in n}function V0(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function jh(n){return!!n&&"mapValue"in n}function kN(n){return(n?.mapValue?.fields||{})[WT]?.stringValue===qT}function uc(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return bo(n.mapValue.fields,((t,r)=>e.mapValue.fields[t]=uc(r))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=uc(n.arrayValue.values[t]);return e}return{...n}}function AN(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===SN}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Un{constructor(e){this.value=e}static empty(){return new Un({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!jh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=uc(t)}setAll(e){let t=$t.emptyPath(),r={},i=[];e.forEach(((l,c)=>{if(!t.isImmediateParentOf(c)){const h=this.getFieldsMap(t);this.applyChanges(h,r,i),r={},i=[],t=c.popLast()}l?r[c.lastSegment()]=uc(l):i.push(c.lastSegment())}));const o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){const t=this.field(e.popLast());jh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return jr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];jh(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){bo(t,((i,o)=>e[i]=o));for(const i of r)delete e[i]}clone(){return new Un(uc(this.value))}}function KT(n){const e=[];return bo(n.fields,((t,r)=>{const i=new $t([t]);if(jh(r)){const o=KT(r.mapValue).fields;if(o.length===0)e.push(i);else for(const l of o)e.push(i.child(l))}else e.push(i)})),new or(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(e,t,r,i,o,l,c){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=l,this.documentState=c}static newInvalidDocument(e){return new Zt(e,0,ke.min(),ke.min(),ke.min(),Un.empty(),0)}static newFoundDocument(e,t,r,i){return new Zt(e,1,t,ke.min(),r,i,0)}static newNoDocument(e,t){return new Zt(e,2,t,ke.min(),ke.min(),Un.empty(),0)}static newUnknownDocument(e,t){return new Zt(e,3,t,ke.min(),ke.min(),Un.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ke.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Un.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Un.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ke.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Zt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Zt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class id{constructor(e,t){this.position=e,this.inclusive=t}}function F0(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const o=e[i],l=n.position[i];if(o.field.isKeyField()?r=_e.comparator(_e.fromName(l.referenceValue),t.key):r=La(l,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function j0(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!jr(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sd{constructor(e,t="asc"){this.field=e,this.dir=t}}function RN(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GT{}class At extends GT{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new PN(e,t,r):t==="array-contains"?new ON(e,r):t==="in"?new MN(e,r):t==="not-in"?new LN(e,r):t==="array-contains-any"?new VN(e,r):new At(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new NN(e,r):new DN(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(La(t,this.value)):t!==null&&ms(this.value)===ms(t)&&this.matchesComparison(La(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Te(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ur extends GT{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Ur(e,t)}matches(e){return QT(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function QT(n){return n.op==="and"}function YT(n){return CN(n)&&QT(n)}function CN(n){for(const e of n.filters)if(e instanceof Ur)return!1;return!0}function bg(n){if(n instanceof At)return n.field.canonicalString()+n.op.toString()+Va(n.value);if(YT(n))return n.filters.map((e=>bg(e))).join(",");{const e=n.filters.map((t=>bg(t))).join(",");return`${n.op}(${e})`}}function XT(n,e){return n instanceof At?(function(r,i){return i instanceof At&&r.op===i.op&&r.field.isEqual(i.field)&&jr(r.value,i.value)})(n,e):n instanceof Ur?(function(r,i){return i instanceof Ur&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce(((o,l,c)=>o&&XT(l,i.filters[c])),!0):!1})(n,e):void Te(19439)}function JT(n){return n instanceof At?(function(t){return`${t.field.canonicalString()} ${t.op} ${Va(t.value)}`})(n):n instanceof Ur?(function(t){return t.op.toString()+" {"+t.getFilters().map(JT).join(" ,")+"}"})(n):"Filter"}class PN extends At{constructor(e,t,r){super(e,t,r),this.key=_e.fromName(r.referenceValue)}matches(e){const t=_e.comparator(e.key,this.key);return this.matchesComparison(t)}}class NN extends At{constructor(e,t){super(e,"in",t),this.keys=ZT("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class DN extends At{constructor(e,t){super(e,"not-in",t),this.keys=ZT("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function ZT(n,e){return(e.arrayValue?.values||[]).map((t=>_e.fromName(t.referenceValue)))}class ON extends At{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return vm(t)&&xc(t.arrayValue,this.value)}}class MN extends At{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&xc(this.value.arrayValue,t)}}class LN extends At{constructor(e,t){super(e,"not-in",t)}matches(e){if(xc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!xc(this.value.arrayValue,t)}}class VN extends At{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!vm(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>xc(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FN{constructor(e,t=null,r=[],i=[],o=null,l=null,c=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=l,this.endAt=c,this.Te=null}}function U0(n,e=null,t=[],r=[],i=null,o=null,l=null){return new FN(n,e,t,r,i,o,l)}function wm(n){const e=Pe(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>bg(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(o){return o.field.canonicalString()+o.dir})(r))).join(","),Ld(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>Va(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>Va(r))).join(",")),e.Te=t}return e.Te}function Em(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!RN(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!XT(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!j0(n.startAt,e.startAt)&&j0(n.endAt,e.endAt)}function Ig(n){return _e.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fd{constructor(e,t=null,r=[],i=[],o=null,l="F",c=null,h=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=l,this.startAt=c,this.endAt=h,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function jN(n,e,t,r,i,o,l,c){return new Fd(n,e,t,r,i,o,l,c)}function xm(n){return new Fd(n)}function z0(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function UN(n){return n.collectionGroup!==null}function hc(n){const e=Pe(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const o of e.explicitOrderBy)e.Ie.push(o),t.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let c=new Pt($t.comparator);return l.filters.forEach((h=>{h.getFlattenedFilters().forEach((p=>{p.isInequality()&&(c=c.add(p.field))}))})),c})(e).forEach((o=>{t.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new sd(o,r))})),t.has($t.keyField().canonicalString())||e.Ie.push(new sd($t.keyField(),r))}return e.Ie}function Mr(n){const e=Pe(n);return e.Ee||(e.Ee=zN(e,hc(n))),e.Ee}function zN(n,e){if(n.limitType==="F")return U0(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((i=>{const o=i.dir==="desc"?"asc":"desc";return new sd(i.field,o)}));const t=n.endAt?new id(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new id(n.startAt.position,n.startAt.inclusive):null;return U0(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Sg(n,e,t){return new Fd(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function jd(n,e){return Em(Mr(n),Mr(e))&&n.limitType===e.limitType}function eb(n){return`${wm(Mr(n))}|lt:${n.limitType}`}function wa(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((i=>JT(i))).join(", ")}]`),Ld(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((i=>(function(l){return`${l.field.canonicalString()} (${l.dir})`})(i))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((i=>Va(i))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((i=>Va(i))).join(",")),`Target(${r})`})(Mr(n))}; limitType=${n.limitType})`}function Ud(n,e){return e.isFoundDocument()&&(function(r,i){const o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):_e.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)})(n,e)&&(function(r,i){for(const o of hc(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0})(n,e)&&(function(r,i){for(const o of r.filters)if(!o.matches(i))return!1;return!0})(n,e)&&(function(r,i){return!(r.startAt&&!(function(l,c,h){const p=F0(l,c,h);return l.inclusive?p<=0:p<0})(r.startAt,hc(r),i)||r.endAt&&!(function(l,c,h){const p=F0(l,c,h);return l.inclusive?p>=0:p>0})(r.endAt,hc(r),i))})(n,e)}function BN(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function tb(n){return(e,t)=>{let r=!1;for(const i of hc(n)){const o=$N(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function $N(n,e,t){const r=n.field.isKeyField()?_e.comparator(e.key,t.key):(function(o,l,c){const h=l.data.field(o),p=c.data.field(o);return h!==null&&p!==null?La(h,p):Te(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Te(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Io{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){bo(this.inner,((t,r)=>{for(const[i,o]of r)e(i,o)}))}isEmpty(){return jT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HN=new ct(_e.comparator);function vi(){return HN}const nb=new ct(_e.comparator);function ec(...n){let e=nb;for(const t of n)e=e.insert(t.key,t);return e}function rb(n){let e=nb;return n.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function to(){return dc()}function ib(){return dc()}function dc(){return new Io((n=>n.toString()),((n,e)=>n.isEqual(e)))}const WN=new ct(_e.comparator),qN=new Pt(_e.comparator);function Le(...n){let e=qN;for(const t of n)e=e.add(t);return e}const KN=new Pt(Me);function GN(){return KN}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tm(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:td(e)?"-0":e}}function sb(n){return{integerValue:""+n}}function QN(n,e){return EN(e)?sb(e):Tm(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zd{constructor(){this._=void 0}}function YN(n,e,t){return n instanceof Tc?(function(i,o){const l={fields:{[BT]:{stringValue:zT},[HT]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&_m(o)&&(o=Vd(o)),o&&(l.fields[$T]=o),{mapValue:l}})(t,e):n instanceof bc?ab(n,e):n instanceof Ic?lb(n,e):(function(i,o){const l=ob(i,o),c=B0(l)+B0(i.Ae);return Tg(l)&&Tg(i.Ae)?sb(c):Tm(i.serializer,c)})(n,e)}function XN(n,e,t){return n instanceof bc?ab(n,e):n instanceof Ic?lb(n,e):t}function ob(n,e){return n instanceof od?(function(r){return Tg(r)||(function(o){return!!o&&"doubleValue"in o})(r)})(e)?e:{integerValue:0}:null}class Tc extends zd{}class bc extends zd{constructor(e){super(),this.elements=e}}function ab(n,e){const t=cb(e);for(const r of n.elements)t.some((i=>jr(i,r)))||t.push(r);return{arrayValue:{values:t}}}class Ic extends zd{constructor(e){super(),this.elements=e}}function lb(n,e){let t=cb(e);for(const r of n.elements)t=t.filter((i=>!jr(i,r)));return{arrayValue:{values:t}}}class od extends zd{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function B0(n){return yt(n.integerValue||n.doubleValue)}function cb(n){return vm(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JN{constructor(e,t){this.field=e,this.transform=t}}function ZN(n,e){return n.field.isEqual(e.field)&&(function(r,i){return r instanceof bc&&i instanceof bc||r instanceof Ic&&i instanceof Ic?Ma(r.elements,i.elements,jr):r instanceof od&&i instanceof od?jr(r.Ae,i.Ae):r instanceof Tc&&i instanceof Tc})(n.transform,e.transform)}class eD{constructor(e,t){this.version=e,this.transformResults=t}}class pi{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new pi}static exists(e){return new pi(void 0,e)}static updateTime(e){return new pi(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Uh(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Bd{}function ub(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new db(n.key,pi.none()):new zc(n.key,n.data,pi.none());{const t=n.data,r=Un.empty();let i=new Pt($t.comparator);for(let o of e.fields)if(!i.has(o)){let l=t.field(o);l===null&&o.length>1&&(o=o.popLast(),l=t.field(o)),l===null?r.delete(o):r.set(o,l),i=i.add(o)}return new So(n.key,r,new or(i.toArray()),pi.none())}}function tD(n,e,t){n instanceof zc?(function(i,o,l){const c=i.value.clone(),h=H0(i.fieldTransforms,o,l.transformResults);c.setAll(h),o.convertToFoundDocument(l.version,c).setHasCommittedMutations()})(n,e,t):n instanceof So?(function(i,o,l){if(!Uh(i.precondition,o))return void o.convertToUnknownDocument(l.version);const c=H0(i.fieldTransforms,o,l.transformResults),h=o.data;h.setAll(hb(i)),h.setAll(c),o.convertToFoundDocument(l.version,h).setHasCommittedMutations()})(n,e,t):(function(i,o,l){o.convertToNoDocument(l.version).setHasCommittedMutations()})(0,e,t)}function fc(n,e,t,r){return n instanceof zc?(function(o,l,c,h){if(!Uh(o.precondition,l))return c;const p=o.value.clone(),g=W0(o.fieldTransforms,h,l);return p.setAll(g),l.convertToFoundDocument(l.version,p).setHasLocalMutations(),null})(n,e,t,r):n instanceof So?(function(o,l,c,h){if(!Uh(o.precondition,l))return c;const p=W0(o.fieldTransforms,h,l),g=l.data;return g.setAll(hb(o)),g.setAll(p),l.convertToFoundDocument(l.version,g).setHasLocalMutations(),c===null?null:c.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map((v=>v.field)))})(n,e,t,r):(function(o,l,c){return Uh(o.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):c})(n,e,t)}function nD(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),o=ob(r.transform,i||null);o!=null&&(t===null&&(t=Un.empty()),t.set(r.field,o))}return t||null}function $0(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Ma(r,i,((o,l)=>ZN(o,l)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class zc extends Bd{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class So extends Bd{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function hb(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}})),e}function H0(n,e,t){const r=new Map;qe(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let i=0;i<t.length;i++){const o=n[i],l=o.transform,c=e.data.field(o.field);r.set(o.field,XN(l,c,t[i]))}return r}function W0(n,e,t){const r=new Map;for(const i of n){const o=i.transform,l=t.data.field(i.field);r.set(i.field,YN(o,l,e))}return r}class db extends Bd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class rD extends Bd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iD{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&tD(o,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=fc(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=fc(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=ib();return this.mutations.forEach((i=>{const o=e.get(i.key),l=o.overlayedDocument;let c=this.applyToLocalView(l,o.mutatedFields);c=t.has(i.key)?null:c;const h=ub(l,c);h!==null&&r.set(i.key,h),l.isValidDocument()||l.convertToNoDocument(ke.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Le())}isEqual(e){return this.batchId===e.batchId&&Ma(this.mutations,e.mutations,((t,r)=>$0(t,r)))&&Ma(this.baseMutations,e.baseMutations,((t,r)=>$0(t,r)))}}class bm{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){qe(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=(function(){return WN})();const o=e.mutations;for(let l=0;l<o.length;l++)i=i.insert(o[l].key,r[l].version);return new bm(e,t,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sD{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oD{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xt,Fe;function aD(n){switch(n){case te.OK:return Te(64938);case te.CANCELLED:case te.UNKNOWN:case te.DEADLINE_EXCEEDED:case te.RESOURCE_EXHAUSTED:case te.INTERNAL:case te.UNAVAILABLE:case te.UNAUTHENTICATED:return!1;case te.INVALID_ARGUMENT:case te.NOT_FOUND:case te.ALREADY_EXISTS:case te.PERMISSION_DENIED:case te.FAILED_PRECONDITION:case te.ABORTED:case te.OUT_OF_RANGE:case te.UNIMPLEMENTED:case te.DATA_LOSS:return!0;default:return Te(15467,{code:n})}}function fb(n){if(n===void 0)return _i("GRPC error has no .code"),te.UNKNOWN;switch(n){case xt.OK:return te.OK;case xt.CANCELLED:return te.CANCELLED;case xt.UNKNOWN:return te.UNKNOWN;case xt.DEADLINE_EXCEEDED:return te.DEADLINE_EXCEEDED;case xt.RESOURCE_EXHAUSTED:return te.RESOURCE_EXHAUSTED;case xt.INTERNAL:return te.INTERNAL;case xt.UNAVAILABLE:return te.UNAVAILABLE;case xt.UNAUTHENTICATED:return te.UNAUTHENTICATED;case xt.INVALID_ARGUMENT:return te.INVALID_ARGUMENT;case xt.NOT_FOUND:return te.NOT_FOUND;case xt.ALREADY_EXISTS:return te.ALREADY_EXISTS;case xt.PERMISSION_DENIED:return te.PERMISSION_DENIED;case xt.FAILED_PRECONDITION:return te.FAILED_PRECONDITION;case xt.ABORTED:return te.ABORTED;case xt.OUT_OF_RANGE:return te.OUT_OF_RANGE;case xt.UNIMPLEMENTED:return te.UNIMPLEMENTED;case xt.DATA_LOSS:return te.DATA_LOSS;default:return Te(39323,{code:n})}}(Fe=xt||(xt={}))[Fe.OK=0]="OK",Fe[Fe.CANCELLED=1]="CANCELLED",Fe[Fe.UNKNOWN=2]="UNKNOWN",Fe[Fe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Fe[Fe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Fe[Fe.NOT_FOUND=5]="NOT_FOUND",Fe[Fe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Fe[Fe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Fe[Fe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Fe[Fe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Fe[Fe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Fe[Fe.ABORTED=10]="ABORTED",Fe[Fe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Fe[Fe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Fe[Fe.INTERNAL=13]="INTERNAL",Fe[Fe.UNAVAILABLE=14]="UNAVAILABLE",Fe[Fe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lD(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cD=new us([4294967295,4294967295],0);function q0(n){const e=lD().encode(n),t=new RT;return t.update(e),new Uint8Array(t.digest())}function K0(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new us([t,r],0),new us([i,o],0)]}class Im{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new tc(`Invalid padding: ${t}`);if(r<0)throw new tc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new tc(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new tc(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=us.fromNumber(this.ge)}ye(e,t,r){let i=e.add(t.multiply(us.fromNumber(r)));return i.compare(cD)===1&&(i=new us([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=q0(e),[r,i]=K0(t);for(let o=0;o<this.hashCount;o++){const l=this.ye(r,i,o);if(!this.we(l))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),l=new Im(o,i,t);return r.forEach((c=>l.insert(c))),l}insert(e){if(this.ge===0)return;const t=q0(e),[r,i]=K0(t);for(let o=0;o<this.hashCount;o++){const l=this.ye(r,i,o);this.Se(l)}}Se(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class tc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $d{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,Bc.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new $d(ke.min(),i,new ct(Me),vi(),Le())}}class Bc{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Bc(r,t,Le(),Le(),Le())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zh{constructor(e,t,r,i){this.be=e,this.removedTargetIds=t,this.key=r,this.De=i}}class pb{constructor(e,t){this.targetId=e,this.Ce=t}}class gb{constructor(e,t,r=Ht.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class G0{constructor(){this.ve=0,this.Fe=Q0(),this.Me=Ht.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Le(),t=Le(),r=Le();return this.Fe.forEach(((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Te(38017,{changeType:o})}})),new Bc(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=Q0()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,qe(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class uD{constructor(e){this.Ge=e,this.ze=new Map,this.je=vi(),this.Je=gh(),this.He=gh(),this.Ye=new ct(Me)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:Te(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((r,i)=>{this.rt(i)&&t(i)}))}st(e){const t=e.targetId,r=e.Ce.count,i=this.ot(t);if(i){const o=i.target;if(Ig(o))if(r===0){const l=new _e(o.path);this.et(t,l,Zt.newNoDocument(l,ke.min()))}else qe(r===1,20013,{expectedCount:r});else{const l=this._t(t);if(l!==r){const c=this.ut(e),h=c?this.ct(c,e,l):1;if(h!==0){this.it(t);const p=h===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,p)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t;let l,c;try{l=gs(r).toUint8Array()}catch(h){if(h instanceof UT)return Oa("Decoding the base64 bloom filter in existence filter failed ("+h.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw h}try{c=new Im(l,i,o)}catch(h){return Oa(h instanceof tc?"BloomFilter error: ":"Applying bloom filter failed: ",h),null}return c.ge===0?null:c}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let i=0;return r.forEach((o=>{const l=this.Ge.ht(),c=`projects/${l.projectId}/databases/${l.database}/documents/${o.path.canonicalString()}`;e.mightContain(c)||(this.et(t,o,null),i++)})),i}Tt(e){const t=new Map;this.ze.forEach(((o,l)=>{const c=this.ot(l);if(c){if(o.current&&Ig(c.target)){const h=new _e(c.target.path);this.It(h).has(l)||this.Et(l,h)||this.et(l,h,Zt.newNoDocument(h,e))}o.Be&&(t.set(l,o.ke()),o.qe())}}));let r=Le();this.He.forEach(((o,l)=>{let c=!0;l.forEachWhile((h=>{const p=this.ot(h);return!p||p.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)})),c&&(r=r.add(o))})),this.je.forEach(((o,l)=>l.setReadTime(e)));const i=new $d(e,t,this.Ye,this.je,r);return this.je=vi(),this.Je=gh(),this.He=gh(),this.Ye=new ct(Me),i}Xe(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,t)?i.Qe(t,1):i.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new G0,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Pt(Me),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Pt(Me),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||ce("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new G0),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function gh(){return new ct(_e.comparator)}function Q0(){return new ct(_e.comparator)}const hD={asc:"ASCENDING",desc:"DESCENDING"},dD={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},fD={and:"AND",or:"OR"};class pD{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function kg(n,e){return n.useProto3Json||Ld(e)?e:{value:e}}function ad(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function mb(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function gD(n,e){return ad(n,e.toTimestamp())}function Lr(n){return qe(!!n,49232),ke.fromTimestamp((function(t){const r=ps(t);return new it(r.seconds,r.nanos)})(n))}function Sm(n,e){return Ag(n,e).canonicalString()}function Ag(n,e){const t=(function(i){return new lt(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function yb(n){const e=lt.fromString(n);return qe(xb(e),10190,{key:e.toString()}),e}function Rg(n,e){return Sm(n.databaseId,e.path)}function Bp(n,e){const t=yb(e);if(t.get(1)!==n.databaseId.projectId)throw new pe(te.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new pe(te.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new _e(vb(t))}function _b(n,e){return Sm(n.databaseId,e)}function mD(n){const e=yb(n);return e.length===4?lt.emptyPath():vb(e)}function Cg(n){return new lt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function vb(n){return qe(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function Y0(n,e,t){return{name:Rg(n,e),fields:t.value.mapValue.fields}}function yD(n,e){let t;if("targetChange"in e){e.targetChange;const r=(function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:Te(39313,{state:p})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=(function(p,g){return p.useProto3Json?(qe(g===void 0||typeof g=="string",58123),Ht.fromBase64String(g||"")):(qe(g===void 0||g instanceof Buffer||g instanceof Uint8Array,16193),Ht.fromUint8Array(g||new Uint8Array))})(n,e.targetChange.resumeToken),l=e.targetChange.cause,c=l&&(function(p){const g=p.code===void 0?te.UNKNOWN:fb(p.code);return new pe(g,p.message||"")})(l);t=new gb(r,i,o,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Bp(n,r.document.name),o=Lr(r.document.updateTime),l=r.document.createTime?Lr(r.document.createTime):ke.min(),c=new Un({mapValue:{fields:r.document.fields}}),h=Zt.newFoundDocument(i,o,l,c),p=r.targetIds||[],g=r.removedTargetIds||[];t=new zh(p,g,h.key,h)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Bp(n,r.document),o=r.readTime?Lr(r.readTime):ke.min(),l=Zt.newNoDocument(i,o),c=r.removedTargetIds||[];t=new zh([],c,l.key,l)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Bp(n,r.document),o=r.removedTargetIds||[];t=new zh([],o,i,null)}else{if(!("filter"in e))return Te(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:o}=r,l=new oD(i,o),c=r.targetId;t=new pb(c,l)}}return t}function _D(n,e){let t;if(e instanceof zc)t={update:Y0(n,e.key,e.value)};else if(e instanceof db)t={delete:Rg(n,e.key)};else if(e instanceof So)t={update:Y0(n,e.key,e.data),updateMask:kD(e.fieldMask)};else{if(!(e instanceof rD))return Te(16599,{Vt:e.type});t={verify:Rg(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(o,l){const c=l.transform;if(c instanceof Tc)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof bc)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Ic)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof od)return{fieldPath:l.field.canonicalString(),increment:c.Ae};throw Te(20930,{transform:l.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(i,o){return o.updateTime!==void 0?{updateTime:gD(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Te(27497)})(n,e.precondition)),t}function vD(n,e){return n&&n.length>0?(qe(e!==void 0,14353),n.map((t=>(function(i,o){let l=i.updateTime?Lr(i.updateTime):Lr(o);return l.isEqual(ke.min())&&(l=Lr(o)),new eD(l,i.transformResults||[])})(t,e)))):[]}function wD(n,e){return{documents:[_b(n,e.path)]}}function ED(n,e){const t={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=_b(n,i);const o=(function(p){if(p.length!==0)return Eb(Ur.create(p,"and"))})(e.filters);o&&(t.structuredQuery.where=o);const l=(function(p){if(p.length!==0)return p.map((g=>(function(w){return{field:Ea(w.field),direction:bD(w.dir)}})(g)))})(e.orderBy);l&&(t.structuredQuery.orderBy=l);const c=kg(n,e.limit);return c!==null&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt=(function(p){return{before:p.inclusive,values:p.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(p){return{before:!p.inclusive,values:p.position}})(e.endAt)),{ft:t,parent:i}}function xD(n){let e=mD(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){qe(r===1,65062);const g=t.from[0];g.allDescendants?i=g.collectionId:e=e.child(g.collectionId)}let o=[];t.where&&(o=(function(v){const w=wb(v);return w instanceof Ur&&YT(w)?w.getFilters():[w]})(t.where));let l=[];t.orderBy&&(l=(function(v){return v.map((w=>(function(R){return new sd(xa(R.field),(function(A){switch(A){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(R.direction))})(w)))})(t.orderBy));let c=null;t.limit&&(c=(function(v){let w;return w=typeof v=="object"?v.value:v,Ld(w)?null:w})(t.limit));let h=null;t.startAt&&(h=(function(v){const w=!!v.before,T=v.values||[];return new id(T,w)})(t.startAt));let p=null;return t.endAt&&(p=(function(v){const w=!v.before,T=v.values||[];return new id(T,w)})(t.endAt)),jN(e,i,l,o,c,"F",h,p)}function TD(n,e){const t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Te(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function wb(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=xa(t.unaryFilter.field);return At.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=xa(t.unaryFilter.field);return At.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=xa(t.unaryFilter.field);return At.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=xa(t.unaryFilter.field);return At.create(l,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Te(61313);default:return Te(60726)}})(n):n.fieldFilter!==void 0?(function(t){return At.create(xa(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Te(58110);default:return Te(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Ur.create(t.compositeFilter.filters.map((r=>wb(r))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Te(1026)}})(t.compositeFilter.op))})(n):Te(30097,{filter:n})}function bD(n){return hD[n]}function ID(n){return dD[n]}function SD(n){return fD[n]}function Ea(n){return{fieldPath:n.canonicalString()}}function xa(n){return $t.fromServerFormat(n.fieldPath)}function Eb(n){return n instanceof At?(function(t){if(t.op==="=="){if(V0(t.value))return{unaryFilter:{field:Ea(t.field),op:"IS_NAN"}};if(L0(t.value))return{unaryFilter:{field:Ea(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(V0(t.value))return{unaryFilter:{field:Ea(t.field),op:"IS_NOT_NAN"}};if(L0(t.value))return{unaryFilter:{field:Ea(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ea(t.field),op:ID(t.op),value:t.value}}})(n):n instanceof Ur?(function(t){const r=t.getFilters().map((i=>Eb(i)));return r.length===1?r[0]:{compositeFilter:{op:SD(t.op),filters:r}}})(n):Te(54877,{filter:n})}function kD(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function xb(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is{constructor(e,t,r,i,o=ke.min(),l=ke.min(),c=Ht.EMPTY_BYTE_STRING,h=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=c,this.expectedCount=h}withSequenceNumber(e){return new is(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new is(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new is(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new is(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AD{constructor(e){this.yt=e}}function RD(n){const e=xD({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Sg(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CD{constructor(){this.Cn=new PD}addToCollectionParentIndex(e,t){return this.Cn.add(t),J.resolve()}getCollectionParents(e,t){return J.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return J.resolve()}deleteFieldIndex(e,t){return J.resolve()}deleteAllFieldIndexes(e){return J.resolve()}createTargetIndexes(e,t){return J.resolve()}getDocumentsMatchingTarget(e,t){return J.resolve(null)}getIndexType(e,t){return J.resolve(0)}getFieldIndexes(e,t){return J.resolve([])}getNextCollectionGroupToUpdate(e){return J.resolve(null)}getMinOffset(e,t){return J.resolve(fs.min())}getMinOffsetFromCollectionGroup(e,t){return J.resolve(fs.min())}updateCollectionGroup(e,t,r){return J.resolve()}updateIndexEntries(e,t){return J.resolve()}}class PD{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Pt(lt.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Pt(lt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Tb=41943040;class gn{static withCacheSize(e){return new gn(e,gn.DEFAULT_COLLECTION_PERCENTILE,gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */gn.DEFAULT_COLLECTION_PERCENTILE=10,gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,gn.DEFAULT=new gn(Tb,gn.DEFAULT_COLLECTION_PERCENTILE,gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),gn.DISABLED=new gn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fa{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Fa(0)}static cr(){return new Fa(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J0="LruGarbageCollector",ND=1048576;function Z0([n,e],[t,r]){const i=Me(n,t);return i===0?Me(e,r):i}class DD{constructor(e){this.Ir=e,this.buffer=new Pt(Z0),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();Z0(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class OD{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ce(J0,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Wa(t)?ce(J0,"Ignoring IndexedDB error during garbage collection: ",t):await Ha(t)}await this.Vr(3e5)}))}}class MD{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return J.resolve(Md.ce);const r=new DD(t);return this.mr.forEachTarget(e,(i=>r.Ar(i.sequenceNumber))).next((()=>this.mr.pr(e,(i=>r.Ar(i))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ce("LruGarbageCollector","Garbage collection skipped; disabled"),J.resolve(X0)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(ce("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),X0):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,i,o,l,c,h,p;const g=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((v=>(v>this.params.maximumSequenceNumbersToCollect?(ce("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),i=this.params.maximumSequenceNumbersToCollect):i=v,l=Date.now(),this.nthSequenceNumber(e,i)))).next((v=>(r=v,c=Date.now(),this.removeTargets(e,r,t)))).next((v=>(o=v,h=Date.now(),this.removeOrphanedDocuments(e,r)))).next((v=>(p=Date.now(),va()<=Oe.DEBUG&&ce("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-g}ms
	Determined least recently used ${i} in `+(c-l)+`ms
	Removed ${o} targets in `+(h-c)+`ms
	Removed ${v} documents in `+(p-h)+`ms
Total Duration: ${p-g}ms`),J.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:v}))))}}function LD(n,e){return new MD(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VD{constructor(){this.changes=new Io((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Zt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?J.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FD{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jD{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((i=>(r=i,this.remoteDocumentCache.getEntry(e,t)))).next((i=>(r!==null&&fc(r.mutation,i,or.empty(),it.now()),i)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,Le()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=Le()){const i=to();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,r).next((o=>{let l=ec();return o.forEach(((c,h)=>{l=l.insert(c,h.overlayedDocument)})),l}))))}getOverlayedDocuments(e,t){const r=to();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,Le())))}populateOverlays(e,t,r){const i=[];return r.forEach((o=>{t.has(o)||i.push(o)})),this.documentOverlayCache.getOverlays(e,i).next((o=>{o.forEach(((l,c)=>{t.set(l,c)}))}))}computeViews(e,t,r,i){let o=vi();const l=dc(),c=(function(){return dc()})();return t.forEach(((h,p)=>{const g=r.get(p.key);i.has(p.key)&&(g===void 0||g.mutation instanceof So)?o=o.insert(p.key,p):g!==void 0?(l.set(p.key,g.mutation.getFieldMask()),fc(g.mutation,p,g.mutation.getFieldMask(),it.now())):l.set(p.key,or.empty())})),this.recalculateAndSaveOverlays(e,o).next((h=>(h.forEach(((p,g)=>l.set(p,g))),t.forEach(((p,g)=>c.set(p,new FD(g,l.get(p)??null)))),c)))}recalculateAndSaveOverlays(e,t){const r=dc();let i=new ct(((l,c)=>l-c)),o=Le();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((l=>{for(const c of l)c.keys().forEach((h=>{const p=t.get(h);if(p===null)return;let g=r.get(h)||or.empty();g=c.applyToLocalView(p,g),r.set(h,g);const v=(i.get(c.batchId)||Le()).add(h);i=i.insert(c.batchId,v)}))})).next((()=>{const l=[],c=i.getReverseIterator();for(;c.hasNext();){const h=c.getNext(),p=h.key,g=h.value,v=ib();g.forEach((w=>{if(!o.has(w)){const T=ub(t.get(w),r.get(w));T!==null&&v.set(w,T),o=o.add(w)}})),l.push(this.documentOverlayCache.saveOverlays(e,p,v))}return J.waitFor(l)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,i){return(function(l){return _e.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):UN(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next((o=>{const l=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):J.resolve(to());let c=vc,h=o;return l.next((p=>J.forEach(p,((g,v)=>(c<v.largestBatchId&&(c=v.largestBatchId),o.get(g)?J.resolve():this.remoteDocumentCache.getEntry(e,g).next((w=>{h=h.insert(g,w)}))))).next((()=>this.populateOverlays(e,p,o))).next((()=>this.computeViews(e,h,p,Le()))).next((g=>({batchId:c,changes:rb(g)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new _e(t)).next((r=>{let i=ec();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const o=t.collectionGroup;let l=ec();return this.indexManager.getCollectionParents(e,o).next((c=>J.forEach(c,(h=>{const p=(function(v,w){return new Fd(w,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)})(t,h.child(o));return this.getDocumentsMatchingCollectionQuery(e,p,r,i).next((g=>{g.forEach(((v,w)=>{l=l.insert(v,w)}))}))})).next((()=>l))))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((l=>(o=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i)))).next((l=>{o.forEach(((h,p)=>{const g=p.getKey();l.get(g)===null&&(l=l.insert(g,Zt.newInvalidDocument(g)))}));let c=ec();return l.forEach(((h,p)=>{const g=o.get(h);g!==void 0&&fc(g.mutation,p,or.empty(),it.now()),Ud(t,p)&&(c=c.insert(h,p))})),c}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UD{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return J.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:Lr(i.createTime)}})(t)),J.resolve()}getNamedQuery(e,t){return J.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(i){return{name:i.name,query:RD(i.bundledQuery),readTime:Lr(i.readTime)}})(t)),J.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zD{constructor(){this.overlays=new ct(_e.comparator),this.qr=new Map}getOverlay(e,t){return J.resolve(this.overlays.get(t))}getOverlays(e,t){const r=to();return J.forEach(t,(i=>this.getOverlay(e,i).next((o=>{o!==null&&r.set(i,o)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((i,o)=>{this.St(e,t,o)})),J.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach((o=>this.overlays=this.overlays.remove(o))),this.qr.delete(r)),J.resolve()}getOverlaysForCollection(e,t,r){const i=to(),o=t.length+1,l=new _e(t.child("")),c=this.overlays.getIteratorFrom(l);for(;c.hasNext();){const h=c.getNext().value,p=h.getKey();if(!t.isPrefixOf(p.path))break;p.path.length===o&&h.largestBatchId>r&&i.set(h.getKey(),h)}return J.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new ct(((p,g)=>p-g));const l=this.overlays.getIterator();for(;l.hasNext();){const p=l.getNext().value;if(p.getKey().getCollectionGroup()===t&&p.largestBatchId>r){let g=o.get(p.largestBatchId);g===null&&(g=to(),o=o.insert(p.largestBatchId,g)),g.set(p.getKey(),p)}}const c=to(),h=o.getIterator();for(;h.hasNext()&&(h.getNext().value.forEach(((p,g)=>c.set(p,g))),!(c.size()>=i)););return J.resolve(c)}St(e,t,r){const i=this.overlays.get(r.key);if(i!==null){const l=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new sD(t,r));let o=this.qr.get(t);o===void 0&&(o=Le(),this.qr.set(t,o)),this.qr.set(t,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BD{constructor(){this.sessionToken=Ht.EMPTY_BYTE_STRING}getSessionToken(e){return J.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,J.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class km{constructor(){this.Qr=new Pt(Mt.$r),this.Ur=new Pt(Mt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const r=new Mt(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Gr(new Mt(e,t))}zr(e,t){e.forEach((r=>this.removeReference(r,t)))}jr(e){const t=new _e(new lt([])),r=new Mt(t,e),i=new Mt(t,e+1),o=[];return this.Ur.forEachInRange([r,i],(l=>{this.Gr(l),o.push(l.key)})),o}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new _e(new lt([])),r=new Mt(t,e),i=new Mt(t,e+1);let o=Le();return this.Ur.forEachInRange([r,i],(l=>{o=o.add(l.key)})),o}containsKey(e){const t=new Mt(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Mt{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return _e.comparator(e.key,t.key)||Me(e.Yr,t.Yr)}static Kr(e,t){return Me(e.Yr,t.Yr)||_e.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $D{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Pt(Mt.$r)}checkEmpty(e){return J.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){const o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new iD(o,t,r,i);this.mutationQueue.push(l);for(const c of i)this.Zr=this.Zr.add(new Mt(c.key,o)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return J.resolve(l)}lookupMutationBatch(e,t){return J.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=this.ei(r),o=i<0?0:i;return J.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return J.resolve(this.mutationQueue.length===0?ym:this.tr-1)}getAllMutationBatches(e){return J.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Mt(t,0),i=new Mt(t,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([r,i],(l=>{const c=this.Xr(l.Yr);o.push(c)})),J.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Pt(Me);return t.forEach((i=>{const o=new Mt(i,0),l=new Mt(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,l],(c=>{r=r.add(c.Yr)}))})),J.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let o=r;_e.isDocumentKey(o)||(o=o.child(""));const l=new Mt(new _e(o),0);let c=new Pt(Me);return this.Zr.forEachWhile((h=>{const p=h.key.path;return!!r.isPrefixOf(p)&&(p.length===i&&(c=c.add(h.Yr)),!0)}),l),J.resolve(this.ti(c))}ti(e){const t=[];return e.forEach((r=>{const i=this.Xr(r);i!==null&&t.push(i)})),t}removeMutationBatch(e,t){qe(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return J.forEach(t.mutations,(i=>{const o=new Mt(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,t){const r=new Mt(t,0),i=this.Zr.firstAfterOrEqual(r);return J.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,J.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HD{constructor(e){this.ri=e,this.docs=(function(){return new ct(_e.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),o=i?i.size:0,l=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return J.resolve(r?r.document.mutableCopy():Zt.newInvalidDocument(t))}getEntries(e,t){let r=vi();return t.forEach((i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Zt.newInvalidDocument(i))})),J.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=vi();const l=t.path,c=new _e(l.child("__id-9223372036854775808__")),h=this.docs.getIteratorFrom(c);for(;h.hasNext();){const{key:p,value:{document:g}}=h.getNext();if(!l.isPrefixOf(p.path))break;p.path.length>l.length+1||yN(mN(g),r)<=0||(i.has(g.key)||Ud(t,g))&&(o=o.insert(g.key,g.mutableCopy()))}return J.resolve(o)}getAllFromCollectionGroup(e,t,r,i){Te(9500)}ii(e,t){return J.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new WD(this)}getSize(e){return J.resolve(this.size)}}class WD extends VD{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,i)=>{i.isValidDocument()?t.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)})),J.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qD{constructor(e){this.persistence=e,this.si=new Io((t=>wm(t)),Em),this.lastRemoteSnapshotVersion=ke.min(),this.highestTargetId=0,this.oi=0,this._i=new km,this.targetCount=0,this.ai=Fa.ur()}forEachTarget(e,t){return this.si.forEach(((r,i)=>t(i))),J.resolve()}getLastRemoteSnapshotVersion(e){return J.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return J.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),J.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),J.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Fa(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,J.resolve()}updateTargetData(e,t){return this.Pr(t),J.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,J.resolve()}removeTargets(e,t,r){let i=0;const o=[];return this.si.forEach(((l,c)=>{c.sequenceNumber<=t&&r.get(c.targetId)===null&&(this.si.delete(l),o.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)})),J.waitFor(o).next((()=>i))}getTargetCount(e){return J.resolve(this.targetCount)}getTargetData(e,t){const r=this.si.get(t)||null;return J.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),J.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);const i=this.persistence.referenceDelegate,o=[];return i&&t.forEach((l=>{o.push(i.markPotentiallyOrphaned(e,l))})),J.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),J.resolve()}getMatchingKeysForTargetId(e,t){const r=this._i.Hr(t);return J.resolve(r)}containsKey(e,t){return J.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bb{constructor(e,t){this.ui={},this.overlays={},this.ci=new Md(0),this.li=!1,this.li=!0,this.hi=new BD,this.referenceDelegate=e(this),this.Pi=new qD(this),this.indexManager=new CD,this.remoteDocumentCache=(function(i){return new HD(i)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new AD(t),this.Ii=new UD(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new zD,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new $D(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){ce("MemoryPersistence","Starting transaction:",e);const i=new KD(this.ci.next());return this.referenceDelegate.Ei(),r(i).next((o=>this.referenceDelegate.di(i).next((()=>o)))).toPromise().then((o=>(i.raiseOnCommittedEvent(),o)))}Ai(e,t){return J.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,t))))}}class KD extends vN{constructor(e){super(),this.currentSequenceNumber=e}}class Am{constructor(e){this.persistence=e,this.Ri=new km,this.Vi=null}static mi(e){return new Am(e)}get fi(){if(this.Vi)return this.Vi;throw Te(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),J.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),J.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),J.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((i=>this.fi.add(i.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((i=>{i.forEach((o=>this.fi.add(o.toString())))})).next((()=>r.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return J.forEach(this.fi,(r=>{const i=_e.fromPath(r);return this.gi(e,i).next((o=>{o||t.removeEntry(i,ke.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return J.or([()=>J.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class ld{constructor(e,t){this.persistence=e,this.pi=new Io((r=>xN(r.path)),((r,i)=>r.isEqual(i))),this.garbageCollector=LD(this,t)}static mi(e,t){return new ld(e,t)}Ei(){}di(e){return J.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((i=>r+i))))}wr(e){let t=0;return this.pr(e,(r=>{t++})).next((()=>t))}pr(e,t){return J.forEach(this.pi,((r,i)=>this.br(e,r,i).next((o=>o?J.resolve():t(i)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ii(e,(l=>this.br(e,l,t).next((c=>{c||(r++,o.removeEntry(l,ke.min()))})))).next((()=>o.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),J.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),J.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),J.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),J.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Fh(e.data.value)),t}br(e,t,r){return J.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.pi.get(t);return J.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rm{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=i}static As(e,t){let r=Le(),i=Le();for(const o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new Rm(e,t.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GD{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QD{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return z1()?8:wN(tn())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,i){const o={result:null};return this.ys(e,t).next((l=>{o.result=l})).next((()=>{if(!o.result)return this.ws(e,t,i,r).next((l=>{o.result=l}))})).next((()=>{if(o.result)return;const l=new GD;return this.Ss(e,t,l).next((c=>{if(o.result=c,this.Vs)return this.bs(e,t,l,c.size)}))})).next((()=>o.result))}bs(e,t,r,i){return r.documentReadCount<this.fs?(va()<=Oe.DEBUG&&ce("QueryEngine","SDK will not create cache indexes for query:",wa(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),J.resolve()):(va()<=Oe.DEBUG&&ce("QueryEngine","Query:",wa(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(va()<=Oe.DEBUG&&ce("QueryEngine","The SDK decides to create cache indexes for query:",wa(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Mr(t))):J.resolve())}ys(e,t){if(z0(t))return J.resolve(null);let r=Mr(t);return this.indexManager.getIndexType(e,r).next((i=>i===0?null:(t.limit!==null&&i===1&&(t=Sg(t,null,"F"),r=Mr(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((o=>{const l=Le(...o);return this.ps.getDocuments(e,l).next((c=>this.indexManager.getMinOffset(e,r).next((h=>{const p=this.Ds(t,c);return this.Cs(t,p,l,h.readTime)?this.ys(e,Sg(t,null,"F")):this.vs(e,p,t,h)}))))})))))}ws(e,t,r,i){return z0(t)||i.isEqual(ke.min())?J.resolve(null):this.ps.getDocuments(e,r).next((o=>{const l=this.Ds(t,o);return this.Cs(t,l,r,i)?J.resolve(null):(va()<=Oe.DEBUG&&ce("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),wa(t)),this.vs(e,l,t,gN(i,vc)).next((c=>c)))}))}Ds(e,t){let r=new Pt(tb(e));return t.forEach(((i,o)=>{Ud(e,o)&&(r=r.add(o))})),r}Cs(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Ss(e,t,r){return va()<=Oe.DEBUG&&ce("QueryEngine","Using full collection scan to execute query:",wa(t)),this.ps.getDocumentsMatchingQuery(e,t,fs.min(),r)}vs(e,t,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next((o=>(t.forEach((l=>{o=o.insert(l.key,l)})),o)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cm="LocalStore",YD=3e8;class XD{constructor(e,t,r,i){this.persistence=e,this.Fs=t,this.serializer=i,this.Ms=new ct(Me),this.xs=new Io((o=>wm(o)),Em),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new jD(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function JD(n,e,t,r){return new XD(n,e,t,r)}async function Ib(n,e){const t=Pe(n);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next((o=>(i=o,t.Bs(e),t.mutationQueue.getAllMutationBatches(r)))).next((o=>{const l=[],c=[];let h=Le();for(const p of i){l.push(p.batchId);for(const g of p.mutations)h=h.add(g.key)}for(const p of o){c.push(p.batchId);for(const g of p.mutations)h=h.add(g.key)}return t.localDocuments.getDocuments(r,h).next((p=>({Ls:p,removedBatchIds:l,addedBatchIds:c})))}))}))}function ZD(n,e){const t=Pe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const i=e.batch.keys(),o=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(c,h,p,g){const v=p.batch,w=v.keys();let T=J.resolve();return w.forEach((R=>{T=T.next((()=>g.getEntry(h,R))).next((P=>{const A=p.docVersions.get(R);qe(A!==null,48541),P.version.compareTo(A)<0&&(v.applyToRemoteDocument(P,p),P.isValidDocument()&&(P.setReadTime(p.commitVersion),g.addEntry(P)))}))})),T.next((()=>c.mutationQueue.removeMutationBatch(h,v)))})(t,r,e,o).next((()=>o.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(c){let h=Le();for(let p=0;p<c.mutationResults.length;++p)c.mutationResults[p].transformResults.length>0&&(h=h.add(c.batch.mutations[p].key));return h})(e)))).next((()=>t.localDocuments.getDocuments(r,i)))}))}function Sb(n){const e=Pe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function eO(n,e){const t=Pe(n),r=e.snapshotVersion;let i=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(o=>{const l=t.Ns.newChangeBuffer({trackRemovals:!0});i=t.Ms;const c=[];e.targetChanges.forEach(((g,v)=>{const w=i.get(v);if(!w)return;c.push(t.Pi.removeMatchingKeys(o,g.removedDocuments,v).next((()=>t.Pi.addMatchingKeys(o,g.addedDocuments,v))));let T=w.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(v)!==null?T=T.withResumeToken(Ht.EMPTY_BYTE_STRING,ke.min()).withLastLimboFreeSnapshotVersion(ke.min()):g.resumeToken.approximateByteSize()>0&&(T=T.withResumeToken(g.resumeToken,r)),i=i.insert(v,T),(function(P,A,F){return P.resumeToken.approximateByteSize()===0||A.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=YD?!0:F.addedDocuments.size+F.modifiedDocuments.size+F.removedDocuments.size>0})(w,T,g)&&c.push(t.Pi.updateTargetData(o,T))}));let h=vi(),p=Le();if(e.documentUpdates.forEach((g=>{e.resolvedLimboDocuments.has(g)&&c.push(t.persistence.referenceDelegate.updateLimboDocument(o,g))})),c.push(tO(o,l,e.documentUpdates).next((g=>{h=g.ks,p=g.qs}))),!r.isEqual(ke.min())){const g=t.Pi.getLastRemoteSnapshotVersion(o).next((v=>t.Pi.setTargetsMetadata(o,o.currentSequenceNumber,r)));c.push(g)}return J.waitFor(c).next((()=>l.apply(o))).next((()=>t.localDocuments.getLocalViewOfDocuments(o,h,p))).next((()=>h))})).then((o=>(t.Ms=i,o)))}function tO(n,e,t){let r=Le(),i=Le();return t.forEach((o=>r=r.add(o))),e.getEntries(n,r).next((o=>{let l=vi();return t.forEach(((c,h)=>{const p=o.get(c);h.isFoundDocument()!==p.isFoundDocument()&&(i=i.add(c)),h.isNoDocument()&&h.version.isEqual(ke.min())?(e.removeEntry(c,h.readTime),l=l.insert(c,h)):!p.isValidDocument()||h.version.compareTo(p.version)>0||h.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(h),l=l.insert(c,h)):ce(Cm,"Ignoring outdated watch update for ",c,". Current version:",p.version," Watch version:",h.version)})),{ks:l,qs:i}}))}function nO(n,e){const t=Pe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=ym),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function rO(n,e){const t=Pe(n);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let i;return t.Pi.getTargetData(r,e).next((o=>o?(i=o,J.resolve(i)):t.Pi.allocateTargetId(r).next((l=>(i=new is(e,l,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,i).next((()=>i)))))))})).then((r=>{const i=t.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r}))}async function Pg(n,e,t){const r=Pe(n),i=r.Ms.get(e),o=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",o,(l=>r.persistence.referenceDelegate.removeTarget(l,i)))}catch(l){if(!Wa(l))throw l;ce(Cm,`Failed to update sequence numbers for target ${e}: ${l}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function ew(n,e,t){const r=Pe(n);let i=ke.min(),o=Le();return r.persistence.runTransaction("Execute query","readwrite",(l=>(function(h,p,g){const v=Pe(h),w=v.xs.get(g);return w!==void 0?J.resolve(v.Ms.get(w)):v.Pi.getTargetData(p,g)})(r,l,Mr(e)).next((c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(l,c.targetId).next((h=>{o=h}))})).next((()=>r.Fs.getDocumentsMatchingQuery(l,e,t?i:ke.min(),t?o:Le()))).next((c=>(iO(r,BN(e),c),{documents:c,Qs:o})))))}function iO(n,e,t){let r=n.Os.get(e)||ke.min();t.forEach(((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)})),n.Os.set(e,r)}class tw{constructor(){this.activeTargetIds=GN()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class sO{constructor(){this.Mo=new tw,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new tw,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oO{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nw="ConnectivityMonitor";class rw{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ce(nw,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ce(nw,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mh=null;function Ng(){return mh===null?mh=(function(){return 268435456+Math.round(2147483648*Math.random())})():mh++,"0x"+mh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $p="RestConnection",aO={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class lO{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===nd?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,t,r,i,o){const l=Ng(),c=this.zo(e,t.toUriEncodedString());ce($p,`Sending RPC '${e}' ${l}:`,c,r);const h={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(h,i,o);const{host:p}=new URL(c),g=wo(p);return this.Jo(e,c,h,r,g).then((v=>(ce($p,`Received RPC '${e}' ${l}: `,v),v)),(v=>{throw Oa($p,`RPC '${e}' ${l} failed with error: `,v,"url: ",c,"request:",r),v}))}Ho(e,t,r,i,o,l){return this.Go(e,t,r,i,o)}jo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+$a})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((i,o)=>e[o]=i)),r&&r.headers.forEach(((i,o)=>e[o]=i))}zo(e,t){const r=aO[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cO{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yt="WebChannelConnection";class uO extends lO{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,i,o){const l=Ng();return new Promise(((c,h)=>{const p=new CT;p.setWithCredentials(!0),p.listenOnce(PT.COMPLETE,(()=>{try{switch(p.getLastErrorCode()){case Vh.NO_ERROR:const v=p.getResponseJson();ce(Yt,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(v)),c(v);break;case Vh.TIMEOUT:ce(Yt,`RPC '${e}' ${l} timed out`),h(new pe(te.DEADLINE_EXCEEDED,"Request time out"));break;case Vh.HTTP_ERROR:const w=p.getStatus();if(ce(Yt,`RPC '${e}' ${l} failed with status:`,w,"response text:",p.getResponseText()),w>0){let T=p.getResponseJson();Array.isArray(T)&&(T=T[0]);const R=T?.error;if(R&&R.status&&R.message){const P=(function(F){const z=F.toLowerCase().replace(/_/g,"-");return Object.values(te).indexOf(z)>=0?z:te.UNKNOWN})(R.status);h(new pe(P,R.message))}else h(new pe(te.UNKNOWN,"Server responded with status "+p.getStatus()))}else h(new pe(te.UNAVAILABLE,"Connection failed."));break;default:Te(9055,{l_:e,streamId:l,h_:p.getLastErrorCode(),P_:p.getLastError()})}}finally{ce(Yt,`RPC '${e}' ${l} completed.`)}}));const g=JSON.stringify(i);ce(Yt,`RPC '${e}' ${l} sending request:`,i),p.send(t,"POST",g,r,15)}))}T_(e,t,r){const i=Ng(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=OT(),c=DT(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(h.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(h.useFetchStreams=!0),this.jo(h.initMessageHeaders,t,r),h.encodeInitMessageHeaders=!0;const g=o.join("");ce(Yt,`Creating RPC '${e}' stream ${i}: ${g}`,h);const v=l.createWebChannel(g,h);this.I_(v);let w=!1,T=!1;const R=new cO({Yo:A=>{T?ce(Yt,`Not sending because RPC '${e}' stream ${i} is closed:`,A):(w||(ce(Yt,`Opening RPC '${e}' stream ${i} transport.`),v.open(),w=!0),ce(Yt,`RPC '${e}' stream ${i} sending:`,A),v.send(A))},Zo:()=>v.close()}),P=(A,F,z)=>{A.listen(F,(H=>{try{z(H)}catch(K){setTimeout((()=>{throw K}),0)}}))};return P(v,Zl.EventType.OPEN,(()=>{T||(ce(Yt,`RPC '${e}' stream ${i} transport opened.`),R.o_())})),P(v,Zl.EventType.CLOSE,(()=>{T||(T=!0,ce(Yt,`RPC '${e}' stream ${i} transport closed`),R.a_(),this.E_(v))})),P(v,Zl.EventType.ERROR,(A=>{T||(T=!0,Oa(Yt,`RPC '${e}' stream ${i} transport errored. Name:`,A.name,"Message:",A.message),R.a_(new pe(te.UNAVAILABLE,"The operation could not be completed")))})),P(v,Zl.EventType.MESSAGE,(A=>{if(!T){const F=A.data[0];qe(!!F,16349);const z=F,H=z?.error||z[0]?.error;if(H){ce(Yt,`RPC '${e}' stream ${i} received error:`,H);const K=H.status;let Q=(function(b){const N=xt[b];if(N!==void 0)return fb(N)})(K),Y=H.message;Q===void 0&&(Q=te.INTERNAL,Y="Unknown error status: "+K+" with message "+H.message),T=!0,R.a_(new pe(Q,Y)),v.close()}else ce(Yt,`RPC '${e}' stream ${i} received:`,F),R.u_(F)}})),P(c,NT.STAT_EVENT,(A=>{A.stat===wg.PROXY?ce(Yt,`RPC '${e}' stream ${i} detected buffering proxy`):A.stat===wg.NOPROXY&&ce(Yt,`RPC '${e}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{R.__()}),0),R}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function Hp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hd(n){return new pD(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kb{constructor(e,t,r=1e3,i=1.5,o=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=i,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,t-r);i>0&&ce("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iw="PersistentStream";class Ab{constructor(e,t,r,i,o,l,c,h){this.Mi=e,this.S_=r,this.b_=i,this.connection=o,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=c,this.listener=h,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new kb(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===te.RESOURCE_EXHAUSTED?(_i(t.toString()),_i("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===te.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,i])=>{this.D_===t&&this.G_(r,i)}),(r=>{e((()=>{const i=new pe(te.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)}))}))}G_(e,t){const r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((i=>{r((()=>this.z_(i)))})),this.stream.onMessage((i=>{r((()=>++this.F_==1?this.J_(i):this.onNext(i)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ce(iw,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(ce(iw,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class hO extends Ab{constructor(e,t,r,i,o,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,l),this.serializer=o}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=yD(this.serializer,e),r=(function(o){if(!("targetChange"in o))return ke.min();const l=o.targetChange;return l.targetIds&&l.targetIds.length?ke.min():l.readTime?Lr(l.readTime):ke.min()})(e);return this.listener.H_(t,r)}Y_(e){const t={};t.database=Cg(this.serializer),t.addTarget=(function(o,l){let c;const h=l.target;if(c=Ig(h)?{documents:wD(o,h)}:{query:ED(o,h).ft},c.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){c.resumeToken=mb(o,l.resumeToken);const p=kg(o,l.expectedCount);p!==null&&(c.expectedCount=p)}else if(l.snapshotVersion.compareTo(ke.min())>0){c.readTime=ad(o,l.snapshotVersion.toTimestamp());const p=kg(o,l.expectedCount);p!==null&&(c.expectedCount=p)}return c})(this.serializer,e);const r=TD(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){const t={};t.database=Cg(this.serializer),t.removeTarget=e,this.q_(t)}}class dO extends Ab{constructor(e,t,r,i,o,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,l),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return qe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,qe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){qe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=vD(e.writeResults,e.commitTime),r=Lr(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=Cg(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>_D(this.serializer,r)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fO{}class pO extends fO{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new pe(te.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,l])=>this.connection.Go(e,Ag(t,r),i,o,l))).catch((o=>{throw o.name==="FirebaseError"?(o.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new pe(te.UNKNOWN,o.toString())}))}Ho(e,t,r,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Ho(e,Ag(t,r),i,l,c,o))).catch((l=>{throw l.name==="FirebaseError"?(l.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new pe(te.UNKNOWN,l.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class gO{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(_i(t),this.aa=!1):ce("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const go="RemoteStore";class mO{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo((l=>{r.enqueueAndForget((async()=>{ko(this)&&(ce(go,"Restarting streams for network reachability change."),await(async function(h){const p=Pe(h);p.Ea.add(4),await $c(p),p.Ra.set("Unknown"),p.Ea.delete(4),await Wd(p)})(this))}))})),this.Ra=new gO(r,i)}}async function Wd(n){if(ko(n))for(const e of n.da)await e(!0)}async function $c(n){for(const e of n.da)await e(!1)}function Rb(n,e){const t=Pe(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Om(t)?Dm(t):qa(t).O_()&&Nm(t,e))}function Pm(n,e){const t=Pe(n),r=qa(t);t.Ia.delete(e),r.O_()&&Cb(t,e),t.Ia.size===0&&(r.O_()?r.L_():ko(t)&&t.Ra.set("Unknown"))}function Nm(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ke.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}qa(n).Y_(e)}function Cb(n,e){n.Va.Ue(e),qa(n).Z_(e)}function Dm(n){n.Va=new uD({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),qa(n).start(),n.Ra.ua()}function Om(n){return ko(n)&&!qa(n).x_()&&n.Ia.size>0}function ko(n){return Pe(n).Ea.size===0}function Pb(n){n.Va=void 0}async function yO(n){n.Ra.set("Online")}async function _O(n){n.Ia.forEach(((e,t)=>{Nm(n,e)}))}async function vO(n,e){Pb(n),Om(n)?(n.Ra.ha(e),Dm(n)):n.Ra.set("Unknown")}async function wO(n,e,t){if(n.Ra.set("Online"),e instanceof gb&&e.state===2&&e.cause)try{await(async function(i,o){const l=o.cause;for(const c of o.targetIds)i.Ia.has(c)&&(await i.remoteSyncer.rejectListen(c,l),i.Ia.delete(c),i.Va.removeTarget(c))})(n,e)}catch(r){ce(go,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await cd(n,r)}else if(e instanceof zh?n.Va.Ze(e):e instanceof pb?n.Va.st(e):n.Va.tt(e),!t.isEqual(ke.min()))try{const r=await Sb(n.localStore);t.compareTo(r)>=0&&await(function(o,l){const c=o.Va.Tt(l);return c.targetChanges.forEach(((h,p)=>{if(h.resumeToken.approximateByteSize()>0){const g=o.Ia.get(p);g&&o.Ia.set(p,g.withResumeToken(h.resumeToken,l))}})),c.targetMismatches.forEach(((h,p)=>{const g=o.Ia.get(h);if(!g)return;o.Ia.set(h,g.withResumeToken(Ht.EMPTY_BYTE_STRING,g.snapshotVersion)),Cb(o,h);const v=new is(g.target,h,p,g.sequenceNumber);Nm(o,v)})),o.remoteSyncer.applyRemoteEvent(c)})(n,t)}catch(r){ce(go,"Failed to raise snapshot:",r),await cd(n,r)}}async function cd(n,e,t){if(!Wa(e))throw e;n.Ea.add(1),await $c(n),n.Ra.set("Offline"),t||(t=()=>Sb(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{ce(go,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await Wd(n)}))}function Nb(n,e){return e().catch((t=>cd(n,t,e)))}async function qd(n){const e=Pe(n),t=ys(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:ym;for(;EO(e);)try{const i=await nO(e.localStore,r);if(i===null){e.Ta.length===0&&t.L_();break}r=i.batchId,xO(e,i)}catch(i){await cd(e,i)}Db(e)&&Ob(e)}function EO(n){return ko(n)&&n.Ta.length<10}function xO(n,e){n.Ta.push(e);const t=ys(n);t.O_()&&t.X_&&t.ea(e.mutations)}function Db(n){return ko(n)&&!ys(n).x_()&&n.Ta.length>0}function Ob(n){ys(n).start()}async function TO(n){ys(n).ra()}async function bO(n){const e=ys(n);for(const t of n.Ta)e.ea(t.mutations)}async function IO(n,e,t){const r=n.Ta.shift(),i=bm.from(r,e,t);await Nb(n,(()=>n.remoteSyncer.applySuccessfulWrite(i))),await qd(n)}async function SO(n,e){e&&ys(n).X_&&await(async function(r,i){if((function(l){return aD(l)&&l!==te.ABORTED})(i.code)){const o=r.Ta.shift();ys(r).B_(),await Nb(r,(()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i))),await qd(r)}})(n,e),Db(n)&&Ob(n)}async function sw(n,e){const t=Pe(n);t.asyncQueue.verifyOperationInProgress(),ce(go,"RemoteStore received new credentials");const r=ko(t);t.Ea.add(3),await $c(t),r&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Wd(t)}async function kO(n,e){const t=Pe(n);e?(t.Ea.delete(2),await Wd(t)):e||(t.Ea.add(2),await $c(t),t.Ra.set("Unknown"))}function qa(n){return n.ma||(n.ma=(function(t,r,i){const o=Pe(t);return o.sa(),new hO(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(n.datastore,n.asyncQueue,{Xo:yO.bind(null,n),t_:_O.bind(null,n),r_:vO.bind(null,n),H_:wO.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),Om(n)?Dm(n):n.Ra.set("Unknown")):(await n.ma.stop(),Pb(n))}))),n.ma}function ys(n){return n.fa||(n.fa=(function(t,r,i){const o=Pe(t);return o.sa(),new dO(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:TO.bind(null,n),r_:SO.bind(null,n),ta:bO.bind(null,n),na:IO.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await qd(n)):(await n.fa.stop(),n.Ta.length>0&&(ce(go,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mm{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new io,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((l=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){const l=Date.now()+r,c=new Mm(e,t,l,i,o);return c.start(r),c}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new pe(te.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Lm(n,e){if(_i("AsyncQueue",`${e}: ${n}`),Wa(n))return new pe(te.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ra{static emptySet(e){return new Ra(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||_e.comparator(t.key,r.key):(t,r)=>_e.comparator(t.key,r.key),this.keyedMap=ec(),this.sortedSet=new ct(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ra)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Ra;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ow{constructor(){this.ga=new ct(_e.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Te(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,r)=>{e.push(r)})),e}}class ja{constructor(e,t,r,i,o,l,c,h,p){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=l,this.syncStateChanged=c,this.excludesMetadataChanges=h,this.hasCachedResults=p}static fromInitialDocuments(e,t,r,i,o){const l=[];return t.forEach((c=>{l.push({type:0,doc:c})})),new ja(e,t,Ra.emptySet(t),l,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&jd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AO{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class RO{constructor(){this.queries=aw(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const i=Pe(t),o=i.queries;i.queries=aw(),o.forEach(((l,c)=>{for(const h of c.Sa)h.onError(r)}))})(this,new pe(te.ABORTED,"Firestore shutting down"))}}function aw(){return new Io((n=>eb(n)),jd)}async function CO(n,e){const t=Pe(n);let r=3;const i=e.query;let o=t.queries.get(i);o?!o.ba()&&e.Da()&&(r=2):(o=new AO,r=e.Da()?0:1);try{switch(r){case 0:o.wa=await t.onListen(i,!0);break;case 1:o.wa=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(l){const c=Lm(l,`Initialization of query '${wa(e.query)}' failed`);return void e.onError(c)}t.queries.set(i,o),o.Sa.push(e),e.va(t.onlineState),o.wa&&e.Fa(o.wa)&&Vm(t)}async function PO(n,e){const t=Pe(n),r=e.query;let i=3;const o=t.queries.get(r);if(o){const l=o.Sa.indexOf(e);l>=0&&(o.Sa.splice(l,1),o.Sa.length===0?i=e.Da()?0:1:!o.ba()&&e.Da()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function NO(n,e){const t=Pe(n);let r=!1;for(const i of e){const o=i.query,l=t.queries.get(o);if(l){for(const c of l.Sa)c.Fa(i)&&(r=!0);l.wa=i}}r&&Vm(t)}function DO(n,e,t){const r=Pe(n),i=r.queries.get(e);if(i)for(const o of i.Sa)o.onError(t);r.queries.delete(e)}function Vm(n){n.Ca.forEach((e=>{e.next()}))}var Dg,lw;(lw=Dg||(Dg={})).Ma="default",lw.Cache="cache";class OO{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new ja(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=ja.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Dg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mb{constructor(e){this.key=e}}class Lb{constructor(e){this.key=e}}class MO{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Le(),this.mutatedKeys=Le(),this.eu=tb(e),this.tu=new Ra(this.eu)}get nu(){return this.Ya}ru(e,t){const r=t?t.iu:new ow,i=t?t.tu:this.tu;let o=t?t.mutatedKeys:this.mutatedKeys,l=i,c=!1;const h=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,p=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((g,v)=>{const w=i.get(g),T=Ud(this.query,v)?v:null,R=!!w&&this.mutatedKeys.has(w.key),P=!!T&&(T.hasLocalMutations||this.mutatedKeys.has(T.key)&&T.hasCommittedMutations);let A=!1;w&&T?w.data.isEqual(T.data)?R!==P&&(r.track({type:3,doc:T}),A=!0):this.su(w,T)||(r.track({type:2,doc:T}),A=!0,(h&&this.eu(T,h)>0||p&&this.eu(T,p)<0)&&(c=!0)):!w&&T?(r.track({type:0,doc:T}),A=!0):w&&!T&&(r.track({type:1,doc:w}),A=!0,(h||p)&&(c=!0)),A&&(T?(l=l.add(T),o=P?o.add(g):o.delete(g)):(l=l.delete(g),o=o.delete(g)))})),this.query.limit!==null)for(;l.size>this.query.limit;){const g=this.query.limitType==="F"?l.last():l.first();l=l.delete(g.key),o=o.delete(g.key),r.track({type:1,doc:g})}return{tu:l,iu:r,Cs:c,mutatedKeys:o}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const l=e.iu.ya();l.sort(((g,v)=>(function(T,R){const P=A=>{switch(A){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Te(20277,{Rt:A})}};return P(T)-P(R)})(g.type,v.type)||this.eu(g.doc,v.doc))),this.ou(r),i=i??!1;const c=t&&!i?this._u():[],h=this.Xa.size===0&&this.current&&!i?1:0,p=h!==this.Za;return this.Za=h,l.length!==0||p?{snapshot:new ja(this.query,e.tu,o,l,e.mutatedKeys,h===0,p,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:c}:{au:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new ow,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Le(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const t=[];return e.forEach((r=>{this.Xa.has(r)||t.push(new Lb(r))})),this.Xa.forEach((r=>{e.has(r)||t.push(new Mb(r))})),t}cu(e){this.Ya=e.Qs,this.Xa=Le();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return ja.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Fm="SyncEngine";class LO{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class VO{constructor(e){this.key=e,this.hu=!1}}class FO{constructor(e,t,r,i,o,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=l,this.Pu={},this.Tu=new Io((c=>eb(c)),jd),this.Iu=new Map,this.Eu=new Set,this.du=new ct(_e.comparator),this.Au=new Map,this.Ru=new km,this.Vu={},this.mu=new Map,this.fu=Fa.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function jO(n,e,t=!0){const r=Bb(n);let i;const o=r.Tu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.lu()):i=await Vb(r,e,t,!0),i}async function UO(n,e){const t=Bb(n);await Vb(t,e,!0,!1)}async function Vb(n,e,t,r){const i=await rO(n.localStore,Mr(e)),o=i.targetId,l=n.sharedClientState.addLocalQueryTarget(o,t);let c;return r&&(c=await zO(n,e,o,l==="current",i.resumeToken)),n.isPrimaryClient&&t&&Rb(n.remoteStore,i),c}async function zO(n,e,t,r,i){n.pu=(v,w,T)=>(async function(P,A,F,z){let H=A.view.ru(F);H.Cs&&(H=await ew(P.localStore,A.query,!1).then((({documents:D})=>A.view.ru(D,H))));const K=z&&z.targetChanges.get(A.targetId),Q=z&&z.targetMismatches.get(A.targetId)!=null,Y=A.view.applyChanges(H,P.isPrimaryClient,K,Q);return uw(P,A.targetId,Y.au),Y.snapshot})(n,v,w,T);const o=await ew(n.localStore,e,!0),l=new MO(e,o.Qs),c=l.ru(o.documents),h=Bc.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),p=l.applyChanges(c,n.isPrimaryClient,h);uw(n,t,p.au);const g=new LO(e,t,l);return n.Tu.set(e,g),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),p.snapshot}async function BO(n,e,t){const r=Pe(n),i=r.Tu.get(e),o=r.Iu.get(i.targetId);if(o.length>1)return r.Iu.set(i.targetId,o.filter((l=>!jd(l,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Pg(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),t&&Pm(r.remoteStore,i.targetId),Og(r,i.targetId)})).catch(Ha)):(Og(r,i.targetId),await Pg(r.localStore,i.targetId,!0))}async function $O(n,e){const t=Pe(n),r=t.Tu.get(e),i=t.Iu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Pm(t.remoteStore,r.targetId))}async function HO(n,e,t){const r=XO(n);try{const i=await(function(l,c){const h=Pe(l),p=it.now(),g=c.reduce(((T,R)=>T.add(R.key)),Le());let v,w;return h.persistence.runTransaction("Locally write mutations","readwrite",(T=>{let R=vi(),P=Le();return h.Ns.getEntries(T,g).next((A=>{R=A,R.forEach(((F,z)=>{z.isValidDocument()||(P=P.add(F))}))})).next((()=>h.localDocuments.getOverlayedDocuments(T,R))).next((A=>{v=A;const F=[];for(const z of c){const H=nD(z,v.get(z.key).overlayedDocument);H!=null&&F.push(new So(z.key,H,KT(H.value.mapValue),pi.exists(!0)))}return h.mutationQueue.addMutationBatch(T,p,F,c)})).next((A=>{w=A;const F=A.applyToLocalDocumentSet(v,P);return h.documentOverlayCache.saveOverlays(T,A.batchId,F)}))})).then((()=>({batchId:w.batchId,changes:rb(v)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(l,c,h){let p=l.Vu[l.currentUser.toKey()];p||(p=new ct(Me)),p=p.insert(c,h),l.Vu[l.currentUser.toKey()]=p})(r,i.batchId,t),await Hc(r,i.changes),await qd(r.remoteStore)}catch(i){const o=Lm(i,"Failed to persist write");t.reject(o)}}async function Fb(n,e){const t=Pe(n);try{const r=await eO(t.localStore,e);e.targetChanges.forEach(((i,o)=>{const l=t.Au.get(o);l&&(qe(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?l.hu=!0:i.modifiedDocuments.size>0?qe(l.hu,14607):i.removedDocuments.size>0&&(qe(l.hu,42227),l.hu=!1))})),await Hc(t,r,e)}catch(r){await Ha(r)}}function cw(n,e,t){const r=Pe(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const i=[];r.Tu.forEach(((o,l)=>{const c=l.view.va(e);c.snapshot&&i.push(c.snapshot)})),(function(l,c){const h=Pe(l);h.onlineState=c;let p=!1;h.queries.forEach(((g,v)=>{for(const w of v.Sa)w.va(c)&&(p=!0)})),p&&Vm(h)})(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function WO(n,e,t){const r=Pe(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Au.get(e),o=i&&i.key;if(o){let l=new ct(_e.comparator);l=l.insert(o,Zt.newNoDocument(o,ke.min()));const c=Le().add(o),h=new $d(ke.min(),new Map,new ct(Me),l,c);await Fb(r,h),r.du=r.du.remove(o),r.Au.delete(e),jm(r)}else await Pg(r.localStore,e,!1).then((()=>Og(r,e,t))).catch(Ha)}async function qO(n,e){const t=Pe(n),r=e.batch.batchId;try{const i=await ZD(t.localStore,e);Ub(t,r,null),jb(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Hc(t,i)}catch(i){await Ha(i)}}async function KO(n,e,t){const r=Pe(n);try{const i=await(function(l,c){const h=Pe(l);return h.persistence.runTransaction("Reject batch","readwrite-primary",(p=>{let g;return h.mutationQueue.lookupMutationBatch(p,c).next((v=>(qe(v!==null,37113),g=v.keys(),h.mutationQueue.removeMutationBatch(p,v)))).next((()=>h.mutationQueue.performConsistencyCheck(p))).next((()=>h.documentOverlayCache.removeOverlaysForBatchId(p,g,c))).next((()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,g))).next((()=>h.localDocuments.getDocuments(p,g)))}))})(r.localStore,e);Ub(r,e,t),jb(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Hc(r,i)}catch(i){await Ha(i)}}function jb(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function Ub(n,e,t){const r=Pe(n);let i=r.Vu[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function Og(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((r=>{n.Ru.containsKey(r)||zb(n,r)}))}function zb(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(Pm(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),jm(n))}function uw(n,e,t){for(const r of t)r instanceof Mb?(n.Ru.addReference(r.key,e),GO(n,r)):r instanceof Lb?(ce(Fm,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,e),n.Ru.containsKey(r.key)||zb(n,r.key)):Te(19791,{wu:r})}function GO(n,e){const t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Eu.has(r)||(ce(Fm,"New document in limbo: "+t),n.Eu.add(r),jm(n))}function jm(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new _e(lt.fromString(e)),r=n.fu.next();n.Au.set(r,new VO(t)),n.du=n.du.insert(t,r),Rb(n.remoteStore,new is(Mr(xm(t.path)),r,"TargetPurposeLimboResolution",Md.ce))}}async function Hc(n,e,t){const r=Pe(n),i=[],o=[],l=[];r.Tu.isEmpty()||(r.Tu.forEach(((c,h)=>{l.push(r.pu(h,e,t).then((p=>{if((p||t)&&r.isPrimaryClient){const g=p?!p.fromCache:t?.targetChanges.get(h.targetId)?.current;r.sharedClientState.updateQueryState(h.targetId,g?"current":"not-current")}if(p){i.push(p);const g=Rm.As(h.targetId,p);o.push(g)}})))})),await Promise.all(l),r.Pu.H_(i),await(async function(h,p){const g=Pe(h);try{await g.persistence.runTransaction("notifyLocalViewChanges","readwrite",(v=>J.forEach(p,(w=>J.forEach(w.Es,(T=>g.persistence.referenceDelegate.addReference(v,w.targetId,T))).next((()=>J.forEach(w.ds,(T=>g.persistence.referenceDelegate.removeReference(v,w.targetId,T)))))))))}catch(v){if(!Wa(v))throw v;ce(Cm,"Failed to update sequence numbers: "+v)}for(const v of p){const w=v.targetId;if(!v.fromCache){const T=g.Ms.get(w),R=T.snapshotVersion,P=T.withLastLimboFreeSnapshotVersion(R);g.Ms=g.Ms.insert(w,P)}}})(r.localStore,o))}async function QO(n,e){const t=Pe(n);if(!t.currentUser.isEqual(e)){ce(Fm,"User change. New user:",e.toKey());const r=await Ib(t.localStore,e);t.currentUser=e,(function(o,l){o.mu.forEach((c=>{c.forEach((h=>{h.reject(new pe(te.CANCELLED,l))}))})),o.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Hc(t,r.Ls)}}function YO(n,e){const t=Pe(n),r=t.Au.get(e);if(r&&r.hu)return Le().add(r.key);{let i=Le();const o=t.Iu.get(e);if(!o)return i;for(const l of o){const c=t.Tu.get(l);i=i.unionWith(c.view.nu)}return i}}function Bb(n){const e=Pe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Fb.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=YO.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=WO.bind(null,e),e.Pu.H_=NO.bind(null,e.eventManager),e.Pu.yu=DO.bind(null,e.eventManager),e}function XO(n){const e=Pe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=qO.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=KO.bind(null,e),e}class ud{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Hd(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return JD(this.persistence,new QD,e.initialUser,this.serializer)}Cu(e){return new bb(Am.mi,this.serializer)}Du(e){return new sO}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}ud.provider={build:()=>new ud};class JO extends ud{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){qe(this.persistence.referenceDelegate instanceof ld,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new OD(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?gn.withCacheSize(this.cacheSizeBytes):gn.DEFAULT;return new bb((r=>ld.mi(r,t)),this.serializer)}}class Mg{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>cw(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=QO.bind(null,this.syncEngine),await kO(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new RO})()}createDatastore(e){const t=Hd(e.databaseInfo.databaseId),r=(function(o){return new uO(o)})(e.databaseInfo);return(function(o,l,c,h){return new pO(o,l,c,h)})(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,i,o,l,c){return new mO(r,i,o,l,c)})(this.localStore,this.datastore,e.asyncQueue,(t=>cw(this.syncEngine,t,0)),(function(){return rw.v()?new rw:new oO})())}createSyncEngine(e,t){return(function(i,o,l,c,h,p,g){const v=new FO(i,o,l,c,h,p);return g&&(v.gu=!0),v})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const r=Pe(t);ce(go,"RemoteStore shutting down."),r.Ea.add(5),await $c(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Mg.provider={build:()=>new Mg};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZO{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):_i("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _s="FirestoreClient";class eM{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Jt.UNAUTHENTICATED,this.clientId=gm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,(async l=>{ce(_s,"Received user=",l.uid),await this.authCredentialListener(l),this.user=l})),this.appCheckCredentials.start(r,(l=>(ce(_s,"Received new app check token=",l),this.appCheckCredentialListener(l,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new io;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=Lm(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function Wp(n,e){n.asyncQueue.verifyOperationInProgress(),ce(_s,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener((async i=>{r.isEqual(i)||(await Ib(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function hw(n,e){n.asyncQueue.verifyOperationInProgress();const t=await tM(n);ce(_s,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((r=>sw(e.remoteStore,r))),n.setAppCheckTokenChangeListener(((r,i)=>sw(e.remoteStore,i))),n._onlineComponents=e}async function tM(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ce(_s,"Using user provided OfflineComponentProvider");try{await Wp(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===te.FAILED_PRECONDITION||i.code===te.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;Oa("Error using user provided cache. Falling back to memory cache: "+t),await Wp(n,new ud)}}else ce(_s,"Using default OfflineComponentProvider"),await Wp(n,new JO(void 0));return n._offlineComponents}async function $b(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ce(_s,"Using user provided OnlineComponentProvider"),await hw(n,n._uninitializedComponentsProvider._online)):(ce(_s,"Using default OnlineComponentProvider"),await hw(n,new Mg))),n._onlineComponents}function nM(n){return $b(n).then((e=>e.syncEngine))}async function dw(n){const e=await $b(n),t=e.eventManager;return t.onListen=jO.bind(null,e.syncEngine),t.onUnlisten=BO.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=UO.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=$O.bind(null,e.syncEngine),t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hb(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fw=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wb="firestore.googleapis.com",pw=!0;class gw{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new pe(te.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Wb,this.ssl=pw}else this.host=e.host,this.ssl=e.ssl??pw;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Tb;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<ND)throw new pe(te.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}pN("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Hb(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new pe(te.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new pe(te.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new pe(te.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Um{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new gw({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new pe(te.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new pe(te.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new gw(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new rN;switch(r.type){case"firstParty":return new aN(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new pe(te.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=fw.get(t);r&&(ce("ComponentProvider","Removing Datastore"),fw.delete(t),r.terminate())})(this),Promise.resolve()}}function rM(n,e,t,r={}){n=Aa(n,Um);const i=wo(e),o=n._getSettings(),l={...o,emulatorOptions:n._getEmulatorOptions()},c=`${e}:${t}`;i&&(ex(`https://${c}`),tx("Firestore",!0)),o.host!==Wb&&o.host!==c&&Oa("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const h={...o,host:c,ssl:i,emulatorOptions:r};if(!ao(h,l)&&(n._setSettings(h),r.mockUserToken)){let p,g;if(typeof r.mockUserToken=="string")p=r.mockUserToken,g=Jt.MOCK_USER;else{p=D1(r.mockUserToken,n._app?.options.projectId);const v=r.mockUserToken.sub||r.mockUserToken.user_id;if(!v)throw new pe(te.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new Jt(v)}n._authCredentials=new iN(new LT(p,g))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kd{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Kd(this.firestore,e,this._query)}}class Lt{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Sc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Lt(this.firestore,e,this._key)}toJSON(){return{type:Lt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Uc(t,Lt._jsonSchema))return new Lt(e,r||null,new _e(lt.fromString(t.referencePath)))}}Lt._jsonSchemaVersion="firestore/documentReference/1.0",Lt._jsonSchema={type:Tt("string",Lt._jsonSchemaVersion),referencePath:Tt("string")};class Sc extends Kd{constructor(e,t,r){super(e,t,xm(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Lt(this.firestore,null,new _e(e))}withConverter(e){return new Sc(this.firestore,e,this._path)}}function mw(n,e,...t){if(n=It(n),arguments.length===1&&(e=gm.newId()),fN("doc","path",e),n instanceof Um){const r=lt.fromString(e,...t);return A0(r),new Lt(n,null,new _e(r))}{if(!(n instanceof Lt||n instanceof Sc))throw new pe(te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(lt.fromString(e,...t));return A0(r),new Lt(n.firestore,n instanceof Sc?n.converter:null,new _e(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yw="AsyncQueue";class _w{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new kb(this,"async_queue_retry"),this._c=()=>{const r=Hp();r&&ce(yw,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=Hp();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Hp();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new io;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Wa(e))throw e;ce(yw,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,_i("INTERNAL UNHANDLED ERROR: ",vw(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const i=Mm.createAndSchedule(this,e,t,r,(o=>this.hc(o)));return this.tc.push(i),i}uc(){this.nc&&Te(47125,{Pc:vw(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function vw(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ww(n){return(function(t,r){if(typeof t!="object"||t===null)return!1;const i=t;for(const o of r)if(o in i&&typeof i[o]=="function")return!0;return!1})(n,["next","error","complete"])}class hd extends Um{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new _w,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new _w(e),this._firestoreClient=void 0,await e}}}function iM(n,e){const t=typeof n=="object"?n:cx(),r=typeof n=="string"?n:nd,i=Mc(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const o=P1("firestore");o&&rM(i,...o)}return i}function qb(n){if(n._terminated)throw new pe(te.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||sM(n),n._firestoreClient}function sM(n){const e=n._freezeSettings(),t=(function(i,o,l,c){return new IN(i,o,l,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,Hb(c.experimentalLongPollingOptions),c.useFetchStreams,c.isUsingEmulator)})(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new eM(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(i){const o=i?._online.build();return{_offline:i?._offline.build(o),_online:o}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new zn(Ht.fromBase64String(e))}catch(t){throw new pe(te.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new zn(Ht.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:zn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Uc(e,zn._jsonSchema))return zn.fromBase64String(e.bytes)}}zn._jsonSchemaVersion="firestore/bytes/1.0",zn._jsonSchema={type:Tt("string",zn._jsonSchemaVersion),bytes:Tt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zm{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new pe(te.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new $t(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bm{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vr{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new pe(te.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new pe(te.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Me(this._lat,e._lat)||Me(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Vr._jsonSchemaVersion}}static fromJSON(e){if(Uc(e,Vr._jsonSchema))return new Vr(e.latitude,e.longitude)}}Vr._jsonSchemaVersion="firestore/geoPoint/1.0",Vr._jsonSchema={type:Tt("string",Vr._jsonSchemaVersion),latitude:Tt("number"),longitude:Tt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fr{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Fr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Uc(e,Fr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Fr(e.vectorValues);throw new pe(te.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Fr._jsonSchemaVersion="firestore/vectorValue/1.0",Fr._jsonSchema={type:Tt("string",Fr._jsonSchemaVersion),vectorValues:Tt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oM=/^__.*__$/;class aM{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new So(e,this.data,this.fieldMask,t,this.fieldTransforms):new zc(e,this.data,t,this.fieldTransforms)}}function Kb(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Te(40011,{Ac:n})}}class $m{constructor(e,t,r,i,o,l){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new $m({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.gc(e),r}yc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return dd(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(Kb(this.Ac)&&oM.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class lM{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Hd(e)}Cc(e,t,r,i=!1){return new $m({Ac:e,methodName:t,Dc:r,path:$t.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function cM(n){const e=n._freezeSettings(),t=Hd(n._databaseId);return new lM(n._databaseId,!!e.ignoreUndefinedProperties,t)}function uM(n,e,t,r,i,o={}){const l=n.Cc(o.merge||o.mergeFields?2:0,e,t,i);Xb("Data must be an object, but it was:",l,r);const c=Qb(r,l);let h,p;if(o.merge)h=new or(l.fieldMask),p=l.fieldTransforms;else if(o.mergeFields){const g=[];for(const v of o.mergeFields){const w=hM(e,v,t);if(!l.contains(w))throw new pe(te.INVALID_ARGUMENT,`Field '${w}' is specified in your field mask but missing from your input data.`);fM(g,w)||g.push(w)}h=new or(g),p=l.fieldTransforms.filter((v=>h.covers(v.field)))}else h=null,p=l.fieldTransforms;return new aM(new Un(c),h,p)}class Hm extends Bm{_toFieldTransform(e){return new JN(e.path,new Tc)}isEqual(e){return e instanceof Hm}}function Gb(n,e){if(Yb(n=It(n)))return Xb("Unsupported field value:",e,n),Qb(n,e);if(n instanceof Bm)return(function(r,i){if(!Kb(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,i){const o=[];let l=0;for(const c of r){let h=Gb(c,i.wc(l));h==null&&(h={nullValue:"NULL_VALUE"}),o.push(h),l++}return{arrayValue:{values:o}}})(n,e)}return(function(r,i){if((r=It(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return QN(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=it.fromDate(r);return{timestampValue:ad(i.serializer,o)}}if(r instanceof it){const o=new it(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:ad(i.serializer,o)}}if(r instanceof Vr)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof zn)return{bytesValue:mb(i.serializer,r._byteString)};if(r instanceof Lt){const o=i.databaseId,l=r.firestore._databaseId;if(!l.isEqual(o))throw i.Sc(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Sm(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Fr)return(function(l,c){return{mapValue:{fields:{[WT]:{stringValue:qT},[rd]:{arrayValue:{values:l.toArray().map((p=>{if(typeof p!="number")throw c.Sc("VectorValues must only contain numeric values.");return Tm(c.serializer,p)}))}}}}}})(r,i);throw i.Sc(`Unsupported field value: ${mm(r)}`)})(n,e)}function Qb(n,e){const t={};return jT(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):bo(n,((r,i)=>{const o=Gb(i,e.mc(r));o!=null&&(t[r]=o)})),{mapValue:{fields:t}}}function Yb(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof it||n instanceof Vr||n instanceof zn||n instanceof Lt||n instanceof Bm||n instanceof Fr)}function Xb(n,e,t){if(!Yb(t)||!VT(t)){const r=mm(t);throw r==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+r)}}function hM(n,e,t){if((e=It(e))instanceof zm)return e._internalPath;if(typeof e=="string")return Jb(n,e);throw dd("Field path arguments must be of type string or ",n,!1,void 0,t)}const dM=new RegExp("[~\\*/\\[\\]]");function Jb(n,e,t){if(e.search(dM)>=0)throw dd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new zm(...e.split("."))._internalPath}catch{throw dd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function dd(n,e,t,r,i){const o=r&&!r.isEmpty(),l=i!==void 0;let c=`Function ${e}() called with invalid data`;t&&(c+=" (via `toFirestore()`)"),c+=". ";let h="";return(o||l)&&(h+=" (found",o&&(h+=` in field ${r}`),l&&(h+=` in document ${i}`),h+=")"),new pe(te.INVALID_ARGUMENT,c+n+h)}function fM(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zb{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Lt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new pM(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(eI("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class pM extends Zb{data(){return super.data()}}function eI(n,e){return typeof e=="string"?Jb(n,e):e instanceof zm?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gM(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new pe(te.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class mM{convertValue(e,t="none"){switch(ms(e)){case 0:return null;case 1:return e.booleanValue;case 2:return yt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(gs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Te(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return bo(e,((i,o)=>{r[i]=this.convertValue(o,t)})),r}convertVectorValue(e){const t=e.fields?.[rd].arrayValue?.values?.map((r=>yt(r.doubleValue)));return new Fr(t)}convertGeoPoint(e){return new Vr(yt(e.latitude),yt(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Vd(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(wc(e));default:return null}}convertTimestamp(e){const t=ps(e);return new it(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=lt.fromString(e);qe(xb(r),9688,{name:e});const i=new Ec(r.get(1),r.get(3)),o=new _e(r.popFirst(5));return i.isEqual(t)||_i(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yM(n,e,t){let r;return r=n?n.toFirestore(e):e,r}class nc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class so extends Zb{constructor(e,t,r,i,o,l){super(e,t,r,i,l),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Bh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(eI("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new pe(te.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=so._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}so._jsonSchemaVersion="firestore/documentSnapshot/1.0",so._jsonSchema={type:Tt("string",so._jsonSchemaVersion),bundleSource:Tt("string","DocumentSnapshot"),bundleName:Tt("string"),bundle:Tt("string")};class Bh extends so{data(e={}){return super.data(e)}}class Ca{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new nc(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new Bh(this._firestore,this._userDataWriter,r.key,r,new nc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new pe(te.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,o){if(i._snapshot.oldDocs.isEmpty()){let l=0;return i._snapshot.docChanges.map((c=>{const h=new Bh(i._firestore,i._userDataWriter,c.doc.key,c.doc,new nc(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:h,oldIndex:-1,newIndex:l++}}))}{let l=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((c=>o||c.type!==3)).map((c=>{const h=new Bh(i._firestore,i._userDataWriter,c.doc.key,c.doc,new nc(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);let p=-1,g=-1;return c.type!==0&&(p=l.indexOf(c.doc.key),l=l.delete(c.doc.key)),c.type!==1&&(l=l.add(c.doc),g=l.indexOf(c.doc.key)),{type:_M(c.type),doc:h,oldIndex:p,newIndex:g}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new pe(te.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ca._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=gm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],i=[];return this.docs.forEach((o=>{o._document!==null&&(t.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function _M(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Te(61501,{type:n})}}Ca._jsonSchemaVersion="firestore/querySnapshot/1.0",Ca._jsonSchema={type:Tt("string",Ca._jsonSchemaVersion),bundleSource:Tt("string","QuerySnapshot"),bundleName:Tt("string"),bundle:Tt("string")};class tI extends mM{constructor(e){super(),this.firestore=e}convertBytes(e){return new zn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Lt(this.firestore,null,t)}}function vM(n,e,t){n=Aa(n,Lt);const r=Aa(n.firestore,hd),i=yM(n.converter,e);return EM(r,[uM(cM(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,pi.none())])}function wM(n,...e){n=It(n);let t={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||ww(e[r])||(t=e[r++]);const i={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(ww(e[r])){const h=e[r];e[r]=h.next?.bind(h),e[r+1]=h.error?.bind(h),e[r+2]=h.complete?.bind(h)}let o,l,c;if(n instanceof Lt)l=Aa(n.firestore,hd),c=xm(n._key.path),o={next:h=>{e[r]&&e[r](xM(l,n,h))},error:e[r+1],complete:e[r+2]};else{const h=Aa(n,Kd);l=Aa(h.firestore,hd),c=h._query;const p=new tI(l);o={next:g=>{e[r]&&e[r](new Ca(l,p,h,g))},error:e[r+1],complete:e[r+2]},gM(n._query)}return(function(p,g,v,w){const T=new ZO(w),R=new OO(g,T,v);return p.asyncQueue.enqueueAndForget((async()=>CO(await dw(p),R))),()=>{T.Nu(),p.asyncQueue.enqueueAndForget((async()=>PO(await dw(p),R)))}})(qb(l),c,i,o)}function EM(n,e){return(function(r,i){const o=new io;return r.asyncQueue.enqueueAndForget((async()=>HO(await nM(r),i,o))),o.promise})(qb(n),e)}function xM(n,e,t){const r=t.docs.get(e._key),i=new tI(n);return new so(n,i,e._key,r,new nc(t.hasPendingWrites,t.fromCache),e.converter)}function TM(){return new Hm("serverTimestamp")}(function(e,t=!0){(function(i){$a=i})(xo),ar(new Hn("firestore",((r,{instanceIdentifier:i,options:o})=>{const l=r.getProvider("app").getImmediate(),c=new hd(new sN(r.getProvider("auth-internal")),new lN(l,r.getProvider("app-check-internal")),(function(p,g){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new pe(te.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ec(p.options.projectId,g)})(l,i),l);return o={useFetchStreams:t,...o},c._setSettings(o),c}),"PUBLIC").setMultipleInstances(!0)),_n(b0,I0,e),_n(b0,I0,"esm2020")})();const bM={apiKey:"AIzaSyBifhKDvHan2MacWH46jL7Ijb6KNPy5ql8",authDomain:"phintrackr.firebaseapp.com",projectId:"phintrackr",storageBucket:"phintrackr.firebasestorage.app",messagingSenderId:"877441590841",appId:"1:877441590841:web:95cd15d73f5f8d259a8fe8",measurementId:"G-XJQQJW5J3X"},nI=lx(bM),yh=tN(nI),Ew=iM(nI),rI=Ee.createContext(),IM=({children:n})=>{const[e,t]=Ee.useState("home");Ee.useEffect(()=>{console.log("This is the currrent tab",e)},[e]);const r=async(h,p)=>{if(!h)return null;const g=mR(storage,`users/${p}/${h.name}`);return await pR(g,h),await gR(g)},[i,o]=Ee.useState(!1),l=async h=>{if(!h)return alert("No file or user!");o(!0);try{const p=await r(h,currentUser.uid);return setUrl(p),alert("Upload successful!"),p}catch(p){return console.error("Upload failed:",p),null}finally{o(!1)}},c=async h=>{console.log("I GOT THE PAYLOAD",h),(!h.image1==null||!h.image2==null)&&(await l(h.image1),await l(h.image2))};return I.jsx(rI.Provider,{value:{tab:e,setTab:t,uploadNewExpense:c},children:n})},Lg=()=>Ee.useContext(rI),SM=({page:n})=>{const{setTab:e}=Lg();return I.jsxs("div",{className:"w-full h-22 bg-gray-200 px-3 flex justify-between fixed left-0 right-0 bottom-0",children:[I.jsxs("div",{className:"left flex-2 flex align-middle justify-between gap-0.5",children:[I.jsxs("button",{onClick:()=>e("home"),className:`${n=="home"?"bg-appPurple text-white":""} flex flex-1 flex-col align-middle gap-1 py-2`,children:[I.jsx("i",{className:"bxr  bx-home text-3xl"}),"Home"]}),I.jsxs("button",{onClick:()=>e("receipts"),className:`${n=="receipts"?"bg-appPurple text-white":""} flex flex-1 flex-col align-middle gap-1 py-2`,children:[I.jsx("i",{className:"bxr  bx-receipt text-3xl"}),"Receipts"]})]}),I.jsx("div",{className:"flex-[1.7] flex align-middle justify-center relative",children:I.jsx("button",{onClick:()=>e("new-shii"),className:`${n=="new-shii"?"border-2 border-appPurple":""} absolute bottom-8 bg-amber-600 flex align-middle justify-center text-white rounded-full p-4`,children:I.jsx("i",{className:"bxr  bx-plus text-4xl"})})}),I.jsxs("div",{className:"right flex-2 flex align-middle justify-between gap-2",children:[I.jsxs("button",{onClick:()=>e("charts"),className:`${n=="charts"?"bg-appPurple text-white":""} flex w-1/2 flex-col align-middle gap-1 py-2`,children:[I.jsx("i",{className:"bxr  bx-pie-chart text-3xl"}),"Charts"]}),I.jsxs("button",{onClick:()=>e("reminders"),className:`${n=="reminders"?"bg-appPurple text-white":""} flex flex-1 flex-col align-middle gap-1 py-2`,children:[I.jsx("i",{className:"bxr  bx-bell text-3xl"}),"Settings"]})]})]})},iI=Ee.createContext(),Wm=()=>Ee.useContext(iI),kM=({children:n})=>{const[e,t]=Ee.useState(null),[r,i]=Ee.useState(null),[o,l]=Ee.useState(!0),c=async(v,w,T)=>{try{const P=(await VP(yh,w,T)).user;return await UP(P,{displayName:v}),await vM(mw(Ew,"users",P.uid),{name:v,email:w,createdAt:TM()}),t(P),P}catch(R){throw console.error("Signup error:",R),R}},h=async(v,w)=>{try{const T=await FP(yh,v,w);return t(T.user),T.user}catch(T){throw console.error("Login error:",T),T}},p=async()=>{await HP(yh),t(null),i(null)};Ee.useEffect(()=>$P(yh,w=>{t(w),l(!1)}),[]),Ee.useEffect(()=>{if(!e){i(null);return}const v=mw(Ew,"users",e.uid);return wM(v,T=>{if(T.exists()){const R=T.data();i(R),console.log(" User record fetched:",R)}else console.log("No user record found in Firestore.")})},[e]);const g={user:e,userData:r,setUser:t,signUp:c,login:h,logout:p};return I.jsx(iI.Provider,{value:g,children:!o&&n})},ci=[{id:"tx_001",title:"Grocery Shopping",description:"Bought rice, milk, and eggs at Shoprite",category:"Groceries",amount:45.75,type:"expense",date:"2025-10-03T14:35:00Z",icon:"bx bx-cart-alt"},{id:"tx_002",title:"Freelance Payment",description:"Received payment for website design project",category:"Freelance",amount:250,type:"income",date:"2025-10-04T09:15:00Z",icon:"bx bx-briefcase-alt"},{id:"tx_003",title:"Electricity Bill",description:"Prepaid electricity recharge",category:"Utilities",amount:28.4,type:"expense",date:"2025-10-05T08:10:00Z",icon:"bx bx-bulb"},{id:"tx_004",title:"Data Subscription",description:"MTN 10GB monthly plan",category:"Internet",amount:8.2,type:"expense",date:"2025-10-06T10:25:00Z",icon:"bx bx-wifi"},{id:"tx_005",title:"Fuel Refill",description:"Filled car tank at NNPC station",category:"Transport",amount:35,type:"expense",date:"2025-10-07T07:50:00Z",icon:"bx bx-gas-pump"},{id:"tx_006",title:"Coffee at Caf Neo",description:"Morning coffee and croissant",category:"Food & Drink",amount:6.25,type:"expense",date:"2025-10-08T08:45:00Z",icon:"bx bx-coffee"},{id:"tx_007",title:"Gym Subscription",description:"Monthly payment for gym membership",category:"Fitness",amount:30,type:"expense",date:"2025-10-09T17:00:00Z",icon:"bx bx-dumbbell"},{id:"tx_008",title:"Uber Ride",description:"Trip from Yaba to Lekki",category:"Transport",amount:12,type:"expense",date:"2025-10-10T13:20:00Z",icon:"bx bx-taxi"},{id:"tx_009",title:"Netflix Subscription",description:"Monthly streaming plan",category:"Entertainment",amount:9.99,type:"expense",date:"2025-10-11T18:00:00Z",icon:"bx bx-movie-play"},{id:"tx_010",title:"Salary",description:"October salary payment",category:"Salary",amount:1200,type:"income",date:"2025-10-11T09:00:00Z",icon:"bx bx-wallet"},{id:"tx_011",title:"Airtime Purchase",description:"Airtime for calls and SMS",category:"Utilities",amount:3.5,type:"expense",date:"2025-10-12T12:30:00Z",icon:"bx bx-mobile"},{id:"tx_012",title:"Book Purchase",description:"Bought JavaScript reference book",category:"Education",amount:15,type:"expense",date:"2025-10-13T11:00:00Z",icon:"bx bx-book"},{id:"tx_013",title:"Online Course",description:"Enrolled in React.js advanced course",category:"Education",amount:39.99,type:"expense",date:"2025-10-14T15:30:00Z",icon:"bx bx-laptop"},{id:"tx_014",title:"Sold Old Laptop",description:"Sold my old HP Pavilion laptop",category:"Investments",amount:350,type:"income",date:"2025-10-15T16:10:00Z",icon:"bx bx-trending-up"},{id:"tx_015",title:"Haircut",description:"Trimmed at Signature Cuts barbershop",category:"Personal Care",amount:5.5,type:"expense",date:"2025-10-16T13:00:00Z",icon:"bx bx-user"},{id:"tx_016",title:"Dinner Date",description:"Dinner at Yellow Chilli Restaurant",category:"Food & Drink",amount:60,type:"expense",date:"2025-10-17T20:30:00Z",icon:"bx bx-restaurant"},{id:"tx_017",title:"Sold Graphic Design",description:"Payment for logo design project",category:"Freelance",amount:80,type:"income",date:"2025-10-18T19:00:00Z",icon:"bx bx-briefcase-alt"},{id:"tx_018",title:"Medical Checkup",description:"General body checkup at health center",category:"Health",amount:25,type:"expense",date:"2025-10-19T10:00:00Z",icon:"bx bx-health"},{id:"tx_019",title:"Bought Sneakers",description:"New Nike Air Max sneakers",category:"Shopping",amount:85,type:"expense",date:"2025-10-20T17:20:00Z",icon:"bx bx-shopping-bag"},{id:"tx_020",title:"YouTube Premium",description:"Monthly ad-free subscription",category:"Entertainment",amount:11.99,type:"expense",date:"2025-10-21T08:00:00Z",icon:"bx bx-play-circle"},{id:"tx_021",title:"Groceries at Market Square",description:"Bought vegetables, fruits, and bread",category:"Groceries",amount:32.6,type:"expense",date:"2025-10-22T09:10:00Z",icon:"bx bx-cart-alt"},{id:"tx_022",title:"Client Invoice Payment",description:"Received project balance from client",category:"Freelance",amount:400,type:"income",date:"2025-10-22T15:20:00Z",icon:"bx bx-briefcase-alt"},{id:"tx_023",title:"Taxi Ride to Office",description:"Bolt trip to coworking space",category:"Transport",amount:5.75,type:"expense",date:"2025-10-23T08:30:00Z",icon:"bx bx-taxi"},{id:"tx_024",title:"Bought Airtime",description:"Recharge for calls and data",category:"Utilities",amount:3,type:"expense",date:"2025-10-23T19:45:00Z",icon:"bx bx-mobile"},{id:"tx_025",title:"Breakfast at Caf",description:"Egg sandwich and cappuccino",category:"Food & Drink",amount:7.25,type:"expense",date:"2025-10-24T08:15:00Z",icon:"bx bx-coffee"},{id:"tx_026",title:"App Hosting Renewal",description:"Renewed Vercel hosting plan",category:"Subscription",amount:20,type:"expense",date:"2025-10-24T10:05:00Z",icon:"bx bx-globe"},{id:"tx_027",title:"UI Design Sale",description:"Sold mobile UI design pack on Gumroad",category:"Investments",amount:60,type:"income",date:"2025-10-24T11:50:00Z",icon:"bx bx-trending-up"},{id:"tx_028",title:"Lunch Takeout",description:"Jollof rice with grilled chicken",category:"Food & Drink",amount:10.5,type:"expense",date:"2025-10-24T13:40:00Z",icon:"bx bx-restaurant"},{id:"tx_029",title:"Online Donation",description:"Supported a friends fundraiser",category:"Charity",amount:15,type:"expense",date:"2025-10-24T16:10:00Z",icon:"bx bx-donate-heart"},{id:"tx_030",title:"Sold Plugin",description:"Received payment for custom VS Code plugin",category:"Investments",amount:120,type:"income",date:"2025-10-24T18:20:00Z",icon:"bx bx-trending-up"},{id:"tx_031",title:"Evening Snacks",description:"Meat pie and bottle of malt",category:"Food & Drink",amount:4.5,type:"expense",date:"2025-10-24T19:30:00Z",icon:"bx bx-baguette"},{id:"tx_032",title:"Domain Renewal",description:"Renewed philipsportfolio.dev domain",category:"Subscription",amount:12,type:"expense",date:"2025-10-24T20:00:00Z",icon:"bx bx-globe"},{id:"tx_033",title:"Consultation Fee",description:"Client paid for UX design consultation",category:"Gift",amount:75,type:"income",date:"2025-10-24T21:10:00Z",icon:"bx bx-gift"}];/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Wc(n){return n+.5|0}const ss=(n,e,t)=>Math.max(Math.min(n,t),e);function rc(n){return ss(Wc(n*2.55),0,255)}function hs(n){return ss(Wc(n*255),0,255)}function li(n){return ss(Wc(n/2.55)/100,0,1)}function xw(n){return ss(Wc(n*100),0,100)}const jn={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Vg=[..."0123456789ABCDEF"],AM=n=>Vg[n&15],RM=n=>Vg[(n&240)>>4]+Vg[n&15],_h=n=>(n&240)>>4===(n&15),CM=n=>_h(n.r)&&_h(n.g)&&_h(n.b)&&_h(n.a);function PM(n){var e=n.length,t;return n[0]==="#"&&(e===4||e===5?t={r:255&jn[n[1]]*17,g:255&jn[n[2]]*17,b:255&jn[n[3]]*17,a:e===5?jn[n[4]]*17:255}:(e===7||e===9)&&(t={r:jn[n[1]]<<4|jn[n[2]],g:jn[n[3]]<<4|jn[n[4]],b:jn[n[5]]<<4|jn[n[6]],a:e===9?jn[n[7]]<<4|jn[n[8]]:255})),t}const NM=(n,e)=>n<255?e(n):"";function DM(n){var e=CM(n)?AM:RM;return n?"#"+e(n.r)+e(n.g)+e(n.b)+NM(n.a,e):void 0}const OM=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function sI(n,e,t){const r=e*Math.min(t,1-t),i=(o,l=(o+n/30)%12)=>t-r*Math.max(Math.min(l-3,9-l,1),-1);return[i(0),i(8),i(4)]}function MM(n,e,t){const r=(i,o=(i+n/60)%6)=>t-t*e*Math.max(Math.min(o,4-o,1),0);return[r(5),r(3),r(1)]}function LM(n,e,t){const r=sI(n,1,.5);let i;for(e+t>1&&(i=1/(e+t),e*=i,t*=i),i=0;i<3;i++)r[i]*=1-e-t,r[i]+=e;return r}function VM(n,e,t,r,i){return n===i?(e-t)/r+(e<t?6:0):e===i?(t-n)/r+2:(n-e)/r+4}function qm(n){const t=n.r/255,r=n.g/255,i=n.b/255,o=Math.max(t,r,i),l=Math.min(t,r,i),c=(o+l)/2;let h,p,g;return o!==l&&(g=o-l,p=c>.5?g/(2-o-l):g/(o+l),h=VM(t,r,i,g,o),h=h*60+.5),[h|0,p||0,c]}function Km(n,e,t,r){return(Array.isArray(e)?n(e[0],e[1],e[2]):n(e,t,r)).map(hs)}function Gm(n,e,t){return Km(sI,n,e,t)}function FM(n,e,t){return Km(LM,n,e,t)}function jM(n,e,t){return Km(MM,n,e,t)}function oI(n){return(n%360+360)%360}function UM(n){const e=OM.exec(n);let t=255,r;if(!e)return;e[5]!==r&&(t=e[6]?rc(+e[5]):hs(+e[5]));const i=oI(+e[2]),o=+e[3]/100,l=+e[4]/100;return e[1]==="hwb"?r=FM(i,o,l):e[1]==="hsv"?r=jM(i,o,l):r=Gm(i,o,l),{r:r[0],g:r[1],b:r[2],a:t}}function zM(n,e){var t=qm(n);t[0]=oI(t[0]+e),t=Gm(t),n.r=t[0],n.g=t[1],n.b=t[2]}function BM(n){if(!n)return;const e=qm(n),t=e[0],r=xw(e[1]),i=xw(e[2]);return n.a<255?`hsla(${t}, ${r}%, ${i}%, ${li(n.a)})`:`hsl(${t}, ${r}%, ${i}%)`}const Tw={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},bw={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function $M(){const n={},e=Object.keys(bw),t=Object.keys(Tw);let r,i,o,l,c;for(r=0;r<e.length;r++){for(l=c=e[r],i=0;i<t.length;i++)o=t[i],c=c.replace(o,Tw[o]);o=parseInt(bw[l],16),n[c]=[o>>16&255,o>>8&255,o&255]}return n}let vh;function HM(n){vh||(vh=$M(),vh.transparent=[0,0,0,0]);const e=vh[n.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const WM=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function qM(n){const e=WM.exec(n);let t=255,r,i,o;if(e){if(e[7]!==r){const l=+e[7];t=e[8]?rc(l):ss(l*255,0,255)}return r=+e[1],i=+e[3],o=+e[5],r=255&(e[2]?rc(r):ss(r,0,255)),i=255&(e[4]?rc(i):ss(i,0,255)),o=255&(e[6]?rc(o):ss(o,0,255)),{r,g:i,b:o,a:t}}}function KM(n){return n&&(n.a<255?`rgba(${n.r}, ${n.g}, ${n.b}, ${li(n.a)})`:`rgb(${n.r}, ${n.g}, ${n.b})`)}const qp=n=>n<=.0031308?n*12.92:Math.pow(n,1/2.4)*1.055-.055,ya=n=>n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4);function GM(n,e,t){const r=ya(li(n.r)),i=ya(li(n.g)),o=ya(li(n.b));return{r:hs(qp(r+t*(ya(li(e.r))-r))),g:hs(qp(i+t*(ya(li(e.g))-i))),b:hs(qp(o+t*(ya(li(e.b))-o))),a:n.a+t*(e.a-n.a)}}function wh(n,e,t){if(n){let r=qm(n);r[e]=Math.max(0,Math.min(r[e]+r[e]*t,e===0?360:1)),r=Gm(r),n.r=r[0],n.g=r[1],n.b=r[2]}}function aI(n,e){return n&&Object.assign(e||{},n)}function Iw(n){var e={r:0,g:0,b:0,a:255};return Array.isArray(n)?n.length>=3&&(e={r:n[0],g:n[1],b:n[2],a:255},n.length>3&&(e.a=hs(n[3]))):(e=aI(n,{r:0,g:0,b:0,a:1}),e.a=hs(e.a)),e}function QM(n){return n.charAt(0)==="r"?qM(n):UM(n)}class kc{constructor(e){if(e instanceof kc)return e;const t=typeof e;let r;t==="object"?r=Iw(e):t==="string"&&(r=PM(e)||HM(e)||QM(e)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var e=aI(this._rgb);return e&&(e.a=li(e.a)),e}set rgb(e){this._rgb=Iw(e)}rgbString(){return this._valid?KM(this._rgb):void 0}hexString(){return this._valid?DM(this._rgb):void 0}hslString(){return this._valid?BM(this._rgb):void 0}mix(e,t){if(e){const r=this.rgb,i=e.rgb;let o;const l=t===o?.5:t,c=2*l-1,h=r.a-i.a,p=((c*h===-1?c:(c+h)/(1+c*h))+1)/2;o=1-p,r.r=255&p*r.r+o*i.r+.5,r.g=255&p*r.g+o*i.g+.5,r.b=255&p*r.b+o*i.b+.5,r.a=l*r.a+(1-l)*i.a,this.rgb=r}return this}interpolate(e,t){return e&&(this._rgb=GM(this._rgb,e._rgb,t)),this}clone(){return new kc(this.rgb)}alpha(e){return this._rgb.a=hs(e),this}clearer(e){const t=this._rgb;return t.a*=1-e,this}greyscale(){const e=this._rgb,t=Wc(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=t,this}opaquer(e){const t=this._rgb;return t.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return wh(this._rgb,2,e),this}darken(e){return wh(this._rgb,2,-e),this}saturate(e){return wh(this._rgb,1,e),this}desaturate(e){return wh(this._rgb,1,-e),this}rotate(e){return zM(this._rgb,e),this}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function si(){}const YM=(()=>{let n=0;return()=>n++})();function Je(n){return n==null}function Rt(n){if(Array.isArray&&Array.isArray(n))return!0;const e=Object.prototype.toString.call(n);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function Be(n){return n!==null&&Object.prototype.toString.call(n)==="[object Object]"}function Wn(n){return(typeof n=="number"||n instanceof Number)&&isFinite(+n)}function kr(n,e){return Wn(n)?n:e}function ze(n,e){return typeof n>"u"?e:n}const XM=(n,e)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100:+n/e,lI=(n,e)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100*e:+n;function rt(n,e,t){if(n&&typeof n.call=="function")return n.apply(t,e)}function Ge(n,e,t,r){let i,o,l;if(Rt(n))for(o=n.length,i=0;i<o;i++)e.call(t,n[i],i);else if(Be(n))for(l=Object.keys(n),o=l.length,i=0;i<o;i++)e.call(t,n[l[i]],l[i])}function fd(n,e){let t,r,i,o;if(!n||!e||n.length!==e.length)return!1;for(t=0,r=n.length;t<r;++t)if(i=n[t],o=e[t],i.datasetIndex!==o.datasetIndex||i.index!==o.index)return!1;return!0}function pd(n){if(Rt(n))return n.map(pd);if(Be(n)){const e=Object.create(null),t=Object.keys(n),r=t.length;let i=0;for(;i<r;++i)e[t[i]]=pd(n[t[i]]);return e}return n}function cI(n){return["__proto__","prototype","constructor"].indexOf(n)===-1}function JM(n,e,t,r){if(!cI(n))return;const i=e[n],o=t[n];Be(i)&&Be(o)?Ac(i,o,r):e[n]=pd(o)}function Ac(n,e,t){const r=Rt(e)?e:[e],i=r.length;if(!Be(n))return n;t=t||{};const o=t.merger||JM;let l;for(let c=0;c<i;++c){if(l=r[c],!Be(l))continue;const h=Object.keys(l);for(let p=0,g=h.length;p<g;++p)o(h[p],n,l,t)}return n}function pc(n,e){return Ac(n,e,{merger:ZM})}function ZM(n,e,t){if(!cI(n))return;const r=e[n],i=t[n];Be(r)&&Be(i)?pc(r,i):Object.prototype.hasOwnProperty.call(e,n)||(e[n]=pd(i))}const Sw={"":n=>n,x:n=>n.x,y:n=>n.y};function eL(n){const e=n.split("."),t=[];let r="";for(const i of e)r+=i,r.endsWith("\\")?r=r.slice(0,-1)+".":(t.push(r),r="");return t}function tL(n){const e=eL(n);return t=>{for(const r of e){if(r==="")break;t=t&&t[r]}return t}}function mo(n,e){return(Sw[e]||(Sw[e]=tL(e)))(n)}function Qm(n){return n.charAt(0).toUpperCase()+n.slice(1)}const Rc=n=>typeof n<"u",vs=n=>typeof n=="function",kw=(n,e)=>{if(n.size!==e.size)return!1;for(const t of n)if(!e.has(t))return!1;return!0};function nL(n){return n.type==="mouseup"||n.type==="click"||n.type==="contextmenu"}const Xe=Math.PI,bt=2*Xe,gd=Number.POSITIVE_INFINITY,rL=Xe/180,Ct=Xe/2,Gs=Xe/4,Aw=Xe*2/3,uI=Math.log10,ds=Math.sign;function $h(n,e,t){return Math.abs(n-e)<t}function Rw(n){const e=Math.round(n);n=$h(n,e,n/1e3)?e:n;const t=Math.pow(10,Math.floor(uI(n))),r=n/t;return(r<=1?1:r<=2?2:r<=5?5:10)*t}function iL(n){const e=[],t=Math.sqrt(n);let r;for(r=1;r<t;r++)n%r===0&&(e.push(r),e.push(n/r));return t===(t|0)&&e.push(t),e.sort((i,o)=>i-o).pop(),e}function sL(n){return typeof n=="symbol"||typeof n=="object"&&n!==null&&!(Symbol.toPrimitive in n||"toString"in n||"valueOf"in n)}function md(n){return!sL(n)&&!isNaN(parseFloat(n))&&isFinite(n)}function oL(n,e){const t=Math.round(n);return t-e<=n&&t+e>=n}function aL(n,e,t){let r,i,o;for(r=0,i=n.length;r<i;r++)o=n[r][t],isNaN(o)||(e.min=Math.min(e.min,o),e.max=Math.max(e.max,o))}function di(n){return n*(Xe/180)}function lL(n){return n*(180/Xe)}function Cw(n){if(!Wn(n))return;let e=1,t=0;for(;Math.round(n*e)/e!==n;)e*=10,t++;return t}function hI(n,e){const t=e.x-n.x,r=e.y-n.y,i=Math.sqrt(t*t+r*r);let o=Math.atan2(r,t);return o<-.5*Xe&&(o+=bt),{angle:o,distance:i}}function cL(n,e){return Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2))}function Pr(n){return(n%bt+bt)%bt}function yd(n,e,t,r){const i=Pr(n),o=Pr(e),l=Pr(t),c=Pr(o-i),h=Pr(l-i),p=Pr(i-o),g=Pr(i-l);return i===o||i===l||r&&o===l||c>h&&p<g}function yn(n,e,t){return Math.max(e,Math.min(t,n))}function uL(n){return yn(n,-32768,32767)}function no(n,e,t,r=1e-6){return n>=Math.min(e,t)-r&&n<=Math.max(e,t)+r}function Ym(n,e,t){t=t||(l=>n[l]<e);let r=n.length-1,i=0,o;for(;r-i>1;)o=i+r>>1,t(o)?i=o:r=o;return{lo:i,hi:r}}const Fg=(n,e,t,r)=>Ym(n,t,r?i=>{const o=n[i][e];return o<t||o===t&&n[i+1][e]===t}:i=>n[i][e]<t),hL=(n,e,t)=>Ym(n,t,r=>n[r][e]>=t);function dL(n,e,t){let r=0,i=n.length;for(;r<i&&n[r]<e;)r++;for(;i>r&&n[i-1]>t;)i--;return r>0||i<n.length?n.slice(r,i):n}const dI=["push","pop","shift","splice","unshift"];function fL(n,e){if(n._chartjs){n._chartjs.listeners.push(e);return}Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),dI.forEach(t=>{const r="_onData"+Qm(t),i=n[t];Object.defineProperty(n,t,{configurable:!0,enumerable:!1,value(...o){const l=i.apply(this,o);return n._chartjs.listeners.forEach(c=>{typeof c[r]=="function"&&c[r](...o)}),l}})})}function Pw(n,e){const t=n._chartjs;if(!t)return;const r=t.listeners,i=r.indexOf(e);i!==-1&&r.splice(i,1),!(r.length>0)&&(dI.forEach(o=>{delete n[o]}),delete n._chartjs)}function fI(n){const e=new Set(n);return e.size===n.length?n:Array.from(e)}const pI=(function(){return typeof window>"u"?function(n){return n()}:window.requestAnimationFrame})();function gI(n,e){let t=[],r=!1;return function(...i){t=i,r||(r=!0,pI.call(window,()=>{r=!1,n.apply(e,t)}))}}function pL(n,e){let t;return function(...r){return e?(clearTimeout(t),t=setTimeout(n,e,r)):n.apply(this,r),e}}const Xm=n=>n==="start"?"left":n==="end"?"right":"center",Xt=(n,e,t)=>n==="start"?e:n==="end"?t:(e+t)/2,gL=(n,e,t,r)=>n===(r?"left":"right")?t:n==="center"?(e+t)/2:e,Eh=n=>n===0||n===1,Nw=(n,e,t)=>-(Math.pow(2,10*(n-=1))*Math.sin((n-e)*bt/t)),Dw=(n,e,t)=>Math.pow(2,-10*n)*Math.sin((n-e)*bt/t)+1,gc={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>-n*(n-2),easeInOutQuad:n=>(n/=.5)<1?.5*n*n:-.5*(--n*(n-2)-1),easeInCubic:n=>n*n*n,easeOutCubic:n=>(n-=1)*n*n+1,easeInOutCubic:n=>(n/=.5)<1?.5*n*n*n:.5*((n-=2)*n*n+2),easeInQuart:n=>n*n*n*n,easeOutQuart:n=>-((n-=1)*n*n*n-1),easeInOutQuart:n=>(n/=.5)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2),easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>(n-=1)*n*n*n*n+1,easeInOutQuint:n=>(n/=.5)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2),easeInSine:n=>-Math.cos(n*Ct)+1,easeOutSine:n=>Math.sin(n*Ct),easeInOutSine:n=>-.5*(Math.cos(Xe*n)-1),easeInExpo:n=>n===0?0:Math.pow(2,10*(n-1)),easeOutExpo:n=>n===1?1:-Math.pow(2,-10*n)+1,easeInOutExpo:n=>Eh(n)?n:n<.5?.5*Math.pow(2,10*(n*2-1)):.5*(-Math.pow(2,-10*(n*2-1))+2),easeInCirc:n=>n>=1?n:-(Math.sqrt(1-n*n)-1),easeOutCirc:n=>Math.sqrt(1-(n-=1)*n),easeInOutCirc:n=>(n/=.5)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1),easeInElastic:n=>Eh(n)?n:Nw(n,.075,.3),easeOutElastic:n=>Eh(n)?n:Dw(n,.075,.3),easeInOutElastic(n){return Eh(n)?n:n<.5?.5*Nw(n*2,.1125,.45):.5+.5*Dw(n*2-1,.1125,.45)},easeInBack(n){return n*n*((1.70158+1)*n-1.70158)},easeOutBack(n){return(n-=1)*n*((1.70158+1)*n+1.70158)+1},easeInOutBack(n){let e=1.70158;return(n/=.5)<1?.5*(n*n*(((e*=1.525)+1)*n-e)):.5*((n-=2)*n*(((e*=1.525)+1)*n+e)+2)},easeInBounce:n=>1-gc.easeOutBounce(1-n),easeOutBounce(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},easeInOutBounce:n=>n<.5?gc.easeInBounce(n*2)*.5:gc.easeOutBounce(n*2-1)*.5+.5};function mI(n){if(n&&typeof n=="object"){const e=n.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function Ow(n){return mI(n)?n:new kc(n)}function Kp(n){return mI(n)?n:new kc(n).saturate(.5).darken(.1).hexString()}const mL=["x","y","borderWidth","radius","tension"],yL=["color","borderColor","backgroundColor"];function _L(n){n.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),n.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),n.set("animations",{colors:{type:"color",properties:yL},numbers:{type:"number",properties:mL}}),n.describe("animations",{_fallback:"animation"}),n.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function vL(n){n.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const Mw=new Map;function wL(n,e){e=e||{};const t=n+JSON.stringify(e);let r=Mw.get(t);return r||(r=new Intl.NumberFormat(n,e),Mw.set(t,r)),r}function Jm(n,e,t){return wL(e,t).format(n)}const EL={values(n){return Rt(n)?n:""+n},numeric(n,e,t){if(n===0)return"0";const r=this.chart.options.locale;let i,o=n;if(t.length>1){const p=Math.max(Math.abs(t[0].value),Math.abs(t[t.length-1].value));(p<1e-4||p>1e15)&&(i="scientific"),o=xL(n,t)}const l=uI(Math.abs(o)),c=isNaN(l)?1:Math.max(Math.min(-1*Math.floor(l),20),0),h={notation:i,minimumFractionDigits:c,maximumFractionDigits:c};return Object.assign(h,this.options.ticks.format),Jm(n,r,h)}};function xL(n,e){let t=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(t)>=1&&n!==Math.floor(n)&&(t=n-Math.floor(n)),t}var yI={formatters:EL};function TL(n){n.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:yI.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),n.route("scale.ticks","color","","color"),n.route("scale.grid","color","","borderColor"),n.route("scale.border","color","","borderColor"),n.route("scale.title","color","","color"),n.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),n.describe("scales",{_fallback:"scale"}),n.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const yo=Object.create(null),jg=Object.create(null);function mc(n,e){if(!e)return n;const t=e.split(".");for(let r=0,i=t.length;r<i;++r){const o=t[r];n=n[o]||(n[o]=Object.create(null))}return n}function Gp(n,e,t){return typeof e=="string"?Ac(mc(n,e),t):Ac(mc(n,""),e)}class bL{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=r=>r.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(r,i)=>Kp(i.backgroundColor),this.hoverBorderColor=(r,i)=>Kp(i.borderColor),this.hoverColor=(r,i)=>Kp(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return Gp(this,e,t)}get(e){return mc(this,e)}describe(e,t){return Gp(jg,e,t)}override(e,t){return Gp(yo,e,t)}route(e,t,r,i){const o=mc(this,e),l=mc(this,r),c="_"+t;Object.defineProperties(o,{[c]:{value:o[t],writable:!0},[t]:{enumerable:!0,get(){const h=this[c],p=l[i];return Be(h)?Object.assign({},p,h):ze(h,p)},set(h){this[c]=h}}})}apply(e){e.forEach(t=>t(this))}}var _t=new bL({_scriptable:n=>!n.startsWith("on"),_indexable:n=>n!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[_L,vL,TL]);function IL(n){return!n||Je(n.size)||Je(n.family)?null:(n.style?n.style+" ":"")+(n.weight?n.weight+" ":"")+n.size+"px "+n.family}function Lw(n,e,t,r,i){let o=e[i];return o||(o=e[i]=n.measureText(i).width,t.push(i)),o>r&&(r=o),r}function Qs(n,e,t){const r=n.currentDevicePixelRatio,i=t!==0?Math.max(t/2,.5):0;return Math.round((e-i)*r)/r+i}function Vw(n,e){!e&&!n||(e=e||n.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,n.width,n.height),e.restore())}function Fw(n,e,t,r){_I(n,e,t,r,null)}function _I(n,e,t,r,i){let o,l,c,h,p,g,v,w;const T=e.pointStyle,R=e.rotation,P=e.radius;let A=(R||0)*rL;if(T&&typeof T=="object"&&(o=T.toString(),o==="[object HTMLImageElement]"||o==="[object HTMLCanvasElement]")){n.save(),n.translate(t,r),n.rotate(A),n.drawImage(T,-T.width/2,-T.height/2,T.width,T.height),n.restore();return}if(!(isNaN(P)||P<=0)){switch(n.beginPath(),T){default:i?n.ellipse(t,r,i/2,P,0,0,bt):n.arc(t,r,P,0,bt),n.closePath();break;case"triangle":g=i?i/2:P,n.moveTo(t+Math.sin(A)*g,r-Math.cos(A)*P),A+=Aw,n.lineTo(t+Math.sin(A)*g,r-Math.cos(A)*P),A+=Aw,n.lineTo(t+Math.sin(A)*g,r-Math.cos(A)*P),n.closePath();break;case"rectRounded":p=P*.516,h=P-p,l=Math.cos(A+Gs)*h,v=Math.cos(A+Gs)*(i?i/2-p:h),c=Math.sin(A+Gs)*h,w=Math.sin(A+Gs)*(i?i/2-p:h),n.arc(t-v,r-c,p,A-Xe,A-Ct),n.arc(t+w,r-l,p,A-Ct,A),n.arc(t+v,r+c,p,A,A+Ct),n.arc(t-w,r+l,p,A+Ct,A+Xe),n.closePath();break;case"rect":if(!R){h=Math.SQRT1_2*P,g=i?i/2:h,n.rect(t-g,r-h,2*g,2*h);break}A+=Gs;case"rectRot":v=Math.cos(A)*(i?i/2:P),l=Math.cos(A)*P,c=Math.sin(A)*P,w=Math.sin(A)*(i?i/2:P),n.moveTo(t-v,r-c),n.lineTo(t+w,r-l),n.lineTo(t+v,r+c),n.lineTo(t-w,r+l),n.closePath();break;case"crossRot":A+=Gs;case"cross":v=Math.cos(A)*(i?i/2:P),l=Math.cos(A)*P,c=Math.sin(A)*P,w=Math.sin(A)*(i?i/2:P),n.moveTo(t-v,r-c),n.lineTo(t+v,r+c),n.moveTo(t+w,r-l),n.lineTo(t-w,r+l);break;case"star":v=Math.cos(A)*(i?i/2:P),l=Math.cos(A)*P,c=Math.sin(A)*P,w=Math.sin(A)*(i?i/2:P),n.moveTo(t-v,r-c),n.lineTo(t+v,r+c),n.moveTo(t+w,r-l),n.lineTo(t-w,r+l),A+=Gs,v=Math.cos(A)*(i?i/2:P),l=Math.cos(A)*P,c=Math.sin(A)*P,w=Math.sin(A)*(i?i/2:P),n.moveTo(t-v,r-c),n.lineTo(t+v,r+c),n.moveTo(t+w,r-l),n.lineTo(t-w,r+l);break;case"line":l=i?i/2:Math.cos(A)*P,c=Math.sin(A)*P,n.moveTo(t-l,r-c),n.lineTo(t+l,r+c);break;case"dash":n.moveTo(t,r),n.lineTo(t+Math.cos(A)*(i?i/2:P),r+Math.sin(A)*P);break;case!1:n.closePath();break}n.fill(),e.borderWidth>0&&n.stroke()}}function vI(n,e,t){return t=t||.5,!e||n&&n.x>e.left-t&&n.x<e.right+t&&n.y>e.top-t&&n.y<e.bottom+t}function Zm(n,e){n.save(),n.beginPath(),n.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),n.clip()}function ey(n){n.restore()}function SL(n,e){e.translation&&n.translate(e.translation[0],e.translation[1]),Je(e.rotation)||n.rotate(e.rotation),e.color&&(n.fillStyle=e.color),e.textAlign&&(n.textAlign=e.textAlign),e.textBaseline&&(n.textBaseline=e.textBaseline)}function kL(n,e,t,r,i){if(i.strikethrough||i.underline){const o=n.measureText(r),l=e-o.actualBoundingBoxLeft,c=e+o.actualBoundingBoxRight,h=t-o.actualBoundingBoxAscent,p=t+o.actualBoundingBoxDescent,g=i.strikethrough?(h+p)/2:p;n.strokeStyle=n.fillStyle,n.beginPath(),n.lineWidth=i.decorationWidth||2,n.moveTo(l,g),n.lineTo(c,g),n.stroke()}}function AL(n,e){const t=n.fillStyle;n.fillStyle=e.color,n.fillRect(e.left,e.top,e.width,e.height),n.fillStyle=t}function Cc(n,e,t,r,i,o={}){const l=Rt(e)?e:[e],c=o.strokeWidth>0&&o.strokeColor!=="";let h,p;for(n.save(),n.font=i.string,SL(n,o),h=0;h<l.length;++h)p=l[h],o.backdrop&&AL(n,o.backdrop),c&&(o.strokeColor&&(n.strokeStyle=o.strokeColor),Je(o.strokeWidth)||(n.lineWidth=o.strokeWidth),n.strokeText(p,t,r,o.maxWidth)),n.fillText(p,t,r,o.maxWidth),kL(n,t,r,p,o),r+=Number(i.lineHeight);n.restore()}function _d(n,e){const{x:t,y:r,w:i,h:o,radius:l}=e;n.arc(t+l.topLeft,r+l.topLeft,l.topLeft,1.5*Xe,Xe,!0),n.lineTo(t,r+o-l.bottomLeft),n.arc(t+l.bottomLeft,r+o-l.bottomLeft,l.bottomLeft,Xe,Ct,!0),n.lineTo(t+i-l.bottomRight,r+o),n.arc(t+i-l.bottomRight,r+o-l.bottomRight,l.bottomRight,Ct,0,!0),n.lineTo(t+i,r+l.topRight),n.arc(t+i-l.topRight,r+l.topRight,l.topRight,0,-Ct,!0),n.lineTo(t+l.topLeft,r)}const RL=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,CL=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function PL(n,e){const t=(""+n).match(RL);if(!t||t[1]==="normal")return e*1.2;switch(n=+t[2],t[3]){case"px":return n;case"%":n/=100;break}return e*n}const NL=n=>+n||0;function ty(n,e){const t={},r=Be(e),i=r?Object.keys(e):e,o=Be(n)?r?l=>ze(n[l],n[e[l]]):l=>n[l]:()=>n;for(const l of i)t[l]=NL(o(l));return t}function wI(n){return ty(n,{top:"y",right:"x",bottom:"y",left:"x"})}function Pa(n){return ty(n,["topLeft","topRight","bottomLeft","bottomRight"])}function qn(n){const e=wI(n);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function en(n,e){n=n||{},e=e||_t.font;let t=ze(n.size,e.size);typeof t=="string"&&(t=parseInt(t,10));let r=ze(n.style,e.style);r&&!(""+r).match(CL)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const i={family:ze(n.family,e.family),lineHeight:PL(ze(n.lineHeight,e.lineHeight),t),size:t,style:r,weight:ze(n.weight,e.weight),string:""};return i.string=IL(i),i}function xh(n,e,t,r){let i,o,l;for(i=0,o=n.length;i<o;++i)if(l=n[i],l!==void 0&&l!==void 0)return l}function DL(n,e,t){const{min:r,max:i}=n,o=lI(e,(i-r)/2),l=(c,h)=>t&&c===0?0:c+h;return{min:l(r,-Math.abs(o)),max:l(i,o)}}function Ka(n,e){return Object.assign(Object.create(n),e)}function ny(n,e=[""],t,r,i=()=>n[0]){const o=t||n;typeof r>"u"&&(r=bI("_fallback",n));const l={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:n,_rootScopes:o,_fallback:r,_getTarget:i,override:c=>ny([c,...n],e,o,r)};return new Proxy(l,{deleteProperty(c,h){return delete c[h],delete c._keys,delete n[0][h],!0},get(c,h){return xI(c,h,()=>zL(h,e,n,c))},getOwnPropertyDescriptor(c,h){return Reflect.getOwnPropertyDescriptor(c._scopes[0],h)},getPrototypeOf(){return Reflect.getPrototypeOf(n[0])},has(c,h){return Uw(c).includes(h)},ownKeys(c){return Uw(c)},set(c,h,p){const g=c._storage||(c._storage=i());return c[h]=g[h]=p,delete c._keys,!0}})}function Ua(n,e,t,r){const i={_cacheable:!1,_proxy:n,_context:e,_subProxy:t,_stack:new Set,_descriptors:EI(n,r),setContext:o=>Ua(n,o,t,r),override:o=>Ua(n.override(o),e,t,r)};return new Proxy(i,{deleteProperty(o,l){return delete o[l],delete n[l],!0},get(o,l,c){return xI(o,l,()=>ML(o,l,c))},getOwnPropertyDescriptor(o,l){return o._descriptors.allKeys?Reflect.has(n,l)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(n,l)},getPrototypeOf(){return Reflect.getPrototypeOf(n)},has(o,l){return Reflect.has(n,l)},ownKeys(){return Reflect.ownKeys(n)},set(o,l,c){return n[l]=c,delete o[l],!0}})}function EI(n,e={scriptable:!0,indexable:!0}){const{_scriptable:t=e.scriptable,_indexable:r=e.indexable,_allKeys:i=e.allKeys}=n;return{allKeys:i,scriptable:t,indexable:r,isScriptable:vs(t)?t:()=>t,isIndexable:vs(r)?r:()=>r}}const OL=(n,e)=>n?n+Qm(e):e,ry=(n,e)=>Be(e)&&n!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function xI(n,e,t){if(Object.prototype.hasOwnProperty.call(n,e)||e==="constructor")return n[e];const r=t();return n[e]=r,r}function ML(n,e,t){const{_proxy:r,_context:i,_subProxy:o,_descriptors:l}=n;let c=r[e];return vs(c)&&l.isScriptable(e)&&(c=LL(e,c,n,t)),Rt(c)&&c.length&&(c=VL(e,c,n,l.isIndexable)),ry(e,c)&&(c=Ua(c,i,o&&o[e],l)),c}function LL(n,e,t,r){const{_proxy:i,_context:o,_subProxy:l,_stack:c}=t;if(c.has(n))throw new Error("Recursion detected: "+Array.from(c).join("->")+"->"+n);c.add(n);let h=e(o,l||r);return c.delete(n),ry(n,h)&&(h=iy(i._scopes,i,n,h)),h}function VL(n,e,t,r){const{_proxy:i,_context:o,_subProxy:l,_descriptors:c}=t;if(typeof o.index<"u"&&r(n))return e[o.index%e.length];if(Be(e[0])){const h=e,p=i._scopes.filter(g=>g!==h);e=[];for(const g of h){const v=iy(p,i,n,g);e.push(Ua(v,o,l&&l[n],c))}}return e}function TI(n,e,t){return vs(n)?n(e,t):n}const FL=(n,e)=>n===!0?e:typeof n=="string"?mo(e,n):void 0;function jL(n,e,t,r,i){for(const o of e){const l=FL(t,o);if(l){n.add(l);const c=TI(l._fallback,t,i);if(typeof c<"u"&&c!==t&&c!==r)return c}else if(l===!1&&typeof r<"u"&&t!==r)return null}return!1}function iy(n,e,t,r){const i=e._rootScopes,o=TI(e._fallback,t,r),l=[...n,...i],c=new Set;c.add(r);let h=jw(c,l,t,o||t,r);return h===null||typeof o<"u"&&o!==t&&(h=jw(c,l,o,h,r),h===null)?!1:ny(Array.from(c),[""],i,o,()=>UL(e,t,r))}function jw(n,e,t,r,i){for(;t;)t=jL(n,e,t,r,i);return t}function UL(n,e,t){const r=n._getTarget();e in r||(r[e]={});const i=r[e];return Rt(i)&&Be(t)?t:i||{}}function zL(n,e,t,r){let i;for(const o of e)if(i=bI(OL(o,n),t),typeof i<"u")return ry(n,i)?iy(t,r,n,i):i}function bI(n,e){for(const t of e){if(!t)continue;const r=t[n];if(typeof r<"u")return r}}function Uw(n){let e=n._keys;return e||(e=n._keys=BL(n._scopes)),e}function BL(n){const e=new Set;for(const t of n)for(const r of Object.keys(t).filter(i=>!i.startsWith("_")))e.add(r);return Array.from(e)}function sy(){return typeof window<"u"&&typeof document<"u"}function oy(n){let e=n.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function vd(n,e,t){let r;return typeof n=="string"?(r=parseInt(n,10),n.indexOf("%")!==-1&&(r=r/100*e.parentNode[t])):r=n,r}const Gd=n=>n.ownerDocument.defaultView.getComputedStyle(n,null);function $L(n,e){return Gd(n).getPropertyValue(e)}const HL=["top","right","bottom","left"];function oo(n,e,t){const r={};t=t?"-"+t:"";for(let i=0;i<4;i++){const o=HL[i];r[o]=parseFloat(n[e+"-"+o+t])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}const WL=(n,e,t)=>(n>0||e>0)&&(!t||!t.shadowRoot);function qL(n,e){const t=n.touches,r=t&&t.length?t[0]:n,{offsetX:i,offsetY:o}=r;let l=!1,c,h;if(WL(i,o,n.target))c=i,h=o;else{const p=e.getBoundingClientRect();c=r.clientX-p.left,h=r.clientY-p.top,l=!0}return{x:c,y:h,box:l}}function Js(n,e){if("native"in n)return n;const{canvas:t,currentDevicePixelRatio:r}=e,i=Gd(t),o=i.boxSizing==="border-box",l=oo(i,"padding"),c=oo(i,"border","width"),{x:h,y:p,box:g}=qL(n,t),v=l.left+(g&&c.left),w=l.top+(g&&c.top);let{width:T,height:R}=e;return o&&(T-=l.width+c.width,R-=l.height+c.height),{x:Math.round((h-v)/T*t.width/r),y:Math.round((p-w)/R*t.height/r)}}function KL(n,e,t){let r,i;if(e===void 0||t===void 0){const o=n&&oy(n);if(!o)e=n.clientWidth,t=n.clientHeight;else{const l=o.getBoundingClientRect(),c=Gd(o),h=oo(c,"border","width"),p=oo(c,"padding");e=l.width-p.width-h.width,t=l.height-p.height-h.height,r=vd(c.maxWidth,o,"clientWidth"),i=vd(c.maxHeight,o,"clientHeight")}}return{width:e,height:t,maxWidth:r||gd,maxHeight:i||gd}}const os=n=>Math.round(n*10)/10;function GL(n,e,t,r){const i=Gd(n),o=oo(i,"margin"),l=vd(i.maxWidth,n,"clientWidth")||gd,c=vd(i.maxHeight,n,"clientHeight")||gd,h=KL(n,e,t);let{width:p,height:g}=h;if(i.boxSizing==="content-box"){const w=oo(i,"border","width"),T=oo(i,"padding");p-=T.width+w.width,g-=T.height+w.height}return p=Math.max(0,p-o.width),g=Math.max(0,r?p/r:g-o.height),p=os(Math.min(p,l,h.maxWidth)),g=os(Math.min(g,c,h.maxHeight)),p&&!g&&(g=os(p/2)),(e!==void 0||t!==void 0)&&r&&h.height&&g>h.height&&(g=h.height,p=os(Math.floor(g*r))),{width:p,height:g}}function zw(n,e,t){const r=e||1,i=os(n.height*r),o=os(n.width*r);n.height=os(n.height),n.width=os(n.width);const l=n.canvas;return l.style&&(t||!l.style.height&&!l.style.width)&&(l.style.height=`${n.height}px`,l.style.width=`${n.width}px`),n.currentDevicePixelRatio!==r||l.height!==i||l.width!==o?(n.currentDevicePixelRatio=r,l.height=i,l.width=o,n.ctx.setTransform(r,0,0,r,0,0),!0):!1}const QL=(function(){let n=!1;try{const e={get passive(){return n=!0,!1}};sy()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return n})();function Bw(n,e){const t=$L(n,e),r=t&&t.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}const YL=function(n,e){return{x(t){return n+n+e-t},setWidth(t){e=t},textAlign(t){return t==="center"?t:t==="right"?"left":"right"},xPlus(t,r){return t-r},leftForLtr(t,r){return t-r}}},XL=function(){return{x(n){return n},setWidth(n){},textAlign(n){return n},xPlus(n,e){return n+e},leftForLtr(n,e){return n}}};function Na(n,e,t){return n?YL(e,t):XL()}function II(n,e){let t,r;(e==="ltr"||e==="rtl")&&(t=n.canvas.style,r=[t.getPropertyValue("direction"),t.getPropertyPriority("direction")],t.setProperty("direction",e,"important"),n.prevTextDirection=r)}function SI(n,e){e!==void 0&&(delete n.prevTextDirection,n.canvas.style.setProperty("direction",e[0],e[1]))}function Th(n,e,t){return n.options.clip?n[t]:e[t]}function JL(n,e){const{xScale:t,yScale:r}=n;return t&&r?{left:Th(t,e,"left"),right:Th(t,e,"right"),top:Th(r,e,"top"),bottom:Th(r,e,"bottom")}:e}function ZL(n,e){const t=e._clip;if(t.disabled)return!1;const r=JL(e,n.chartArea);return{left:t.left===!1?0:r.left-(t.left===!0?0:t.left),right:t.right===!1?n.width:r.right+(t.right===!0?0:t.right),top:t.top===!1?0:r.top-(t.top===!0?0:t.top),bottom:t.bottom===!1?n.height:r.bottom+(t.bottom===!0?0:t.bottom)}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class eV{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,r,i){const o=t.listeners[i],l=t.duration;o.forEach(c=>c({chart:e,initial:t.initial,numSteps:l,currentStep:Math.min(r-t.start,l)}))}_refresh(){this._request||(this._running=!0,this._request=pI.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let t=0;this._charts.forEach((r,i)=>{if(!r.running||!r.items.length)return;const o=r.items;let l=o.length-1,c=!1,h;for(;l>=0;--l)h=o[l],h._active?(h._total>r.duration&&(r.duration=h._total),h.tick(e),c=!0):(o[l]=o[o.length-1],o.pop());c&&(i.draw(),this._notify(i,r,e,"progress")),o.length||(r.running=!1,this._notify(i,r,e,"complete"),r.initial=!1),t+=o.length}),this._lastDate=e,t===0&&(this._running=!1)}_getAnims(e){const t=this._charts;let r=t.get(e);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,r)),r}listen(e,t,r){this._getAnims(e).listeners[t].push(r)}add(e,t){!t||!t.length||this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){const t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((r,i)=>Math.max(r,i._duration),0),this._refresh())}running(e){if(!this._running)return!1;const t=this._charts.get(e);return!(!t||!t.running||!t.items.length)}stop(e){const t=this._charts.get(e);if(!t||!t.items.length)return;const r=t.items;let i=r.length-1;for(;i>=0;--i)r[i].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var oi=new eV;const $w="transparent",tV={boolean(n,e,t){return t>.5?e:n},color(n,e,t){const r=Ow(n||$w),i=r.valid&&Ow(e||$w);return i&&i.valid?i.mix(r,t).hexString():e},number(n,e,t){return n+(e-n)*t}};class nV{constructor(e,t,r,i){const o=t[r];i=xh([e.to,i,o,e.from]);const l=xh([e.from,o,i]);this._active=!0,this._fn=e.fn||tV[e.type||typeof l],this._easing=gc[e.easing]||gc.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=r,this._from=l,this._to=i,this._promises=void 0}active(){return this._active}update(e,t,r){if(this._active){this._notify(!1);const i=this._target[this._prop],o=r-this._start,l=this._duration-o;this._start=r,this._duration=Math.floor(Math.max(l,e.duration)),this._total+=o,this._loop=!!e.loop,this._to=xh([e.to,t,i,e.from]),this._from=xh([e.from,i,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const t=e-this._start,r=this._duration,i=this._prop,o=this._from,l=this._loop,c=this._to;let h;if(this._active=o!==c&&(l||t<r),!this._active){this._target[i]=c,this._notify(!0);return}if(t<0){this._target[i]=o;return}h=t/r%2,h=l&&h>1?2-h:h,h=this._easing(Math.min(1,Math.max(0,h))),this._target[i]=this._fn(o,c,h)}wait(){const e=this._promises||(this._promises=[]);return new Promise((t,r)=>{e.push({res:t,rej:r})})}_notify(e){const t=e?"res":"rej",r=this._promises||[];for(let i=0;i<r.length;i++)r[i][t]()}}class kI{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!Be(e))return;const t=Object.keys(_t.animation),r=this._properties;Object.getOwnPropertyNames(e).forEach(i=>{const o=e[i];if(!Be(o))return;const l={};for(const c of t)l[c]=o[c];(Rt(o.properties)&&o.properties||[i]).forEach(c=>{(c===i||!r.has(c))&&r.set(c,l)})})}_animateOptions(e,t){const r=t.options,i=iV(e,r);if(!i)return[];const o=this._createAnimations(i,r);return r.$shared&&rV(e.options.$animations,r).then(()=>{e.options=r},()=>{}),o}_createAnimations(e,t){const r=this._properties,i=[],o=e.$animations||(e.$animations={}),l=Object.keys(t),c=Date.now();let h;for(h=l.length-1;h>=0;--h){const p=l[h];if(p.charAt(0)==="$")continue;if(p==="options"){i.push(...this._animateOptions(e,t));continue}const g=t[p];let v=o[p];const w=r.get(p);if(v)if(w&&v.active()){v.update(w,g,c);continue}else v.cancel();if(!w||!w.duration){e[p]=g;continue}o[p]=v=new nV(w,e,p,g),i.push(v)}return i}update(e,t){if(this._properties.size===0){Object.assign(e,t);return}const r=this._createAnimations(e,t);if(r.length)return oi.add(this._chart,r),!0}}function rV(n,e){const t=[],r=Object.keys(e);for(let i=0;i<r.length;i++){const o=n[r[i]];o&&o.active()&&t.push(o.wait())}return Promise.all(t)}function iV(n,e){if(!e)return;let t=n.options;if(!t){n.options=e;return}return t.$shared&&(n.options=t=Object.assign({},t,{$shared:!1,$animations:{}})),t}function Hw(n,e){const t=n&&n.options||{},r=t.reverse,i=t.min===void 0?e:0,o=t.max===void 0?e:0;return{start:r?o:i,end:r?i:o}}function sV(n,e,t){if(t===!1)return!1;const r=Hw(n,t),i=Hw(e,t);return{top:i.end,right:r.end,bottom:i.start,left:r.start}}function oV(n){let e,t,r,i;return Be(n)?(e=n.top,t=n.right,r=n.bottom,i=n.left):e=t=r=i=n,{top:e,right:t,bottom:r,left:i,disabled:n===!1}}function AI(n,e){const t=[],r=n._getSortedDatasetMetas(e);let i,o;for(i=0,o=r.length;i<o;++i)t.push(r[i].index);return t}function Ww(n,e,t,r={}){const i=n.keys,o=r.mode==="single";let l,c,h,p;if(e===null)return;let g=!1;for(l=0,c=i.length;l<c;++l){if(h=+i[l],h===t){if(g=!0,r.all)continue;break}p=n.values[h],Wn(p)&&(o||e===0||ds(e)===ds(p))&&(e+=p)}return!g&&!r.all?0:e}function aV(n,e){const{iScale:t,vScale:r}=e,i=t.axis==="x"?"x":"y",o=r.axis==="x"?"x":"y",l=Object.keys(n),c=new Array(l.length);let h,p,g;for(h=0,p=l.length;h<p;++h)g=l[h],c[h]={[i]:g,[o]:n[g]};return c}function Qp(n,e){const t=n&&n.options.stacked;return t||t===void 0&&e.stack!==void 0}function lV(n,e,t){return`${n.id}.${e.id}.${t.stack||t.type}`}function cV(n){const{min:e,max:t,minDefined:r,maxDefined:i}=n.getUserBounds();return{min:r?e:Number.NEGATIVE_INFINITY,max:i?t:Number.POSITIVE_INFINITY}}function uV(n,e,t){const r=n[e]||(n[e]={});return r[t]||(r[t]={})}function qw(n,e,t,r){for(const i of e.getMatchingVisibleMetas(r).reverse()){const o=n[i.index];if(t&&o>0||!t&&o<0)return i.index}return null}function Kw(n,e){const{chart:t,_cachedMeta:r}=n,i=t._stacks||(t._stacks={}),{iScale:o,vScale:l,index:c}=r,h=o.axis,p=l.axis,g=lV(o,l,r),v=e.length;let w;for(let T=0;T<v;++T){const R=e[T],{[h]:P,[p]:A}=R,F=R._stacks||(R._stacks={});w=F[p]=uV(i,g,P),w[c]=A,w._top=qw(w,l,!0,r.type),w._bottom=qw(w,l,!1,r.type);const z=w._visualValues||(w._visualValues={});z[c]=A}}function Yp(n,e){const t=n.scales;return Object.keys(t).filter(r=>t[r].axis===e).shift()}function hV(n,e){return Ka(n,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function dV(n,e,t){return Ka(n,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:t,index:e,mode:"default",type:"data"})}function ql(n,e){const t=n.controller.index,r=n.vScale&&n.vScale.axis;if(r){e=e||n._parsed;for(const i of e){const o=i._stacks;if(!o||o[r]===void 0||o[r][t]===void 0)return;delete o[r][t],o[r]._visualValues!==void 0&&o[r]._visualValues[t]!==void 0&&delete o[r]._visualValues[t]}}}const Xp=n=>n==="reset"||n==="none",Gw=(n,e)=>e?n:Object.assign({},n),fV=(n,e,t)=>n&&!e.hidden&&e._stacked&&{keys:AI(t,!0),values:null};class ay{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(e,t){this.chart=e,this._ctx=e.ctx,this.index=t,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=Qp(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&ql(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,t=this._cachedMeta,r=this.getDataset(),i=(v,w,T,R)=>v==="x"?w:v==="r"?R:T,o=t.xAxisID=ze(r.xAxisID,Yp(e,"x")),l=t.yAxisID=ze(r.yAxisID,Yp(e,"y")),c=t.rAxisID=ze(r.rAxisID,Yp(e,"r")),h=t.indexAxis,p=t.iAxisID=i(h,o,l,c),g=t.vAxisID=i(h,l,o,c);t.xScale=this.getScaleForId(o),t.yScale=this.getScaleForId(l),t.rScale=this.getScaleForId(c),t.iScale=this.getScaleForId(p),t.vScale=this.getScaleForId(g)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&Pw(this._data,this),e._stacked&&ql(e)}_dataCheck(){const e=this.getDataset(),t=e.data||(e.data=[]),r=this._data;if(Be(t)){const i=this._cachedMeta;this._data=aV(t,i)}else if(r!==t){if(r){Pw(r,this);const i=this._cachedMeta;ql(i),i._parsed=[]}t&&Object.isExtensible(t)&&fL(t,this),this._syncList=[],this._data=t}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const t=this._cachedMeta,r=this.getDataset();let i=!1;this._dataCheck();const o=t._stacked;t._stacked=Qp(t.vScale,t),t.stack!==r.stack&&(i=!0,ql(t),t.stack=r.stack),this._resyncElements(e),(i||o!==t._stacked)&&(Kw(this,t._parsed),t._stacked=Qp(t.vScale,t))}configure(){const e=this.chart.config,t=e.datasetScopeKeys(this._type),r=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,t){const{_cachedMeta:r,_data:i}=this,{iScale:o,_stacked:l}=r,c=o.axis;let h=e===0&&t===i.length?!0:r._sorted,p=e>0&&r._parsed[e-1],g,v,w;if(this._parsing===!1)r._parsed=i,r._sorted=!0,w=i;else{Rt(i[e])?w=this.parseArrayData(r,i,e,t):Be(i[e])?w=this.parseObjectData(r,i,e,t):w=this.parsePrimitiveData(r,i,e,t);const T=()=>v[c]===null||p&&v[c]<p[c];for(g=0;g<t;++g)r._parsed[g+e]=v=w[g],h&&(T()&&(h=!1),p=v);r._sorted=h}l&&Kw(this,w)}parsePrimitiveData(e,t,r,i){const{iScale:o,vScale:l}=e,c=o.axis,h=l.axis,p=o.getLabels(),g=o===l,v=new Array(i);let w,T,R;for(w=0,T=i;w<T;++w)R=w+r,v[w]={[c]:g||o.parse(p[R],R),[h]:l.parse(t[R],R)};return v}parseArrayData(e,t,r,i){const{xScale:o,yScale:l}=e,c=new Array(i);let h,p,g,v;for(h=0,p=i;h<p;++h)g=h+r,v=t[g],c[h]={x:o.parse(v[0],g),y:l.parse(v[1],g)};return c}parseObjectData(e,t,r,i){const{xScale:o,yScale:l}=e,{xAxisKey:c="x",yAxisKey:h="y"}=this._parsing,p=new Array(i);let g,v,w,T;for(g=0,v=i;g<v;++g)w=g+r,T=t[w],p[g]={x:o.parse(mo(T,c),w),y:l.parse(mo(T,h),w)};return p}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,t,r){const i=this.chart,o=this._cachedMeta,l=t[e.axis],c={keys:AI(i,!0),values:t._stacks[e.axis]._visualValues};return Ww(c,l,o.index,{mode:r})}updateRangeFromParsed(e,t,r,i){const o=r[t.axis];let l=o===null?NaN:o;const c=i&&r._stacks[t.axis];i&&c&&(i.values=c,l=Ww(i,o,this._cachedMeta.index)),e.min=Math.min(e.min,l),e.max=Math.max(e.max,l)}getMinMax(e,t){const r=this._cachedMeta,i=r._parsed,o=r._sorted&&e===r.iScale,l=i.length,c=this._getOtherScale(e),h=fV(t,r,this.chart),p={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:g,max:v}=cV(c);let w,T;function R(){T=i[w];const P=T[c.axis];return!Wn(T[e.axis])||g>P||v<P}for(w=0;w<l&&!(!R()&&(this.updateRangeFromParsed(p,e,T,h),o));++w);if(o){for(w=l-1;w>=0;--w)if(!R()){this.updateRangeFromParsed(p,e,T,h);break}}return p}getAllParsedValues(e){const t=this._cachedMeta._parsed,r=[];let i,o,l;for(i=0,o=t.length;i<o;++i)l=t[i][e.axis],Wn(l)&&r.push(l);return r}getMaxOverflow(){return!1}getLabelAndValue(e){const t=this._cachedMeta,r=t.iScale,i=t.vScale,o=this.getParsed(e);return{label:r?""+r.getLabelForValue(o[r.axis]):"",value:i?""+i.getLabelForValue(o[i.axis]):""}}_update(e){const t=this._cachedMeta;this.update(e||"default"),t._clip=oV(ze(this.options.clip,sV(t.xScale,t.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,t=this.chart,r=this._cachedMeta,i=r.data||[],o=t.chartArea,l=[],c=this._drawStart||0,h=this._drawCount||i.length-c,p=this.options.drawActiveElementsOnTop;let g;for(r.dataset&&r.dataset.draw(e,o,c,h),g=c;g<c+h;++g){const v=i[g];v.hidden||(v.active&&p?l.push(v):v.draw(e,o))}for(g=0;g<l.length;++g)l[g].draw(e,o)}getStyle(e,t){const r=t?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(e||0,r)}getContext(e,t,r){const i=this.getDataset();let o;if(e>=0&&e<this._cachedMeta.data.length){const l=this._cachedMeta.data[e];o=l.$context||(l.$context=dV(this.getContext(),e,l)),o.parsed=this.getParsed(e),o.raw=i.data[e],o.index=o.dataIndex=e}else o=this.$context||(this.$context=hV(this.chart.getContext(),this.index)),o.dataset=i,o.index=o.datasetIndex=this.index;return o.active=!!t,o.mode=r,o}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}_resolveElementOptions(e,t="default",r){const i=t==="active",o=this._cachedDataOpts,l=e+"-"+t,c=o[l],h=this.enableOptionSharing&&Rc(r);if(c)return Gw(c,h);const p=this.chart.config,g=p.datasetElementScopeKeys(this._type,e),v=i?[`${e}Hover`,"hover",e,""]:[e,""],w=p.getOptionScopes(this.getDataset(),g),T=Object.keys(_t.elements[e]),R=()=>this.getContext(r,i,t),P=p.resolveNamedOptions(w,T,R,v);return P.$shared&&(P.$shared=h,o[l]=Object.freeze(Gw(P,h))),P}_resolveAnimations(e,t,r){const i=this.chart,o=this._cachedDataOpts,l=`animation-${t}`,c=o[l];if(c)return c;let h;if(i.options.animation!==!1){const g=this.chart.config,v=g.datasetAnimationScopeKeys(this._type,t),w=g.getOptionScopes(this.getDataset(),v);h=g.createResolver(w,this.getContext(e,r,t))}const p=new kI(i,h&&h.animations);return h&&h._cacheable&&(o[l]=Object.freeze(p)),p}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,t){return!t||Xp(e)||this.chart._animationsDisabled}_getSharedOptions(e,t){const r=this.resolveDataElementOptions(e,t),i=this._sharedOptions,o=this.getSharedOptions(r),l=this.includeOptions(t,o)||o!==i;return this.updateSharedOptions(o,t,r),{sharedOptions:o,includeOptions:l}}updateElement(e,t,r,i){Xp(i)?Object.assign(e,r):this._resolveAnimations(t,i).update(e,r)}updateSharedOptions(e,t,r){e&&!Xp(t)&&this._resolveAnimations(void 0,t).update(e,r)}_setStyle(e,t,r,i){e.active=i;const o=this.getStyle(t,i);this._resolveAnimations(t,r,i).update(e,{options:!i&&this.getSharedOptions(o)||o})}removeHoverStyle(e,t,r){this._setStyle(e,r,"active",!1)}setHoverStyle(e,t,r){this._setStyle(e,r,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const t=this._data,r=this._cachedMeta.data;for(const[c,h,p]of this._syncList)this[c](h,p);this._syncList=[];const i=r.length,o=t.length,l=Math.min(o,i);l&&this.parse(0,l),o>i?this._insertElements(i,o-i,e):o<i&&this._removeElements(o,i-o)}_insertElements(e,t,r=!0){const i=this._cachedMeta,o=i.data,l=e+t;let c;const h=p=>{for(p.length+=t,c=p.length-1;c>=l;c--)p[c]=p[c-t]};for(h(o),c=e;c<l;++c)o[c]=new this.dataElementType;this._parsing&&h(i._parsed),this.parse(e,t),r&&this.updateElements(o,e,t,"reset")}updateElements(e,t,r,i){}_removeElements(e,t){const r=this._cachedMeta;if(this._parsing){const i=r._parsed.splice(e,t);r._stacked&&ql(r,i)}r.data.splice(e,t)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[t,r,i]=e;this[t](r,i)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,t){t&&this._sync(["_removeElements",e,t]);const r=arguments.length-2;r&&this._sync(["_insertElements",e,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function pV(n,e){if(!n._cache.$bar){const t=n.getMatchingVisibleMetas(e);let r=[];for(let i=0,o=t.length;i<o;i++)r=r.concat(t[i].controller.getAllParsedValues(n));n._cache.$bar=fI(r.sort((i,o)=>i-o))}return n._cache.$bar}function gV(n){const e=n.iScale,t=pV(e,n.type);let r=e._length,i,o,l,c;const h=()=>{l===32767||l===-32768||(Rc(c)&&(r=Math.min(r,Math.abs(l-c)||r)),c=l)};for(i=0,o=t.length;i<o;++i)l=e.getPixelForValue(t[i]),h();for(c=void 0,i=0,o=e.ticks.length;i<o;++i)l=e.getPixelForTick(i),h();return r}function mV(n,e,t,r){const i=t.barThickness;let o,l;return Je(i)?(o=e.min*t.categoryPercentage,l=t.barPercentage):(o=i*r,l=1),{chunk:o/r,ratio:l,start:e.pixels[n]-o/2}}function yV(n,e,t,r){const i=e.pixels,o=i[n];let l=n>0?i[n-1]:null,c=n<i.length-1?i[n+1]:null;const h=t.categoryPercentage;l===null&&(l=o-(c===null?e.end-e.start:c-o)),c===null&&(c=o+o-l);const p=o-(o-Math.min(l,c))/2*h;return{chunk:Math.abs(c-l)/2*h/r,ratio:t.barPercentage,start:p}}function _V(n,e,t,r){const i=t.parse(n[0],r),o=t.parse(n[1],r),l=Math.min(i,o),c=Math.max(i,o);let h=l,p=c;Math.abs(l)>Math.abs(c)&&(h=c,p=l),e[t.axis]=p,e._custom={barStart:h,barEnd:p,start:i,end:o,min:l,max:c}}function RI(n,e,t,r){return Rt(n)?_V(n,e,t,r):e[t.axis]=t.parse(n,r),e}function Qw(n,e,t,r){const i=n.iScale,o=n.vScale,l=i.getLabels(),c=i===o,h=[];let p,g,v,w;for(p=t,g=t+r;p<g;++p)w=e[p],v={},v[i.axis]=c||i.parse(l[p],p),h.push(RI(w,v,o,p));return h}function Jp(n){return n&&n.barStart!==void 0&&n.barEnd!==void 0}function vV(n,e,t){return n!==0?ds(n):(e.isHorizontal()?1:-1)*(e.min>=t?1:-1)}function wV(n){let e,t,r,i,o;return n.horizontal?(e=n.base>n.x,t="left",r="right"):(e=n.base<n.y,t="bottom",r="top"),e?(i="end",o="start"):(i="start",o="end"),{start:t,end:r,reverse:e,top:i,bottom:o}}function EV(n,e,t,r){let i=e.borderSkipped;const o={};if(!i){n.borderSkipped=o;return}if(i===!0){n.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:l,end:c,reverse:h,top:p,bottom:g}=wV(n);i==="middle"&&t&&(n.enableBorderRadius=!0,(t._top||0)===r?i=p:(t._bottom||0)===r?i=g:(o[Yw(g,l,c,h)]=!0,i=p)),o[Yw(i,l,c,h)]=!0,n.borderSkipped=o}function Yw(n,e,t,r){return r?(n=xV(n,e,t),n=Xw(n,t,e)):n=Xw(n,e,t),n}function xV(n,e,t){return n===e?t:n===t?e:n}function Xw(n,e,t){return n==="start"?e:n==="end"?t:n}function TV(n,{inflateAmount:e},t){n.inflateAmount=e==="auto"?t===1?.33:0:e}class bV extends ay{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(e,t,r,i){return Qw(e,t,r,i)}parseArrayData(e,t,r,i){return Qw(e,t,r,i)}parseObjectData(e,t,r,i){const{iScale:o,vScale:l}=e,{xAxisKey:c="x",yAxisKey:h="y"}=this._parsing,p=o.axis==="x"?c:h,g=l.axis==="x"?c:h,v=[];let w,T,R,P;for(w=r,T=r+i;w<T;++w)P=t[w],R={},R[o.axis]=o.parse(mo(P,p),w),v.push(RI(mo(P,g),R,l,w));return v}updateRangeFromParsed(e,t,r,i){super.updateRangeFromParsed(e,t,r,i);const o=r._custom;o&&t===this._cachedMeta.vScale&&(e.min=Math.min(e.min,o.min),e.max=Math.max(e.max,o.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const t=this._cachedMeta,{iScale:r,vScale:i}=t,o=this.getParsed(e),l=o._custom,c=Jp(l)?"["+l.start+", "+l.end+"]":""+i.getLabelForValue(o[i.axis]);return{label:""+r.getLabelForValue(o[r.axis]),value:c}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const t=this._cachedMeta;this.updateElements(t.data,0,t.data.length,e)}updateElements(e,t,r,i){const o=i==="reset",{index:l,_cachedMeta:{vScale:c}}=this,h=c.getBasePixel(),p=c.isHorizontal(),g=this._getRuler(),{sharedOptions:v,includeOptions:w}=this._getSharedOptions(t,i);for(let T=t;T<t+r;T++){const R=this.getParsed(T),P=o||Je(R[c.axis])?{base:h,head:h}:this._calculateBarValuePixels(T),A=this._calculateBarIndexPixels(T,g),F=(R._stacks||{})[c.axis],z={horizontal:p,base:P.base,enableBorderRadius:!F||Jp(R._custom)||l===F._top||l===F._bottom,x:p?P.head:A.center,y:p?A.center:P.head,height:p?A.size:Math.abs(P.size),width:p?Math.abs(P.size):A.size};w&&(z.options=v||this.resolveDataElementOptions(T,e[T].active?"active":i));const H=z.options||e[T].options;EV(z,H,F,l),TV(z,H,g.ratio),this.updateElement(e[T],T,z,i)}}_getStacks(e,t){const{iScale:r}=this._cachedMeta,i=r.getMatchingVisibleMetas(this._type).filter(g=>g.controller.options.grouped),o=r.options.stacked,l=[],c=this._cachedMeta.controller.getParsed(t),h=c&&c[r.axis],p=g=>{const v=g._parsed.find(T=>T[r.axis]===h),w=v&&v[g.vScale.axis];if(Je(w)||isNaN(w))return!0};for(const g of i)if(!(t!==void 0&&p(g))&&((o===!1||l.indexOf(g.stack)===-1||o===void 0&&g.stack===void 0)&&l.push(g.stack),g.index===e))break;return l.length||l.push(void 0),l}_getStackCount(e){return this._getStacks(void 0,e).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const e=this.chart.scales,t=this.chart.options.indexAxis;return Object.keys(e).filter(r=>e[r].axis===t).shift()}_getAxis(){const e={},t=this.getFirstScaleIdForIndexAxis();for(const r of this.chart.data.datasets)e[ze(this.chart.options.indexAxis==="x"?r.xAxisID:r.yAxisID,t)]=!0;return Object.keys(e)}_getStackIndex(e,t,r){const i=this._getStacks(e,r),o=t!==void 0?i.indexOf(t):-1;return o===-1?i.length-1:o}_getRuler(){const e=this.options,t=this._cachedMeta,r=t.iScale,i=[];let o,l;for(o=0,l=t.data.length;o<l;++o)i.push(r.getPixelForValue(this.getParsed(o)[r.axis],o));const c=e.barThickness;return{min:c||gV(t),pixels:i,start:r._startPixel,end:r._endPixel,stackCount:this._getStackCount(),scale:r,grouped:e.grouped,ratio:c?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:t,_stacked:r,index:i},options:{base:o,minBarLength:l}}=this,c=o||0,h=this.getParsed(e),p=h._custom,g=Jp(p);let v=h[t.axis],w=0,T=r?this.applyStack(t,h,r):v,R,P;T!==v&&(w=T-v,T=v),g&&(v=p.barStart,T=p.barEnd-p.barStart,v!==0&&ds(v)!==ds(p.barEnd)&&(w=0),w+=v);const A=!Je(o)&&!g?o:w;let F=t.getPixelForValue(A);if(this.chart.getDataVisibility(e)?R=t.getPixelForValue(w+T):R=F,P=R-F,Math.abs(P)<l){P=vV(P,t,c)*l,v===c&&(F-=P/2);const z=t.getPixelForDecimal(0),H=t.getPixelForDecimal(1),K=Math.min(z,H),Q=Math.max(z,H);F=Math.max(Math.min(F,Q),K),R=F+P,r&&!g&&(h._stacks[t.axis]._visualValues[i]=t.getValueForPixel(R)-t.getValueForPixel(F))}if(F===t.getPixelForValue(c)){const z=ds(P)*t.getLineWidthForValue(c)/2;F+=z,P-=z}return{size:P,base:F,head:R,center:R+P/2}}_calculateBarIndexPixels(e,t){const r=t.scale,i=this.options,o=i.skipNull,l=ze(i.maxBarThickness,1/0);let c,h;const p=this._getAxisCount();if(t.grouped){const g=o?this._getStackCount(e):t.stackCount,v=i.barThickness==="flex"?yV(e,t,i,g*p):mV(e,t,i,g*p),w=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,T=this._getAxis().indexOf(ze(w,this.getFirstScaleIdForIndexAxis())),R=this._getStackIndex(this.index,this._cachedMeta.stack,o?e:void 0)+T;c=v.start+v.chunk*R+v.chunk/2,h=Math.min(l,v.chunk*v.ratio)}else c=r.getPixelForValue(this.getParsed(e)[r.axis],e),h=Math.min(l,t.min*t.ratio);return{base:c-h/2,head:c+h/2,center:c,size:h}}draw(){const e=this._cachedMeta,t=e.vScale,r=e.data,i=r.length;let o=0;for(;o<i;++o)this.getParsed(o)[t.axis]!==null&&!r[o].hidden&&r[o].draw(this._ctx)}}function IV(n,e,t){let r=1,i=1,o=0,l=0;if(e<bt){const c=n,h=c+e,p=Math.cos(c),g=Math.sin(c),v=Math.cos(h),w=Math.sin(h),T=(H,K,Q)=>yd(H,c,h,!0)?1:Math.max(K,K*t,Q,Q*t),R=(H,K,Q)=>yd(H,c,h,!0)?-1:Math.min(K,K*t,Q,Q*t),P=T(0,p,v),A=T(Ct,g,w),F=R(Xe,p,v),z=R(Xe+Ct,g,w);r=(P-F)/2,i=(A-z)/2,o=-(P+F)/2,l=-(A+z)/2}return{ratioX:r,ratioY:i,offsetX:o,offsetY:l}}class SV extends ay{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data,{labels:{pointStyle:r,textAlign:i,color:o,useBorderRadius:l,borderRadius:c}}=e.legend.options;return t.labels.length&&t.datasets.length?t.labels.map((h,p)=>{const v=e.getDatasetMeta(0).controller.getStyle(p);return{text:h,fillStyle:v.backgroundColor,fontColor:o,hidden:!e.getDataVisibility(p),lineDash:v.borderDash,lineDashOffset:v.borderDashOffset,lineJoin:v.borderJoinStyle,lineWidth:v.borderWidth,strokeStyle:v.borderColor,textAlign:i,pointStyle:r,borderRadius:l&&(c||v.borderRadius),index:p}}):[]}},onClick(e,t,r){r.chart.toggleDataVisibility(t.index),r.chart.update()}}}};constructor(e,t){super(e,t),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,t){const r=this.getDataset().data,i=this._cachedMeta;if(this._parsing===!1)i._parsed=r;else{let o=h=>+r[h];if(Be(r[e])){const{key:h="value"}=this._parsing;o=p=>+mo(r[p],h)}let l,c;for(l=e,c=e+t;l<c;++l)i._parsed[l]=o(l)}}_getRotation(){return di(this.options.rotation-90)}_getCircumference(){return di(this.options.circumference)}_getRotationExtents(){let e=bt,t=-bt;for(let r=0;r<this.chart.data.datasets.length;++r)if(this.chart.isDatasetVisible(r)&&this.chart.getDatasetMeta(r).type===this._type){const i=this.chart.getDatasetMeta(r).controller,o=i._getRotation(),l=i._getCircumference();e=Math.min(e,o),t=Math.max(t,o+l)}return{rotation:e,circumference:t-e}}update(e){const t=this.chart,{chartArea:r}=t,i=this._cachedMeta,o=i.data,l=this.getMaxBorderWidth()+this.getMaxOffset(o)+this.options.spacing,c=Math.max((Math.min(r.width,r.height)-l)/2,0),h=Math.min(XM(this.options.cutout,c),1),p=this._getRingWeight(this.index),{circumference:g,rotation:v}=this._getRotationExtents(),{ratioX:w,ratioY:T,offsetX:R,offsetY:P}=IV(v,g,h),A=(r.width-l)/w,F=(r.height-l)/T,z=Math.max(Math.min(A,F)/2,0),H=lI(this.options.radius,z),K=Math.max(H*h,0),Q=(H-K)/this._getVisibleDatasetWeightTotal();this.offsetX=R*H,this.offsetY=P*H,i.total=this.calculateTotal(),this.outerRadius=H-Q*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-Q*p,0),this.updateElements(o,0,o.length,e)}_circumference(e,t){const r=this.options,i=this._cachedMeta,o=this._getCircumference();return t&&r.animation.animateRotate||!this.chart.getDataVisibility(e)||i._parsed[e]===null||i.data[e].hidden?0:this.calculateCircumference(i._parsed[e]*o/bt)}updateElements(e,t,r,i){const o=i==="reset",l=this.chart,c=l.chartArea,p=l.options.animation,g=(c.left+c.right)/2,v=(c.top+c.bottom)/2,w=o&&p.animateScale,T=w?0:this.innerRadius,R=w?0:this.outerRadius,{sharedOptions:P,includeOptions:A}=this._getSharedOptions(t,i);let F=this._getRotation(),z;for(z=0;z<t;++z)F+=this._circumference(z,o);for(z=t;z<t+r;++z){const H=this._circumference(z,o),K=e[z],Q={x:g+this.offsetX,y:v+this.offsetY,startAngle:F,endAngle:F+H,circumference:H,outerRadius:R,innerRadius:T};A&&(Q.options=P||this.resolveDataElementOptions(z,K.active?"active":i)),F+=H,this.updateElement(K,z,Q,i)}}calculateTotal(){const e=this._cachedMeta,t=e.data;let r=0,i;for(i=0;i<t.length;i++){const o=e._parsed[i];o!==null&&!isNaN(o)&&this.chart.getDataVisibility(i)&&!t[i].hidden&&(r+=Math.abs(o))}return r}calculateCircumference(e){const t=this._cachedMeta.total;return t>0&&!isNaN(e)?bt*(Math.abs(e)/t):0}getLabelAndValue(e){const t=this._cachedMeta,r=this.chart,i=r.data.labels||[],o=Jm(t._parsed[e],r.options.locale);return{label:i[e]||"",value:o}}getMaxBorderWidth(e){let t=0;const r=this.chart;let i,o,l,c,h;if(!e){for(i=0,o=r.data.datasets.length;i<o;++i)if(r.isDatasetVisible(i)){l=r.getDatasetMeta(i),e=l.data,c=l.controller;break}}if(!e)return 0;for(i=0,o=e.length;i<o;++i)h=c.resolveDataElementOptions(i),h.borderAlign!=="inner"&&(t=Math.max(t,h.borderWidth||0,h.hoverBorderWidth||0));return t}getMaxOffset(e){let t=0;for(let r=0,i=e.length;r<i;++r){const o=this.resolveDataElementOptions(r);t=Math.max(t,o.offset||0,o.hoverOffset||0)}return t}_getRingWeightOffset(e){let t=0;for(let r=0;r<e;++r)this.chart.isDatasetVisible(r)&&(t+=this._getRingWeight(r));return t}_getRingWeight(e){return Math.max(ze(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}class kV extends SV{static id="pie";static defaults={cutout:0,rotation:0,circumference:360,radius:"100%"}}function Ys(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class ly{static override(e){Object.assign(ly.prototype,e)}options;constructor(e){this.options=e||{}}init(){}formats(){return Ys()}parse(){return Ys()}format(){return Ys()}add(){return Ys()}diff(){return Ys()}startOf(){return Ys()}endOf(){return Ys()}}var AV={_date:ly};function RV(n,e,t,r){const{controller:i,data:o,_sorted:l}=n,c=i._cachedMeta.iScale,h=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null;if(c&&e===c.axis&&e!=="r"&&l&&o.length){const p=c._reversePixels?hL:Fg;if(r){if(i._sharedOptions){const g=o[0],v=typeof g.getRange=="function"&&g.getRange(e);if(v){const w=p(o,e,t-v),T=p(o,e,t+v);return{lo:w.lo,hi:T.hi}}}}else{const g=p(o,e,t);if(h){const{vScale:v}=i._cachedMeta,{_parsed:w}=n,T=w.slice(0,g.lo+1).reverse().findIndex(P=>!Je(P[v.axis]));g.lo-=Math.max(0,T);const R=w.slice(g.hi).findIndex(P=>!Je(P[v.axis]));g.hi+=Math.max(0,R)}return g}}return{lo:0,hi:o.length-1}}function Qd(n,e,t,r,i){const o=n.getSortedVisibleDatasetMetas(),l=t[e];for(let c=0,h=o.length;c<h;++c){const{index:p,data:g}=o[c],{lo:v,hi:w}=RV(o[c],e,l,i);for(let T=v;T<=w;++T){const R=g[T];R.skip||r(R,p,T)}}}function CV(n){const e=n.indexOf("x")!==-1,t=n.indexOf("y")!==-1;return function(r,i){const o=e?Math.abs(r.x-i.x):0,l=t?Math.abs(r.y-i.y):0;return Math.sqrt(Math.pow(o,2)+Math.pow(l,2))}}function Zp(n,e,t,r,i){const o=[];return!i&&!n.isPointInArea(e)||Qd(n,t,e,function(c,h,p){!i&&!vI(c,n.chartArea,0)||c.inRange(e.x,e.y,r)&&o.push({element:c,datasetIndex:h,index:p})},!0),o}function PV(n,e,t,r){let i=[];function o(l,c,h){const{startAngle:p,endAngle:g}=l.getProps(["startAngle","endAngle"],r),{angle:v}=hI(l,{x:e.x,y:e.y});yd(v,p,g)&&i.push({element:l,datasetIndex:c,index:h})}return Qd(n,t,e,o),i}function NV(n,e,t,r,i,o){let l=[];const c=CV(t);let h=Number.POSITIVE_INFINITY;function p(g,v,w){const T=g.inRange(e.x,e.y,i);if(r&&!T)return;const R=g.getCenterPoint(i);if(!(!!o||n.isPointInArea(R))&&!T)return;const A=c(e,R);A<h?(l=[{element:g,datasetIndex:v,index:w}],h=A):A===h&&l.push({element:g,datasetIndex:v,index:w})}return Qd(n,t,e,p),l}function eg(n,e,t,r,i,o){return!o&&!n.isPointInArea(e)?[]:t==="r"&&!r?PV(n,e,t,i):NV(n,e,t,r,i,o)}function Jw(n,e,t,r,i){const o=[],l=t==="x"?"inXRange":"inYRange";let c=!1;return Qd(n,t,e,(h,p,g)=>{h[l]&&h[l](e[t],i)&&(o.push({element:h,datasetIndex:p,index:g}),c=c||h.inRange(e.x,e.y,i))}),r&&!c?[]:o}var DV={modes:{index(n,e,t,r){const i=Js(e,n),o=t.axis||"x",l=t.includeInvisible||!1,c=t.intersect?Zp(n,i,o,r,l):eg(n,i,o,!1,r,l),h=[];return c.length?(n.getSortedVisibleDatasetMetas().forEach(p=>{const g=c[0].index,v=p.data[g];v&&!v.skip&&h.push({element:v,datasetIndex:p.index,index:g})}),h):[]},dataset(n,e,t,r){const i=Js(e,n),o=t.axis||"xy",l=t.includeInvisible||!1;let c=t.intersect?Zp(n,i,o,r,l):eg(n,i,o,!1,r,l);if(c.length>0){const h=c[0].datasetIndex,p=n.getDatasetMeta(h).data;c=[];for(let g=0;g<p.length;++g)c.push({element:p[g],datasetIndex:h,index:g})}return c},point(n,e,t,r){const i=Js(e,n),o=t.axis||"xy",l=t.includeInvisible||!1;return Zp(n,i,o,r,l)},nearest(n,e,t,r){const i=Js(e,n),o=t.axis||"xy",l=t.includeInvisible||!1;return eg(n,i,o,t.intersect,r,l)},x(n,e,t,r){const i=Js(e,n);return Jw(n,i,"x",t.intersect,r)},y(n,e,t,r){const i=Js(e,n);return Jw(n,i,"y",t.intersect,r)}}};const CI=["left","top","right","bottom"];function Kl(n,e){return n.filter(t=>t.pos===e)}function Zw(n,e){return n.filter(t=>CI.indexOf(t.pos)===-1&&t.box.axis===e)}function Gl(n,e){return n.sort((t,r)=>{const i=e?r:t,o=e?t:r;return i.weight===o.weight?i.index-o.index:i.weight-o.weight})}function OV(n){const e=[];let t,r,i,o,l,c;for(t=0,r=(n||[]).length;t<r;++t)i=n[t],{position:o,options:{stack:l,stackWeight:c=1}}=i,e.push({index:t,box:i,pos:o,horizontal:i.isHorizontal(),weight:i.weight,stack:l&&o+l,stackWeight:c});return e}function MV(n){const e={};for(const t of n){const{stack:r,pos:i,stackWeight:o}=t;if(!r||!CI.includes(i))continue;const l=e[r]||(e[r]={count:0,placed:0,weight:0,size:0});l.count++,l.weight+=o}return e}function LV(n,e){const t=MV(n),{vBoxMaxWidth:r,hBoxMaxHeight:i}=e;let o,l,c;for(o=0,l=n.length;o<l;++o){c=n[o];const{fullSize:h}=c.box,p=t[c.stack],g=p&&c.stackWeight/p.weight;c.horizontal?(c.width=g?g*r:h&&e.availableWidth,c.height=i):(c.width=r,c.height=g?g*i:h&&e.availableHeight)}return t}function VV(n){const e=OV(n),t=Gl(e.filter(p=>p.box.fullSize),!0),r=Gl(Kl(e,"left"),!0),i=Gl(Kl(e,"right")),o=Gl(Kl(e,"top"),!0),l=Gl(Kl(e,"bottom")),c=Zw(e,"x"),h=Zw(e,"y");return{fullSize:t,leftAndTop:r.concat(o),rightAndBottom:i.concat(h).concat(l).concat(c),chartArea:Kl(e,"chartArea"),vertical:r.concat(i).concat(h),horizontal:o.concat(l).concat(c)}}function eE(n,e,t,r){return Math.max(n[t],e[t])+Math.max(n[r],e[r])}function PI(n,e){n.top=Math.max(n.top,e.top),n.left=Math.max(n.left,e.left),n.bottom=Math.max(n.bottom,e.bottom),n.right=Math.max(n.right,e.right)}function FV(n,e,t,r){const{pos:i,box:o}=t,l=n.maxPadding;if(!Be(i)){t.size&&(n[i]-=t.size);const v=r[t.stack]||{size:0,count:1};v.size=Math.max(v.size,t.horizontal?o.height:o.width),t.size=v.size/v.count,n[i]+=t.size}o.getPadding&&PI(l,o.getPadding());const c=Math.max(0,e.outerWidth-eE(l,n,"left","right")),h=Math.max(0,e.outerHeight-eE(l,n,"top","bottom")),p=c!==n.w,g=h!==n.h;return n.w=c,n.h=h,t.horizontal?{same:p,other:g}:{same:g,other:p}}function jV(n){const e=n.maxPadding;function t(r){const i=Math.max(e[r]-n[r],0);return n[r]+=i,i}n.y+=t("top"),n.x+=t("left"),t("right"),t("bottom")}function UV(n,e){const t=e.maxPadding;function r(i){const o={left:0,top:0,right:0,bottom:0};return i.forEach(l=>{o[l]=Math.max(e[l],t[l])}),o}return r(n?["left","right"]:["top","bottom"])}function ic(n,e,t,r){const i=[];let o,l,c,h,p,g;for(o=0,l=n.length,p=0;o<l;++o){c=n[o],h=c.box,h.update(c.width||e.w,c.height||e.h,UV(c.horizontal,e));const{same:v,other:w}=FV(e,t,c,r);p|=v&&i.length,g=g||w,h.fullSize||i.push(c)}return p&&ic(i,e,t,r)||g}function bh(n,e,t,r,i){n.top=t,n.left=e,n.right=e+r,n.bottom=t+i,n.width=r,n.height=i}function tE(n,e,t,r){const i=t.padding;let{x:o,y:l}=e;for(const c of n){const h=c.box,p=r[c.stack]||{placed:0,weight:1},g=c.stackWeight/p.weight||1;if(c.horizontal){const v=e.w*g,w=p.size||h.height;Rc(p.start)&&(l=p.start),h.fullSize?bh(h,i.left,l,t.outerWidth-i.right-i.left,w):bh(h,e.left+p.placed,l,v,w),p.start=l,p.placed+=v,l=h.bottom}else{const v=e.h*g,w=p.size||h.width;Rc(p.start)&&(o=p.start),h.fullSize?bh(h,o,i.top,w,t.outerHeight-i.bottom-i.top):bh(h,o,e.top+p.placed,w,v),p.start=o,p.placed+=v,o=h.right}}e.x=o,e.y=l}var Bn={addBox(n,e){n.boxes||(n.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(t){e.draw(t)}}]},n.boxes.push(e)},removeBox(n,e){const t=n.boxes?n.boxes.indexOf(e):-1;t!==-1&&n.boxes.splice(t,1)},configure(n,e,t){e.fullSize=t.fullSize,e.position=t.position,e.weight=t.weight},update(n,e,t,r){if(!n)return;const i=qn(n.options.layout.padding),o=Math.max(e-i.width,0),l=Math.max(t-i.height,0),c=VV(n.boxes),h=c.vertical,p=c.horizontal;Ge(n.boxes,P=>{typeof P.beforeLayout=="function"&&P.beforeLayout()});const g=h.reduce((P,A)=>A.box.options&&A.box.options.display===!1?P:P+1,0)||1,v=Object.freeze({outerWidth:e,outerHeight:t,padding:i,availableWidth:o,availableHeight:l,vBoxMaxWidth:o/2/g,hBoxMaxHeight:l/2}),w=Object.assign({},i);PI(w,qn(r));const T=Object.assign({maxPadding:w,w:o,h:l,x:i.left,y:i.top},i),R=LV(h.concat(p),v);ic(c.fullSize,T,v,R),ic(h,T,v,R),ic(p,T,v,R)&&ic(h,T,v,R),jV(T),tE(c.leftAndTop,T,v,R),T.x+=T.w,T.y+=T.h,tE(c.rightAndBottom,T,v,R),n.chartArea={left:T.left,top:T.top,right:T.left+T.w,bottom:T.top+T.h,height:T.h,width:T.w},Ge(c.chartArea,P=>{const A=P.box;Object.assign(A,n.chartArea),A.update(T.w,T.h,{left:0,top:0,right:0,bottom:0})})}};class NI{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,r){}removeEventListener(e,t,r){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,r,i){return t=Math.max(0,t||e.width),r=r||e.height,{width:t,height:Math.max(0,i?Math.floor(t/i):r)}}isAttached(e){return!0}updateConfig(e){}}class zV extends NI{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const Hh="$chartjs",BV={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},nE=n=>n===null||n==="";function $V(n,e){const t=n.style,r=n.getAttribute("height"),i=n.getAttribute("width");if(n[Hh]={initial:{height:r,width:i,style:{display:t.display,height:t.height,width:t.width}}},t.display=t.display||"block",t.boxSizing=t.boxSizing||"border-box",nE(i)){const o=Bw(n,"width");o!==void 0&&(n.width=o)}if(nE(r))if(n.style.height==="")n.height=n.width/(e||2);else{const o=Bw(n,"height");o!==void 0&&(n.height=o)}return n}const DI=QL?{passive:!0}:!1;function HV(n,e,t){n&&n.addEventListener(e,t,DI)}function WV(n,e,t){n&&n.canvas&&n.canvas.removeEventListener(e,t,DI)}function qV(n,e){const t=BV[n.type]||n.type,{x:r,y:i}=Js(n,e);return{type:t,chart:e,native:n,x:r!==void 0?r:null,y:i!==void 0?i:null}}function wd(n,e){for(const t of n)if(t===e||t.contains(e))return!0}function KV(n,e,t){const r=n.canvas,i=new MutationObserver(o=>{let l=!1;for(const c of o)l=l||wd(c.addedNodes,r),l=l&&!wd(c.removedNodes,r);l&&t()});return i.observe(document,{childList:!0,subtree:!0}),i}function GV(n,e,t){const r=n.canvas,i=new MutationObserver(o=>{let l=!1;for(const c of o)l=l||wd(c.removedNodes,r),l=l&&!wd(c.addedNodes,r);l&&t()});return i.observe(document,{childList:!0,subtree:!0}),i}const Pc=new Map;let rE=0;function OI(){const n=window.devicePixelRatio;n!==rE&&(rE=n,Pc.forEach((e,t)=>{t.currentDevicePixelRatio!==n&&e()}))}function QV(n,e){Pc.size||window.addEventListener("resize",OI),Pc.set(n,e)}function YV(n){Pc.delete(n),Pc.size||window.removeEventListener("resize",OI)}function XV(n,e,t){const r=n.canvas,i=r&&oy(r);if(!i)return;const o=gI((c,h)=>{const p=i.clientWidth;t(c,h),p<i.clientWidth&&t()},window),l=new ResizeObserver(c=>{const h=c[0],p=h.contentRect.width,g=h.contentRect.height;p===0&&g===0||o(p,g)});return l.observe(i),QV(n,o),l}function tg(n,e,t){t&&t.disconnect(),e==="resize"&&YV(n)}function JV(n,e,t){const r=n.canvas,i=gI(o=>{n.ctx!==null&&t(qV(o,n))},n);return HV(r,e,i),i}class ZV extends NI{acquireContext(e,t){const r=e&&e.getContext&&e.getContext("2d");return r&&r.canvas===e?($V(e,t),r):null}releaseContext(e){const t=e.canvas;if(!t[Hh])return!1;const r=t[Hh].initial;["height","width"].forEach(o=>{const l=r[o];Je(l)?t.removeAttribute(o):t.setAttribute(o,l)});const i=r.style||{};return Object.keys(i).forEach(o=>{t.style[o]=i[o]}),t.width=t.width,delete t[Hh],!0}addEventListener(e,t,r){this.removeEventListener(e,t);const i=e.$proxies||(e.$proxies={}),l={attach:KV,detach:GV,resize:XV}[t]||JV;i[t]=l(e,t,r)}removeEventListener(e,t){const r=e.$proxies||(e.$proxies={}),i=r[t];if(!i)return;({attach:tg,detach:tg,resize:tg}[t]||WV)(e,t,i),r[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,r,i){return GL(e,t,r,i)}isAttached(e){const t=e&&oy(e);return!!(t&&t.isConnected)}}function e4(n){return!sy()||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas?zV:ZV}class Ao{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(e){const{x:t,y:r}=this.getProps(["x","y"],e);return{x:t,y:r}}hasValue(){return md(this.x)&&md(this.y)}getProps(e,t){const r=this.$animations;if(!t||!r)return this;const i={};return e.forEach(o=>{i[o]=r[o]&&r[o].active()?r[o]._to:this[o]}),i}}function t4(n,e){const t=n.options.ticks,r=n4(n),i=Math.min(t.maxTicksLimit||r,r),o=t.major.enabled?i4(e):[],l=o.length,c=o[0],h=o[l-1],p=[];if(l>i)return s4(e,p,o,l/i),p;const g=r4(o,e,i);if(l>0){let v,w;const T=l>1?Math.round((h-c)/(l-1)):null;for(Ih(e,p,g,Je(T)?0:c-T,c),v=0,w=l-1;v<w;v++)Ih(e,p,g,o[v],o[v+1]);return Ih(e,p,g,h,Je(T)?e.length:h+T),p}return Ih(e,p,g),p}function n4(n){const e=n.options.offset,t=n._tickSize(),r=n._length/t+(e?0:1),i=n._maxLength/t;return Math.floor(Math.min(r,i))}function r4(n,e,t){const r=o4(n),i=e.length/t;if(!r)return Math.max(i,1);const o=iL(r);for(let l=0,c=o.length-1;l<c;l++){const h=o[l];if(h>i)return h}return Math.max(i,1)}function i4(n){const e=[];let t,r;for(t=0,r=n.length;t<r;t++)n[t].major&&e.push(t);return e}function s4(n,e,t,r){let i=0,o=t[0],l;for(r=Math.ceil(r),l=0;l<n.length;l++)l===o&&(e.push(n[l]),i++,o=t[i*r])}function Ih(n,e,t,r,i){const o=ze(r,0),l=Math.min(ze(i,n.length),n.length);let c=0,h,p,g;for(t=Math.ceil(t),i&&(h=i-r,t=h/Math.floor(h/t)),g=o;g<0;)c++,g=Math.round(o+c*t);for(p=Math.max(o,0);p<l;p++)p===g&&(e.push(n[p]),c++,g=Math.round(o+c*t))}function o4(n){const e=n.length;let t,r;if(e<2)return!1;for(r=n[0],t=1;t<e;++t)if(n[t]-n[t-1]!==r)return!1;return r}const a4=n=>n==="left"?"right":n==="right"?"left":n,iE=(n,e,t)=>e==="top"||e==="left"?n[e]+t:n[e]-t,sE=(n,e)=>Math.min(e||n,n);function oE(n,e){const t=[],r=n.length/e,i=n.length;let o=0;for(;o<i;o+=r)t.push(n[Math.floor(o)]);return t}function l4(n,e,t){const r=n.ticks.length,i=Math.min(e,r-1),o=n._startPixel,l=n._endPixel,c=1e-6;let h=n.getPixelForTick(i),p;if(!(t&&(r===1?p=Math.max(h-o,l-h):e===0?p=(n.getPixelForTick(1)-h)/2:p=(h-n.getPixelForTick(i-1))/2,h+=i<e?p:-p,h<o-c||h>l+c)))return h}function c4(n,e){Ge(n,t=>{const r=t.gc,i=r.length/2;let o;if(i>e){for(o=0;o<i;++o)delete t.data[r[o]];r.splice(0,i)}})}function Ql(n){return n.drawTicks?n.tickLength:0}function aE(n,e){if(!n.display)return 0;const t=en(n.font,e),r=qn(n.padding);return(Rt(n.text)?n.text.length:1)*t.lineHeight+r.height}function u4(n,e){return Ka(n,{scale:e,type:"scale"})}function h4(n,e,t){return Ka(n,{tick:t,index:e,type:"tick"})}function d4(n,e,t){let r=Xm(n);return(t&&e!=="right"||!t&&e==="right")&&(r=a4(r)),r}function f4(n,e,t,r){const{top:i,left:o,bottom:l,right:c,chart:h}=n,{chartArea:p,scales:g}=h;let v=0,w,T,R;const P=l-i,A=c-o;if(n.isHorizontal()){if(T=Xt(r,o,c),Be(t)){const F=Object.keys(t)[0],z=t[F];R=g[F].getPixelForValue(z)+P-e}else t==="center"?R=(p.bottom+p.top)/2+P-e:R=iE(n,t,e);w=c-o}else{if(Be(t)){const F=Object.keys(t)[0],z=t[F];T=g[F].getPixelForValue(z)-A+e}else t==="center"?T=(p.left+p.right)/2-A+e:T=iE(n,t,e);R=Xt(r,l,i),v=t==="left"?-Ct:Ct}return{titleX:T,titleY:R,maxWidth:w,rotation:v}}class Ga extends Ao{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:r,_suggestedMax:i}=this;return e=kr(e,Number.POSITIVE_INFINITY),t=kr(t,Number.NEGATIVE_INFINITY),r=kr(r,Number.POSITIVE_INFINITY),i=kr(i,Number.NEGATIVE_INFINITY),{min:kr(e,r),max:kr(t,i),minDefined:Wn(e),maxDefined:Wn(t)}}getMinMax(e){let{min:t,max:r,minDefined:i,maxDefined:o}=this.getUserBounds(),l;if(i&&o)return{min:t,max:r};const c=this.getMatchingVisibleMetas();for(let h=0,p=c.length;h<p;++h)l=c[h].controller.getMinMax(this,e),i||(t=Math.min(t,l.min)),o||(r=Math.max(r,l.max));return t=o&&t>r?r:t,r=i&&t>r?t:r,{min:kr(t,kr(r,t)),max:kr(r,kr(t,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){rt(this.options.beforeUpdate,[this])}update(e,t,r){const{beginAtZero:i,grace:o,ticks:l}=this.options,c=l.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=DL(this,o,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const h=c<this.ticks.length;this._convertTicksToLabels(h?oE(this.ticks,c):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),l.display&&(l.autoSkip||l.source==="auto")&&(this.ticks=t4(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),h&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,t,r;this.isHorizontal()?(t=this.left,r=this.right):(t=this.top,r=this.bottom,e=!e),this._startPixel=t,this._endPixel=r,this._reversePixels=e,this._length=r-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){rt(this.options.afterUpdate,[this])}beforeSetDimensions(){rt(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){rt(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),rt(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){rt(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const t=this.options.ticks;let r,i,o;for(r=0,i=e.length;r<i;r++)o=e[r],o.label=rt(t.callback,[o.value,r,e],this)}afterTickToLabelConversion(){rt(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){rt(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,t=e.ticks,r=sE(this.ticks.length,e.ticks.maxTicksLimit),i=t.minRotation||0,o=t.maxRotation;let l=i,c,h,p;if(!this._isVisible()||!t.display||i>=o||r<=1||!this.isHorizontal()){this.labelRotation=i;return}const g=this._getLabelSizes(),v=g.widest.width,w=g.highest.height,T=yn(this.chart.width-v,0,this.maxWidth);c=e.offset?this.maxWidth/r:T/(r-1),v+6>c&&(c=T/(r-(e.offset?.5:1)),h=this.maxHeight-Ql(e.grid)-t.padding-aE(e.title,this.chart.options.font),p=Math.sqrt(v*v+w*w),l=lL(Math.min(Math.asin(yn((g.highest.height+6)/c,-1,1)),Math.asin(yn(h/p,-1,1))-Math.asin(yn(w/p,-1,1)))),l=Math.max(i,Math.min(o,l))),this.labelRotation=l}afterCalculateLabelRotation(){rt(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){rt(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:t,options:{ticks:r,title:i,grid:o}}=this,l=this._isVisible(),c=this.isHorizontal();if(l){const h=aE(i,t.options.font);if(c?(e.width=this.maxWidth,e.height=Ql(o)+h):(e.height=this.maxHeight,e.width=Ql(o)+h),r.display&&this.ticks.length){const{first:p,last:g,widest:v,highest:w}=this._getLabelSizes(),T=r.padding*2,R=di(this.labelRotation),P=Math.cos(R),A=Math.sin(R);if(c){const F=r.mirror?0:A*v.width+P*w.height;e.height=Math.min(this.maxHeight,e.height+F+T)}else{const F=r.mirror?0:P*v.width+A*w.height;e.width=Math.min(this.maxWidth,e.width+F+T)}this._calculatePadding(p,g,A,P)}}this._handleMargins(),c?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,r,i){const{ticks:{align:o,padding:l},position:c}=this.options,h=this.labelRotation!==0,p=c!=="top"&&this.axis==="x";if(this.isHorizontal()){const g=this.getPixelForTick(0)-this.left,v=this.right-this.getPixelForTick(this.ticks.length-1);let w=0,T=0;h?p?(w=i*e.width,T=r*t.height):(w=r*e.height,T=i*t.width):o==="start"?T=t.width:o==="end"?w=e.width:o!=="inner"&&(w=e.width/2,T=t.width/2),this.paddingLeft=Math.max((w-g+l)*this.width/(this.width-g),0),this.paddingRight=Math.max((T-v+l)*this.width/(this.width-v),0)}else{let g=t.height/2,v=e.height/2;o==="start"?(g=0,v=e.height):o==="end"&&(g=t.height,v=0),this.paddingTop=g+l,this.paddingBottom=v+l}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){rt(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:t}=this.options;return t==="top"||t==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let t,r;for(t=0,r=e.length;t<r;t++)Je(e[t].label)&&(e.splice(t,1),r--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const t=this.options.ticks.sampleSize;let r=this.ticks;t<r.length&&(r=oE(r,t)),this._labelSizes=e=this._computeLabelSizes(r,r.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,r){const{ctx:i,_longestTextCache:o}=this,l=[],c=[],h=Math.floor(t/sE(t,r));let p=0,g=0,v,w,T,R,P,A,F,z,H,K,Q;for(v=0;v<t;v+=h){if(R=e[v].label,P=this._resolveTickFontOptions(v),i.font=A=P.string,F=o[A]=o[A]||{data:{},gc:[]},z=P.lineHeight,H=K=0,!Je(R)&&!Rt(R))H=Lw(i,F.data,F.gc,H,R),K=z;else if(Rt(R))for(w=0,T=R.length;w<T;++w)Q=R[w],!Je(Q)&&!Rt(Q)&&(H=Lw(i,F.data,F.gc,H,Q),K+=z);l.push(H),c.push(K),p=Math.max(H,p),g=Math.max(K,g)}c4(o,t);const Y=l.indexOf(p),D=c.indexOf(g),b=N=>({width:l[N]||0,height:c[N]||0});return{first:b(0),last:b(t-1),widest:b(Y),highest:b(D),widths:l,heights:c}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const t=this._startPixel+e*this._length;return uL(this._alignToPixels?Qs(this.chart,t,0):t)}getDecimalForPixel(e){const t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){const t=this.ticks||[];if(e>=0&&e<t.length){const r=t[e];return r.$context||(r.$context=h4(this.getContext(),e,r))}return this.$context||(this.$context=u4(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,t=di(this.labelRotation),r=Math.abs(Math.cos(t)),i=Math.abs(Math.sin(t)),o=this._getLabelSizes(),l=e.autoSkipPadding||0,c=o?o.widest.width+l:0,h=o?o.highest.height+l:0;return this.isHorizontal()?h*r>c*i?c/r:h/i:h*i<c*r?h/r:c/i}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const t=this.axis,r=this.chart,i=this.options,{grid:o,position:l,border:c}=i,h=o.offset,p=this.isHorizontal(),v=this.ticks.length+(h?1:0),w=Ql(o),T=[],R=c.setContext(this.getContext()),P=R.display?R.width:0,A=P/2,F=function(Ae){return Qs(r,Ae,P)};let z,H,K,Q,Y,D,b,N,L,k,O,C;if(l==="top")z=F(this.bottom),D=this.bottom-w,N=z-A,k=F(e.top)+A,C=e.bottom;else if(l==="bottom")z=F(this.top),k=e.top,C=F(e.bottom)-A,D=z+A,N=this.top+w;else if(l==="left")z=F(this.right),Y=this.right-w,b=z-A,L=F(e.left)+A,O=e.right;else if(l==="right")z=F(this.left),L=e.left,O=F(e.right)-A,Y=z+A,b=this.left+w;else if(t==="x"){if(l==="center")z=F((e.top+e.bottom)/2+.5);else if(Be(l)){const Ae=Object.keys(l)[0],Se=l[Ae];z=F(this.chart.scales[Ae].getPixelForValue(Se))}k=e.top,C=e.bottom,D=z+A,N=D+w}else if(t==="y"){if(l==="center")z=F((e.left+e.right)/2);else if(Be(l)){const Ae=Object.keys(l)[0],Se=l[Ae];z=F(this.chart.scales[Ae].getPixelForValue(Se))}Y=z-A,b=Y-w,L=e.left,O=e.right}const ge=ze(i.ticks.maxTicksLimit,v),we=Math.max(1,Math.ceil(v/ge));for(H=0;H<v;H+=we){const Ae=this.getContext(H),Se=o.setContext(Ae),re=c.setContext(Ae),ae=Se.lineWidth,oe=Se.color,U=re.dash||[],X=re.dashOffset,be=Se.tickWidth,ve=Se.tickColor,Ne=Se.tickBorderDash||[],Re=Se.tickBorderDashOffset;K=l4(this,H,h),K!==void 0&&(Q=Qs(r,K,ae),p?Y=b=L=O=Q:D=N=k=C=Q,T.push({tx1:Y,ty1:D,tx2:b,ty2:N,x1:L,y1:k,x2:O,y2:C,width:ae,color:oe,borderDash:U,borderDashOffset:X,tickWidth:be,tickColor:ve,tickBorderDash:Ne,tickBorderDashOffset:Re}))}return this._ticksLength=v,this._borderValue=z,T}_computeLabelItems(e){const t=this.axis,r=this.options,{position:i,ticks:o}=r,l=this.isHorizontal(),c=this.ticks,{align:h,crossAlign:p,padding:g,mirror:v}=o,w=Ql(r.grid),T=w+g,R=v?-g:T,P=-di(this.labelRotation),A=[];let F,z,H,K,Q,Y,D,b,N,L,k,O,C="middle";if(i==="top")Y=this.bottom-R,D=this._getXAxisLabelAlignment();else if(i==="bottom")Y=this.top+R,D=this._getXAxisLabelAlignment();else if(i==="left"){const we=this._getYAxisLabelAlignment(w);D=we.textAlign,Q=we.x}else if(i==="right"){const we=this._getYAxisLabelAlignment(w);D=we.textAlign,Q=we.x}else if(t==="x"){if(i==="center")Y=(e.top+e.bottom)/2+T;else if(Be(i)){const we=Object.keys(i)[0],Ae=i[we];Y=this.chart.scales[we].getPixelForValue(Ae)+T}D=this._getXAxisLabelAlignment()}else if(t==="y"){if(i==="center")Q=(e.left+e.right)/2-T;else if(Be(i)){const we=Object.keys(i)[0],Ae=i[we];Q=this.chart.scales[we].getPixelForValue(Ae)}D=this._getYAxisLabelAlignment(w).textAlign}t==="y"&&(h==="start"?C="top":h==="end"&&(C="bottom"));const ge=this._getLabelSizes();for(F=0,z=c.length;F<z;++F){H=c[F],K=H.label;const we=o.setContext(this.getContext(F));b=this.getPixelForTick(F)+o.labelOffset,N=this._resolveTickFontOptions(F),L=N.lineHeight,k=Rt(K)?K.length:1;const Ae=k/2,Se=we.color,re=we.textStrokeColor,ae=we.textStrokeWidth;let oe=D;l?(Q=b,D==="inner"&&(F===z-1?oe=this.options.reverse?"left":"right":F===0?oe=this.options.reverse?"right":"left":oe="center"),i==="top"?p==="near"||P!==0?O=-k*L+L/2:p==="center"?O=-ge.highest.height/2-Ae*L+L:O=-ge.highest.height+L/2:p==="near"||P!==0?O=L/2:p==="center"?O=ge.highest.height/2-Ae*L:O=ge.highest.height-k*L,v&&(O*=-1),P!==0&&!we.showLabelBackdrop&&(Q+=L/2*Math.sin(P))):(Y=b,O=(1-k)*L/2);let U;if(we.showLabelBackdrop){const X=qn(we.backdropPadding),be=ge.heights[F],ve=ge.widths[F];let Ne=O-X.top,Re=0-X.left;switch(C){case"middle":Ne-=be/2;break;case"bottom":Ne-=be;break}switch(D){case"center":Re-=ve/2;break;case"right":Re-=ve;break;case"inner":F===z-1?Re-=ve:F>0&&(Re-=ve/2);break}U={left:Re,top:Ne,width:ve+X.width,height:be+X.height,color:we.backdropColor}}A.push({label:K,font:N,textOffset:O,options:{rotation:P,color:Se,strokeColor:re,strokeWidth:ae,textAlign:oe,textBaseline:C,translation:[Q,Y],backdrop:U}})}return A}_getXAxisLabelAlignment(){const{position:e,ticks:t}=this.options;if(-di(this.labelRotation))return e==="top"?"left":"right";let i="center";return t.align==="start"?i="left":t.align==="end"?i="right":t.align==="inner"&&(i="inner"),i}_getYAxisLabelAlignment(e){const{position:t,ticks:{crossAlign:r,mirror:i,padding:o}}=this.options,l=this._getLabelSizes(),c=e+o,h=l.widest.width;let p,g;return t==="left"?i?(g=this.right+o,r==="near"?p="left":r==="center"?(p="center",g+=h/2):(p="right",g+=h)):(g=this.right-c,r==="near"?p="right":r==="center"?(p="center",g-=h/2):(p="left",g=this.left)):t==="right"?i?(g=this.left+o,r==="near"?p="right":r==="center"?(p="center",g-=h/2):(p="left",g-=h)):(g=this.left+c,r==="near"?p="left":r==="center"?(p="center",g+=h/2):(p="right",g=this.right)):p="right",{textAlign:p,x:g}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,t=this.options.position;if(t==="left"||t==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(t==="top"||t==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:t},left:r,top:i,width:o,height:l}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(r,i,o,l),e.restore())}getLineWidthForValue(e){const t=this.options.grid;if(!this._isVisible()||!t.display)return 0;const i=this.ticks.findIndex(o=>o.value===e);return i>=0?t.setContext(this.getContext(i)).lineWidth:0}drawGrid(e){const t=this.options.grid,r=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let o,l;const c=(h,p,g)=>{!g.width||!g.color||(r.save(),r.lineWidth=g.width,r.strokeStyle=g.color,r.setLineDash(g.borderDash||[]),r.lineDashOffset=g.borderDashOffset,r.beginPath(),r.moveTo(h.x,h.y),r.lineTo(p.x,p.y),r.stroke(),r.restore())};if(t.display)for(o=0,l=i.length;o<l;++o){const h=i[o];t.drawOnChartArea&&c({x:h.x1,y:h.y1},{x:h.x2,y:h.y2},h),t.drawTicks&&c({x:h.tx1,y:h.ty1},{x:h.tx2,y:h.ty2},{color:h.tickColor,width:h.tickWidth,borderDash:h.tickBorderDash,borderDashOffset:h.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:t,options:{border:r,grid:i}}=this,o=r.setContext(this.getContext()),l=r.display?o.width:0;if(!l)return;const c=i.setContext(this.getContext(0)).lineWidth,h=this._borderValue;let p,g,v,w;this.isHorizontal()?(p=Qs(e,this.left,l)-l/2,g=Qs(e,this.right,c)+c/2,v=w=h):(v=Qs(e,this.top,l)-l/2,w=Qs(e,this.bottom,c)+c/2,p=g=h),t.save(),t.lineWidth=o.width,t.strokeStyle=o.color,t.beginPath(),t.moveTo(p,v),t.lineTo(g,w),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;const r=this.ctx,i=this._computeLabelArea();i&&Zm(r,i);const o=this.getLabelItems(e);for(const l of o){const c=l.options,h=l.font,p=l.label,g=l.textOffset;Cc(r,p,0,g,h,c)}i&&ey(r)}drawTitle(){const{ctx:e,options:{position:t,title:r,reverse:i}}=this;if(!r.display)return;const o=en(r.font),l=qn(r.padding),c=r.align;let h=o.lineHeight/2;t==="bottom"||t==="center"||Be(t)?(h+=l.bottom,Rt(r.text)&&(h+=o.lineHeight*(r.text.length-1))):h+=l.top;const{titleX:p,titleY:g,maxWidth:v,rotation:w}=f4(this,h,t,c);Cc(e,r.text,0,0,o,{color:r.color,maxWidth:v,rotation:w,textAlign:d4(c,t,i),textBaseline:"middle",translation:[p,g]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,t=e.ticks&&e.ticks.z||0,r=ze(e.grid&&e.grid.z,-1),i=ze(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==Ga.prototype.draw?[{z:t,draw:o=>{this.draw(o)}}]:[{z:r,draw:o=>{this.drawBackground(),this.drawGrid(o),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:t,draw:o=>{this.drawLabels(o)}}]}getMatchingVisibleMetas(e){const t=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",i=[];let o,l;for(o=0,l=t.length;o<l;++o){const c=t[o];c[r]===this.id&&(!e||c.type===e)&&i.push(c)}return i}_resolveTickFontOptions(e){const t=this.options.ticks.setContext(this.getContext(e));return en(t.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class Sh{constructor(e,t,r){this.type=e,this.scope=t,this.override=r,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const t=Object.getPrototypeOf(e);let r;m4(t)&&(r=this.register(t));const i=this.items,o=e.id,l=this.scope+"."+o;if(!o)throw new Error("class does not have id: "+e);return o in i||(i[o]=e,p4(e,l,r),this.override&&_t.override(e.id,e.overrides)),l}get(e){return this.items[e]}unregister(e){const t=this.items,r=e.id,i=this.scope;r in t&&delete t[r],i&&r in _t[i]&&(delete _t[i][r],this.override&&delete yo[r])}}function p4(n,e,t){const r=Ac(Object.create(null),[t?_t.get(t):{},_t.get(e),n.defaults]);_t.set(e,r),n.defaultRoutes&&g4(e,n.defaultRoutes),n.descriptors&&_t.describe(e,n.descriptors)}function g4(n,e){Object.keys(e).forEach(t=>{const r=t.split("."),i=r.pop(),o=[n].concat(r).join("."),l=e[t].split("."),c=l.pop(),h=l.join(".");_t.route(o,i,h,c)})}function m4(n){return"id"in n&&"defaults"in n}class y4{constructor(){this.controllers=new Sh(ay,"datasets",!0),this.elements=new Sh(Ao,"elements"),this.plugins=new Sh(Object,"plugins"),this.scales=new Sh(Ga,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,t,r){[...t].forEach(i=>{const o=r||this._getRegistryForType(i);r||o.isForType(i)||o===this.plugins&&i.id?this._exec(e,o,i):Ge(i,l=>{const c=r||this._getRegistryForType(l);this._exec(e,c,l)})})}_exec(e,t,r){const i=Qm(e);rt(r["before"+i],[],r),t[e](r),rt(r["after"+i],[],r)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){const r=this._typedRegistries[t];if(r.isForType(e))return r}return this.plugins}_get(e,t,r){const i=t.get(e);if(i===void 0)throw new Error('"'+e+'" is not a registered '+r+".");return i}}var Rr=new y4;class _4{constructor(){this._init=void 0}notify(e,t,r,i){if(t==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install")),this._init===void 0)return;const o=i?this._descriptors(e).filter(i):this._descriptors(e),l=this._notify(o,e,t,r);return t==="afterDestroy"&&(this._notify(o,e,"stop"),this._notify(this._init,e,"uninstall"),this._init=void 0),l}_notify(e,t,r,i){i=i||{};for(const o of e){const l=o.plugin,c=l[r],h=[t,i,o.options];if(rt(c,h,l)===!1&&i.cancelable)return!1}return!0}invalidate(){Je(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){const r=e&&e.config,i=ze(r.options&&r.options.plugins,{}),o=v4(r);return i===!1&&!t?[]:E4(e,o,i,t)}_notifyStateChanges(e){const t=this._oldCache||[],r=this._cache,i=(o,l)=>o.filter(c=>!l.some(h=>c.plugin.id===h.plugin.id));this._notify(i(t,r),e,"stop"),this._notify(i(r,t),e,"start")}}function v4(n){const e={},t=[],r=Object.keys(Rr.plugins.items);for(let o=0;o<r.length;o++)t.push(Rr.getPlugin(r[o]));const i=n.plugins||[];for(let o=0;o<i.length;o++){const l=i[o];t.indexOf(l)===-1&&(t.push(l),e[l.id]=!0)}return{plugins:t,localIds:e}}function w4(n,e){return!e&&n===!1?null:n===!0?{}:n}function E4(n,{plugins:e,localIds:t},r,i){const o=[],l=n.getContext();for(const c of e){const h=c.id,p=w4(r[h],i);p!==null&&o.push({plugin:c,options:x4(n.config,{plugin:c,local:t[h]},p,l)})}return o}function x4(n,{plugin:e,local:t},r,i){const o=n.pluginScopeKeys(e),l=n.getOptionScopes(r,o);return t&&e.defaults&&l.push(e.defaults),n.createResolver(l,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Ug(n,e){const t=_t.datasets[n]||{};return((e.datasets||{})[n]||{}).indexAxis||e.indexAxis||t.indexAxis||"x"}function T4(n,e){let t=n;return n==="_index_"?t=e:n==="_value_"&&(t=e==="x"?"y":"x"),t}function b4(n,e){return n===e?"_index_":"_value_"}function lE(n){if(n==="x"||n==="y"||n==="r")return n}function I4(n){if(n==="top"||n==="bottom")return"x";if(n==="left"||n==="right")return"y"}function zg(n,...e){if(lE(n))return n;for(const t of e){const r=t.axis||I4(t.position)||n.length>1&&lE(n[0].toLowerCase());if(r)return r}throw new Error(`Cannot determine type of '${n}' axis. Please provide 'axis' or 'position' option.`)}function cE(n,e,t){if(t[e+"AxisID"]===n)return{axis:e}}function S4(n,e){if(e.data&&e.data.datasets){const t=e.data.datasets.filter(r=>r.xAxisID===n||r.yAxisID===n);if(t.length)return cE(n,"x",t[0])||cE(n,"y",t[0])}return{}}function k4(n,e){const t=yo[n.type]||{scales:{}},r=e.scales||{},i=Ug(n.type,e),o=Object.create(null);return Object.keys(r).forEach(l=>{const c=r[l];if(!Be(c))return console.error(`Invalid scale configuration for scale: ${l}`);if(c._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${l}`);const h=zg(l,c,S4(l,n),_t.scales[c.type]),p=b4(h,i),g=t.scales||{};o[l]=pc(Object.create(null),[{axis:h},c,g[h],g[p]])}),n.data.datasets.forEach(l=>{const c=l.type||n.type,h=l.indexAxis||Ug(c,e),g=(yo[c]||{}).scales||{};Object.keys(g).forEach(v=>{const w=T4(v,h),T=l[w+"AxisID"]||w;o[T]=o[T]||Object.create(null),pc(o[T],[{axis:w},r[T],g[v]])})}),Object.keys(o).forEach(l=>{const c=o[l];pc(c,[_t.scales[c.type],_t.scale])}),o}function MI(n){const e=n.options||(n.options={});e.plugins=ze(e.plugins,{}),e.scales=k4(n,e)}function LI(n){return n=n||{},n.datasets=n.datasets||[],n.labels=n.labels||[],n}function A4(n){return n=n||{},n.data=LI(n.data),MI(n),n}const uE=new Map,VI=new Set;function kh(n,e){let t=uE.get(n);return t||(t=e(),uE.set(n,t),VI.add(t)),t}const Yl=(n,e,t)=>{const r=mo(e,t);r!==void 0&&n.add(r)};class R4{constructor(e){this._config=A4(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=LI(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),MI(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return kh(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,t){return kh(`${e}.transition.${t}`,()=>[[`datasets.${e}.transitions.${t}`,`transitions.${t}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,t){return kh(`${e}-${t}`,()=>[[`datasets.${e}.elements.${t}`,`datasets.${e}`,`elements.${t}`,""]])}pluginScopeKeys(e){const t=e.id,r=this.type;return kh(`${r}-plugin-${t}`,()=>[[`plugins.${t}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,t){const r=this._scopeCache;let i=r.get(e);return(!i||t)&&(i=new Map,r.set(e,i)),i}getOptionScopes(e,t,r){const{options:i,type:o}=this,l=this._cachedScopes(e,r),c=l.get(t);if(c)return c;const h=new Set;t.forEach(g=>{e&&(h.add(e),g.forEach(v=>Yl(h,e,v))),g.forEach(v=>Yl(h,i,v)),g.forEach(v=>Yl(h,yo[o]||{},v)),g.forEach(v=>Yl(h,_t,v)),g.forEach(v=>Yl(h,jg,v))});const p=Array.from(h);return p.length===0&&p.push(Object.create(null)),VI.has(t)&&l.set(t,p),p}chartOptionScopes(){const{options:e,type:t}=this;return[e,yo[t]||{},_t.datasets[t]||{},{type:t},_t,jg]}resolveNamedOptions(e,t,r,i=[""]){const o={$shared:!0},{resolver:l,subPrefixes:c}=hE(this._resolverCache,e,i);let h=l;if(P4(l,t)){o.$shared=!1,r=vs(r)?r():r;const p=this.createResolver(e,r,c);h=Ua(l,r,p)}for(const p of t)o[p]=h[p];return o}createResolver(e,t,r=[""],i){const{resolver:o}=hE(this._resolverCache,e,r);return Be(t)?Ua(o,t,void 0,i):o}}function hE(n,e,t){let r=n.get(e);r||(r=new Map,n.set(e,r));const i=t.join();let o=r.get(i);return o||(o={resolver:ny(e,t),subPrefixes:t.filter(c=>!c.toLowerCase().includes("hover"))},r.set(i,o)),o}const C4=n=>Be(n)&&Object.getOwnPropertyNames(n).some(e=>vs(n[e]));function P4(n,e){const{isScriptable:t,isIndexable:r}=EI(n);for(const i of e){const o=t(i),l=r(i),c=(l||o)&&n[i];if(o&&(vs(c)||C4(c))||l&&Rt(c))return!0}return!1}var N4="4.5.1";const D4=["top","bottom","left","right","chartArea"];function dE(n,e){return n==="top"||n==="bottom"||D4.indexOf(n)===-1&&e==="x"}function fE(n,e){return function(t,r){return t[n]===r[n]?t[e]-r[e]:t[n]-r[n]}}function pE(n){const e=n.chart,t=e.options.animation;e.notifyPlugins("afterRender"),rt(t&&t.onComplete,[n],e)}function O4(n){const e=n.chart,t=e.options.animation;rt(t&&t.onProgress,[n],e)}function FI(n){return sy()&&typeof n=="string"?n=document.getElementById(n):n&&n.length&&(n=n[0]),n&&n.canvas&&(n=n.canvas),n}const Wh={},gE=n=>{const e=FI(n);return Object.values(Wh).filter(t=>t.canvas===e).pop()};function M4(n,e,t){const r=Object.keys(n);for(const i of r){const o=+i;if(o>=e){const l=n[i];delete n[i],(t>0||o>e)&&(n[o+t]=l)}}}function L4(n,e,t,r){return!t||n.type==="mouseout"?null:r?e:n}let Qa=class{static defaults=_t;static instances=Wh;static overrides=yo;static registry=Rr;static version=N4;static getChart=gE;static register(...e){Rr.add(...e),mE()}static unregister(...e){Rr.remove(...e),mE()}constructor(e,t){const r=this.config=new R4(t),i=FI(e),o=gE(i);if(o)throw new Error("Canvas is already in use. Chart with ID '"+o.id+"' must be destroyed before the canvas with ID '"+o.canvas.id+"' can be reused.");const l=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||e4(i)),this.platform.updateConfig(r);const c=this.platform.acquireContext(i,l.aspectRatio),h=c&&c.canvas,p=h&&h.height,g=h&&h.width;if(this.id=YM(),this.ctx=c,this.canvas=h,this.width=g,this.height=p,this._options=l,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new _4,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=pL(v=>this.update(v),l.resizeDelay||0),this._dataChanges=[],Wh[this.id]=this,!c||!h){console.error("Failed to create chart: can't acquire context from the given item");return}oi.listen(this,"complete",pE),oi.listen(this,"progress",O4),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:t},width:r,height:i,_aspectRatio:o}=this;return Je(e)?t&&o?o:i?r/i:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Rr}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():zw(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Vw(this.canvas,this.ctx),this}stop(){return oi.stop(this),this}resize(e,t){oi.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}_resize(e,t){const r=this.options,i=this.canvas,o=r.maintainAspectRatio&&this.aspectRatio,l=this.platform.getMaximumSize(i,e,t,o),c=r.devicePixelRatio||this.platform.getDevicePixelRatio(),h=this.width?"resize":"attach";this.width=l.width,this.height=l.height,this._aspectRatio=this.aspectRatio,zw(this,c,!0)&&(this.notifyPlugins("resize",{size:l}),rt(r.onResize,[this,l],this),this.attached&&this._doResize(h)&&this.render())}ensureScalesHaveIDs(){const t=this.options.scales||{};Ge(t,(r,i)=>{r.id=i})}buildOrUpdateScales(){const e=this.options,t=e.scales,r=this.scales,i=Object.keys(r).reduce((l,c)=>(l[c]=!1,l),{});let o=[];t&&(o=o.concat(Object.keys(t).map(l=>{const c=t[l],h=zg(l,c),p=h==="r",g=h==="x";return{options:c,dposition:p?"chartArea":g?"bottom":"left",dtype:p?"radialLinear":g?"category":"linear"}}))),Ge(o,l=>{const c=l.options,h=c.id,p=zg(h,c),g=ze(c.type,l.dtype);(c.position===void 0||dE(c.position,p)!==dE(l.dposition))&&(c.position=l.dposition),i[h]=!0;let v=null;if(h in r&&r[h].type===g)v=r[h];else{const w=Rr.getScale(g);v=new w({id:h,type:g,ctx:this.ctx,chart:this}),r[v.id]=v}v.init(c,e)}),Ge(i,(l,c)=>{l||delete r[c]}),Ge(r,l=>{Bn.configure(this,l,l.options),Bn.addBox(this,l)})}_updateMetasets(){const e=this._metasets,t=this.data.datasets.length,r=e.length;if(e.sort((i,o)=>i.index-o.index),r>t){for(let i=t;i<r;++i)this._destroyDatasetMeta(i);e.splice(t,r-t)}this._sortedMetasets=e.slice(0).sort(fE("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:t}}=this;e.length>t.length&&delete this._stacks,e.forEach((r,i)=>{t.filter(o=>o===r._dataset).length===0&&this._destroyDatasetMeta(i)})}buildOrUpdateControllers(){const e=[],t=this.data.datasets;let r,i;for(this._removeUnreferencedMetasets(),r=0,i=t.length;r<i;r++){const o=t[r];let l=this.getDatasetMeta(r);const c=o.type||this.config.type;if(l.type&&l.type!==c&&(this._destroyDatasetMeta(r),l=this.getDatasetMeta(r)),l.type=c,l.indexAxis=o.indexAxis||Ug(c,this.options),l.order=o.order||0,l.index=r,l.label=""+o.label,l.visible=this.isDatasetVisible(r),l.controller)l.controller.updateIndex(r),l.controller.linkScales();else{const h=Rr.getController(c),{datasetElementType:p,dataElementType:g}=_t.datasets[c];Object.assign(h,{dataElementType:Rr.getElement(g),datasetElementType:p&&Rr.getElement(p)}),l.controller=new h(this,r),e.push(l.controller)}}return this._updateMetasets(),e}_resetElements(){Ge(this.data.datasets,(e,t)=>{this.getDatasetMeta(t).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const t=this.config;t.update();const r=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const o=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let l=0;for(let p=0,g=this.data.datasets.length;p<g;p++){const{controller:v}=this.getDatasetMeta(p),w=!i&&o.indexOf(v)===-1;v.buildOrUpdateElements(w),l=Math.max(+v.getMaxOverflow(),l)}l=this._minPadding=r.layout.autoPadding?l:0,this._updateLayout(l),i||Ge(o,p=>{p.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(fE("z","_idx"));const{_active:c,_lastEvent:h}=this;h?this._eventHandler(h,!0):c.length&&this._updateHoverStyles(c,c,!0),this.render()}_updateScales(){Ge(this.scales,e=>{Bn.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,t=new Set(Object.keys(this._listeners)),r=new Set(e.events);(!kw(t,r)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,t=this._getUniformDataChanges()||[];for(const{method:r,start:i,count:o}of t){const l=r==="_removeElements"?-o:o;M4(e,i,l)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const t=this.data.datasets.length,r=o=>new Set(e.filter(l=>l[0]===o).map((l,c)=>c+","+l.splice(1).join(","))),i=r(0);for(let o=1;o<t;o++)if(!kw(i,r(o)))return;return Array.from(i).map(o=>o.split(",")).map(o=>({method:o[1],start:+o[2],count:+o[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Bn.update(this,this.width,this.height,e);const t=this.chartArea,r=t.width<=0||t.height<=0;this._layers=[],Ge(this.boxes,i=>{r&&i.position==="chartArea"||(i.configure&&i.configure(),this._layers.push(...i._layers()))},this),this._layers.forEach((i,o)=>{i._idx=o}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let t=0,r=this.data.datasets.length;t<r;++t)this.getDatasetMeta(t).controller.configure();for(let t=0,r=this.data.datasets.length;t<r;++t)this._updateDataset(t,vs(e)?e({datasetIndex:t}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,t){const r=this.getDatasetMeta(e),i={meta:r,index:e,mode:t,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",i)!==!1&&(r.controller._update(t),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(oi.has(this)?this.attached&&!oi.running(this)&&oi.start(this):(this.draw(),pE({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:r,height:i}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(r,i)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const t=this._layers;for(e=0;e<t.length&&t[e].z<=0;++e)t[e].draw(this.chartArea);for(this._drawDatasets();e<t.length;++e)t[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const t=this._sortedMetasets,r=[];let i,o;for(i=0,o=t.length;i<o;++i){const l=t[i];(!e||l.visible)&&r.push(l)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const t=this.ctx,r={meta:e,index:e.index,cancelable:!0},i=ZL(this,e);this.notifyPlugins("beforeDatasetDraw",r)!==!1&&(i&&Zm(t,i),e.controller.draw(),i&&ey(t),r.cancelable=!1,this.notifyPlugins("afterDatasetDraw",r))}isPointInArea(e){return vI(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,t,r,i){const o=DV.modes[t];return typeof o=="function"?o(this,e,r,i):[]}getDatasetMeta(e){const t=this.data.datasets[e],r=this._metasets;let i=r.filter(o=>o&&o._dataset===t).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},r.push(i)),i}getContext(){return this.$context||(this.$context=Ka(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const t=this.data.datasets[e];if(!t)return!1;const r=this.getDatasetMeta(e);return typeof r.hidden=="boolean"?!r.hidden:!t.hidden}setDatasetVisibility(e,t){const r=this.getDatasetMeta(e);r.hidden=!t}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,t,r){const i=r?"show":"hide",o=this.getDatasetMeta(e),l=o.controller._resolveAnimations(void 0,i);Rc(t)?(o.data[t].hidden=!r,this.update()):(this.setDatasetVisibility(e,r),l.update(o,{visible:r}),this.update(c=>c.datasetIndex===e?i:void 0))}hide(e,t){this._updateVisibility(e,t,!1)}show(e,t){this._updateVisibility(e,t,!0)}_destroyDatasetMeta(e){const t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}_stop(){let e,t;for(this.stop(),oi.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:t}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),Vw(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),delete Wh[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,t=this.platform,r=(o,l)=>{t.addEventListener(this,o,l),e[o]=l},i=(o,l,c)=>{o.offsetX=l,o.offsetY=c,this._eventHandler(o)};Ge(this.options.events,o=>r(o,i))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,t=this.platform,r=(h,p)=>{t.addEventListener(this,h,p),e[h]=p},i=(h,p)=>{e[h]&&(t.removeEventListener(this,h,p),delete e[h])},o=(h,p)=>{this.canvas&&this.resize(h,p)};let l;const c=()=>{i("attach",c),this.attached=!0,this.resize(),r("resize",o),r("detach",l)};l=()=>{this.attached=!1,i("resize",o),this._stop(),this._resize(0,0),r("attach",c)},t.isAttached(this.canvas)?c():l()}unbindEvents(){Ge(this._listeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._listeners={},Ge(this._responsiveListeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,t,r){const i=r?"set":"remove";let o,l,c,h;for(t==="dataset"&&(o=this.getDatasetMeta(e[0].datasetIndex),o.controller["_"+i+"DatasetHoverStyle"]()),c=0,h=e.length;c<h;++c){l=e[c];const p=l&&this.getDatasetMeta(l.datasetIndex).controller;p&&p[i+"HoverStyle"](l.element,l.datasetIndex,l.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const t=this._active||[],r=e.map(({datasetIndex:o,index:l})=>{const c=this.getDatasetMeta(o);if(!c)throw new Error("No dataset found at index "+o);return{datasetIndex:o,element:c.data[l],index:l}});!fd(r,t)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,t))}notifyPlugins(e,t,r){return this._plugins.notify(this,e,t,r)}isPluginEnabled(e){return this._plugins._cache.filter(t=>t.plugin.id===e).length===1}_updateHoverStyles(e,t,r){const i=this.options.hover,o=(h,p)=>h.filter(g=>!p.some(v=>g.datasetIndex===v.datasetIndex&&g.index===v.index)),l=o(t,e),c=r?e:o(e,t);l.length&&this.updateHoverStyle(l,i.mode,!1),c.length&&i.mode&&this.updateHoverStyle(c,i.mode,!0)}_eventHandler(e,t){const r={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},i=l=>(l.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",r,i)===!1)return;const o=this._handleEvent(e,t,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,i),(o||r.changed)&&this.render(),this}_handleEvent(e,t,r){const{_active:i=[],options:o}=this,l=t,c=this._getActiveElements(e,i,r,l),h=nL(e),p=L4(e,this._lastEvent,r,h);r&&(this._lastEvent=null,rt(o.onHover,[e,c,this],this),h&&rt(o.onClick,[e,c,this],this));const g=!fd(c,i);return(g||t)&&(this._active=c,this._updateHoverStyles(c,i,t)),this._lastEvent=p,g}_getActiveElements(e,t,r,i){if(e.type==="mouseout")return[];if(!r)return t;const o=this.options.hover;return this.getElementsAtEventForMode(e,o.mode,o,i)}};function mE(){return Ge(Qa.instances,n=>n._plugins.invalidate())}function V4(n,e,t){const{startAngle:r,x:i,y:o,outerRadius:l,innerRadius:c,options:h}=e,{borderWidth:p,borderJoinStyle:g}=h,v=Math.min(p/l,Pr(r-t));if(n.beginPath(),n.arc(i,o,l-p/2,r+v/2,t-v/2),c>0){const w=Math.min(p/c,Pr(r-t));n.arc(i,o,c+p/2,t-w/2,r+w/2,!0)}else{const w=Math.min(p/2,l*Pr(r-t));if(g==="round")n.arc(i,o,w,t-Xe/2,r+Xe/2,!0);else if(g==="bevel"){const T=2*w*w,R=-T*Math.cos(t+Xe/2)+i,P=-T*Math.sin(t+Xe/2)+o,A=T*Math.cos(r+Xe/2)+i,F=T*Math.sin(r+Xe/2)+o;n.lineTo(R,P),n.lineTo(A,F)}}n.closePath(),n.moveTo(0,0),n.rect(0,0,n.canvas.width,n.canvas.height),n.clip("evenodd")}function F4(n,e,t){const{startAngle:r,pixelMargin:i,x:o,y:l,outerRadius:c,innerRadius:h}=e;let p=i/c;n.beginPath(),n.arc(o,l,c,r-p,t+p),h>i?(p=i/h,n.arc(o,l,h,t+p,r-p,!0)):n.arc(o,l,i,t+Ct,r-Ct),n.closePath(),n.clip()}function j4(n){return ty(n,["outerStart","outerEnd","innerStart","innerEnd"])}function U4(n,e,t,r){const i=j4(n.options.borderRadius),o=(t-e)/2,l=Math.min(o,r*e/2),c=h=>{const p=(t-Math.min(o,h))*r/2;return yn(h,0,Math.min(o,p))};return{outerStart:c(i.outerStart),outerEnd:c(i.outerEnd),innerStart:yn(i.innerStart,0,l),innerEnd:yn(i.innerEnd,0,l)}}function _a(n,e,t,r){return{x:t+n*Math.cos(e),y:r+n*Math.sin(e)}}function Ed(n,e,t,r,i,o){const{x:l,y:c,startAngle:h,pixelMargin:p,innerRadius:g}=e,v=Math.max(e.outerRadius+r+t-p,0),w=g>0?g+r+t+p:0;let T=0;const R=i-h;if(r){const we=g>0?g-r:0,Ae=v>0?v-r:0,Se=(we+Ae)/2,re=Se!==0?R*Se/(Se+r):R;T=(R-re)/2}const P=Math.max(.001,R*v-t/Xe)/v,A=(R-P)/2,F=h+A+T,z=i-A-T,{outerStart:H,outerEnd:K,innerStart:Q,innerEnd:Y}=U4(e,w,v,z-F),D=v-H,b=v-K,N=F+H/D,L=z-K/b,k=w+Q,O=w+Y,C=F+Q/k,ge=z-Y/O;if(n.beginPath(),o){const we=(N+L)/2;if(n.arc(l,c,v,N,we),n.arc(l,c,v,we,L),K>0){const ae=_a(b,L,l,c);n.arc(ae.x,ae.y,K,L,z+Ct)}const Ae=_a(O,z,l,c);if(n.lineTo(Ae.x,Ae.y),Y>0){const ae=_a(O,ge,l,c);n.arc(ae.x,ae.y,Y,z+Ct,ge+Math.PI)}const Se=(z-Y/w+(F+Q/w))/2;if(n.arc(l,c,w,z-Y/w,Se,!0),n.arc(l,c,w,Se,F+Q/w,!0),Q>0){const ae=_a(k,C,l,c);n.arc(ae.x,ae.y,Q,C+Math.PI,F-Ct)}const re=_a(D,F,l,c);if(n.lineTo(re.x,re.y),H>0){const ae=_a(D,N,l,c);n.arc(ae.x,ae.y,H,F-Ct,N)}}else{n.moveTo(l,c);const we=Math.cos(N)*v+l,Ae=Math.sin(N)*v+c;n.lineTo(we,Ae);const Se=Math.cos(L)*v+l,re=Math.sin(L)*v+c;n.lineTo(Se,re)}n.closePath()}function z4(n,e,t,r,i){const{fullCircles:o,startAngle:l,circumference:c}=e;let h=e.endAngle;if(o){Ed(n,e,t,r,h,i);for(let p=0;p<o;++p)n.fill();isNaN(c)||(h=l+(c%bt||bt))}return Ed(n,e,t,r,h,i),n.fill(),h}function B4(n,e,t,r,i){const{fullCircles:o,startAngle:l,circumference:c,options:h}=e,{borderWidth:p,borderJoinStyle:g,borderDash:v,borderDashOffset:w,borderRadius:T}=h,R=h.borderAlign==="inner";if(!p)return;n.setLineDash(v||[]),n.lineDashOffset=w,R?(n.lineWidth=p*2,n.lineJoin=g||"round"):(n.lineWidth=p,n.lineJoin=g||"bevel");let P=e.endAngle;if(o){Ed(n,e,t,r,P,i);for(let A=0;A<o;++A)n.stroke();isNaN(c)||(P=l+(c%bt||bt))}R&&F4(n,e,P),h.selfJoin&&P-l>=Xe&&T===0&&g!=="miter"&&V4(n,e,P),o||(Ed(n,e,t,r,P,i),n.stroke())}class jI extends Ao{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(e){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,t,r){const i=this.getProps(["x","y"],r),{angle:o,distance:l}=hI(i,{x:e,y:t}),{startAngle:c,endAngle:h,innerRadius:p,outerRadius:g,circumference:v}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],r),w=(this.options.spacing+this.options.borderWidth)/2,T=ze(v,h-c),R=yd(o,c,h)&&c!==h,P=T>=bt||R,A=no(l,p+w,g+w);return P&&A}getCenterPoint(e){const{x:t,y:r,startAngle:i,endAngle:o,innerRadius:l,outerRadius:c}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:h,spacing:p}=this.options,g=(i+o)/2,v=(l+c+p+h)/2;return{x:t+Math.cos(g)*v,y:r+Math.sin(g)*v}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:t,circumference:r}=this,i=(t.offset||0)/4,o=(t.spacing||0)/2,l=t.circular;if(this.pixelMargin=t.borderAlign==="inner"?.33:0,this.fullCircles=r>bt?Math.floor(r/bt):0,r===0||this.innerRadius<0||this.outerRadius<0)return;e.save();const c=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(c)*i,Math.sin(c)*i);const h=1-Math.sin(Math.min(Xe,r||0)),p=i*h;e.fillStyle=t.backgroundColor,e.strokeStyle=t.borderColor,z4(e,this,p,o,l),B4(e,this,p,o,l),e.restore()}}function UI(n,e){const{x:t,y:r,base:i,width:o,height:l}=n.getProps(["x","y","base","width","height"],e);let c,h,p,g,v;return n.horizontal?(v=l/2,c=Math.min(t,i),h=Math.max(t,i),p=r-v,g=r+v):(v=o/2,c=t-v,h=t+v,p=Math.min(r,i),g=Math.max(r,i)),{left:c,top:p,right:h,bottom:g}}function as(n,e,t,r){return n?0:yn(e,t,r)}function $4(n,e,t){const r=n.options.borderWidth,i=n.borderSkipped,o=wI(r);return{t:as(i.top,o.top,0,t),r:as(i.right,o.right,0,e),b:as(i.bottom,o.bottom,0,t),l:as(i.left,o.left,0,e)}}function H4(n,e,t){const{enableBorderRadius:r}=n.getProps(["enableBorderRadius"]),i=n.options.borderRadius,o=Pa(i),l=Math.min(e,t),c=n.borderSkipped,h=r||Be(i);return{topLeft:as(!h||c.top||c.left,o.topLeft,0,l),topRight:as(!h||c.top||c.right,o.topRight,0,l),bottomLeft:as(!h||c.bottom||c.left,o.bottomLeft,0,l),bottomRight:as(!h||c.bottom||c.right,o.bottomRight,0,l)}}function W4(n){const e=UI(n),t=e.right-e.left,r=e.bottom-e.top,i=$4(n,t/2,r/2),o=H4(n,t/2,r/2);return{outer:{x:e.left,y:e.top,w:t,h:r,radius:o},inner:{x:e.left+i.l,y:e.top+i.t,w:t-i.l-i.r,h:r-i.t-i.b,radius:{topLeft:Math.max(0,o.topLeft-Math.max(i.t,i.l)),topRight:Math.max(0,o.topRight-Math.max(i.t,i.r)),bottomLeft:Math.max(0,o.bottomLeft-Math.max(i.b,i.l)),bottomRight:Math.max(0,o.bottomRight-Math.max(i.b,i.r))}}}}function ng(n,e,t,r){const i=e===null,o=t===null,c=n&&!(i&&o)&&UI(n,r);return c&&(i||no(e,c.left,c.right))&&(o||no(t,c.top,c.bottom))}function q4(n){return n.topLeft||n.topRight||n.bottomLeft||n.bottomRight}function K4(n,e){n.rect(e.x,e.y,e.w,e.h)}function rg(n,e,t={}){const r=n.x!==t.x?-e:0,i=n.y!==t.y?-e:0,o=(n.x+n.w!==t.x+t.w?e:0)-r,l=(n.y+n.h!==t.y+t.h?e:0)-i;return{x:n.x+r,y:n.y+i,w:n.w+o,h:n.h+l,radius:n.radius}}class G4 extends Ao{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:t,options:{borderColor:r,backgroundColor:i}}=this,{inner:o,outer:l}=W4(this),c=q4(l.radius)?_d:K4;e.save(),(l.w!==o.w||l.h!==o.h)&&(e.beginPath(),c(e,rg(l,t,o)),e.clip(),c(e,rg(o,-t,l)),e.fillStyle=r,e.fill("evenodd")),e.beginPath(),c(e,rg(o,t)),e.fillStyle=i,e.fill(),e.restore()}inRange(e,t,r){return ng(this,e,t,r)}inXRange(e,t){return ng(this,e,null,t)}inYRange(e,t){return ng(this,null,e,t)}getCenterPoint(e){const{x:t,y:r,base:i,horizontal:o}=this.getProps(["x","y","base","horizontal"],e);return{x:o?(t+i)/2:t,y:o?r:(r+i)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}const yE=(n,e)=>{let{boxHeight:t=e,boxWidth:r=e}=n;return n.usePointStyle&&(t=Math.min(t,e),r=n.pointStyleWidth||Math.min(r,e)),{boxWidth:r,boxHeight:t,itemHeight:Math.max(e,t)}},Q4=(n,e)=>n!==null&&e!==null&&n.datasetIndex===e.datasetIndex&&n.index===e.index;class _E extends Ao{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,r){this.maxWidth=e,this.maxHeight=t,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let t=rt(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter(r=>e.filter(r,this.chart.data))),e.sort&&(t=t.sort((r,i)=>e.sort(r,i,this.chart.data))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){const{options:e,ctx:t}=this;if(!e.display){this.width=this.height=0;return}const r=e.labels,i=en(r.font),o=i.size,l=this._computeTitleHeight(),{boxWidth:c,itemHeight:h}=yE(r,o);let p,g;t.font=i.string,this.isHorizontal()?(p=this.maxWidth,g=this._fitRows(l,o,c,h)+10):(g=this.maxHeight,p=this._fitCols(l,i,c,h)+10),this.width=Math.min(p,e.maxWidth||this.maxWidth),this.height=Math.min(g,e.maxHeight||this.maxHeight)}_fitRows(e,t,r,i){const{ctx:o,maxWidth:l,options:{labels:{padding:c}}}=this,h=this.legendHitBoxes=[],p=this.lineWidths=[0],g=i+c;let v=e;o.textAlign="left",o.textBaseline="middle";let w=-1,T=-g;return this.legendItems.forEach((R,P)=>{const A=r+t/2+o.measureText(R.text).width;(P===0||p[p.length-1]+A+2*c>l)&&(v+=g,p[p.length-(P>0?0:1)]=0,T+=g,w++),h[P]={left:0,top:T,row:w,width:A,height:i},p[p.length-1]+=A+c}),v}_fitCols(e,t,r,i){const{ctx:o,maxHeight:l,options:{labels:{padding:c}}}=this,h=this.legendHitBoxes=[],p=this.columnSizes=[],g=l-e;let v=c,w=0,T=0,R=0,P=0;return this.legendItems.forEach((A,F)=>{const{itemWidth:z,itemHeight:H}=Y4(r,t,o,A,i);F>0&&T+H+2*c>g&&(v+=w+c,p.push({width:w,height:T}),R+=w+c,P++,w=T=0),h[F]={left:R,top:T,col:P,width:z,height:H},w=Math.max(w,z),T+=H+c}),v+=w,p.push({width:w,height:T}),v}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:r,labels:{padding:i},rtl:o}}=this,l=Na(o,this.left,this.width);if(this.isHorizontal()){let c=0,h=Xt(r,this.left+i,this.right-this.lineWidths[c]);for(const p of t)c!==p.row&&(c=p.row,h=Xt(r,this.left+i,this.right-this.lineWidths[c])),p.top+=this.top+e+i,p.left=l.leftForLtr(l.x(h),p.width),h+=p.width+i}else{let c=0,h=Xt(r,this.top+e+i,this.bottom-this.columnSizes[c].height);for(const p of t)p.col!==c&&(c=p.col,h=Xt(r,this.top+e+i,this.bottom-this.columnSizes[c].height)),p.top=h,p.left+=this.left+i,p.left=l.leftForLtr(l.x(p.left),p.width),h+=p.height+i}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;Zm(e,this),this._draw(),ey(e)}}_draw(){const{options:e,columnSizes:t,lineWidths:r,ctx:i}=this,{align:o,labels:l}=e,c=_t.color,h=Na(e.rtl,this.left,this.width),p=en(l.font),{padding:g}=l,v=p.size,w=v/2;let T;this.drawTitle(),i.textAlign=h.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=p.string;const{boxWidth:R,boxHeight:P,itemHeight:A}=yE(l,v),F=function(Y,D,b){if(isNaN(R)||R<=0||isNaN(P)||P<0)return;i.save();const N=ze(b.lineWidth,1);if(i.fillStyle=ze(b.fillStyle,c),i.lineCap=ze(b.lineCap,"butt"),i.lineDashOffset=ze(b.lineDashOffset,0),i.lineJoin=ze(b.lineJoin,"miter"),i.lineWidth=N,i.strokeStyle=ze(b.strokeStyle,c),i.setLineDash(ze(b.lineDash,[])),l.usePointStyle){const L={radius:P*Math.SQRT2/2,pointStyle:b.pointStyle,rotation:b.rotation,borderWidth:N},k=h.xPlus(Y,R/2),O=D+w;_I(i,L,k,O,l.pointStyleWidth&&R)}else{const L=D+Math.max((v-P)/2,0),k=h.leftForLtr(Y,R),O=Pa(b.borderRadius);i.beginPath(),Object.values(O).some(C=>C!==0)?_d(i,{x:k,y:L,w:R,h:P,radius:O}):i.rect(k,L,R,P),i.fill(),N!==0&&i.stroke()}i.restore()},z=function(Y,D,b){Cc(i,b.text,Y,D+A/2,p,{strikethrough:b.hidden,textAlign:h.textAlign(b.textAlign)})},H=this.isHorizontal(),K=this._computeTitleHeight();H?T={x:Xt(o,this.left+g,this.right-r[0]),y:this.top+g+K,line:0}:T={x:this.left+g,y:Xt(o,this.top+K+g,this.bottom-t[0].height),line:0},II(this.ctx,e.textDirection);const Q=A+g;this.legendItems.forEach((Y,D)=>{i.strokeStyle=Y.fontColor,i.fillStyle=Y.fontColor;const b=i.measureText(Y.text).width,N=h.textAlign(Y.textAlign||(Y.textAlign=l.textAlign)),L=R+w+b;let k=T.x,O=T.y;h.setWidth(this.width),H?D>0&&k+L+g>this.right&&(O=T.y+=Q,T.line++,k=T.x=Xt(o,this.left+g,this.right-r[T.line])):D>0&&O+Q>this.bottom&&(k=T.x=k+t[T.line].width+g,T.line++,O=T.y=Xt(o,this.top+K+g,this.bottom-t[T.line].height));const C=h.x(k);if(F(C,O,Y),k=gL(N,k+R+w,H?k+L:this.right,e.rtl),z(h.x(k),O,Y),H)T.x+=L+g;else if(typeof Y.text!="string"){const ge=p.lineHeight;T.y+=zI(Y,ge)+g}else T.y+=Q}),SI(this.ctx,e.textDirection)}drawTitle(){const e=this.options,t=e.title,r=en(t.font),i=qn(t.padding);if(!t.display)return;const o=Na(e.rtl,this.left,this.width),l=this.ctx,c=t.position,h=r.size/2,p=i.top+h;let g,v=this.left,w=this.width;if(this.isHorizontal())w=Math.max(...this.lineWidths),g=this.top+p,v=Xt(e.align,v,this.right-w);else{const R=this.columnSizes.reduce((P,A)=>Math.max(P,A.height),0);g=p+Xt(e.align,this.top,this.bottom-R-e.labels.padding-this._computeTitleHeight())}const T=Xt(c,v,v+w);l.textAlign=o.textAlign(Xm(c)),l.textBaseline="middle",l.strokeStyle=t.color,l.fillStyle=t.color,l.font=r.string,Cc(l,t.text,T,g,r)}_computeTitleHeight(){const e=this.options.title,t=en(e.font),r=qn(e.padding);return e.display?t.lineHeight+r.height:0}_getLegendItemAt(e,t){let r,i,o;if(no(e,this.left,this.right)&&no(t,this.top,this.bottom)){for(o=this.legendHitBoxes,r=0;r<o.length;++r)if(i=o[r],no(e,i.left,i.left+i.width)&&no(t,i.top,i.top+i.height))return this.legendItems[r]}return null}handleEvent(e){const t=this.options;if(!Z4(e.type,t))return;const r=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const i=this._hoveredItem,o=Q4(i,r);i&&!o&&rt(t.onLeave,[e,i,this],this),this._hoveredItem=r,r&&!o&&rt(t.onHover,[e,r,this],this)}else r&&rt(t.onClick,[e,r,this],this)}}function Y4(n,e,t,r,i){const o=X4(r,n,e,t),l=J4(i,r,e.lineHeight);return{itemWidth:o,itemHeight:l}}function X4(n,e,t,r){let i=n.text;return i&&typeof i!="string"&&(i=i.reduce((o,l)=>o.length>l.length?o:l)),e+t.size/2+r.measureText(i).width}function J4(n,e,t){let r=n;return typeof e.text!="string"&&(r=zI(e,t)),r}function zI(n,e){const t=n.text?n.text.length:0;return e*t}function Z4(n,e){return!!((n==="mousemove"||n==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(n==="click"||n==="mouseup"))}var cy={id:"legend",_element:_E,start(n,e,t){const r=n.legend=new _E({ctx:n.ctx,options:t,chart:n});Bn.configure(n,r,t),Bn.addBox(n,r)},stop(n){Bn.removeBox(n,n.legend),delete n.legend},beforeUpdate(n,e,t){const r=n.legend;Bn.configure(n,r,t),r.options=t},afterUpdate(n){const e=n.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(n,e){e.replay||n.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(n,e,t){const r=e.datasetIndex,i=t.chart;i.isDatasetVisible(r)?(i.hide(r),e.hidden=!0):(i.show(r),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:n=>n.chart.options.color,boxWidth:40,padding:10,generateLabels(n){const e=n.data.datasets,{labels:{usePointStyle:t,pointStyle:r,textAlign:i,color:o,useBorderRadius:l,borderRadius:c}}=n.legend.options;return n._getSortedDatasetMetas().map(h=>{const p=h.controller.getStyle(t?0:void 0),g=qn(p.borderWidth);return{text:e[h.index].label,fillStyle:p.backgroundColor,fontColor:o,hidden:!h.visible,lineCap:p.borderCapStyle,lineDash:p.borderDash,lineDashOffset:p.borderDashOffset,lineJoin:p.borderJoinStyle,lineWidth:(g.width+g.height)/4,strokeStyle:p.borderColor,pointStyle:r||p.pointStyle,rotation:p.rotation,textAlign:i||p.textAlign,borderRadius:l&&(c||p.borderRadius),datasetIndex:h.index}},this)}},title:{color:n=>n.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:n=>!n.startsWith("on"),labels:{_scriptable:n=>!["generateLabels","filter","sort"].includes(n)}}};class BI extends Ao{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t){const r=this.options;if(this.left=0,this.top=0,!r.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=t;const i=Rt(r.text)?r.text.length:1;this._padding=qn(r.padding);const o=i*en(r.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=o:this.width=o}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:t,left:r,bottom:i,right:o,options:l}=this,c=l.align;let h=0,p,g,v;return this.isHorizontal()?(g=Xt(c,r,o),v=t+e,p=o-r):(l.position==="left"?(g=r+e,v=Xt(c,i,t),h=Xe*-.5):(g=o-e,v=Xt(c,t,i),h=Xe*.5),p=i-t),{titleX:g,titleY:v,maxWidth:p,rotation:h}}draw(){const e=this.ctx,t=this.options;if(!t.display)return;const r=en(t.font),o=r.lineHeight/2+this._padding.top,{titleX:l,titleY:c,maxWidth:h,rotation:p}=this._drawArgs(o);Cc(e,t.text,0,0,r,{color:t.color,maxWidth:h,rotation:p,textAlign:Xm(t.align),textBaseline:"middle",translation:[l,c]})}}function eF(n,e){const t=new BI({ctx:n.ctx,options:e,chart:n});Bn.configure(n,t,e),Bn.addBox(n,t),n.titleBlock=t}var uy={id:"title",_element:BI,start(n,e,t){eF(n,t)},stop(n){const e=n.titleBlock;Bn.removeBox(n,e),delete n.titleBlock},beforeUpdate(n,e,t){const r=n.titleBlock;Bn.configure(n,r,t),r.options=t},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const sc={average(n){if(!n.length)return!1;let e,t,r=new Set,i=0,o=0;for(e=0,t=n.length;e<t;++e){const c=n[e].element;if(c&&c.hasValue()){const h=c.tooltipPosition();r.add(h.x),i+=h.y,++o}}return o===0||r.size===0?!1:{x:[...r].reduce((c,h)=>c+h)/r.size,y:i/o}},nearest(n,e){if(!n.length)return!1;let t=e.x,r=e.y,i=Number.POSITIVE_INFINITY,o,l,c;for(o=0,l=n.length;o<l;++o){const h=n[o].element;if(h&&h.hasValue()){const p=h.getCenterPoint(),g=cL(e,p);g<i&&(i=g,c=h)}}if(c){const h=c.tooltipPosition();t=h.x,r=h.y}return{x:t,y:r}}};function Ar(n,e){return e&&(Rt(e)?Array.prototype.push.apply(n,e):n.push(e)),n}function ai(n){return(typeof n=="string"||n instanceof String)&&n.indexOf(`
`)>-1?n.split(`
`):n}function tF(n,e){const{element:t,datasetIndex:r,index:i}=e,o=n.getDatasetMeta(r).controller,{label:l,value:c}=o.getLabelAndValue(i);return{chart:n,label:l,parsed:o.getParsed(i),raw:n.data.datasets[r].data[i],formattedValue:c,dataset:o.getDataset(),dataIndex:i,datasetIndex:r,element:t}}function vE(n,e){const t=n.chart.ctx,{body:r,footer:i,title:o}=n,{boxWidth:l,boxHeight:c}=e,h=en(e.bodyFont),p=en(e.titleFont),g=en(e.footerFont),v=o.length,w=i.length,T=r.length,R=qn(e.padding);let P=R.height,A=0,F=r.reduce((K,Q)=>K+Q.before.length+Q.lines.length+Q.after.length,0);if(F+=n.beforeBody.length+n.afterBody.length,v&&(P+=v*p.lineHeight+(v-1)*e.titleSpacing+e.titleMarginBottom),F){const K=e.displayColors?Math.max(c,h.lineHeight):h.lineHeight;P+=T*K+(F-T)*h.lineHeight+(F-1)*e.bodySpacing}w&&(P+=e.footerMarginTop+w*g.lineHeight+(w-1)*e.footerSpacing);let z=0;const H=function(K){A=Math.max(A,t.measureText(K).width+z)};return t.save(),t.font=p.string,Ge(n.title,H),t.font=h.string,Ge(n.beforeBody.concat(n.afterBody),H),z=e.displayColors?l+2+e.boxPadding:0,Ge(r,K=>{Ge(K.before,H),Ge(K.lines,H),Ge(K.after,H)}),z=0,t.font=g.string,Ge(n.footer,H),t.restore(),A+=R.width,{width:A,height:P}}function nF(n,e){const{y:t,height:r}=e;return t<r/2?"top":t>n.height-r/2?"bottom":"center"}function rF(n,e,t,r){const{x:i,width:o}=r,l=t.caretSize+t.caretPadding;if(n==="left"&&i+o+l>e.width||n==="right"&&i-o-l<0)return!0}function iF(n,e,t,r){const{x:i,width:o}=t,{width:l,chartArea:{left:c,right:h}}=n;let p="center";return r==="center"?p=i<=(c+h)/2?"left":"right":i<=o/2?p="left":i>=l-o/2&&(p="right"),rF(p,n,e,t)&&(p="center"),p}function wE(n,e,t){const r=t.yAlign||e.yAlign||nF(n,t);return{xAlign:t.xAlign||e.xAlign||iF(n,e,t,r),yAlign:r}}function sF(n,e){let{x:t,width:r}=n;return e==="right"?t-=r:e==="center"&&(t-=r/2),t}function oF(n,e,t){let{y:r,height:i}=n;return e==="top"?r+=t:e==="bottom"?r-=i+t:r-=i/2,r}function EE(n,e,t,r){const{caretSize:i,caretPadding:o,cornerRadius:l}=n,{xAlign:c,yAlign:h}=t,p=i+o,{topLeft:g,topRight:v,bottomLeft:w,bottomRight:T}=Pa(l);let R=sF(e,c);const P=oF(e,h,p);return h==="center"?c==="left"?R+=p:c==="right"&&(R-=p):c==="left"?R-=Math.max(g,w)+i:c==="right"&&(R+=Math.max(v,T)+i),{x:yn(R,0,r.width-e.width),y:yn(P,0,r.height-e.height)}}function Ah(n,e,t){const r=qn(t.padding);return e==="center"?n.x+n.width/2:e==="right"?n.x+n.width-r.right:n.x+r.left}function xE(n){return Ar([],ai(n))}function aF(n,e,t){return Ka(n,{tooltip:e,tooltipItems:t,type:"tooltip"})}function TE(n,e){const t=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return t?n.override(t):n}const $I={beforeTitle:si,title(n){if(n.length>0){const e=n[0],t=e.chart.data.labels,r=t?t.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(r>0&&e.dataIndex<r)return t[e.dataIndex]}return""},afterTitle:si,beforeBody:si,beforeLabel:si,label(n){if(this&&this.options&&this.options.mode==="dataset")return n.label+": "+n.formattedValue||n.formattedValue;let e=n.dataset.label||"";e&&(e+=": ");const t=n.formattedValue;return Je(t)||(e+=t),e},labelColor(n){const t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(n){const t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:si,afterBody:si,beforeFooter:si,footer:si,afterFooter:si};function pn(n,e,t,r){const i=n[e].call(t,r);return typeof i>"u"?$I[e].call(t,r):i}class bE extends Ao{static positioners=sc;constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const t=this.chart,r=this.options.setContext(this.getContext()),i=r.enabled&&t.options.animation&&r.animations,o=new kI(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(o)),o}getContext(){return this.$context||(this.$context=aF(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,t){const{callbacks:r}=t,i=pn(r,"beforeTitle",this,e),o=pn(r,"title",this,e),l=pn(r,"afterTitle",this,e);let c=[];return c=Ar(c,ai(i)),c=Ar(c,ai(o)),c=Ar(c,ai(l)),c}getBeforeBody(e,t){return xE(pn(t.callbacks,"beforeBody",this,e))}getBody(e,t){const{callbacks:r}=t,i=[];return Ge(e,o=>{const l={before:[],lines:[],after:[]},c=TE(r,o);Ar(l.before,ai(pn(c,"beforeLabel",this,o))),Ar(l.lines,pn(c,"label",this,o)),Ar(l.after,ai(pn(c,"afterLabel",this,o))),i.push(l)}),i}getAfterBody(e,t){return xE(pn(t.callbacks,"afterBody",this,e))}getFooter(e,t){const{callbacks:r}=t,i=pn(r,"beforeFooter",this,e),o=pn(r,"footer",this,e),l=pn(r,"afterFooter",this,e);let c=[];return c=Ar(c,ai(i)),c=Ar(c,ai(o)),c=Ar(c,ai(l)),c}_createItems(e){const t=this._active,r=this.chart.data,i=[],o=[],l=[];let c=[],h,p;for(h=0,p=t.length;h<p;++h)c.push(tF(this.chart,t[h]));return e.filter&&(c=c.filter((g,v,w)=>e.filter(g,v,w,r))),e.itemSort&&(c=c.sort((g,v)=>e.itemSort(g,v,r))),Ge(c,g=>{const v=TE(e.callbacks,g);i.push(pn(v,"labelColor",this,g)),o.push(pn(v,"labelPointStyle",this,g)),l.push(pn(v,"labelTextColor",this,g))}),this.labelColors=i,this.labelPointStyles=o,this.labelTextColors=l,this.dataPoints=c,c}update(e,t){const r=this.options.setContext(this.getContext()),i=this._active;let o,l=[];if(!i.length)this.opacity!==0&&(o={opacity:0});else{const c=sc[r.position].call(this,i,this._eventPosition);l=this._createItems(r),this.title=this.getTitle(l,r),this.beforeBody=this.getBeforeBody(l,r),this.body=this.getBody(l,r),this.afterBody=this.getAfterBody(l,r),this.footer=this.getFooter(l,r);const h=this._size=vE(this,r),p=Object.assign({},c,h),g=wE(this.chart,r,p),v=EE(r,p,g,this.chart);this.xAlign=g.xAlign,this.yAlign=g.yAlign,o={opacity:1,x:v.x,y:v.y,width:h.width,height:h.height,caretX:c.x,caretY:c.y}}this._tooltipItems=l,this.$context=void 0,o&&this._resolveAnimations().update(this,o),e&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:t})}drawCaret(e,t,r,i){const o=this.getCaretPosition(e,r,i);t.lineTo(o.x1,o.y1),t.lineTo(o.x2,o.y2),t.lineTo(o.x3,o.y3)}getCaretPosition(e,t,r){const{xAlign:i,yAlign:o}=this,{caretSize:l,cornerRadius:c}=r,{topLeft:h,topRight:p,bottomLeft:g,bottomRight:v}=Pa(c),{x:w,y:T}=e,{width:R,height:P}=t;let A,F,z,H,K,Q;return o==="center"?(K=T+P/2,i==="left"?(A=w,F=A-l,H=K+l,Q=K-l):(A=w+R,F=A+l,H=K-l,Q=K+l),z=A):(i==="left"?F=w+Math.max(h,g)+l:i==="right"?F=w+R-Math.max(p,v)-l:F=this.caretX,o==="top"?(H=T,K=H-l,A=F-l,z=F+l):(H=T+P,K=H+l,A=F+l,z=F-l),Q=H),{x1:A,x2:F,x3:z,y1:H,y2:K,y3:Q}}drawTitle(e,t,r){const i=this.title,o=i.length;let l,c,h;if(o){const p=Na(r.rtl,this.x,this.width);for(e.x=Ah(this,r.titleAlign,r),t.textAlign=p.textAlign(r.titleAlign),t.textBaseline="middle",l=en(r.titleFont),c=r.titleSpacing,t.fillStyle=r.titleColor,t.font=l.string,h=0;h<o;++h)t.fillText(i[h],p.x(e.x),e.y+l.lineHeight/2),e.y+=l.lineHeight+c,h+1===o&&(e.y+=r.titleMarginBottom-c)}}_drawColorBox(e,t,r,i,o){const l=this.labelColors[r],c=this.labelPointStyles[r],{boxHeight:h,boxWidth:p}=o,g=en(o.bodyFont),v=Ah(this,"left",o),w=i.x(v),T=h<g.lineHeight?(g.lineHeight-h)/2:0,R=t.y+T;if(o.usePointStyle){const P={radius:Math.min(p,h)/2,pointStyle:c.pointStyle,rotation:c.rotation,borderWidth:1},A=i.leftForLtr(w,p)+p/2,F=R+h/2;e.strokeStyle=o.multiKeyBackground,e.fillStyle=o.multiKeyBackground,Fw(e,P,A,F),e.strokeStyle=l.borderColor,e.fillStyle=l.backgroundColor,Fw(e,P,A,F)}else{e.lineWidth=Be(l.borderWidth)?Math.max(...Object.values(l.borderWidth)):l.borderWidth||1,e.strokeStyle=l.borderColor,e.setLineDash(l.borderDash||[]),e.lineDashOffset=l.borderDashOffset||0;const P=i.leftForLtr(w,p),A=i.leftForLtr(i.xPlus(w,1),p-2),F=Pa(l.borderRadius);Object.values(F).some(z=>z!==0)?(e.beginPath(),e.fillStyle=o.multiKeyBackground,_d(e,{x:P,y:R,w:p,h,radius:F}),e.fill(),e.stroke(),e.fillStyle=l.backgroundColor,e.beginPath(),_d(e,{x:A,y:R+1,w:p-2,h:h-2,radius:F}),e.fill()):(e.fillStyle=o.multiKeyBackground,e.fillRect(P,R,p,h),e.strokeRect(P,R,p,h),e.fillStyle=l.backgroundColor,e.fillRect(A,R+1,p-2,h-2))}e.fillStyle=this.labelTextColors[r]}drawBody(e,t,r){const{body:i}=this,{bodySpacing:o,bodyAlign:l,displayColors:c,boxHeight:h,boxWidth:p,boxPadding:g}=r,v=en(r.bodyFont);let w=v.lineHeight,T=0;const R=Na(r.rtl,this.x,this.width),P=function(b){t.fillText(b,R.x(e.x+T),e.y+w/2),e.y+=w+o},A=R.textAlign(l);let F,z,H,K,Q,Y,D;for(t.textAlign=l,t.textBaseline="middle",t.font=v.string,e.x=Ah(this,A,r),t.fillStyle=r.bodyColor,Ge(this.beforeBody,P),T=c&&A!=="right"?l==="center"?p/2+g:p+2+g:0,K=0,Y=i.length;K<Y;++K){for(F=i[K],z=this.labelTextColors[K],t.fillStyle=z,Ge(F.before,P),H=F.lines,c&&H.length&&(this._drawColorBox(t,e,K,R,r),w=Math.max(v.lineHeight,h)),Q=0,D=H.length;Q<D;++Q)P(H[Q]),w=v.lineHeight;Ge(F.after,P)}T=0,w=v.lineHeight,Ge(this.afterBody,P),e.y-=o}drawFooter(e,t,r){const i=this.footer,o=i.length;let l,c;if(o){const h=Na(r.rtl,this.x,this.width);for(e.x=Ah(this,r.footerAlign,r),e.y+=r.footerMarginTop,t.textAlign=h.textAlign(r.footerAlign),t.textBaseline="middle",l=en(r.footerFont),t.fillStyle=r.footerColor,t.font=l.string,c=0;c<o;++c)t.fillText(i[c],h.x(e.x),e.y+l.lineHeight/2),e.y+=l.lineHeight+r.footerSpacing}}drawBackground(e,t,r,i){const{xAlign:o,yAlign:l}=this,{x:c,y:h}=e,{width:p,height:g}=r,{topLeft:v,topRight:w,bottomLeft:T,bottomRight:R}=Pa(i.cornerRadius);t.fillStyle=i.backgroundColor,t.strokeStyle=i.borderColor,t.lineWidth=i.borderWidth,t.beginPath(),t.moveTo(c+v,h),l==="top"&&this.drawCaret(e,t,r,i),t.lineTo(c+p-w,h),t.quadraticCurveTo(c+p,h,c+p,h+w),l==="center"&&o==="right"&&this.drawCaret(e,t,r,i),t.lineTo(c+p,h+g-R),t.quadraticCurveTo(c+p,h+g,c+p-R,h+g),l==="bottom"&&this.drawCaret(e,t,r,i),t.lineTo(c+T,h+g),t.quadraticCurveTo(c,h+g,c,h+g-T),l==="center"&&o==="left"&&this.drawCaret(e,t,r,i),t.lineTo(c,h+v),t.quadraticCurveTo(c,h,c+v,h),t.closePath(),t.fill(),i.borderWidth>0&&t.stroke()}_updateAnimationTarget(e){const t=this.chart,r=this.$animations,i=r&&r.x,o=r&&r.y;if(i||o){const l=sc[e.position].call(this,this._active,this._eventPosition);if(!l)return;const c=this._size=vE(this,e),h=Object.assign({},l,this._size),p=wE(t,e,h),g=EE(e,h,p,t);(i._to!==g.x||o._to!==g.y)&&(this.xAlign=p.xAlign,this.yAlign=p.yAlign,this.width=c.width,this.height=c.height,this.caretX=l.x,this.caretY=l.y,this._resolveAnimations().update(this,g))}}_willRender(){return!!this.opacity}draw(e){const t=this.options.setContext(this.getContext());let r=this.opacity;if(!r)return;this._updateAnimationTarget(t);const i={width:this.width,height:this.height},o={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;const l=qn(t.padding),c=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;t.enabled&&c&&(e.save(),e.globalAlpha=r,this.drawBackground(o,e,i,t),II(e,t.textDirection),o.y+=l.top,this.drawTitle(o,e,t),this.drawBody(o,e,t),this.drawFooter(o,e,t),SI(e,t.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,t){const r=this._active,i=e.map(({datasetIndex:c,index:h})=>{const p=this.chart.getDatasetMeta(c);if(!p)throw new Error("Cannot find a dataset at index "+c);return{datasetIndex:c,element:p.data[h],index:h}}),o=!fd(r,i),l=this._positionChanged(i,t);(o||l)&&(this._active=i,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,t,r=!0){if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,o=this._active||[],l=this._getActiveElements(e,o,t,r),c=this._positionChanged(l,e),h=t||!fd(l,o)||c;return h&&(this._active=l,(i.enabled||i.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,t))),h}_getActiveElements(e,t,r,i){const o=this.options;if(e.type==="mouseout")return[];if(!i)return t.filter(c=>this.chart.data.datasets[c.datasetIndex]&&this.chart.getDatasetMeta(c.datasetIndex).controller.getParsed(c.index)!==void 0);const l=this.chart.getElementsAtEventForMode(e,o.mode,o,r);return o.reverse&&l.reverse(),l}_positionChanged(e,t){const{caretX:r,caretY:i,options:o}=this,l=sc[o.position].call(this,e,t);return l!==!1&&(r!==l.x||i!==l.y)}}var hy={id:"tooltip",_element:bE,positioners:sc,afterInit(n,e,t){t&&(n.tooltip=new bE({chart:n,options:t}))},beforeUpdate(n,e,t){n.tooltip&&n.tooltip.initialize(t)},reset(n,e,t){n.tooltip&&n.tooltip.initialize(t)},afterDraw(n){const e=n.tooltip;if(e&&e._willRender()){const t={tooltip:e};if(n.notifyPlugins("beforeTooltipDraw",{...t,cancelable:!0})===!1)return;e.draw(n.ctx),n.notifyPlugins("afterTooltipDraw",t)}},afterEvent(n,e){if(n.tooltip){const t=e.replay;n.tooltip.handleEvent(e.event,t,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(n,e)=>e.bodyFont.size,boxWidth:(n,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:$I},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:n=>n!=="filter"&&n!=="itemSort"&&n!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const lF=(n,e,t,r)=>(typeof e=="string"?(t=n.push(e)-1,r.unshift({index:t,label:e})):isNaN(e)&&(t=null),t);function cF(n,e,t,r){const i=n.indexOf(e);if(i===-1)return lF(n,e,t,r);const o=n.lastIndexOf(e);return i!==o?t:i}const uF=(n,e)=>n===null?null:yn(Math.round(n),0,e);function IE(n){const e=this.getLabels();return n>=0&&n<e.length?e[n]:n}class hF extends Ga{static id="category";static defaults={ticks:{callback:IE}};constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const t=this._addedLabels;if(t.length){const r=this.getLabels();for(const{index:i,label:o}of t)r[i]===o&&r.splice(i,1);this._addedLabels=[]}super.init(e)}parse(e,t){if(Je(e))return null;const r=this.getLabels();return t=isFinite(t)&&r[t]===e?t:cF(r,e,ze(t,e),this._addedLabels),uF(t,r.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let{min:r,max:i}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(r=0),t||(i=this.getLabels().length-1)),this.min=r,this.max=i}buildTicks(){const e=this.min,t=this.max,r=this.options.offset,i=[];let o=this.getLabels();o=e===0&&t===o.length-1?o:o.slice(e,t+1),this._valueRange=Math.max(o.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let l=e;l<=t;l++)i.push({value:l});return i}getLabelForValue(e){return IE.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}function dF(n,e){const t=[],{bounds:i,step:o,min:l,max:c,precision:h,count:p,maxTicks:g,maxDigits:v,includeBounds:w}=n,T=o||1,R=g-1,{min:P,max:A}=e,F=!Je(l),z=!Je(c),H=!Je(p),K=(A-P)/(v+1);let Q=Rw((A-P)/R/T)*T,Y,D,b,N;if(Q<1e-14&&!F&&!z)return[{value:P},{value:A}];N=Math.ceil(A/Q)-Math.floor(P/Q),N>R&&(Q=Rw(N*Q/R/T)*T),Je(h)||(Y=Math.pow(10,h),Q=Math.ceil(Q*Y)/Y),i==="ticks"?(D=Math.floor(P/Q)*Q,b=Math.ceil(A/Q)*Q):(D=P,b=A),F&&z&&o&&oL((c-l)/o,Q/1e3)?(N=Math.round(Math.min((c-l)/Q,g)),Q=(c-l)/N,D=l,b=c):H?(D=F?l:D,b=z?c:b,N=p-1,Q=(b-D)/N):(N=(b-D)/Q,$h(N,Math.round(N),Q/1e3)?N=Math.round(N):N=Math.ceil(N));const L=Math.max(Cw(Q),Cw(D));Y=Math.pow(10,Je(h)?L:h),D=Math.round(D*Y)/Y,b=Math.round(b*Y)/Y;let k=0;for(F&&(w&&D!==l?(t.push({value:l}),D<l&&k++,$h(Math.round((D+k*Q)*Y)/Y,l,SE(l,K,n))&&k++):D<l&&k++);k<N;++k){const O=Math.round((D+k*Q)*Y)/Y;if(z&&O>c)break;t.push({value:O})}return z&&w&&b!==c?t.length&&$h(t[t.length-1].value,c,SE(c,K,n))?t[t.length-1].value=c:t.push({value:c}):(!z||b===c)&&t.push({value:b}),t}function SE(n,e,{horizontal:t,minRotation:r}){const i=di(r),o=(t?Math.sin(i):Math.cos(i))||.001,l=.75*e*(""+n).length;return Math.min(e/o,l)}class fF extends Ga{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return Je(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:t,maxDefined:r}=this.getUserBounds();let{min:i,max:o}=this;const l=h=>i=t?i:h,c=h=>o=r?o:h;if(e){const h=ds(i),p=ds(o);h<0&&p<0?c(0):h>0&&p>0&&l(0)}if(i===o){let h=o===0?1:Math.abs(o*.05);c(o+h),e||l(i-h)}this.min=i,this.max=o}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:t,stepSize:r}=e,i;return r?(i=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,i>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${i} ticks. Limiting to 1000.`),i=1e3)):(i=this.computeTickLimit(),t=t||11),t&&(i=Math.min(t,i)),i}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,t=e.ticks;let r=this.getTickLimit();r=Math.max(2,r);const i={maxTicks:r,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:t.includeBounds!==!1},o=this._range||this,l=dF(i,o);return e.bounds==="ticks"&&aL(l,this,"value"),e.reverse?(l.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),l}configure(){const e=this.ticks;let t=this.min,r=this.max;if(super.configure(),this.options.offset&&e.length){const i=(r-t)/Math.max(e.length-1,1)/2;t-=i,r+=i}this._startValue=t,this._endValue=r,this._valueRange=r-t}getLabelForValue(e){return Jm(e,this.chart.options.locale,this.options.ticks.format)}}class pF extends fF{static id="linear";static defaults={ticks:{callback:yI.formatters.numeric}};determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=Wn(e)?e:0,this.max=Wn(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),t=e?this.width:this.height,r=di(this.options.ticks.minRotation),i=(e?Math.sin(r):Math.cos(r))||.001,o=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,o.lineHeight/i))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}const Yd={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},mn=Object.keys(Yd);function kE(n,e){return n-e}function AE(n,e){if(Je(e))return null;const t=n._adapter,{parser:r,round:i,isoWeekday:o}=n._parseOpts;let l=e;return typeof r=="function"&&(l=r(l)),Wn(l)||(l=typeof r=="string"?t.parse(l,r):t.parse(l)),l===null?null:(i&&(l=i==="week"&&(md(o)||o===!0)?t.startOf(l,"isoWeek",o):t.startOf(l,i)),+l)}function RE(n,e,t,r){const i=mn.length;for(let o=mn.indexOf(n);o<i-1;++o){const l=Yd[mn[o]],c=l.steps?l.steps:Number.MAX_SAFE_INTEGER;if(l.common&&Math.ceil((t-e)/(c*l.size))<=r)return mn[o]}return mn[i-1]}function gF(n,e,t,r,i){for(let o=mn.length-1;o>=mn.indexOf(t);o--){const l=mn[o];if(Yd[l].common&&n._adapter.diff(i,r,l)>=e-1)return l}return mn[t?mn.indexOf(t):0]}function mF(n){for(let e=mn.indexOf(n)+1,t=mn.length;e<t;++e)if(Yd[mn[e]].common)return mn[e]}function CE(n,e,t){if(!t)n[e]=!0;else if(t.length){const{lo:r,hi:i}=Ym(t,e),o=t[r]>=e?t[r]:t[i];n[o]=!0}}function yF(n,e,t,r){const i=n._adapter,o=+i.startOf(e[0].value,r),l=e[e.length-1].value;let c,h;for(c=o;c<=l;c=+i.add(c,1,r))h=t[c],h>=0&&(e[h].major=!0);return e}function PE(n,e,t){const r=[],i={},o=e.length;let l,c;for(l=0;l<o;++l)c=e[l],i[c]=l,r.push({value:c,major:!1});return o===0||!t?r:yF(n,r,i,t)}class NE extends Ga{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,t={}){const r=e.time||(e.time={}),i=this._adapter=new AV._date(e.adapters.date);i.init(t),pc(r.displayFormats,i.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(e),this._normalized=t.normalized}parse(e,t){return e===void 0?null:AE(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,t=this._adapter,r=e.time.unit||"day";let{min:i,max:o,minDefined:l,maxDefined:c}=this.getUserBounds();function h(p){!l&&!isNaN(p.min)&&(i=Math.min(i,p.min)),!c&&!isNaN(p.max)&&(o=Math.max(o,p.max))}(!l||!c)&&(h(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&h(this.getMinMax(!1))),i=Wn(i)&&!isNaN(i)?i:+t.startOf(Date.now(),r),o=Wn(o)&&!isNaN(o)?o:+t.endOf(Date.now(),r)+1,this.min=Math.min(i,o-1),this.max=Math.max(i+1,o)}_getLabelBounds(){const e=this.getLabelTimestamps();let t=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return e.length&&(t=e[0],r=e[e.length-1]),{min:t,max:r}}buildTicks(){const e=this.options,t=e.time,r=e.ticks,i=r.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const o=this.min,l=this.max,c=dL(i,o,l);return this._unit=t.unit||(r.autoSkip?RE(t.minUnit,this.min,this.max,this._getLabelCapacity(o)):gF(this,c.length,t.minUnit,this.min,this.max)),this._majorUnit=!r.major.enabled||this._unit==="year"?void 0:mF(this._unit),this.initOffsets(i),e.reverse&&c.reverse(),PE(this,c,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let t=0,r=0,i,o;this.options.offset&&e.length&&(i=this.getDecimalForValue(e[0]),e.length===1?t=1-i:t=(this.getDecimalForValue(e[1])-i)/2,o=this.getDecimalForValue(e[e.length-1]),e.length===1?r=o:r=(o-this.getDecimalForValue(e[e.length-2]))/2);const l=e.length<3?.5:.25;t=yn(t,0,l),r=yn(r,0,l),this._offsets={start:t,end:r,factor:1/(t+1+r)}}_generate(){const e=this._adapter,t=this.min,r=this.max,i=this.options,o=i.time,l=o.unit||RE(o.minUnit,t,r,this._getLabelCapacity(t)),c=ze(i.ticks.stepSize,1),h=l==="week"?o.isoWeekday:!1,p=md(h)||h===!0,g={};let v=t,w,T;if(p&&(v=+e.startOf(v,"isoWeek",h)),v=+e.startOf(v,p?"day":l),e.diff(r,t,l)>1e5*c)throw new Error(t+" and "+r+" are too far apart with stepSize of "+c+" "+l);const R=i.ticks.source==="data"&&this.getDataTimestamps();for(w=v,T=0;w<r;w=+e.add(w,c,l),T++)CE(g,w,R);return(w===r||i.bounds==="ticks"||T===1)&&CE(g,w,R),Object.keys(g).sort(kE).map(P=>+P)}getLabelForValue(e){const t=this._adapter,r=this.options.time;return r.tooltipFormat?t.format(e,r.tooltipFormat):t.format(e,r.displayFormats.datetime)}format(e,t){const i=this.options.time.displayFormats,o=this._unit,l=t||i[o];return this._adapter.format(e,l)}_tickFormatFunction(e,t,r,i){const o=this.options,l=o.ticks.callback;if(l)return rt(l,[e,t,r],this);const c=o.time.displayFormats,h=this._unit,p=this._majorUnit,g=h&&c[h],v=p&&c[p],w=r[t],T=p&&v&&w&&w.major;return this._adapter.format(e,i||(T?v:g))}generateTickLabels(e){let t,r,i;for(t=0,r=e.length;t<r;++t)i=e[t],i.label=this._tickFormatFunction(i.value,t,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const t=this._offsets,r=this.getDecimalForValue(e);return this.getPixelForDecimal((t.start+r)*t.factor)}getValueForPixel(e){const t=this._offsets,r=this.getDecimalForPixel(e)/t.factor-t.end;return this.min+r*(this.max-this.min)}_getLabelSize(e){const t=this.options.ticks,r=this.ctx.measureText(e).width,i=di(this.isHorizontal()?t.maxRotation:t.minRotation),o=Math.cos(i),l=Math.sin(i),c=this._resolveTickFontOptions(0).size;return{w:r*o+c*l,h:r*l+c*o}}_getLabelCapacity(e){const t=this.options.time,r=t.displayFormats,i=r[t.unit]||r.millisecond,o=this._tickFormatFunction(e,0,PE(this,[e],this._majorUnit),i),l=this._getLabelSize(o),c=Math.floor(this.isHorizontal()?this.width/l.w:this.height/l.h)-1;return c>0?c:1}getDataTimestamps(){let e=this._cache.data||[],t,r;if(e.length)return e;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(t=0,r=i.length;t<r;++t)e=e.concat(i[t].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let t,r;if(e.length)return e;const i=this.getLabels();for(t=0,r=i.length;t<r;++t)e.push(AE(this,i[t]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return fI(e.sort(kE))}}function Rh(n,e,t){let r=0,i=n.length-1,o,l,c,h;t?(e>=n[r].pos&&e<=n[i].pos&&({lo:r,hi:i}=Fg(n,"pos",e)),{pos:o,time:c}=n[r],{pos:l,time:h}=n[i]):(e>=n[r].time&&e<=n[i].time&&({lo:r,hi:i}=Fg(n,"time",e)),{time:o,pos:c}=n[r],{time:l,pos:h}=n[i]);const p=l-o;return p?c+(h-c)*(e-o)/p:c}class Mj extends NE{static id="timeseries";static defaults=NE.defaults;constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=Rh(t,this.min),this._tableRange=Rh(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:t,max:r}=this,i=[],o=[];let l,c,h,p,g;for(l=0,c=e.length;l<c;++l)p=e[l],p>=t&&p<=r&&i.push(p);if(i.length<2)return[{time:t,pos:0},{time:r,pos:1}];for(l=0,c=i.length;l<c;++l)g=i[l+1],h=i[l-1],p=i[l],Math.round((g+h)/2)!==p&&o.push({time:p,pos:l/(c-1)});return o}_generate(){const e=this.min,t=this.max;let r=super.getDataTimestamps();return(!r.includes(e)||!r.length)&&r.splice(0,0,e),(!r.includes(t)||r.length===1)&&r.push(t),r.sort((i,o)=>i-o)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const t=this.getDataTimestamps(),r=this.getLabelTimestamps();return t.length&&r.length?e=this.normalize(t.concat(r)):e=t.length?t:r,e=this._cache.all=e,e}getDecimalForValue(e){return(Rh(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const t=this._offsets,r=this.getDecimalForPixel(e)/t.factor-t.end;return Rh(this._table,r*this._tableRange+this._minPos,!0)}}const HI="label";function DE(n,e){typeof n=="function"?n(e):n&&(n.current=e)}function _F(n,e){const t=n.options;t&&e&&Object.assign(t,e)}function WI(n,e){n.labels=e}function qI(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:HI;const r=[];n.datasets=e.map(i=>{const o=n.datasets.find(l=>l[t]===i[t]);return!o||!i.data||r.includes(o)?{...i}:(r.push(o),Object.assign(o,i),o)})}function vF(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:HI;const t={labels:[],datasets:[]};return WI(t,n.labels),qI(t,n.datasets,e),t}function wF(n,e){const{height:t=150,width:r=300,redraw:i=!1,datasetIdKey:o,type:l,data:c,options:h,plugins:p=[],fallbackContent:g,updateMode:v,...w}=n,T=Ee.useRef(null),R=Ee.useRef(null),P=()=>{T.current&&(R.current=new Qa(T.current,{type:l,data:vF(c,o),options:h&&{...h},plugins:p}),DE(e,R.current))},A=()=>{DE(e,null),R.current&&(R.current.destroy(),R.current=null)};return Ee.useEffect(()=>{!i&&R.current&&h&&_F(R.current,h)},[i,h]),Ee.useEffect(()=>{!i&&R.current&&WI(R.current.config.data,c.labels)},[i,c.labels]),Ee.useEffect(()=>{!i&&R.current&&c.datasets&&qI(R.current.config.data,c.datasets,o)},[i,c.datasets]),Ee.useEffect(()=>{R.current&&(i?(A(),setTimeout(P)):R.current.update(v))},[i,h,c.labels,c.datasets,v]),Ee.useEffect(()=>{R.current&&(A(),setTimeout(P))},[l]),Ee.useEffect(()=>(P(),()=>A()),[]),KE.createElement("canvas",{ref:T,role:"img",height:t,width:r,...w},g)}const EF=Ee.forwardRef(wF);function KI(n,e){return Qa.register(e),Ee.forwardRef((t,r)=>KE.createElement(EF,{...t,ref:r,type:n}))}const xF=KI("bar",bV),GI=KI("pie",kV);Qa.register(G4,hF,pF,hy,cy,uy);const TF=()=>{const n=ci.filter(i=>i.type==="income").reduce((i,o)=>i+o.amount,0),e=ci.filter(i=>i.type==="expense").reduce((i,o)=>i+o.amount,0),t={labels:["Income","Expenses"],datasets:[{label:"Total Amount ($)",data:[n,e],backgroundColor:["#4ade80","#f87171"],borderRadius:8}]},r={responsive:!0,plugins:{title:{display:!0,text:"Income vs Expense Overview",font:{size:18}},legend:{display:!1}}};return I.jsxs("div",{className:"bg-white shadow rounded-2xl p-5 flex flex-col md:flex-row gap-6 border border-[--color-appPurpleLight]",children:[I.jsx("div",{className:"max-w-md mx-auto p-3 bg-white rounded-2xl shadow",children:I.jsx(xF,{data:t,options:r})}),I.jsxs("div",{className:"flex-1",children:[I.jsx("h3",{className:"text-lg font-semibold text-[--color-appPurple] mb-3",children:"Context"}),I.jsxs("ul",{className:"flex flex-col gap-3",children:[I.jsxs("li",{className:"flex justify-between text-gray-600",children:[I.jsx("span",{children:"Income"}),I.jsxs("span",{children:["$",n]})]}),I.jsxs("li",{className:"flex justify-between text-gray-600",children:[I.jsx("span",{children:"Expense"}),I.jsxs("span",{children:["$",Number(e.toFixed(2))]})]}),I.jsxs("li",{className:"flex justify-between text-gray-600",children:[I.jsx("span",{children:"Net Balance"}),I.jsxs("span",{children:["$",n-e]})]})]})]})]})};Qa.register(jI,hy,cy,uy);const bF=()=>{const e=ci.filter(c=>c.type==="expense").reduce((c,h)=>(c[h.category]=(c[h.category]||0)+h.amount,c),{}),t=Object.keys(e),r=Object.values(e),i={labels:t,datasets:[{label:"Expenses by Category ($)",data:r,backgroundColor:["#42224a","#8c6b96","#6b7280","#22c55e","#ef4444","#eab308","#3b82f6","#9ca3af"],borderColor:"#fff",borderWidth:2}]},o={responsive:!0,plugins:{title:{display:!0,text:"Expense Breakdown by Category",font:{size:18},color:"#42224a"},legend:{position:"right",labels:{color:"#42224a",font:{size:14}}}}},l=r.reduce((c,h)=>c+h,0);return I.jsxs("div",{className:"bg-white shadow rounded-2xl p-5 flex flex-col md:flex-row gap-6 border border-[--color-appPurpleLight]",children:[I.jsx("div",{className:"max-w-md mx-auto p-3 bg-white rounded-2xl shadow",children:I.jsx(GI,{data:i,options:o})}),I.jsxs("div",{className:"flex-1",children:[I.jsx("h3",{className:"text-lg font-semibold text-[--color-appPurple] mb-3",children:"Context"}),I.jsxs("ul",{className:"flex flex-col gap-3",children:[t.map((c,h)=>I.jsxs("li",{className:"flex justify-between text-gray-700",children:[I.jsx("span",{children:c}),I.jsxs("span",{children:["$",r[h].toFixed(2)]})]},c)),I.jsxs("li",{className:"flex justify-between text-[--color-appPurple] font-semibold border-t border-gray-300 pt-2",children:[I.jsx("span",{children:"Total"}),I.jsxs("span",{children:["$",l.toFixed(2)]})]})]})]})]})};Qa.register(jI,hy,cy,uy);const IF=()=>{const e=ci.filter(c=>c.type==="income").reduce((c,h)=>(c[h.category]=(c[h.category]||0)+h.amount,c),{}),t=Object.keys(e),r=Object.values(e),i={labels:t,datasets:[{label:"Income by Source ($)",data:r,backgroundColor:["#42224a","#8c6b96","#6b7280","#22c55e","#3b82f6","#eab308","#9ca3af","#ef4444"],borderColor:"#fff",borderWidth:2}]},o={responsive:!0,plugins:{title:{display:!0,text:"Income Breakdown by Source",font:{size:18},color:"#42224a"},legend:{position:"right",labels:{color:"#42224a",font:{size:14}}}}},l=r.reduce((c,h)=>c+h,0);return I.jsxs("div",{className:"bg-white shadow rounded-2xl p-5 flex flex-col md:flex-row gap-6 border border-[--color-appPurpleLight]",children:[I.jsx("div",{className:"max-w-md mx-auto p-3 bg-white rounded-2xl shadow",children:I.jsx(GI,{data:i,options:o})}),I.jsxs("div",{className:"flex-1",children:[I.jsx("h3",{className:"text-lg font-semibold text-[--color-appPurple] mb-3",children:"Context"}),I.jsxs("ul",{className:"flex flex-col gap-3",children:[t.map((c,h)=>I.jsxs("li",{className:"flex justify-between text-gray-700",children:[I.jsx("span",{children:c}),I.jsxs("span",{children:["$",r[h].toFixed(2)]})]},c)),I.jsxs("li",{className:"flex justify-between text-[--color-appPurple] font-semibold border-t border-gray-300 pt-2",children:[I.jsx("span",{children:"Total"}),I.jsxs("span",{children:["$",l.toFixed(2)]})]})]})]})]})},SF=()=>{const{uploadNewExpense:n}=Lg(),{userData:e}=Wm(),{tab:t,setTab:r}=Lg(),[i,o]=Ee.useState("Today"),l=k=>new Date(k).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"});function c(k){const O=new Date;return k.filter(C=>{const ge=new Date(C.date);return ge.getDate()===O.getDate()&&ge.getMonth()===O.getMonth()&&ge.getFullYear()===O.getFullYear()})}function h(k){const O=new Date,C=new Date(O);C.setDate(O.getDate()-O.getDay()),C.setHours(0,0,0,0);const ge=new Date(C);return ge.setDate(C.getDate()+7),k.filter(we=>{const Ae=new Date(we.date);return Ae>=C&&Ae<ge})}function p(k){const O=new Date;return k.filter(C=>{const ge=new Date(C.date);return ge.getMonth()===O.getMonth()&&ge.getFullYear()===O.getFullYear()})}const g=c(ci),v=h(ci),w=p(ci),[T,R]=Ee.useState(""),[P,A]=Ee.useState([]);Ee.useEffect(()=>{if(T.trim()===""){A([]);return}const k=ci.filter(O=>[O.title,O.description,O.category].some(C=>C.toLowerCase().includes(T.toLowerCase())));A(k)},[T]);const[F,z]=Ee.useState("exp"),H=Ee.useRef(),K=Ee.useRef(),[Q,Y]=Ee.useState({date:"",category:"",description:"",amount:null,image1:null,image2:null});Ee.useEffect(()=>{console.log("Updating transaction info",Q)},[Q]);const D=Ee.useRef(null),b=Ee.useRef(null),[N,L]=Ee.useState({date:"",category:"",description:"",amount:"",image1:null,image2:null});return Ee.useEffect(()=>{console.log("Updating Income info",N)},[N]),I.jsxs("div",{className:"flex flex-col justify-between border-4 border-green-600",children:[t==="home"?I.jsxs("div",{className:"grow p-2 pb-20",children:[I.jsxs("div",{className:"h-50 w-full  bg-appPurple border-4 rounded-xl bg my-4 text-white p-3",children:[I.jsxs("div",{className:"flex justify-between",children:[I.jsxs("div",{children:[I.jsxs("p",{children:["Hello, ",I.jsx("b",{children:"Philips"})]}),I.jsxs("h1",{className:"text-4xl font-bold",children:["$",e.balance.toLocaleString()]})]}),I.jsx("h2",{className:"text-center",children:"October, 2025"})]}),I.jsxs("div",{className:"w-full p-4 flex justify-between align-baseline",children:[I.jsxs("div",{className:"text-center",children:[I.jsx("span",{className:"text-amber-500",children:"Exp"}),I.jsx("p",{children:"25000"})]}),I.jsxs("div",{className:"text-center",children:[I.jsx("span",{className:"text-amber-500",children:"Exp"}),I.jsx("p",{children:"25000"})]}),I.jsxs("div",{className:"text-center",children:[I.jsx("span",{className:"text-amber-500",children:"Exp"}),I.jsx("p",{children:"25000"})]})]})]}),I.jsxs("div",{children:[I.jsxs("div",{className:"w-full flex justify-between align-middle gap-3 sticky top-0 left-0 right-0 py-4 bg-white",children:[I.jsx("button",{onClick:()=>o("Today"),className:`${i=="Today"?"bg-appPurpleLight":"bg-gray-200"} flex-1 p-2 py-3 rounded-3xl`,children:"Today"}),I.jsx("button",{onClick:()=>o("Weekly"),className:`${i=="Weekly"?"bg-appPurpleLight":"bg-gray-200"} flex-1 p-2 py-3 rounded-3xl`,children:"Weekly"}),I.jsx("button",{onClick:()=>o("Monthly"),className:`${i=="Monthly"?"bg-appPurpleLight":"bg-gray-200"} flex-1 p-2 py-3 rounded-3xl`,children:"Monthly"})]}),I.jsx("h1",{children:i}),I.jsx("div",{className:"overflow-y-scroll",children:i=="Today"?I.jsx(I.Fragment,{children:g.map((k,O)=>I.jsx(I.Fragment,{children:I.jsxs("div",{className:"one-trans flex justify-between align-middle py-3.5",children:[I.jsxs("div",{className:"flex align-middle justify-start gap-2.5 min-w-0",children:[I.jsx("div",{className:"min-w-14 min-h-14 bg-appPurpleLight  rounded-full flex justify-center align-middle",children:I.jsx("button",{children:I.jsx("i",{class:`${k.icon} text-appPurple text-2xl`})})}),I.jsxs("div",{className:"min-w-0",children:[I.jsx("p",{className:"text-xl font-semibold",children:k.title}),I.jsx("p",{className:"text-gray-500 truncate",children:k.description})]})]}),I.jsx("div",{className:"flex align-middle",children:I.jsxs("span",{className:"text-xl flex align-middle",children:[k.type==="income"?"+":"","$",k.amount]})})]},O)}))}):i=="Weekly"?I.jsx(I.Fragment,{children:v.map((k,O)=>I.jsx(I.Fragment,{children:I.jsxs("div",{className:"one-trans flex justify-between align-middle py-3.5",children:[I.jsxs("div",{className:"flex align-middle justify-start gap-2.5 min-w-0",children:[I.jsx("div",{className:"min-w-14 min-h-14 bg-appPurpleLight  rounded-full flex justify-center align-middle",children:I.jsx("button",{children:I.jsx("i",{class:`${k.icon} text-appPurple text-2xl`})})}),I.jsxs("div",{className:"min-w-0",children:[I.jsx("p",{className:"text-xl font-semibold",children:k.title}),I.jsx("p",{className:"text-gray-500 truncate",children:k.description})]})]}),I.jsx("div",{className:"flex align-middle",children:I.jsxs("span",{className:"text-xl flex align-middle",children:[k.type==="income"?"+":"","$",k.amount]})})]},O)}))}):i=="Monthly"?I.jsx(I.Fragment,{children:w.map((k,O)=>I.jsx(I.Fragment,{children:I.jsxs("div",{className:"one-trans flex justify-between align-middle py-3.5",children:[I.jsxs("div",{className:"flex align-middle justify-start gap-2.5 min-w-0",children:[I.jsx("div",{className:"min-w-14 min-h-14 bg-appPurpleLight  rounded-full flex justify-center align-middle",children:I.jsx("button",{children:I.jsx("i",{class:`${k.icon} text-appPurple text-2xl`})})}),I.jsxs("div",{className:"min-w-0",children:[I.jsx("p",{className:"text-xl font-semibold",children:k.title}),I.jsx("p",{className:"text-gray-500 truncate",children:k.description})]})]}),I.jsx("div",{className:"flex align-middle",children:I.jsxs("span",{className:"text-xl flex align-middle",children:[k.type==="income"?"+":"","$",k.amount]})})]},O)}))}):""})]})]}):t=="receipts"?I.jsxs("div",{className:"grow p-2 pb-20",children:[I.jsxs("div",{className:"flex w-full justify-between bg-white align-middle py-2 sticky top-0 left-0 right-0",children:[I.jsx("button",{children:I.jsx("i",{className:"bxr bx-arrow-left-stroke text-3xl"})}),I.jsx("h3",{className:"text-appPurple text-center text-xl font-bold",children:"Receipts"}),I.jsx("button",{children:I.jsx("i",{className:"bxr  bx-cog text-3xl"})})]}),I.jsxs("div",{className:"w-full flex align-middle justify-between my-5 bg-gray-200 rounded-3xl h-10 px-4",children:[I.jsx("input",{placeholder:"Search by title, description, or category...",value:T,onChange:k=>R(k.target.value),className:"w-[80%] outline-0",type:"text"}),I.jsx("button",{className:"",children:I.jsx("i",{className:"bxr  bx-search text-2xl"})})]}),I.jsx("div",{className:"border-2 border-green-500",children:P.length>0?P.map((k,O)=>I.jsxs("div",{className:"one-receipt flex justify-between my-2",children:[I.jsxs("div",{className:"flex justify-start align-middle gap-2 min-w-0",children:[I.jsx("div",{className:"min-h-20 min-w-20 border-2 border-blue-600"}),I.jsxs("div",{className:"min-w-0",children:[I.jsx("p",{className:"text-lg font-semibold text-gray-600",children:k.title}),I.jsx("p",{className:"text-appPurple font-bold",children:l(k.date)}),I.jsx("p",{className:"text-gray-500 truncate",children:k.description})]})]}),I.jsx("div",{children:I.jsx("button",{})})]},O)):ci.map((k,O)=>I.jsxs("div",{className:"one-receipt flex justify-between my-2",children:[I.jsxs("div",{className:"flex justify-start align-middle gap-2 min-w-0",children:[I.jsx("div",{className:"min-h-20 min-w-20 border-2 border-blue-600"}),I.jsxs("div",{className:"min-w-0",children:[I.jsx("p",{className:"text-lg font-semibold text-gray-600",children:k.title}),I.jsx("p",{className:"text-appPurple font-bold",children:l(k.date)}),I.jsx("p",{className:"text-gray-500 truncate",children:k.description})]})]}),I.jsx("div",{children:I.jsx("button",{})})]},O))})]}):t=="new-shii"?I.jsxs("div",{className:"grow p-2 pb-20",children:[I.jsxs("div",{className:"flex w-full justify-between bg-white align-middle py-2 sticky top-0 left-0 right-0",children:[I.jsx("button",{children:I.jsx("i",{className:"bxr bx-arrow-left-stroke text-3xl"})}),I.jsxs("h3",{className:"text-appPurple text-center text-xl font-bold",children:["New ",`${F=="exp"?"Expense":"Income"}`]}),I.jsx("button",{children:I.jsx("i",{className:"bxr  bx-cog text-3xl"})})]}),I.jsxs("div",{className:"my-5 w-5/6 mx-auto flex justify-between align-middle h-10 rounded-3xl bg-gray-300",children:[I.jsx("button",{onClick:()=>z("exp"),className:`${F=="exp"?"bg-appPurple text-white":""} flex-1 font-bold rounded-tl-3xl rounded-bl-3xl`,children:"Expense"}),I.jsx("button",{onClick:()=>z("inc"),className:`${F=="inc"?"bg-appPurple text-white":""} flex-1 font-bold rounded-br-3xl rounded-tr-3xl`,children:"Income"})]}),I.jsx("div",{className:"border-2 border-green-500",children:F=="exp"?I.jsxs("form",{children:[I.jsx("input",{onChange:k=>{const O=k.target.value,C=new Date(O).toISOString();Y(ge=>({...ge,date:C}))},className:"p-2 px-4 w-full bg-gray-300 rounded-3xl mb-4 placeholder:text-appPurple font-bold",type:"date"}),I.jsxs("select",{onChange:k=>{const O=k.target.value;Y(C=>({...C,category:O}))},className:"p-2 px-4 w-full bg-gray-300 rounded-3xl mb-5 placeholder:text-appPurple font-bold",defaultValue:"",children:[I.jsx("option",{value:"",disabled:!0,children:"Select Category"}),I.jsx("option",{value:"groceries",children:"Groceries"}),I.jsx("option",{value:"bills",children:"Bills & Utilities"}),I.jsx("option",{value:"shopping",children:"Shopping"}),I.jsx("option",{value:"transport",children:"Transport"}),I.jsx("option",{value:"entertainment",children:"Entertainment"}),I.jsx("option",{value:"health",children:"Health & Fitness"}),I.jsx("option",{value:"education",children:"Education"}),I.jsx("option",{value:"subscriptions",children:"Subscriptions"}),I.jsx("option",{value:"others",children:"Others"})]}),I.jsx("input",{onChange:k=>{const O=k.target.value;Y(C=>({...C,description:O}))},className:"p-2 px-4 w-full bg-gray-300 rounded-3xl mb-5 placeholder:text-gray-500 font-semibold",placeholder:"Description (Optional)",type:"text"}),I.jsx("input",{onChange:k=>{const O=k.target.value;Y(C=>({...C,amount:Number.parseFloat(O)}))},className:"p-2 px-4 w-full bg-gray-300 rounded-3xl placeholder:text-gray-500 font-semibold",placeholder:"Amount",type:"text"}),I.jsx("p",{className:"my-3 font-bold text-gray-500",children:"Expense Receipt Images"}),I.jsxs("div",{className:"flex justify-between align-middle gap-3",children:[I.jsx("div",{className:"flex justify-center align-middle h-30 flex-1 border-2 border-appPurple",children:Q.image1?I.jsx("img",{className:"w-full object-center",src:URL.createObjectURL(Q.image1),alt:""}):I.jsxs(I.Fragment,{children:[I.jsx("button",{onClick:()=>H.current.click(),type:"button",children:I.jsx("i",{className:"bxr  bx-plus"})}),I.jsx("input",{onChange:k=>{Y(O=>({...O,image1:k.target.files[0]}))},ref:H,type:"file",accept:"image/*",className:"hidden"})]})}),I.jsx("div",{className:"flex justify-center align-middle h-30 flex-1 border-2 border-appPurple",children:Q.image2?I.jsx("img",{className:"w-full object-center",src:URL.createObjectURL(Q.image2),alt:""}):I.jsxs(I.Fragment,{children:[I.jsx("button",{onClick:()=>K.current.click(),type:"button",children:I.jsx("i",{className:"bxr  bx-plus"})}),I.jsx("input",{onChange:k=>{Y(O=>({...O,image2:k.target.files[0]}))},ref:K,type:"file",accept:"image/*",className:"hidden"})]})})]}),I.jsxs("div",{className:"flex justify-between align-middle gap-3 my-5",children:[I.jsx("button",{onClick:()=>r("home"),className:"text-lg font-semibold text-white bg-appPurple flex-1 p-1 rounded-3xl",children:"Cancel"}),I.jsx("button",{type:"button",onClick:()=>{n(Q)},className:"text-lg font-semibold text-white bg-appPurple flex-1 p-1 rounded-3xl",children:"Save"})]})]}):F=="inc"?I.jsxs("form",{children:[I.jsx("input",{onChange:k=>{const O=k.target.value,C=new Date(O).toISOString();L(ge=>({...ge,date:C}))},className:"p-2 px-4 w-full bg-gray-300 rounded-3xl mb-4 placeholder:text-appPurple font-bold",type:"date"}),I.jsxs("select",{onChange:k=>{const O=k.target.value;L(C=>({...C,category:O}))},className:"p-2 px-4 w-full bg-gray-300 rounded-3xl mb-5 placeholder:text-appPurple font-bold",defaultValue:"",children:[I.jsx("option",{value:"",disabled:!0,children:"Select Income Source"}),I.jsx("option",{value:"salary",children:"Salary"}),I.jsx("option",{value:"freelance",children:"Freelance / Side Jobs"}),I.jsx("option",{value:"business",children:"Business"}),I.jsx("option",{value:"investment",children:"Investment"}),I.jsx("option",{value:"gift",children:"Gifts & Donations"}),I.jsx("option",{value:"rental",children:"Rental Income"}),I.jsx("option",{value:"refund",children:"Refunds / Reimbursements"}),I.jsx("option",{value:"allowance",children:"Allowance / Stipend"}),I.jsx("option",{value:"others",children:"Others"})]}),I.jsx("input",{onChange:k=>{const O=k.target.value;L(C=>({...C,description:O}))},className:"p-2 px-4 w-full bg-gray-300 rounded-3xl mb-5 placeholder:text-gray-500 font-semibold",placeholder:"Description (Optional)",type:"text"}),I.jsx("input",{onChange:k=>{const O=k.target.value;L(C=>({...C,amount:Number.parseFloat(O)}))},className:"p-2 px-4 w-full bg-gray-300 rounded-3xl placeholder:text-gray-500 font-semibold",placeholder:"Amount",type:"text"}),I.jsx("p",{className:"my-3 font-bold text-gray-500",children:"Income Proof Images"}),I.jsxs("div",{className:"flex justify-between align-middle gap-3",children:[I.jsx("div",{className:"flex justify-center align-middle h-30 flex-1 border-2 border-appPurple",children:N.image1?I.jsx("img",{className:"w-full object-center",src:URL.createObjectURL(N.image1),alt:""}):I.jsxs(I.Fragment,{children:[I.jsx("button",{onClick:()=>D.current.click(),type:"button",children:I.jsx("i",{className:"bxr bx-plus"})}),I.jsx("input",{onChange:k=>{L(O=>({...O,image1:k.target.files[0]}))},ref:D,type:"file",accept:"image/*",className:"hidden"})]})}),I.jsx("div",{className:"flex justify-center align-middle h-30 flex-1 border-2 border-appPurple",children:N.image2?I.jsx("img",{className:"w-full object-center",src:URL.createObjectURL(N.image2),alt:""}):I.jsxs(I.Fragment,{children:[I.jsx("button",{onClick:()=>b.current.click(),type:"button",children:I.jsx("i",{className:"bxr bx-plus"})}),I.jsx("input",{onChange:k=>{L(O=>({...O,image2:k.target.files[0]}))},ref:b,type:"file",accept:"image/*",className:"hidden"})]})})]}),I.jsxs("div",{className:"flex justify-between align-middle gap-3 my-5",children:[I.jsx("button",{className:"text-lg font-semibold text-white bg-appPurple flex-1 p-1 rounded-3xl",children:"Cancel"}),I.jsx("button",{className:"text-lg font-semibold text-white bg-appPurple flex-1 p-1 rounded-3xl",children:"Save"})]})]}):""})]}):t=="charts"?I.jsxs("div",{className:"w-full p-2 flex flex-col gap-6",children:[I.jsxs("div",{className:"flex w-full justify-between bg-white align-middle py-2 sticky top-0 left-0 right-0",children:[I.jsx("button",{children:I.jsx("i",{className:"bxr bx-arrow-left-stroke text-3xl"})}),I.jsx("h3",{className:"text-appPurple text-center text-xl font-bold",children:"Charts"}),I.jsx("button",{children:I.jsx("i",{className:"bxr  bx-cog text-3xl"})})]}),I.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[I.jsxs("div",{className:"bg-white shadow rounded-2xl p-4 text-center border border-[--color-appPurpleLight]",children:[I.jsx("p",{className:"text-gray-500 text-sm",children:"Total Income"}),I.jsx("h2",{className:"text-2xl font-bold text-green-600",children:"$2,350"})]}),I.jsxs("div",{className:"bg-white shadow rounded-2xl p-4 text-center border border-[--color-appPurpleLight]",children:[I.jsx("p",{className:"text-gray-500 text-sm",children:"Total Expense"}),I.jsx("h2",{className:"text-2xl font-bold text-red-500",children:"$1,820"})]}),I.jsxs("div",{className:"bg-white shadow rounded-2xl p-4 text-center border border-[--color-appPurpleLight]",children:[I.jsx("p",{className:"text-gray-500 text-sm",children:"Balance"}),I.jsx("h2",{className:"text-2xl font-bold text-[--color-appPurple]",children:"$530"})]}),I.jsxs("div",{className:"bg-white shadow rounded-2xl p-4 text-center border border-[--color-appPurpleLight]",children:[I.jsx("p",{className:"text-gray-500 text-sm",children:"Transactions"}),I.jsx("h2",{className:"text-2xl font-bold text-[--color-appPurple]",children:"28"})]})]}),I.jsx(TF,{}),I.jsx(bF,{}),I.jsx(IF,{}),I.jsxs("div",{className:"bg-[--color-appPurple] text-white p-5 rounded-2xl shadow",children:[I.jsx("h3",{className:"text-lg font-semibold mb-1",children:"Insights"}),I.jsxs("p",{className:"text-sm text-[--color-appPurpleLight]",children:["You spent ",I.jsx("span",{className:"font-semibold text-white",children:"25% more"})," this week than last week. Try reducing transport and food expenses."]})]})]}):"",I.jsx(SM,{page:t})]})},OE=({size:n="md",className:e=""})=>{const t={sm:{dot:"w-3 h-3",text:"text-lg"},md:{dot:"w-4 h-4",text:"text-2xl"},lg:{dot:"w-5 h-5",text:"text-3xl"}},r=t[n]||t.md;return I.jsxs("div",{className:`flex items-center w-fit gap-3 ${e}`,"aria-label":"PhinTrackr logo",children:[I.jsx("span",{className:`${r.dot} rounded-full bg-orange-500 inline-block shrink-0`,"aria-hidden":"true"}),I.jsx("span",{className:`${r.text} font-semibold text-appPurple) tracking-tight`,children:"PhinTrackr"})]})},kF=()=>{const[n,e]=Ee.useState("signup"),{login:t,signUp:r}=Wm(),[i,o]=Ee.useState({name:"",email:"",password:""}),[l,c]=Ee.useState({email:"",password:""}),h=async g=>{g.preventDefault();try{const v=await r(i.name,i.email,i.password);console.log("Response from sign up",v)}catch(v){console.log("Error Signing up",v)}},p=async g=>{g.preventDefault();try{const v=await t(i.email,i.password);console.log("Response from sign in",v)}catch(v){console.log("Error Signing in",v)}};return I.jsx(I.Fragment,{children:n==="signup"?I.jsxs("div",{children:[I.jsx("div",{className:"min-h-[70vh] flex items-center justify-center bg-white",children:I.jsxs("div",{className:"w-full max-w-md bg-gray-50 rounded-2xl shadow-md p-8",children:[I.jsx("h2",{className:"text-2xl font-semibold text-center mb-6 text-appPurple",children:"Create Account"}),I.jsxs("form",{onSubmit:h,className:"space-y-5",children:[I.jsxs("div",{children:[I.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Full Name"}),I.jsx("input",{type:"text",value:i.name,onChange:g=>o({...i,name:g.target.value}),placeholder:"John Doe",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-appPurpleLight",required:!0})]}),I.jsxs("div",{children:[I.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Email"}),I.jsx("input",{type:"email",value:i.email,onChange:g=>o({...i,email:g.target.value}),placeholder:"johndoe@email.com",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-appPurpleLight",required:!0})]}),I.jsxs("div",{children:[I.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Password"}),I.jsx("input",{type:"password",value:i.password,onChange:g=>o({...i,password:g.target.value}),placeholder:"",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-appPurpleLight",required:!0})]}),I.jsx("button",{type:"submit",className:"w-full py-2 bg-appPurple text-white font-semibold rounded-lg hover:bg-appPurpleLight hover:text-appPurple transition-all duration-300",children:"Sign Up"})]}),I.jsxs("p",{className:"text-center text-sm text-gray-500 mt-5",children:["Already have an account?"," ",I.jsx("a",{onClick:()=>e("login"),className:"text-appPurple hover:underline cursor-pointer",children:"Log In"})]})]})}),I.jsx("div",{className:"text-center w-full flex align-middle justify-center mb-1",children:I.jsx(OE,{})}),I.jsx("p",{className:"text-center",children:"a mini app by Philips Edun"})]}):I.jsxs("div",{children:[I.jsx("div",{className:"min-h-[70vh] flex items-center justify-center bg-white",children:I.jsxs("div",{className:"w-full max-w-md bg-gray-50 rounded-2xl shadow-md p-8",children:[I.jsx("h2",{className:"text-2xl font-semibold text-center mb-6 text-appPurple",children:"Log In"}),I.jsxs("form",{onSubmit:p,className:"space-y-5",children:[I.jsxs("div",{children:[I.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Email"}),I.jsx("input",{type:"email",value:l.email,onChange:g=>c({...l,email:g.target.value}),placeholder:"johndoe@email.com",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-appPurpleLight",required:!0})]}),I.jsxs("div",{children:[I.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Password"}),I.jsx("input",{type:"password",value:l.password,onChange:g=>c({...l,password:g.target.value}),placeholder:"",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-appPurpleLight",required:!0})]}),I.jsx("button",{type:"submit",className:"w-full py-2 bg-appPurple text-white font-semibold rounded-lg hover:bg-appPurpleLight hover:text-appPurple transition-all duration-300",children:"Log In"})]}),I.jsxs("p",{className:"text-center text-sm text-gray-500 mt-5",children:["Don't have an account?"," ",I.jsx("a",{onClick:()=>e("signup"),className:"text-appPurple hover:underline cursor-pointer",children:"Sign Up"})]})]})}),I.jsx("div",{className:"text-center w-full flex align-middle justify-center mb-1",children:I.jsx(OE,{})}),I.jsx("p",{className:"text-center",children:"a mini app by Philips Edun"})]})})};function AF(){const{user:n}=Wm();return Ee.useEffect(()=>{console.log("This is the user gotten from the AuthContext",n),console.log("Current user UID",n.uid)},[]),I.jsx("div",{className:"w-screen border-green-800",children:n?I.jsx(SF,{}):I.jsx(kF,{})})}var ig={exports:{}},sg={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ME;function RF(){if(ME)return sg;ME=1;var n=kd();function e(h,p){return h===p&&(h!==0||1/h===1/p)||h!==h&&p!==p}var t=typeof Object.is=="function"?Object.is:e,r=n.useSyncExternalStore,i=n.useRef,o=n.useEffect,l=n.useMemo,c=n.useDebugValue;return sg.useSyncExternalStoreWithSelector=function(h,p,g,v,w){var T=i(null);if(T.current===null){var R={hasValue:!1,value:null};T.current=R}else R=T.current;T=l(function(){function A(Q){if(!F){if(F=!0,z=Q,Q=v(Q),w!==void 0&&R.hasValue){var Y=R.value;if(w(Y,Q))return H=Y}return H=Q}if(Y=H,t(z,Q))return Y;var D=v(Q);return w!==void 0&&w(Y,D)?(z=Q,Y):(z=Q,H=D)}var F=!1,z,H,K=g===void 0?null:g;return[function(){return A(p())},K===null?void 0:function(){return A(K())}]},[p,g,v,w]);var P=r(h,T[0],T[1]);return o(function(){R.hasValue=!0,R.value=P},[P]),c(P),P},sg}var LE;function CF(){return LE||(LE=1,ig.exports=RF()),ig.exports}CF();function PF(n){n()}function NF(){let n=null,e=null;return{clear(){n=null,e=null},notify(){PF(()=>{let t=n;for(;t;)t.callback(),t=t.next})},get(){const t=[];let r=n;for(;r;)t.push(r),r=r.next;return t},subscribe(t){let r=!0;const i=e={callback:t,next:null,prev:e};return i.prev?i.prev.next=i:n=i,function(){!r||n===null||(r=!1,i.next?i.next.prev=i.prev:e=i.prev,i.prev?i.prev.next=i.next:n=i.next)}}}}var VE={notify(){},get:()=>[]};function DF(n,e){let t,r=VE,i=0,o=!1;function l(P){g();const A=r.subscribe(P);let F=!1;return()=>{F||(F=!0,A(),v())}}function c(){r.notify()}function h(){R.onStateChange&&R.onStateChange()}function p(){return o}function g(){i++,t||(t=n.subscribe(h),r=NF())}function v(){i--,t&&i===0&&(t(),t=void 0,r.clear(),r=VE)}function w(){o||(o=!0,g())}function T(){o&&(o=!1,v())}const R={addNestedSub:l,notifyNestedSubs:c,handleChangeWrapper:h,isSubscribed:p,trySubscribe:w,tryUnsubscribe:T,getListeners:()=>r};return R}var OF=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",MF=OF(),LF=()=>typeof navigator<"u"&&navigator.product==="ReactNative",VF=LF(),FF=()=>MF||VF?Ee.useLayoutEffect:Ee.useEffect,jF=FF(),UF=Symbol.for("react-redux-context"),zF=typeof globalThis<"u"?globalThis:{};function BF(){if(!Ee.createContext)return{};const n=zF[UF]??=new Map;let e=n.get(Ee.createContext);return e||(e=Ee.createContext(null),n.set(Ee.createContext,e)),e}var $F=BF();function HF(n){const{children:e,context:t,serverState:r,store:i}=n,o=Ee.useMemo(()=>{const h=DF(i);return{store:i,subscription:h,getServerState:r?()=>r:void 0}},[i,r]),l=Ee.useMemo(()=>i.getState(),[i]);jF(()=>{const{subscription:h}=o;return h.onStateChange=h.notifyNestedSubs,h.trySubscribe(),l!==i.getState()&&h.notifyNestedSubs(),()=>{h.tryUnsubscribe(),h.onStateChange=void 0}},[o,l]);const c=t||$F;return Ee.createElement(c.Provider,{value:o},e)}var WF=HF;function zt(n){return`Minified Redux error #${n}; visit https://redux.js.org/Errors?code=${n} for the full message or use the non-minified dev environment for full errors. `}var qF=typeof Symbol=="function"&&Symbol.observable||"@@observable",FE=qF,og=()=>Math.random().toString(36).substring(7).split("").join("."),KF={INIT:`@@redux/INIT${og()}`,REPLACE:`@@redux/REPLACE${og()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${og()}`},xd=KF;function dy(n){if(typeof n!="object"||n===null)return!1;let e=n;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(n)===e||Object.getPrototypeOf(n)===null}function QI(n,e,t){if(typeof n!="function")throw new Error(zt(2));if(typeof e=="function"&&typeof t=="function"||typeof t=="function"&&typeof arguments[3]=="function")throw new Error(zt(0));if(typeof e=="function"&&typeof t>"u"&&(t=e,e=void 0),typeof t<"u"){if(typeof t!="function")throw new Error(zt(1));return t(QI)(n,e)}let r=n,i=e,o=new Map,l=o,c=0,h=!1;function p(){l===o&&(l=new Map,o.forEach((A,F)=>{l.set(F,A)}))}function g(){if(h)throw new Error(zt(3));return i}function v(A){if(typeof A!="function")throw new Error(zt(4));if(h)throw new Error(zt(5));let F=!0;p();const z=c++;return l.set(z,A),function(){if(F){if(h)throw new Error(zt(6));F=!1,p(),l.delete(z),o=null}}}function w(A){if(!dy(A))throw new Error(zt(7));if(typeof A.type>"u")throw new Error(zt(8));if(typeof A.type!="string")throw new Error(zt(17));if(h)throw new Error(zt(9));try{h=!0,i=r(i,A)}finally{h=!1}return(o=l).forEach(z=>{z()}),A}function T(A){if(typeof A!="function")throw new Error(zt(10));r=A,w({type:xd.REPLACE})}function R(){const A=v;return{subscribe(F){if(typeof F!="object"||F===null)throw new Error(zt(11));function z(){const K=F;K.next&&K.next(g())}return z(),{unsubscribe:A(z)}},[FE](){return this}}}return w({type:xd.INIT}),{dispatch:w,subscribe:v,getState:g,replaceReducer:T,[FE]:R}}function GF(n){Object.keys(n).forEach(e=>{const t=n[e];if(typeof t(void 0,{type:xd.INIT})>"u")throw new Error(zt(12));if(typeof t(void 0,{type:xd.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(zt(13))})}function QF(n){const e=Object.keys(n),t={};for(let o=0;o<e.length;o++){const l=e[o];typeof n[l]=="function"&&(t[l]=n[l])}const r=Object.keys(t);let i;try{GF(t)}catch(o){i=o}return function(l={},c){if(i)throw i;let h=!1;const p={};for(let g=0;g<r.length;g++){const v=r[g],w=t[v],T=l[v],R=w(T,c);if(typeof R>"u")throw c&&c.type,new Error(zt(14));p[v]=R,h=h||R!==T}return h=h||r.length!==Object.keys(l).length,h?p:l}}function Td(...n){return n.length===0?e=>e:n.length===1?n[0]:n.reduce((e,t)=>(...r)=>e(t(...r)))}function YF(...n){return e=>(t,r)=>{const i=e(t,r);let o=()=>{throw new Error(zt(15))};const l={getState:i.getState,dispatch:(h,...p)=>o(h,...p)},c=n.map(h=>h(l));return o=Td(...c)(i.dispatch),{...i,dispatch:o}}}function XF(n){return dy(n)&&"type"in n&&typeof n.type=="string"}var YI=Symbol.for("immer-nothing"),jE=Symbol.for("immer-draftable"),Cn=Symbol.for("immer-state");function ir(n,...e){throw new Error(`[Immer] minified error nr: ${n}. Full error at: https://bit.ly/3cXEKWf`)}var za=Object.getPrototypeOf;function _o(n){return!!n&&!!n[Cn]}function wi(n){return n?XI(n)||Array.isArray(n)||!!n[jE]||!!n.constructor?.[jE]||qc(n)||Jd(n):!1}var JF=Object.prototype.constructor.toString();function XI(n){if(!n||typeof n!="object")return!1;const e=za(n);if(e===null)return!0;const t=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return t===Object?!0:typeof t=="function"&&Function.toString.call(t)===JF}function bd(n,e){Xd(n)===0?Reflect.ownKeys(n).forEach(t=>{e(t,n[t],n)}):n.forEach((t,r)=>e(r,t,n))}function Xd(n){const e=n[Cn];return e?e.type_:Array.isArray(n)?1:qc(n)?2:Jd(n)?3:0}function Bg(n,e){return Xd(n)===2?n.has(e):Object.prototype.hasOwnProperty.call(n,e)}function JI(n,e,t){const r=Xd(n);r===2?n.set(e,t):r===3?n.add(t):n[e]=t}function ZF(n,e){return n===e?n!==0||1/n===1/e:n!==n&&e!==e}function qc(n){return n instanceof Map}function Jd(n){return n instanceof Set}function Zs(n){return n.copy_||n.base_}function $g(n,e){if(qc(n))return new Map(n);if(Jd(n))return new Set(n);if(Array.isArray(n))return Array.prototype.slice.call(n);const t=XI(n);if(e===!0||e==="class_only"&&!t){const r=Object.getOwnPropertyDescriptors(n);delete r[Cn];let i=Reflect.ownKeys(r);for(let o=0;o<i.length;o++){const l=i[o],c=r[l];c.writable===!1&&(c.writable=!0,c.configurable=!0),(c.get||c.set)&&(r[l]={configurable:!0,writable:!0,enumerable:c.enumerable,value:n[l]})}return Object.create(za(n),r)}else{const r=za(n);if(r!==null&&t)return{...n};const i=Object.create(r);return Object.assign(i,n)}}function fy(n,e=!1){return Zd(n)||_o(n)||!wi(n)||(Xd(n)>1&&Object.defineProperties(n,{set:{value:Ch},add:{value:Ch},clear:{value:Ch},delete:{value:Ch}}),Object.freeze(n),e&&Object.values(n).forEach(t=>fy(t,!0))),n}function Ch(){ir(2)}function Zd(n){return Object.isFrozen(n)}var ej={};function vo(n){const e=ej[n];return e||ir(0,n),e}var Nc;function ZI(){return Nc}function tj(n,e){return{drafts_:[],parent_:n,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function UE(n,e){e&&(vo("Patches"),n.patches_=[],n.inversePatches_=[],n.patchListener_=e)}function Hg(n){Wg(n),n.drafts_.forEach(nj),n.drafts_=null}function Wg(n){n===Nc&&(Nc=n.parent_)}function zE(n){return Nc=tj(Nc,n)}function nj(n){const e=n[Cn];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function BE(n,e){e.unfinalizedDrafts_=e.drafts_.length;const t=e.drafts_[0];return n!==void 0&&n!==t?(t[Cn].modified_&&(Hg(e),ir(4)),wi(n)&&(n=Id(e,n),e.parent_||Sd(e,n)),e.patches_&&vo("Patches").generateReplacementPatches_(t[Cn].base_,n,e.patches_,e.inversePatches_)):n=Id(e,t,[]),Hg(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),n!==YI?n:void 0}function Id(n,e,t){if(Zd(e))return e;const r=e[Cn];if(!r)return bd(e,(i,o)=>$E(n,r,e,i,o,t)),e;if(r.scope_!==n)return e;if(!r.modified_)return Sd(n,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let o=i,l=!1;r.type_===3&&(o=new Set(i),i.clear(),l=!0),bd(o,(c,h)=>$E(n,r,i,c,h,t,l)),Sd(n,i,!1),t&&n.patches_&&vo("Patches").generatePatches_(r,t,n.patches_,n.inversePatches_)}return r.copy_}function $E(n,e,t,r,i,o,l){if(_o(i)){const c=o&&e&&e.type_!==3&&!Bg(e.assigned_,r)?o.concat(r):void 0,h=Id(n,i,c);if(JI(t,r,h),_o(h))n.canAutoFreeze_=!1;else return}else l&&t.add(i);if(wi(i)&&!Zd(i)){if(!n.immer_.autoFreeze_&&n.unfinalizedDrafts_<1)return;Id(n,i),(!e||!e.scope_.parent_)&&typeof r!="symbol"&&(qc(t)?t.has(r):Object.prototype.propertyIsEnumerable.call(t,r))&&Sd(n,i)}}function Sd(n,e,t=!1){!n.parent_&&n.immer_.autoFreeze_&&n.canAutoFreeze_&&fy(e,t)}function rj(n,e){const t=Array.isArray(n),r={type_:t?1:0,scope_:e?e.scope_:ZI(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:n,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,o=py;t&&(i=[r],o=Dc);const{revoke:l,proxy:c}=Proxy.revocable(i,o);return r.draft_=c,r.revoke_=l,c}var py={get(n,e){if(e===Cn)return n;const t=Zs(n);if(!Bg(t,e))return ij(n,t,e);const r=t[e];return n.finalized_||!wi(r)?r:r===ag(n.base_,e)?(lg(n),n.copy_[e]=Kg(r,n)):r},has(n,e){return e in Zs(n)},ownKeys(n){return Reflect.ownKeys(Zs(n))},set(n,e,t){const r=eS(Zs(n),e);if(r?.set)return r.set.call(n.draft_,t),!0;if(!n.modified_){const i=ag(Zs(n),e),o=i?.[Cn];if(o&&o.base_===t)return n.copy_[e]=t,n.assigned_[e]=!1,!0;if(ZF(t,i)&&(t!==void 0||Bg(n.base_,e)))return!0;lg(n),qg(n)}return n.copy_[e]===t&&(t!==void 0||e in n.copy_)||Number.isNaN(t)&&Number.isNaN(n.copy_[e])||(n.copy_[e]=t,n.assigned_[e]=!0),!0},deleteProperty(n,e){return ag(n.base_,e)!==void 0||e in n.base_?(n.assigned_[e]=!1,lg(n),qg(n)):delete n.assigned_[e],n.copy_&&delete n.copy_[e],!0},getOwnPropertyDescriptor(n,e){const t=Zs(n),r=Reflect.getOwnPropertyDescriptor(t,e);return r&&{writable:!0,configurable:n.type_!==1||e!=="length",enumerable:r.enumerable,value:t[e]}},defineProperty(){ir(11)},getPrototypeOf(n){return za(n.base_)},setPrototypeOf(){ir(12)}},Dc={};bd(py,(n,e)=>{Dc[n]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});Dc.deleteProperty=function(n,e){return Dc.set.call(this,n,e,void 0)};Dc.set=function(n,e,t){return py.set.call(this,n[0],e,t,n[0])};function ag(n,e){const t=n[Cn];return(t?Zs(t):n)[e]}function ij(n,e,t){const r=eS(e,t);return r?"value"in r?r.value:r.get?.call(n.draft_):void 0}function eS(n,e){if(!(e in n))return;let t=za(n);for(;t;){const r=Object.getOwnPropertyDescriptor(t,e);if(r)return r;t=za(t)}}function qg(n){n.modified_||(n.modified_=!0,n.parent_&&qg(n.parent_))}function lg(n){n.copy_||(n.copy_=$g(n.base_,n.scope_.immer_.useStrictShallowCopy_))}var sj=class{constructor(n){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,t,r)=>{if(typeof e=="function"&&typeof t!="function"){const o=t;t=e;const l=this;return function(h=o,...p){return l.produce(h,g=>t.call(this,g,...p))}}typeof t!="function"&&ir(6),r!==void 0&&typeof r!="function"&&ir(7);let i;if(wi(e)){const o=zE(this),l=Kg(e,void 0);let c=!0;try{i=t(l),c=!1}finally{c?Hg(o):Wg(o)}return UE(o,r),BE(i,o)}else if(!e||typeof e!="object"){if(i=t(e),i===void 0&&(i=e),i===YI&&(i=void 0),this.autoFreeze_&&fy(i,!0),r){const o=[],l=[];vo("Patches").generateReplacementPatches_(e,i,o,l),r(o,l)}return i}else ir(1,e)},this.produceWithPatches=(e,t)=>{if(typeof e=="function")return(l,...c)=>this.produceWithPatches(l,h=>e(h,...c));let r,i;return[this.produce(e,t,(l,c)=>{r=l,i=c}),r,i]},typeof n?.autoFreeze=="boolean"&&this.setAutoFreeze(n.autoFreeze),typeof n?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(n.useStrictShallowCopy)}createDraft(n){wi(n)||ir(8),_o(n)&&(n=oj(n));const e=zE(this),t=Kg(n,void 0);return t[Cn].isManual_=!0,Wg(e),t}finishDraft(n,e){const t=n&&n[Cn];(!t||!t.isManual_)&&ir(9);const{scope_:r}=t;return UE(r,e),BE(void 0,r)}setAutoFreeze(n){this.autoFreeze_=n}setUseStrictShallowCopy(n){this.useStrictShallowCopy_=n}applyPatches(n,e){let t;for(t=e.length-1;t>=0;t--){const i=e[t];if(i.path.length===0&&i.op==="replace"){n=i.value;break}}t>-1&&(e=e.slice(t+1));const r=vo("Patches").applyPatches_;return _o(n)?r(n,e):this.produce(n,i=>r(i,e))}};function Kg(n,e){const t=qc(n)?vo("MapSet").proxyMap_(n,e):Jd(n)?vo("MapSet").proxySet_(n,e):rj(n,e);return(e?e.scope_:ZI()).drafts_.push(t),t}function oj(n){return _o(n)||ir(10,n),tS(n)}function tS(n){if(!wi(n)||Zd(n))return n;const e=n[Cn];let t;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,t=$g(n,e.scope_.immer_.useStrictShallowCopy_)}else t=$g(n,!0);return bd(t,(r,i)=>{JI(t,r,tS(i))}),e&&(e.finalized_=!1),t}var aj=new sj,nS=aj.produce;function rS(n){return({dispatch:t,getState:r})=>i=>o=>typeof o=="function"?o(t,r,n):i(o)}var lj=rS(),cj=rS,uj=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Td:Td.apply(null,arguments)};function HE(n,e){function t(...r){if(e){let i=e(...r);if(!i)throw new Error(gi(0));return{type:n,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:n,payload:r[0]}}return t.toString=()=>`${n}`,t.type=n,t.match=r=>XF(r)&&r.type===n,t}var iS=class oc extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,oc.prototype)}static get[Symbol.species](){return oc}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new oc(...e[0].concat(this)):new oc(...e.concat(this))}};function WE(n){return wi(n)?nS(n,()=>{}):n}function Ph(n,e,t){return n.has(e)?n.get(e):n.set(e,t(e)).get(e)}function hj(n){return typeof n=="boolean"}var dj=()=>function(e){const{thunk:t=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:o=!0}=e??{};let l=new iS;return t&&(hj(t)?l.push(lj):l.push(cj(t.extraArgument))),l},fj="RTK_autoBatch",qE=n=>e=>{setTimeout(e,n)},pj=(n={type:"raf"})=>e=>(...t)=>{const r=e(...t);let i=!0,o=!1,l=!1;const c=new Set,h=n.type==="tick"?queueMicrotask:n.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:qE(10):n.type==="callback"?n.queueNotification:qE(n.timeout),p=()=>{l=!1,o&&(o=!1,c.forEach(g=>g()))};return Object.assign({},r,{subscribe(g){const v=()=>i&&g(),w=r.subscribe(v);return c.add(g),()=>{w(),c.delete(g)}},dispatch(g){try{return i=!g?.meta?.[fj],o=!i,o&&(l||(l=!0,h(p))),r.dispatch(g)}finally{i=!0}}})},gj=n=>function(t){const{autoBatch:r=!0}=t??{};let i=new iS(n);return r&&i.push(pj(typeof r=="object"?r:void 0)),i};function mj(n){const e=dj(),{reducer:t=void 0,middleware:r,devTools:i=!0,preloadedState:o=void 0,enhancers:l=void 0}=n||{};let c;if(typeof t=="function")c=t;else if(dy(t))c=QF(t);else throw new Error(gi(1));let h;typeof r=="function"?h=r(e):h=e();let p=Td;i&&(p=uj({trace:!1,...typeof i=="object"&&i}));const g=YF(...h),v=gj(g);let w=typeof l=="function"?l(v):v();const T=p(...w);return QI(c,o,T)}function sS(n){const e={},t=[];let r;const i={addCase(o,l){const c=typeof o=="string"?o:o.type;if(!c)throw new Error(gi(28));if(c in e)throw new Error(gi(29));return e[c]=l,i},addAsyncThunk(o,l){return l.pending&&(e[o.pending.type]=l.pending),l.rejected&&(e[o.rejected.type]=l.rejected),l.fulfilled&&(e[o.fulfilled.type]=l.fulfilled),l.settled&&t.push({matcher:o.settled,reducer:l.settled}),i},addMatcher(o,l){return t.push({matcher:o,reducer:l}),i},addDefaultCase(o){return r=o,i}};return n(i),[e,t,r]}function yj(n){return typeof n=="function"}function _j(n,e){let[t,r,i]=sS(e),o;if(yj(n))o=()=>WE(n());else{const c=WE(n);o=()=>c}function l(c=o(),h){let p=[t[h.type],...r.filter(({matcher:g})=>g(h)).map(({reducer:g})=>g)];return p.filter(g=>!!g).length===0&&(p=[i]),p.reduce((g,v)=>{if(v)if(_o(g)){const T=v(g,h);return T===void 0?g:T}else{if(wi(g))return nS(g,w=>v(w,h));{const w=v(g,h);if(w===void 0){if(g===null)return g;throw Error("A case reducer on a non-draftable value must not return undefined")}return w}}return g},c)}return l.getInitialState=o,l}var vj=Symbol.for("rtk-slice-createasyncthunk");function wj(n,e){return`${n}/${e}`}function Ej({creators:n}={}){const e=n?.asyncThunk?.[vj];return function(r){const{name:i,reducerPath:o=i}=r;if(!i)throw new Error(gi(11));const l=(typeof r.reducers=="function"?r.reducers(bj()):r.reducers)||{},c=Object.keys(l),h={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},p={addCase(H,K){const Q=typeof H=="string"?H:H.type;if(!Q)throw new Error(gi(12));if(Q in h.sliceCaseReducersByType)throw new Error(gi(13));return h.sliceCaseReducersByType[Q]=K,p},addMatcher(H,K){return h.sliceMatchers.push({matcher:H,reducer:K}),p},exposeAction(H,K){return h.actionCreators[H]=K,p},exposeCaseReducer(H,K){return h.sliceCaseReducersByName[H]=K,p}};c.forEach(H=>{const K=l[H],Q={reducerName:H,type:wj(i,H),createNotation:typeof r.reducers=="function"};Sj(K)?Aj(Q,K,p,e):Ij(Q,K,p)});function g(){const[H={},K=[],Q=void 0]=typeof r.extraReducers=="function"?sS(r.extraReducers):[r.extraReducers],Y={...H,...h.sliceCaseReducersByType};return _j(r.initialState,D=>{for(let b in Y)D.addCase(b,Y[b]);for(let b of h.sliceMatchers)D.addMatcher(b.matcher,b.reducer);for(let b of K)D.addMatcher(b.matcher,b.reducer);Q&&D.addDefaultCase(Q)})}const v=H=>H,w=new Map,T=new WeakMap;let R;function P(H,K){return R||(R=g()),R(H,K)}function A(){return R||(R=g()),R.getInitialState()}function F(H,K=!1){function Q(D){let b=D[H];return typeof b>"u"&&K&&(b=Ph(T,Q,A)),b}function Y(D=v){const b=Ph(w,K,()=>new WeakMap);return Ph(b,D,()=>{const N={};for(const[L,k]of Object.entries(r.selectors??{}))N[L]=xj(k,D,()=>Ph(T,D,A),K);return N})}return{reducerPath:H,getSelectors:Y,get selectors(){return Y(Q)},selectSlice:Q}}const z={name:i,reducer:P,actions:h.actionCreators,caseReducers:h.sliceCaseReducersByName,getInitialState:A,...F(o),injectInto(H,{reducerPath:K,...Q}={}){const Y=K??o;return H.inject({reducerPath:Y,reducer:P},Q),{...z,...F(Y,!0)}}};return z}}function xj(n,e,t,r){function i(o,...l){let c=e(o);return typeof c>"u"&&r&&(c=t()),n(c,...l)}return i.unwrapped=n,i}var Tj=Ej();function bj(){function n(e,t){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...t}}return n.withTypes=()=>n,{reducer(e){return Object.assign({[e.name](...t){return e(...t)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,t){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:t}},asyncThunk:n}}function Ij({type:n,reducerName:e,createNotation:t},r,i){let o,l;if("reducer"in r){if(t&&!kj(r))throw new Error(gi(17));o=r.reducer,l=r.prepare}else o=r;i.addCase(n,o).exposeCaseReducer(e,o).exposeAction(e,l?HE(n,l):HE(n))}function Sj(n){return n._reducerDefinitionType==="asyncThunk"}function kj(n){return n._reducerDefinitionType==="reducerWithPrepare"}function Aj({type:n,reducerName:e},t,r,i){if(!i)throw new Error(gi(18));const{payloadCreator:o,fulfilled:l,pending:c,rejected:h,settled:p,options:g}=t,v=i(n,o,g);r.exposeAction(e,v),l&&r.addCase(v.fulfilled,l),c&&r.addCase(v.pending,c),h&&r.addCase(v.rejected,h),p&&r.addMatcher(v.settled,p),r.exposeCaseReducer(e,{fulfilled:l||Nh,pending:c||Nh,rejected:h||Nh,settled:p||Nh})}function Nh(){}function gi(n){return`Minified Redux Toolkit error #${n}; visit https://redux-toolkit.js.org/Errors?code=${n} for the full message or use the non-minified dev environment for full errors. `}const Rj={transactions:[]},oS=Tj({name:"transactions",initialState:Rj,reducers:{addTransaction:(n,e)=>{n.transactions.push(e.payload)},deleteTransaction:(n,e)=>{n.transactions=n.transactions.filter(t=>t.id!==e.payload)}}}),{addTransaction:Lj,deleteTransaction:Vj}=oS.actions,Cj=oS.reducer,Pj=mj({reducer:{transactions:Cj}});x1.createRoot(document.getElementById("root")).render(I.jsx(I.Fragment,{children:I.jsx(WF,{store:Pj,children:I.jsx(IM,{children:I.jsx(kM,{children:I.jsx(AF,{})})})})}));
